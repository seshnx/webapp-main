{"version":3,"mappings":";icAUA,MAAMA,GAAU,CACd,QAASC,EACX,EAEMC,GAAYC,GAAiB,CACjC,OAAAC,GAEA,YAAAC,GACA,OAAAC,GACA,QAAAN,EACF,CAAC,EAED,SAAwBO,GAAgB,CAAE,OAAAC,EAAQ,aAAAC,EAAc,cAAAC,GAAiB,CAI/E,MAAMC,EAAiBC,UAAQ,IACpBJ,EAAO,IAAIK,IAAY,CAC1B,GAAIA,EAAQ,GACZ,MAAOA,EAAQ,YAAc,UAC7B,MAAOA,EAAQ,KAAO,IAAI,KAAKA,EAAQ,IAAI,EAAI,IAAI,KACnD,IAAKA,EAAQ,KAAO,IAAI,KAAK,IAAI,KAAKA,EAAQ,IAAI,EAAE,UAAaA,EAAQ,SAAW,GAAK,GAAK,GAAK,MAAQ,KAC3G,SAAUA,CAAA,EACZ,EACH,CAACL,CAAM,CAAC,EAEX,OACEM,MAAC,OAAI,UAAU,uFACb,SAAAA,MAACC,GAAA,CACC,UAAAb,GACA,OAAQS,EACR,cAAc,QACd,YAAY,MACZ,MAAO,CAAE,OAAQ,QACjB,WAAU,GACV,aAAAF,EACA,cAAAC,EACA,MAAO,CAAC,QAAS,OAAQ,KAAK,EAC9B,YAAY,OAEZ,gBAAkBM,IAAW,CACzB,UAAW,2DACf,GAEJ,CAEJ,CCjDA,MAAMC,EAAgB,CAClB,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMF,CAAA,EACzC,CAAE,GAAI,YAAa,MAAO,UAAW,KAAMG,CAAA,EAC3C,CAAE,GAAI,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC3C,CAAE,GAAI,cAAe,MAAO,UAAW,KAAMC,EAAA,EAC7C,CAAE,GAAI,YAAa,MAAO,OAAQ,KAAMC,CAAA,CAC5C,EAEA,SAAwBC,GAAoB,CAAE,QAAAT,EAAS,KAAAU,EAAM,QAAAC,GAAW,OACpE,KAAM,CAACC,EAAQC,CAAS,EAAIC,WAASd,EAAQ,MAAM,EAC7C,CAACe,EAASC,CAAU,EAAIF,WAAS,EAAK,EAEtCG,EAAaP,EAAK,MAAQV,EAAQ,SAClCkB,EAAWR,EAAK,MAAQV,EAAQ,SAQhCmB,GALuBC,GAAkB,CAC3C,MAAMC,EAAMjB,EAAc,UAAUkB,GAAKA,EAAE,KAAOF,CAAa,EAC/D,OAAOC,IAAQ,GAAK,EAAIA,CAC5B,GAE6CT,CAAM,EAE7CW,EAAe,MAAOC,GAAc,CAwB1C,EAGMC,EAAmBN,GAAoBf,EAAc,OAAS,GAAM,IAE1E,aACK,OAAI,UAAU,4GACX,SAAAsB,OAAC,OAAI,UAAU,4IAGX,UAAAA,OAAC,OAAI,UAAU,mGACX,UAAAA,OAAC,OACG,UAAAA,OAAC,MAAG,UAAU,iEAAiE,6BAC3DA,OAAC,QAAK,UAAU,6GAA6G,cAAE1B,EAAQ,GAAG,MAAM,EAAE,EAAE,aAAY,EAAE,GACtL,EACA0B,OAAC,KAAE,UAAU,wBAAwB,kBAAMR,EAAWlB,EAAQ,WAAaA,EAAQ,YAAW,GAClG,EACAC,MAAC,UAAO,QAASU,EAAS,UAAU,8EAA8E,SAAAV,MAAC0B,GAAA,CAAE,KAAM,GAAG,EAAE,GACpI,EAEAD,OAAC,OAAI,UAAU,gCAGX,UAAAA,OAAC,OAAI,UAAU,0BAEX,UAAAzB,MAAC,OAAI,UAAU,qFAAqF,EAGpGA,MAAC,OACG,UAAU,uGACV,MAAO,CAAE,MAAO,GAAGwB,CAAe,IAAI,GAG1CxB,MAAC,OAAI,UAAU,uBACV,WAAc,IAAI,CAAC2B,EAAMP,IAAQ,CAC9B,MAAMQ,EAAcR,GAAOF,EACrBW,EAAYT,IAAQF,EAE1B,OACIO,OAAC,OAAkB,UAAU,mCACzB,UAAAzB,MAAC,OACG,UAAW;AAAA;AAAA,kDAEL4B,EAAc,8DAAgE,+EAA+E;AAAA,kDAC7JC,EAAY,iEAAmE,EAAE;AAAA,8CAGvF,SAAA7B,MAAC2B,EAAK,KAAL,CAAU,KAAME,EAAY,GAAK,GAAI,KAAMD,EAAc,eAAiB,OAAQ,IAEvF5B,MAAC,QAAK,UAAW,gEAAgE4B,EAAc,kBAAoB,eAAe,GAC7H,SAAAD,EAAK,MACV,IAZMA,EAAK,EAaf,CAER,CAAC,EACL,GACJ,EAGCX,GAAcL,IAAW,aACtBc,OAAC,OAAI,UAAU,8IACX,UAAAA,OAAC,OACG,UAAAzB,MAAC,MAAG,UAAU,qDAAqD,iCAAqB,EACxFA,MAAC,KAAE,UAAU,2CAA2C,qCAAyB,GACrF,EACAyB,OAAC,OAAI,UAAU,aACV,UAAAd,IAAW,WACRX,MAAC,UAAO,QAAS,IAAMsB,EAAwB,EAAG,UAAU,yGAAyG,4BAAgB,EAExLX,IAAW,aACRc,OAAC,UAAO,QAAS,IAAMH,EAAuB,EAAG,UAAU,+HAA+H,UAAAtB,MAACK,EAAA,CAAI,KAAM,GAAG,EAAE,iBAAa,EAE1NM,IAAW,YACRc,OAAC,UAAO,QAAS,IAAMH,EAA0B,EAAG,UAAU,mIAAmI,UAAAtB,MAAC8B,GAAA,CAAK,KAAM,GAAG,EAAE,kBAAc,EAEnOnB,IAAW,eACRc,OAAC,UAAO,QAAS,IAAMH,EAAwB,EAAG,UAAU,4JAA4J,UAAAtB,MAACO,EAAA,CAAY,KAAM,GAAG,EAAE,qBAAiB,GAEzQ,GACJ,EAIJkB,OAAC,OAAI,UAAU,wCACX,UAAAA,OAAC,OAAI,UAAU,YACX,UAAAzB,MAAC,MAAG,UAAU,+EAA+E,qBAAS,EACtGyB,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC,OAAI,UAAU,8CAA8C,SAAAA,MAACC,GAAS,KAAM,GAAI,UAAU,kBAAiB,EAAE,SAC7G,OAAI,UAAAD,MAAC,OAAI,UAAU,4CAA4C,gBAAI,EAAMA,MAAC,OAAI,UAAU,8BAA+B,WAAQ,KAAK,GAAM,GAC/I,EACAyB,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC,OAAI,UAAU,8CAA8C,SAAAA,MAAC+B,GAAM,KAAM,GAAI,UAAU,kBAAiB,EAAE,SAC1G,OAAI,UAAA/B,MAAC,OAAI,UAAU,4CAA4C,gBAAI,EAAMyB,OAAC,OAAI,UAAU,8BAA+B,UAAA1B,EAAQ,KAAK,KAAGA,EAAQ,SAAS,SAAK,GAAM,GACxK,EACA0B,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC,OAAI,UAAU,8CAA8C,SAAAA,MAACgC,IAAO,KAAM,GAAI,UAAU,kBAAiB,EAAE,SAC3G,OAAI,UAAAhC,MAAC,OAAI,UAAU,4CAA4C,oBAAQ,QAAO,OAAI,UAAU,8BAA+B,WAAAiC,EAAAlC,EAAQ,QAAR,YAAAkC,EAAe,OAAQ,eAAe,GAAM,GAC5K,GACJ,EAEAR,OAAC,OAAI,UAAU,YACX,UAAAzB,MAAC,MAAG,UAAU,+EAA+E,sBAAU,EACvGyB,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC,OAAI,UAAU,8CAA8C,SAAAA,MAACI,GAAW,KAAM,GAAI,UAAU,iBAAgB,EAAE,SAC9G,OAAI,UAAAJ,MAAC,OAAI,UAAU,4CAA4C,uBAAW,EAAMyB,OAAC,OAAI,UAAU,8CAA8C,cAAE1B,EAAQ,aAAY,GAAM,GAC9K,EACA0B,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC,OAAI,UAAU,8CAA8C,SAAAA,MAACkC,IAAS,KAAM,GAAI,UAAU,gBAAe,EAAE,SAC3G,OAAI,UAAAlC,MAAC,OAAI,UAAU,4CAA4C,qBAAS,EAAMA,MAAC,OAAI,UAAU,mEAAmE,yBAAa,GAAM,GACxL,GACJ,GACJ,EAGCD,EAAQ,SACL0B,OAAC,OAAI,UAAU,yEACX,UAAAzB,MAAC,MAAG,UAAU,iDAAiD,iBAAK,EACpEyB,OAAC,KAAE,UAAU,kDAAkD,cAAE1B,EAAQ,QAAQ,KAAC,GACtF,GAGR,GACJ,EACJ,CAER,CC1KA,MAAMoC,GAAeC,OAAK,IAAAC,EAAA,IAAM,OAAO,4BAAgB,qCAAC,EAClDC,GAAsBF,OAAK,IAAAC,EAAA,IAAM,OAAO,mCAAuB,6BAAC,EAChEE,GAAgBH,OAAK,IAAAC,EAAA,IAAM,OAAO,6BAAiB,2CAAC,EACpDG,GAAmBJ,OAAK,IAAAC,EAAA,IAAM,OAAO,gCAAoB,+CAAC,EAC1DI,GAAgBL,OAAK,IAAAC,EAAA,IAAM,OAAO,6BAAiB,mCAAC,EAE1D,SAAwBK,GAAc,CAAE,KAAAjC,EAAM,SAAAkC,EAAU,YAAAC,EAAa,kBAAAC,GAAqB,OACtF,MAAMC,EAAWC,GAAA,EACXC,EAAWC,GAAA,EAGXC,EAAkBC,GAAS,CAC7B,MAAMC,EAAQD,EAAK,MAAM,GAAG,EAAE,OAAO,OAAO,EAC5C,OAAIC,EAAM,CAAC,IAAM,YAAcA,EAAM,CAAC,EAC3BA,EAAM,CAAC,EAEX,aACX,EAEM,CAACC,EAAWC,CAAY,EAAIzC,WAAS,IAAMqC,EAAeJ,EAAS,QAAQ,CAAC,EAC5E,CAACS,EAAUC,CAAW,EAAI3C,WAAS,EAAE,EACrC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC4C,EAAiBC,CAAkB,EAAI7C,WAAS,IAAI,EACrD,CAAC8C,EAAcC,CAAe,EAAI/C,WAAS,KAAK,EAChD,CAACgD,EAAYC,CAAa,EAAIjD,WAAS,KAAK,EAC5C,CAACkD,GAAoBC,CAAqB,EAAInD,WAAS,EAAK,EAC5D,CAACoD,GAAaC,CAAc,EAAIrD,WAAS,EAAE,EAC3C,CAACsD,GAAeC,EAAgB,EAAIvD,WAAS,IAAI,EACjD,CAACwD,GAAmBC,CAAoB,EAAIzD,WAAS,EAAK,EAC1D,CAAC0D,EAAsBC,CAAuB,EAAI3D,WAAS,EAAK,EAChE,CAAC4D,EAAcC,CAAe,EAAI7D,WAAS,EAAK,EAChD8D,EAAcC,SAAO,IAAI,EAEzBC,GAAkB5C,EAAAU,GAAA,YAAAA,EAAU,eAAV,YAAAV,EAAwB,SAAS,UAGzD6C,YAAU,IAAM,CACZ,MAAMC,EAAa7B,EAAeJ,EAAS,QAAQ,EAC/CiC,IAAe1B,GACfC,EAAayB,CAAU,CAE/B,EAAG,CAACjC,EAAS,QAAQ,CAAC,EAGtB,MAAMkC,EAAmBC,GAAU,CAC/B3B,EAAa2B,CAAK,EAClBjC,EAAS,aAAaiC,CAAK,GAAI,CAAE,QAAS,GAAM,CACpD,EAGAH,YAAU,IAAM,CACZ,MAAMI,EAAsBhF,GAAU,CAC9ByE,EAAY,SAAW,CAACA,EAAY,QAAQ,SAASzE,EAAM,MAAM,GACjEwE,EAAgB,EAAK,CAE7B,EACA,gBAAS,iBAAiB,YAAaQ,CAAkB,EAClD,IAAM,SAAS,oBAAoB,YAAaA,CAAkB,CAC7E,EAAG,EAAE,EAGL,MAAMC,GAAc,CAChB,CAAE,GAAI,cAAe,MAAO,cAAe,KAAMlF,CAAA,EACjD,CAAE,GAAI,WAAY,MAAO,WAAY,KAAMA,CAAA,CAAS,EAIlDmF,EAAgB,CAClB,CAAE,GAAI,cAAe,MAAO,cAAe,KAAMC,EAAA,EACjD,CAAE,GAAI,iBAAkB,MAAO,aAAc,KAAMC,EAAA,CAAI,EAI3DR,YAAU,IAAM,CACZ,GAAI,EAACrE,GAAA,MAAAA,EAAM,KAAM,EAACA,GAAA,MAAAA,EAAM,KAAK,OAE7B,MAAM8E,EAAe,SAAY,CAC7BxE,EAAW,EAAI,EACf,GAAI,CACA,MAAMyE,GAAS/E,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAG3B,CAAE,KAAMgF,EAAc,MAAOC,GAAc,MAAMC,EAClD,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,YAAaH,CAAM,EACtB,MAAM,OAAQ,CAAE,UAAW,GAAO,EAEjC,CAAE,KAAMI,EAAkB,MAAOC,GAAkB,MAAMF,EAC1D,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,YAAaH,CAAM,EACtB,MAAM,OAAQ,CAAE,UAAW,GAAO,EAEvC,GAAIE,EAAW,MAAMA,EACrB,GAAIG,EAAe,MAAMA,EAGzB,MAAMC,GAAc,CAAC,GAAIL,GAAgB,GAAK,GAAIG,GAAoB,EAAG,EACnEG,GAAiB,MAAM,KACzB,IAAI,IAAID,GAAY,IAAIE,GAAK,CAACA,EAAE,GAAIA,CAAC,CAAC,CAAC,EAAE,QAAO,EAGpDxC,EAAYuC,EAAc,CAC9B,OAASE,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,CAClD,SACIlF,EAAW,EAAK,CACpB,CACJ,EAEAwE,EAAA,EAGA,MAAMW,EAAeP,EAChB,QAAQ,kBAAkB,EAC1B,GAAG,mBACA,CAAE,MAAO,IAAK,OAAQ,SAAU,MAAO,YACvC,IAAM,CACFJ,EAAA,CACJ,GAEH,YAEL,MAAO,IAAM,CACTW,EAAa,aACjB,CACJ,EAAG,CAACzF,GAAA,YAAAA,EAAM,GAAIA,GAAA,YAAAA,EAAM,GAAG,CAAC,EAGxB,MAAM0F,EAAmB5C,EAAS,OAAOxD,GAAW,CAEhD,GAAI4D,IAAiB,QACbA,IAAiB,WAAa5D,EAAQ,SAAW,WACjD4D,IAAiB,aAAe5D,EAAQ,SAAW,aACnD4D,IAAiB,aAAe5D,EAAQ,SAAW,aACnD4D,IAAiB,aAAe5D,EAAQ,SAAW,aAAa,MAAO,GAI/E,GAAI8D,IAAe,MAAO,CACtB,MAAM2B,GAAS/E,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAEjC,GADIoD,IAAe,QAAU9D,EAAQ,YAAcyF,GAC/C3B,IAAe,YAAc9D,EAAQ,YAAcyF,EAAQ,MAAO,EAC1E,CAEA,MAAO,EACX,CAAC,EAGKY,EAAiBvB,EACjBtB,EAAS,OAAOyC,GAAK,CACnB,MAAMR,GAAS/E,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAEjC,OAAOuF,EAAE,YAAcR,GAAUQ,EAAE,YAAcR,CACrD,CAAC,EACC,GAEAa,GAAcC,GAAY,CAC5B,GAAI,CAACA,GAAWA,IAAY,WAAY,MAAO,WAC/C,GAAI,CAEA,OADa,IAAI,KAAKA,CAAO,EACjB,mBAAmB,QAAS,CACpC,QAAS,QACT,KAAM,UACN,MAAO,QACP,IAAK,UACR,CACL,MAAQ,CACJ,OAAOA,CACX,CACJ,EAEMC,GAAcC,GAAY,CAC5B,GAAI,CAACA,GAAWA,IAAY,WAAY,MAAO,WAC/C,GAAI,CACA,KAAM,CAACC,EAAOC,CAAO,EAAIF,EAAQ,MAAM,GAAG,EACpCG,EAAO,SAASF,CAAK,EACrBG,EAAOD,GAAQ,GAAK,KAAO,KAEjC,MAAO,GADaA,EAAO,IAAM,EACZ,IAAID,CAAO,IAAIE,CAAI,EAC5C,MAAQ,CACJ,OAAOJ,CACX,CACJ,EAEMK,GAAkBlG,GAAW,CAC/B,OAAQA,EAAA,CACJ,IAAK,UAAW,MAAO,2EACvB,IAAK,YAAa,MAAO,uEACzB,IAAK,YAAa,MAAO,mEACzB,IAAK,YAAa,MAAO,+DACzB,IAAK,WAAY,MAAO,mEACxB,QAAS,MAAO,mEAExB,EAEMmG,EAAsB,MAAOC,EAAWC,IAAW,CACrD,GAAI,CACA,KAAM,CAAE,MAAAf,GAAU,MAAMN,EACnB,KAAK,UAAU,EACf,OAAO,CACJ,OAAQqB,IAAW,SAAW,YAAcA,IAAW,UAAY,WAAa,QAAQ,OACxF,aAAc,IAAI,OAAO,cACzB,WAAY,IAAI,OAAO,aAAY,CACtC,EACA,GAAG,KAAMD,CAAS,EAEvB,GAAId,EAAO,MAAMA,CACrB,OAASA,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C,MAAM,0BAA0B,CACpC,CACJ,EAGMpG,GAAiBsG,EAAiB,IAAIpG,IAAY,CACpD,GAAIA,EAAQ,GACZ,MAAOA,EAAQ,aAAeA,EAAQ,aAAe,UACrD,MAAOA,EAAQ,MAAQA,EAAQ,OAAS,eAC9B,KAAK,GAAGA,EAAQ,IAAI,IAAIA,EAAQ,MAAQ,OAAO,EAAE,MACjD,KACV,IAAKA,EAAQ,MAAQA,EAAQ,OAAS,YAAcA,EAAQ,SACtD,IAAI,KAAK,IAAI,KAAK,GAAGA,EAAQ,IAAI,IAAIA,EAAQ,MAAQ,OAAO,EAAE,EAAE,UAAaA,EAAQ,SAAW,GAAK,GAAK,GAAK,MAC3G,KACV,SAAUA,CAAA,EACZ,EAEF,OAAIe,EAEId,MAAC,OAAI,UAAU,0CACX,SAAAA,MAACiH,GAAQ,UAAU,+BAA+B,KAAM,GAAI,EAChE,EAKJxF,OAAC,OAAI,UAAU,yCAEX,UAAAA,OAAC,OAAI,UAAU,oCACX,UAAAA,OAAC,OACG,UAAAzB,MAAC,MAAG,UAAU,qCAAqC,oBAAQ,EAC3DA,MAAC,KAAE,UAAU,gDAAgD,6CAE7D,GACJ,EACAyB,OAAC,UACG,QAAS,IAAM,CACX6C,EAAqB,EAAI,EACzBU,EAAgB,iBAAiB,CACrC,EACA,UAAU,4GAEV,UAAAhF,MAACkH,EAAA,CAAK,KAAM,GAAI,EAAE,gBAEtB,EACJ,EAGAzF,OAAC,OAAI,UAAU,qEAEV,UAAA0D,GAAY,IAAIgC,GAAO,CACpB,MAAMC,EAAUD,EAAI,KACpB,OACI1F,OAAC,UAEG,QAAS,IAAMuD,EAAgBmC,EAAI,EAAE,EACrC,UAAW,2EACP9D,IAAc8D,EAAI,GACZ,+CACA,+EACV,GAEA,UAAAnH,MAACoH,EAAA,CAAQ,KAAM,GAAI,EAClBD,EAAI,QATAA,EAAI,GAYrB,CAAC,EAGD1F,OAAC,OAAI,UAAU,mBAAmB,IAAKkD,EACnC,UAAAlD,OAAC,UACG,QAAS,IAAMiD,EAAgB,CAACD,CAAY,EAC5C,UAAW,2EACPW,EAAc,KAAK+B,GAAO9D,IAAc8D,EAAI,EAAE,EACxC,+CACA,+EACV,GAEA,UAAAnH,MAACqH,GAAA,CAAe,KAAM,GAAI,EAAE,OAE5BrH,MAACsH,IAAY,KAAM,GAAI,UAAW,wBAAwB7C,EAAe,aAAe,EAAE,GAAI,KAIjGA,GACGzE,MAAC,OAAI,UAAU,4IACV,SAAAoF,EAAc,IAAI+B,GAAO,CACtB,MAAMC,EAAUD,EAAI,KACpB,OACI1F,OAAC,UAEG,QAAS,IAAM,CACXuD,EAAgBmC,EAAI,EAAE,EACtBzC,EAAgB,EAAK,CACzB,EACA,UAAW,sEACPrB,IAAc8D,EAAI,GACZ,oEACA,0EACV,GAEA,UAAAnH,MAACoH,EAAA,CAAQ,KAAM,GAAI,EAClBD,EAAI,QAZAA,EAAI,GAerB,CAAC,EACL,GAER,GACJ,EAGCtC,GAAmBxB,IAAc,eAC9B5B,OAAC,OAAI,UAAU,oGACX,UAAAzB,MAAC,MAAG,UAAU,8DAA8D,2BAE5E,EACAyB,OAAC,OAAI,UAAU,wCACX,UAAAA,OAAC,OACG,UAAAA,OAAC,MAAG,UAAU,kEAAkE,wBAChE2E,EAAe,OAAOJ,GAAKA,EAAE,cAAevF,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAAI,EAAE,OAAO,KAC3F,EACAT,MAAC,KAAE,UAAU,+CAA+C,qDAE5D,GACJ,SACC,OACG,UAAAyB,OAAC,MAAG,UAAU,kEAAkE,wBAChE2E,EAAe,OAAOJ,GAAKA,EAAE,cAAevF,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAAI,EAAE,OAAO,KAC3F,EACAT,MAAC,KAAE,UAAU,+CAA+C,wDAE5D,GACJ,GACJ,GACJ,EAIHqD,IAAc,eACX5B,OAAC,OAAI,UAAU,yBAEX,UAAAA,OAAC,OAAI,UAAU,4BACX,UAAAA,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAACuH,GAAA,CAAO,KAAM,GAAI,UAAU,gBAAgB,EAC5C9F,OAAC,UACG,MAAOkC,EACP,SAAW6D,GAAM5D,EAAgB4D,EAAE,OAAO,KAAK,EAC/C,UAAU,uGAEV,UAAAxH,MAAC,UAAO,MAAM,MAAM,sBAAU,EAC9BA,MAAC,UAAO,MAAM,UAAU,mBAAO,EAC/BA,MAAC,UAAO,MAAM,YAAY,qBAAS,EACnCA,MAAC,UAAO,MAAM,YAAY,qBAAS,EACnCA,MAAC,UAAO,MAAM,YAAY,qBAAS,IACvC,EACJ,EACAyB,OAAC,UACG,MAAOoC,EACP,SAAW2D,GAAM1D,EAAc0D,EAAE,OAAO,KAAK,EAC7C,UAAU,uGAEV,UAAAxH,MAAC,UAAO,MAAM,MAAM,wBAAY,EAChCA,MAAC,UAAO,MAAM,OAAO,oBAAQ,EAC7BA,MAAC,UAAO,MAAM,WAAW,qBAAS,IACtC,EACJ,EAGCmG,EAAiB,SAAW,EACzB1E,OAAC,OAAI,UAAU,oBACX,UAAAzB,MAACC,EAAA,CAAS,UAAU,6BAA6B,KAAM,GAAI,EAC3DD,MAAC,KAAE,UAAU,mCAAmC,6BAAiB,GACrE,QAEC,OAAI,UAAU,YACV,SAAAmG,EAAiB,IAAIpG,GAAW,CAC7B,MAAMyF,GAAS/E,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,KAC3BgH,EAAW1H,EAAQ,YAAcyF,EACjCkC,EAAa3H,EAAQ,YAAcyF,EAEzC,OACIxF,MAAC,OAEG,UAAU,wIACV,QAAS,IAAM0D,EAAmB3D,CAAO,EAEzC,SAAA0B,OAAC,OAAI,UAAU,mCACX,UAAAA,OAAC,OAAI,UAAU,SACX,UAAAA,OAAC,OAAI,UAAU,+BACX,UAAAzB,MAAC2H,GAAA,CACG,IAAgB,KAChB,KAAMF,EAAW1H,EAAQ,YAAcA,EAAQ,YAC/C,KAAK,cAER,OACG,UAAAC,MAAC,MAAG,UAAU,gCACT,WAAWD,EAAQ,YAAcA,EAAQ,YAC9C,EACA0B,OAAC,KAAE,UAAU,2CACR,UAAAgG,EAAW,aAAe,aAAa,MAAI1H,EAAQ,cACxD,GACJ,GACJ,EAEA0B,OAAC,OAAI,UAAU,qEACX,UAAAA,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAACC,EAAA,CAAS,KAAM,GAAI,EACnBoG,GAAWtG,EAAQ,IAAI,GAC5B,EACA0B,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAAC+B,EAAA,CAAM,KAAM,GAAI,EAChBwE,GAAWxG,EAAQ,IAAI,EAAE,KAAGA,EAAQ,SAAS,MAClD,EACCA,EAAQ,cACL0B,OAAC,OAAI,UAAU,0BACX,UAAAzB,MAACI,EAAA,CAAW,KAAM,GAAI,EAAE,IACtBL,EAAQ,cACd,GAER,EAECA,EAAQ,SACLC,MAAC,KAAE,UAAU,6DACR,SAAAD,EAAQ,QACb,GAER,EAEA0B,OAAC,OAAI,UAAU,gCACX,UAAAzB,MAAC,QAAK,UAAW,8CAA8C6G,GAAe9G,EAAQ,MAAM,CAAC,GACxF,SAAAA,EAAQ,OACb,EAEC2H,GAAc3H,EAAQ,SAAW,WAC9B0B,OAAC,OAAI,UAAU,aACX,UAAAzB,MAAC,UACG,QAAUwH,GAAM,CACZA,EAAE,kBACFV,EAAoB/G,EAAQ,GAAI,QAAQ,CAC5C,EACA,UAAU,uEACb,oBAGDC,MAAC,UACG,QAAUwH,GAAM,CACZA,EAAE,kBACFV,EAAoB/G,EAAQ,GAAI,SAAS,CAC7C,EACA,UAAU,mEACb,oBAED,EACJ,GAER,GACJ,GA1EKA,EAAQ,GA6EzB,CAAC,EACL,GAER,EAIHsD,IAAc,YACXrD,MAAC,OAAI,UAAU,SACX,SAAAA,MAACP,GAAA,CACG,OAAQI,GACR,cAAgBK,GAAUwD,EAAmBxD,EAAM,QAAQ,EAC3D,aAAe0H,GAAa,CAExB,QAAQ,IAAI,oBAAqBA,CAAQ,CAC7C,IAER,EAIHvE,IAAc,eACXrD,MAAC,OAAI,UAAU,yBACX,SAAAA,MAAC6H,YAAS,SACN7H,MAAC,OAAI,UAAU,wCACX,eAACiH,EAAA,CAAQ,UAAU,+BAA+B,KAAM,GAAI,EAChE,EAEA,SAAAjH,MAACmC,GAAA,CACG,KAAA1B,EACA,SAAAkC,EACA,kBAAmBE,IAAsB,IAAM,CAAC,KAExD,EACJ,EAIHQ,IAAc,mBAAqBgB,IAChCrE,MAAC,OAAI,UAAU,yBACX,eAAC6H,WAAA,CAAS,eACL,OAAI,UAAU,wCACX,SAAA7H,MAACiH,EAAA,CAAQ,UAAU,+BAA+B,KAAM,GAAI,EAChE,EAEA,SAAAjH,MAACuC,GAAA,CACG,SAAAI,EACA,cAAAwB,GACA,iBAAAC,GACA,OAAQ,IAAM,CACVE,EAAqB,EAAK,EAC1BN,EAAsB,EAAI,CAC9B,IAER,EACJ,EAIHP,GACGzD,MAACQ,GAAA,CACG,QAAS,CACL,GAAGiD,EACH,SAAUA,EAAgB,UAC1B,SAAUA,EAAgB,UAC1B,WAAYA,EAAgB,YAC5B,WAAYA,EAAgB,aAEhC,KAAM,CACF,GAAGhD,EACH,KAAKA,GAAA,YAAAA,EAAM,MAAMA,GAAA,YAAAA,EAAM,MAE3B,QAAS,IAAMiD,EAAmB,IAAI,IAK7CL,IAAc,kBAAoB,CAACkB,GAChC9C,OAAC,OAAI,UAAU,yBACX,UAAAA,OAAC,OAAI,UAAU,yCACX,UAAAzB,MAAC,MAAG,UAAU,oCAAoC,6BAAiB,EACnEyB,OAAC,UACG,QAAS,IAAM+C,EAAwB,EAAI,EAC3C,UAAU,4GAEV,UAAAxE,MAACkH,EAAA,CAAK,KAAM,GAAI,EAAE,qBAEtB,EACJ,EACAlH,MAAC6H,WAAA,CAAS,SACN7H,MAAC,OAAI,UAAU,wCACX,SAAAA,MAACiH,EAAA,CAAQ,UAAU,+BAA+B,KAAM,GAAI,EAChE,EAEA,SAAAjH,MAACyC,GAAA,CACG,KAAAhC,EACA,SAAAkC,EACA,MAAQmF,GAAc,CAElB,QAAQ,IAAI,oBAAqBA,CAAS,CAC9C,GACJ,CACJ,GACJ,EAIHzE,IAAc,kBAAoBkB,GAC/BvE,MAAC,OAAI,UAAU,yBACX,eAAC6H,WAAA,CAAS,eACL,OAAI,UAAU,wCACX,SAAA7H,MAACiH,EAAA,CAAQ,UAAU,+BAA+B,KAAM,GAAI,EAChE,EAEA,SAAAjH,MAACwC,GAAA,CACG,KAAA/B,EACA,SAAAkC,EACA,OAAQ,IAAM,CACV6B,EAAwB,EAAK,CACjC,EACA,UAAW,IAAM,CACbA,EAAwB,EAAK,EAE7B,OAAO,SAAS,QACpB,IAER,EACJ,EAIHT,IACG/D,MAAC6H,WAAA,CAAS,SAAU,KAChB,SAAA7H,MAACsC,GAAA,CACG,KAAA7B,EACA,SAAAkC,EACA,KAAMsB,GACN,iBAAmB8D,GAAU,CACzB7D,EAAe8D,GAAQA,EAAK,OAAO,CAACC,EAAGC,IAAMA,IAAMH,CAAK,CAAC,CAC7D,EACA,QAAS,IAAM,CACX/D,EAAsB,EAAK,EAC3BgB,EAAgB,aAAa,CACjC,EACA,WAAY,IAAM,CACdhB,EAAsB,EAAK,EAC3BE,EAAe,EAAE,EACjBc,EAAgB,aAAa,EAE7B,OAAO,SAAS,QACpB,GACJ,CACJ,GAER,CAER","names":["locales","enUS","localizer","dateFnsLocalizer","format","startOfWeek","getDay","BookingCalendar","events","onSelectSlot","onSelectEvent","calendarEvents","useMemo","booking","jsx","Calendar","event","TRACKER_STEPS","DollarSign","Car","Mic2","CheckCircle","SessionDetailsModal","user","onClose","status","setStatus","useState","loading","setLoading","isProvider","isClient","currentStepIndex","currentStatus","idx","s","updateStatus","newStatus","progressPercent","jsxs","X","step","isCompleted","isCurrent","Play","Clock","MapPin","_a","FileText","TalentSearch","lazy","__vitePreload","SessionBuilderModal","SessionWizard","BroadcastRequest","BroadcastList","BookingSystem","userData","subProfiles","openPublicProfile","location","useLocation","navigate","useNavigate","getTabFromPath","path","parts","activeTab","setActiveTab","bookings","setBookings","selectedBooking","setSelectedBooking","filterStatus","setFilterStatus","filterType","setFilterType","showSessionBuilder","setShowSessionBuilder","sessionCart","setSessionCart","sessionParams","setSessionParams","showSessionWizard","setShowSessionWizard","showBroadcastRequest","setShowBroadcastRequest","showMoreMenu","setShowMoreMenu","moreMenuRef","useRef","isStudioManager","useEffect","tabFromUrl","handleTabChange","tabId","handleClickOutside","primaryTabs","secondaryTabs","Search","Zap","loadBookings","userId","sentBookings","sentError","supabase","receivedBookings","receivedError","allBookings","uniqueBookings","b","error","subscription","filteredBookings","studioBookings","formatDate","dateStr","formatTime","timeStr","hours","minutes","hour","ampm","getStatusColor","handleBookingAction","bookingId","action","Loader2","Plus","tab","TabIcon","MoreHorizontal","ChevronDown","Filter","e","isSender","isReceived","UserAvatar","slotInfo","Suspense","broadcast","index","prev","_","i"],"ignoreList":[],"sources":["../../src/components/shared/BookingCalendar.jsx","../../src/components/SessionDetailsModal.jsx","../../src/components/BookingSystem.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Calendar, dateFnsLocalizer } from 'react-big-calendar';\r\nimport format from 'date-fns/format';\r\nimport parse from 'date-fns/parse';\r\nimport startOfWeek from 'date-fns/startOfWeek';\r\nimport getDay from 'date-fns/getDay';\r\nimport enUS from 'date-fns/locale/en-US';\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'; // Standard styles\r\n\r\n// 1. Configure the localizer\r\nconst locales = {\r\n  'en-US': enUS,\r\n};\r\n\r\nconst localizer = dateFnsLocalizer({\r\n  format,\r\n  parse,\r\n  startOfWeek,\r\n  getDay,\r\n  locales,\r\n});\r\n\r\nexport default function BookingCalendar({ events, onSelectSlot, onSelectEvent }) {\r\n  \r\n  // 2. Transform your Firestore booking data into Calendar events\r\n  // Events must have { title, start, end }\r\n  const calendarEvents = useMemo(() => {\r\n      return events.map(booking => ({\r\n          id: booking.id,\r\n          title: booking.targetName || 'Session', // or senderName depending on view\r\n          start: booking.date ? new Date(booking.date) : new Date(), \r\n          end: booking.date ? new Date(new Date(booking.date).getTime() + (booking.duration * 60 * 60 * 1000)) : new Date(),\r\n          resource: booking\r\n      }))\r\n  }, [events]);\r\n\r\n  return (\r\n    <div className=\"h-[600px] bg-white dark:bg-dark-card rounded-xl p-4 text-gray-800 dark:text-gray-200\">\r\n      <Calendar\r\n        localizer={localizer}\r\n        events={calendarEvents}\r\n        startAccessor=\"start\"\r\n        endAccessor=\"end\"\r\n        style={{ height: '100%' }}\r\n        selectable\r\n        onSelectSlot={onSelectSlot} // Handle clicking empty space (Create Booking)\r\n        onSelectEvent={onSelectEvent} // Handle clicking an event (View Details)\r\n        views={['month', 'week', 'day']}\r\n        defaultView='week'\r\n        // Tailwind Customization Helper\r\n        eventPropGetter={(event) => ({\r\n            className: `bg-brand-blue text-white rounded-md border-none text-xs`\r\n        })}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { X, Calendar, Clock, MapPin, DollarSign, CheckCircle, Play, Mic2, Car, FileText, User, ChevronRight } from 'lucide-react';\r\nimport { supabase } from '../config/supabase';\r\nimport { motion } from 'framer-motion';\r\nimport toast from 'react-hot-toast';\r\n\r\n// Tracker Steps Configuration\r\nconst TRACKER_STEPS = [\r\n    { id: 'Pending', label: 'Created', icon: Calendar },\r\n    { id: 'Confirmed', label: 'Deposit', icon: DollarSign },\r\n    { id: 'En Route', label: 'En Route', icon: Car },\r\n    { id: 'In Progress', label: 'Started', icon: Mic2 },\r\n    { id: 'Completed', label: 'Done', icon: CheckCircle }\r\n];\r\n\r\nexport default function SessionDetailsModal({ booking, user, onClose }) {\r\n    const [status, setStatus] = useState(booking.status);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const isProvider = user.uid === booking.targetId; // The person who was booked (Talent/Studio)\r\n    const isClient = user.uid === booking.senderId; // The person who booked\r\n\r\n    // Helper to get current step index (0-4)\r\n    const getCurrentStepIndex = (currentStatus) => {\r\n        const idx = TRACKER_STEPS.findIndex(s => s.id === currentStatus);\r\n        return idx === -1 ? 0 : idx;\r\n    };\r\n\r\n    const currentStepIndex = getCurrentStepIndex(status);\r\n\r\n    const updateStatus = async (newStatus) => {\r\n        if (!supabase) return;\r\n        setLoading(true);\r\n        try {\r\n            const now = new Date().toISOString();\r\n            const statusTimestamps = booking.statusTimestamps || {};\r\n            statusTimestamps[newStatus] = now;\r\n            \r\n            await supabase\r\n                .from('bookings')\r\n                .update({\r\n                    status: newStatus,\r\n                    status_timestamps: statusTimestamps,\r\n                    updated_at: now\r\n                })\r\n                .eq('id', booking.id);\r\n            \r\n            setStatus(newStatus);\r\n            toast.success(`Session ${newStatus}`);\r\n        } catch (e) {\r\n            console.error(\"Update failed:\", e);\r\n            toast.error(\"Failed to update status\");\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    // Calculate progress bar width (0% to 100%)\r\n    const progressPercent = (currentStepIndex / (TRACKER_STEPS.length - 1)) * 100;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[90] p-4 animate-in fade-in\">\r\n            <div className=\"bg-white dark:bg-[#2c2e36] w-full max-w-3xl rounded-2xl shadow-2xl border dark:border-gray-700 flex flex-col max-h-[90vh] overflow-hidden\">\r\n                \r\n                {/* Header */}\r\n                <div className=\"p-6 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-extrabold dark:text-white flex items-center gap-2\">\r\n                            Session Details <span className=\"text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-full font-medium\">#{booking.id.slice(-6).toUpperCase()}</span>\r\n                        </h2>\r\n                        <p className=\"text-sm text-gray-500\">With {isClient ? booking.targetName : booking.senderName}</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors\"><X size={20}/></button>\r\n                </div>\r\n\r\n                <div className=\"overflow-y-auto p-6 space-y-8\">\r\n                    \r\n                    {/* --- PIZZA TRACKER --- */}\r\n                    <div className=\"relative pt-4 pb-8 px-4\">\r\n                        {/* Connecting Bar Background */}\r\n                        <div className=\"absolute top-8 left-0 w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full -z-10\"></div>\r\n                        \r\n                        {/* Connecting Bar Progress */}\r\n                        <div \r\n                            className=\"absolute top-8 left-0 h-1.5 bg-brand-blue rounded-full -z-10 transition-all duration-700 ease-in-out\" \r\n                            style={{ width: `${progressPercent}%` }}\r\n                        ></div>\r\n\r\n                        <div className=\"flex justify-between\">\r\n                            {TRACKER_STEPS.map((step, idx) => {\r\n                                const isCompleted = idx <= currentStepIndex;\r\n                                const isCurrent = idx === currentStepIndex;\r\n                                \r\n                                return (\r\n                                    <div key={step.id} className=\"flex flex-col items-center gap-2\">\r\n                                        <div \r\n                                            className={`\r\n                                                w-10 h-10 rounded-full flex items-center justify-center border-4 transition-all duration-500\r\n                                                ${isCompleted ? 'bg-brand-blue border-white dark:border-[#2c2e36] text-white' : 'bg-gray-200 dark:bg-gray-700 border-white dark:border-[#2c2e36] text-gray-400'}\r\n                                                ${isCurrent ? 'scale-125 shadow-lg ring-4 ring-blue-100 dark:ring-blue-900/50' : ''}\r\n                                            `}\r\n                                        >\r\n                                            <step.icon size={isCurrent ? 18 : 16} fill={isCompleted ? \"currentColor\" : \"none\"} />\r\n                                        </div>\r\n                                        <span className={`text-xs font-bold uppercase tracking-wider transition-colors ${isCompleted ? 'text-brand-blue' : 'text-gray-400'}`}>\r\n                                            {step.label}\r\n                                        </span>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Status Actions (Only for Provider) */}\r\n                    {isProvider && status !== 'Completed' && (\r\n                        <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800 flex flex-wrap items-center justify-between gap-4\">\r\n                            <div>\r\n                                <h4 className=\"text-sm font-bold text-blue-800 dark:text-blue-300\">Update Session Status</h4>\r\n                                <p className=\"text-xs text-blue-600 dark:text-blue-400\">Keep the client informed.</p>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                {status === 'Pending' && (\r\n                                    <button onClick={() => updateStatus('Confirmed')} className=\"bg-green-600 text-white px-4 py-2 rounded-lg font-bold text-xs hover:bg-green-700 transition shadow-sm\">Accept & Confirm</button>\r\n                                )}\r\n                                {status === 'Confirmed' && (\r\n                                    <button onClick={() => updateStatus('En Route')} className=\"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs hover:bg-blue-700 transition shadow-sm flex items-center gap-1\"><Car size={14}/> I'm En Route</button>\r\n                                )}\r\n                                {status === 'En Route' && (\r\n                                    <button onClick={() => updateStatus('In Progress')} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-xs hover:bg-purple-700 transition shadow-sm flex items-center gap-1\"><Play size={14}/> Start Session</button>\r\n                                )}\r\n                                {status === 'In Progress' && (\r\n                                    <button onClick={() => updateStatus('Completed')} className=\"bg-gray-900 dark:bg-white dark:text-black text-white px-4 py-2 rounded-lg font-bold text-xs hover:opacity-90 transition shadow-sm flex items-center gap-1\"><CheckCircle size={14}/> Complete Session</button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Details Grid */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        <div className=\"space-y-4\">\r\n                            <h3 className=\"text-sm font-bold text-gray-500 uppercase border-b dark:border-gray-700 pb-2\">Logistics</h3>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-gray-100 dark:bg-gray-800 p-2 rounded-lg\"><Calendar size={20} className=\"text-brand-blue\"/></div>\r\n                                <div><div className=\"text-xs text-gray-500 uppercase font-bold\">Date</div><div className=\"dark:text-white font-medium\">{booking.date}</div></div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-gray-100 dark:bg-gray-800 p-2 rounded-lg\"><Clock size={20} className=\"text-brand-blue\"/></div>\r\n                                <div><div className=\"text-xs text-gray-500 uppercase font-bold\">Time</div><div className=\"dark:text-white font-medium\">{booking.time} ({booking.duration} hrs)</div></div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-gray-100 dark:bg-gray-800 p-2 rounded-lg\"><MapPin size={20} className=\"text-brand-blue\"/></div>\r\n                                <div><div className=\"text-xs text-gray-500 uppercase font-bold\">Location</div><div className=\"dark:text-white font-medium\">{booking.venue?.name || 'Remote / TBD'}</div></div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <h3 className=\"text-sm font-bold text-gray-500 uppercase border-b dark:border-gray-700 pb-2\">Financials</h3>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-gray-100 dark:bg-gray-800 p-2 rounded-lg\"><DollarSign size={20} className=\"text-green-600\"/></div>\r\n                                <div><div className=\"text-xs text-gray-500 uppercase font-bold\">Total Value</div><div className=\"dark:text-white font-mono font-bold text-lg\">${booking.offerAmount}</div></div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"bg-gray-100 dark:bg-gray-800 p-2 rounded-lg\"><FileText size={20} className=\"text-gray-500\"/></div>\r\n                                <div><div className=\"text-xs text-gray-500 uppercase font-bold\">Agreement</div><div className=\"text-brand-blue text-xs font-bold cursor-pointer hover:underline\">View Contract</div></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    {/* Message / Note */}\r\n                    {booking.message && (\r\n                        <div className=\"bg-gray-50 dark:bg-black/20 p-4 rounded-xl border dark:border-gray-700\">\r\n                            <h4 className=\"text-xs font-bold text-gray-500 uppercase mb-2\">Notes</h4>\r\n                            <p className=\"text-sm text-gray-600 dark:text-gray-300 italic\">\"{booking.message}\"</p>\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect, lazy, Suspense, useRef } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Calendar, Clock, User, MapPin, DollarSign, MessageSquare, CheckCircle, XCircle, AlertCircle, Loader2, Filter, Search, Plus, Zap, ChevronDown, MoreHorizontal } from 'lucide-react';\r\nimport { supabase } from '../config/supabase';\r\nimport BookingCalendar from './shared/BookingCalendar';\r\nimport SessionDetailsModal from './SessionDetailsModal';\r\nimport UserAvatar from './shared/UserAvatar';\r\n\r\n// Lazy load the missing modules\r\nconst TalentSearch = lazy(() => import('./TalentSearch'));\r\nconst SessionBuilderModal = lazy(() => import('./SessionBuilderModal'));\r\nconst SessionWizard = lazy(() => import('./SessionWizard'));\r\nconst BroadcastRequest = lazy(() => import('./BroadcastRequest'));\r\nconst BroadcastList = lazy(() => import('./BroadcastList'));\r\n\r\nexport default function BookingSystem({ user, userData, subProfiles, openPublicProfile }) {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    \r\n    // Get tab from URL path (e.g., /bookings/calendar -> 'calendar')\r\n    const getTabFromPath = (path) => {\r\n        const parts = path.split('/').filter(Boolean);\r\n        if (parts[0] === 'bookings' && parts[1]) {\r\n            return parts[1]; // Return the nested route (calendar, find-talent, etc.)\r\n        }\r\n        return 'my-bookings'; // Default tab\r\n    };\r\n    \r\n    const [activeTab, setActiveTab] = useState(() => getTabFromPath(location.pathname));\r\n    const [bookings, setBookings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedBooking, setSelectedBooking] = useState(null);\r\n    const [filterStatus, setFilterStatus] = useState('all'); // 'all', 'pending', 'confirmed', 'completed', 'cancelled'\r\n    const [filterType, setFilterType] = useState('all'); // 'all', 'sent', 'received'\r\n    const [showSessionBuilder, setShowSessionBuilder] = useState(false);\r\n    const [sessionCart, setSessionCart] = useState([]);\r\n    const [sessionParams, setSessionParams] = useState(null);\r\n    const [showSessionWizard, setShowSessionWizard] = useState(false);\r\n    const [showBroadcastRequest, setShowBroadcastRequest] = useState(false);\r\n    const [showMoreMenu, setShowMoreMenu] = useState(false);\r\n    const moreMenuRef = useRef(null);\r\n    \r\n    const isStudioManager = userData?.accountTypes?.includes('Studio');\r\n    \r\n    // Sync activeTab with URL\r\n    useEffect(() => {\r\n        const tabFromUrl = getTabFromPath(location.pathname);\r\n        if (tabFromUrl !== activeTab) {\r\n            setActiveTab(tabFromUrl);\r\n        }\r\n    }, [location.pathname]);\r\n    \r\n    // Update URL when tab changes\r\n    const handleTabChange = (tabId) => {\r\n        setActiveTab(tabId);\r\n        navigate(`/bookings/${tabId}`, { replace: true });\r\n    };\r\n    \r\n    // Close more menu when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (moreMenuRef.current && !moreMenuRef.current.contains(event.target)) {\r\n                setShowMoreMenu(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n    \r\n    // Primary tabs (always visible)\r\n    const primaryTabs = [\r\n        { id: 'my-bookings', label: 'My Bookings', icon: Calendar },\r\n        { id: 'calendar', label: 'Calendar', icon: Calendar },\r\n    ];\r\n    \r\n    // Secondary tabs (in dropdown menu)\r\n    const secondaryTabs = [\r\n        { id: 'find-talent', label: 'Find Talent', icon: Search },\r\n        { id: 'broadcast-list', label: 'Broadcasts', icon: Zap },\r\n    ];\r\n    \r\n    // Fetch all bookings for the user\r\n    useEffect(() => {\r\n        if (!user?.id && !user?.uid) return;\r\n        \r\n        const loadBookings = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const userId = user?.id || user?.uid;\r\n                \r\n                // Fetch bookings where user is sender OR target\r\n                const { data: sentBookings, error: sentError } = await supabase\r\n                    .from('bookings')\r\n                    .select('*')\r\n                    .eq('sender_id', userId)\r\n                    .order('date', { ascending: false });\r\n                \r\n                const { data: receivedBookings, error: receivedError } = await supabase\r\n                    .from('bookings')\r\n                    .select('*')\r\n                    .eq('target_id', userId)\r\n                    .order('date', { ascending: false });\r\n                \r\n                if (sentError) throw sentError;\r\n                if (receivedError) throw receivedError;\r\n                \r\n                // Combine and deduplicate (in case of edge cases)\r\n                const allBookings = [...(sentBookings || []), ...(receivedBookings || [])];\r\n                const uniqueBookings = Array.from(\r\n                    new Map(allBookings.map(b => [b.id, b])).values()\r\n                );\r\n                \r\n                setBookings(uniqueBookings);\r\n            } catch (error) {\r\n                console.error('Error loading bookings:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        \r\n        loadBookings();\r\n        \r\n        // Set up real-time subscription\r\n        const subscription = supabase\r\n            .channel('bookings-changes')\r\n            .on('postgres_changes', \r\n                { event: '*', schema: 'public', table: 'bookings' },\r\n                () => {\r\n                    loadBookings();\r\n                }\r\n            )\r\n            .subscribe();\r\n        \r\n        return () => {\r\n            subscription.unsubscribe();\r\n        };\r\n    }, [user?.id, user?.uid]);\r\n    \r\n    // Filter bookings based on status and type\r\n    const filteredBookings = bookings.filter(booking => {\r\n        // Status filter\r\n        if (filterStatus !== 'all') {\r\n            if (filterStatus === 'pending' && booking.status !== 'Pending') return false;\r\n            if (filterStatus === 'confirmed' && booking.status !== 'Confirmed') return false;\r\n            if (filterStatus === 'completed' && booking.status !== 'Completed') return false;\r\n            if (filterStatus === 'cancelled' && booking.status !== 'Cancelled') return false;\r\n        }\r\n        \r\n        // Type filter (sent vs received)\r\n        if (filterType !== 'all') {\r\n            const userId = user?.id || user?.uid;\r\n            if (filterType === 'sent' && booking.sender_id !== userId) return false;\r\n            if (filterType === 'received' && booking.target_id !== userId) return false;\r\n        }\r\n        \r\n        return true;\r\n    });\r\n    \r\n    // For studio managers: get bookings involving their studio\r\n    const studioBookings = isStudioManager \r\n        ? bookings.filter(b => {\r\n            const userId = user?.id || user?.uid;\r\n            // Bookings where studio is target (booked me) or sender (we booked)\r\n            return b.target_id === userId || b.sender_id === userId;\r\n        })\r\n        : [];\r\n    \r\n    const formatDate = (dateStr) => {\r\n        if (!dateStr || dateStr === 'Flexible') return 'Flexible';\r\n        try {\r\n            const date = new Date(dateStr);\r\n            return date.toLocaleDateString('en-US', { \r\n                weekday: 'short', \r\n                year: 'numeric', \r\n                month: 'short', \r\n                day: 'numeric' \r\n            });\r\n        } catch {\r\n            return dateStr;\r\n        }\r\n    };\r\n    \r\n    const formatTime = (timeStr) => {\r\n        if (!timeStr || timeStr === 'Flexible') return 'Flexible';\r\n        try {\r\n            const [hours, minutes] = timeStr.split(':');\r\n            const hour = parseInt(hours);\r\n            const ampm = hour >= 12 ? 'PM' : 'AM';\r\n            const displayHour = hour % 12 || 12;\r\n            return `${displayHour}:${minutes} ${ampm}`;\r\n        } catch {\r\n            return timeStr;\r\n        }\r\n    };\r\n    \r\n    const getStatusColor = (status) => {\r\n        switch (status) {\r\n            case 'Pending': return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400';\r\n            case 'Confirmed': return 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400';\r\n            case 'Completed': return 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400';\r\n            case 'Cancelled': return 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400';\r\n            case 'Declined': return 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400';\r\n            default: return 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400';\r\n        }\r\n    };\r\n    \r\n    const handleBookingAction = async (bookingId, action) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('bookings')\r\n                .update({ \r\n                    status: action === 'accept' ? 'Confirmed' : action === 'decline' ? 'Declined' : booking.status,\r\n                    responded_at: new Date().toISOString(),\r\n                    updated_at: new Date().toISOString()\r\n                })\r\n                .eq('id', bookingId);\r\n            \r\n            if (error) throw error;\r\n        } catch (error) {\r\n            console.error('Error updating booking:', error);\r\n            alert('Failed to update booking');\r\n        }\r\n    };\r\n    \r\n    // Prepare calendar events\r\n    const calendarEvents = filteredBookings.map(booking => ({\r\n        id: booking.id,\r\n        title: booking.target_name || booking.sender_name || 'Session',\r\n        start: booking.date && booking.date !== 'Flexible' \r\n            ? new Date(`${booking.date}T${booking.time || '12:00'}`) \r\n            : new Date(),\r\n        end: booking.date && booking.date !== 'Flexible' && booking.duration\r\n            ? new Date(new Date(`${booking.date}T${booking.time || '12:00'}`).getTime() + (booking.duration * 60 * 60 * 1000))\r\n            : new Date(),\r\n        resource: booking\r\n    }));\r\n    \r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-full\">\r\n                <Loader2 className=\"animate-spin text-brand-blue\" size={32} />\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    return (\r\n        <div className=\"h-full flex flex-col p-fluid gap-fluid\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold dark:text-white\">Bookings</h1>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                        Manage your sessions and bookings\r\n                    </p>\r\n                </div>\r\n                <button\r\n                    onClick={() => {\r\n                        setShowSessionWizard(true);\r\n                        handleTabChange('session-builder');\r\n                    }}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors\"\r\n                >\r\n                    <Plus size={18} />\r\n                    New Session\r\n                </button>\r\n            </div>\r\n            \r\n            {/* Tabs - Primary tabs visible, secondary in dropdown */}\r\n            <div className=\"flex gap-2 border-b border-gray-200 dark:border-gray-700 items-end\">\r\n                {/* Primary Tabs */}\r\n                {primaryTabs.map(tab => {\r\n                    const TabIcon = tab.icon;\r\n                    return (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => handleTabChange(tab.id)}\r\n                            className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${\r\n                                activeTab === tab.id\r\n                                    ? 'border-b-2 border-brand-blue text-brand-blue'\r\n                                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\r\n                            }`}\r\n                        >\r\n                            <TabIcon size={16} />\r\n                            {tab.label}\r\n                        </button>\r\n                    );\r\n                })}\r\n                \r\n                {/* More Menu Dropdown */}\r\n                <div className=\"relative ml-auto\" ref={moreMenuRef}>\r\n                    <button\r\n                        onClick={() => setShowMoreMenu(!showMoreMenu)}\r\n                        className={`px-4 py-2 font-medium text-sm transition-colors flex items-center gap-2 ${\r\n                            secondaryTabs.some(tab => activeTab === tab.id)\r\n                                ? 'border-b-2 border-brand-blue text-brand-blue'\r\n                                : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\r\n                        }`}\r\n                    >\r\n                        <MoreHorizontal size={16} />\r\n                        More\r\n                        <ChevronDown size={14} className={`transition-transform ${showMoreMenu ? 'rotate-180' : ''}`} />\r\n                    </button>\r\n                    \r\n                    {/* Dropdown Menu */}\r\n                    {showMoreMenu && (\r\n                        <div className=\"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-[#1f2128] border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1\">\r\n                            {secondaryTabs.map(tab => {\r\n                                const TabIcon = tab.icon;\r\n                                return (\r\n                                    <button\r\n                                        key={tab.id}\r\n                                        onClick={() => {\r\n                                            handleTabChange(tab.id);\r\n                                            setShowMoreMenu(false);\r\n                                        }}\r\n                                        className={`w-full flex items-center gap-2 px-4 py-2 text-sm transition-colors ${\r\n                                            activeTab === tab.id\r\n                                                ? 'bg-blue-50 text-brand-blue dark:bg-blue-900/20 dark:text-blue-400'\r\n                                                : 'text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800'\r\n                                        }`}\r\n                                    >\r\n                                        <TabIcon size={16} />\r\n                                        {tab.label}\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Studio Manager View */}\r\n            {isStudioManager && activeTab === 'my-bookings' && (\r\n                <div className=\"bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4\">\r\n                    <h2 className=\"text-lg font-bold text-indigo-900 dark:text-indigo-300 mb-3\">\r\n                        Studio Bookings\r\n                    </h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <h3 className=\"text-sm font-semibold text-indigo-800 dark:text-indigo-400 mb-2\">\r\n                                Booked Me ({studioBookings.filter(b => b.target_id === (user?.id || user?.uid)).length})\r\n                            </h3>\r\n                            <p className=\"text-sm text-indigo-700 dark:text-indigo-300\">\r\n                                Bookings where clients booked your studio\r\n                            </p>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-sm font-semibold text-indigo-800 dark:text-indigo-400 mb-2\">\r\n                                We Booked ({studioBookings.filter(b => b.sender_id === (user?.id || user?.uid)).length})\r\n                            </h3>\r\n                            <p className=\"text-sm text-indigo-700 dark:text-indigo-300\">\r\n                                Bookings your studio made for other services\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            \r\n            {/* My Bookings Tab */}\r\n            {activeTab === 'my-bookings' && (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    {/* Filters */}\r\n                    <div className=\"flex gap-4 mb-4 flex-wrap\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Filter size={16} className=\"text-gray-500\" />\r\n                            <select\r\n                                value={filterStatus}\r\n                                onChange={(e) => setFilterStatus(e.target.value)}\r\n                                className=\"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm\"\r\n                            >\r\n                                <option value=\"all\">All Status</option>\r\n                                <option value=\"pending\">Pending</option>\r\n                                <option value=\"confirmed\">Confirmed</option>\r\n                                <option value=\"completed\">Completed</option>\r\n                                <option value=\"cancelled\">Cancelled</option>\r\n                            </select>\r\n                        </div>\r\n                        <select\r\n                            value={filterType}\r\n                            onChange={(e) => setFilterType(e.target.value)}\r\n                            className=\"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-sm\"\r\n                        >\r\n                            <option value=\"all\">All Bookings</option>\r\n                            <option value=\"sent\">I Booked</option>\r\n                            <option value=\"received\">Booked Me</option>\r\n                        </select>\r\n                    </div>\r\n                    \r\n                    {/* Bookings List */}\r\n                    {filteredBookings.length === 0 ? (\r\n                        <div className=\"text-center py-12\">\r\n                            <Calendar className=\"mx-auto text-gray-400 mb-4\" size={48} />\r\n                            <p className=\"text-gray-500 dark:text-gray-400\">No bookings found</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {filteredBookings.map(booking => {\r\n                                const userId = user?.id || user?.uid;\r\n                                const isSender = booking.sender_id === userId;\r\n                                const isReceived = booking.target_id === userId;\r\n                                \r\n                                return (\r\n                                    <div\r\n                                        key={booking.id}\r\n                                        className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow cursor-pointer\"\r\n                                        onClick={() => setSelectedBooking(booking)}\r\n                                    >\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center gap-3 mb-2\">\r\n                                                    <UserAvatar\r\n                                                        src={isSender ? null : null} // Could fetch profile pics\r\n                                                        name={isSender ? booking.target_name : booking.sender_name}\r\n                                                        size=\"sm\"\r\n                                                    />\r\n                                                    <div>\r\n                                                        <h3 className=\"font-semibold dark:text-white\">\r\n                                                            {isSender ? booking.target_name : booking.sender_name}\r\n                                                        </h3>\r\n                                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                                            {isSender ? 'You booked' : 'Booked you'}  {booking.service_type}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                \r\n                                                <div className=\"flex flex-wrap gap-4 mt-3 text-sm text-gray-600 dark:text-gray-400\">\r\n                                                    <div className=\"flex items-center gap-1\">\r\n                                                        <Calendar size={14} />\r\n                                                        {formatDate(booking.date)}\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-1\">\r\n                                                        <Clock size={14} />\r\n                                                        {formatTime(booking.time)} ({booking.duration}h)\r\n                                                    </div>\r\n                                                    {booking.offer_amount && (\r\n                                                        <div className=\"flex items-center gap-1\">\r\n                                                            <DollarSign size={14} />\r\n                                                            ${booking.offer_amount}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                                \r\n                                                {booking.message && (\r\n                                                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2\">\r\n                                                        {booking.message}\r\n                                                    </p>\r\n                                                )}\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"flex flex-col items-end gap-2\">\r\n                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(booking.status)}`}>\r\n                                                    {booking.status}\r\n                                                </span>\r\n                                                \r\n                                                {isReceived && booking.status === 'Pending' && (\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        <button\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                handleBookingAction(booking.id, 'accept');\r\n                                                            }}\r\n                                                            className=\"px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600\"\r\n                                                        >\r\n                                                            Accept\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                handleBookingAction(booking.id, 'decline');\r\n                                                            }}\r\n                                                            className=\"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600\"\r\n                                                        >\r\n                                                            Decline\r\n                                                        </button>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n            \r\n            {/* Calendar Tab */}\r\n            {activeTab === 'calendar' && (\r\n                <div className=\"flex-1\">\r\n                    <BookingCalendar\r\n                        events={calendarEvents}\r\n                        onSelectEvent={(event) => setSelectedBooking(event.resource)}\r\n                        onSelectSlot={(slotInfo) => {\r\n                            // Could open booking modal for new booking\r\n                            console.log('New booking slot:', slotInfo);\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n            \r\n            {/* Find Talent Tab */}\r\n            {activeTab === 'find-talent' && (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <Suspense fallback={\r\n                        <div className=\"flex items-center justify-center h-64\">\r\n                            <Loader2 className=\"animate-spin text-brand-blue\" size={32} />\r\n                        </div>\r\n                    }>\r\n                        <TalentSearch\r\n                            user={user}\r\n                            userData={userData}\r\n                            openPublicProfile={openPublicProfile || (() => {})}\r\n                        />\r\n                    </Suspense>\r\n                </div>\r\n            )}\r\n            \r\n            {/* Session Builder Tab */}\r\n            {activeTab === 'session-builder' && showSessionWizard && (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <Suspense fallback={\r\n                        <div className=\"flex items-center justify-center h-64\">\r\n                            <Loader2 className=\"animate-spin text-brand-blue\" size={32} />\r\n                        </div>\r\n                    }>\r\n                        <SessionWizard\r\n                            userData={userData}\r\n                            sessionParams={sessionParams}\r\n                            setSessionParams={setSessionParams}\r\n                            onNext={() => {\r\n                                setShowSessionWizard(false);\r\n                                setShowSessionBuilder(true);\r\n                            }}\r\n                        />\r\n                    </Suspense>\r\n                </div>\r\n            )}\r\n            \r\n            {/* Booking Details Modal */}\r\n            {selectedBooking && (\r\n                <SessionDetailsModal\r\n                    booking={{\r\n                        ...selectedBooking,\r\n                        targetId: selectedBooking.target_id,\r\n                        senderId: selectedBooking.sender_id,\r\n                        targetName: selectedBooking.target_name,\r\n                        senderName: selectedBooking.sender_name\r\n                    }}\r\n                    user={{\r\n                        ...user,\r\n                        uid: user?.id || user?.uid\r\n                    }}\r\n                    onClose={() => setSelectedBooking(null)}\r\n                />\r\n            )}\r\n            \r\n            {/* Broadcast List Tab */}\r\n            {activeTab === 'broadcast-list' && !showBroadcastRequest && (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                        <h2 className=\"text-xl font-bold dark:text-white\">Active Broadcasts</h2>\r\n                        <button\r\n                            onClick={() => setShowBroadcastRequest(true)}\r\n                            className=\"flex items-center gap-2 px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition-colors\"\r\n                        >\r\n                            <Plus size={18} />\r\n                            Create Broadcast\r\n                        </button>\r\n                    </div>\r\n                    <Suspense fallback={\r\n                        <div className=\"flex items-center justify-center h-64\">\r\n                            <Loader2 className=\"animate-spin text-brand-blue\" size={32} />\r\n                        </div>\r\n                    }>\r\n                        <BroadcastList\r\n                            user={user}\r\n                            userData={userData}\r\n                            onBid={(broadcast) => {\r\n                                // Handle bid action - could open a modal or navigate\r\n                                console.log('Bid on broadcast:', broadcast);\r\n                            }}\r\n                        />\r\n                    </Suspense>\r\n                </div>\r\n            )}\r\n            \r\n            {/* Broadcast Request Tab */}\r\n            {activeTab === 'broadcast-list' && showBroadcastRequest && (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <Suspense fallback={\r\n                        <div className=\"flex items-center justify-center h-64\">\r\n                            <Loader2 className=\"animate-spin text-brand-blue\" size={32} />\r\n                        </div>\r\n                    }>\r\n                        <BroadcastRequest\r\n                            user={user}\r\n                            userData={userData}\r\n                            onBack={() => {\r\n                                setShowBroadcastRequest(false);\r\n                            }}\r\n                            onSuccess={() => {\r\n                                setShowBroadcastRequest(false);\r\n                                // Reload broadcasts\r\n                                window.location.reload();\r\n                            }}\r\n                        />\r\n                    </Suspense>\r\n                </div>\r\n            )}\r\n            \r\n            {/* Session Builder Modal */}\r\n            {showSessionBuilder && (\r\n                <Suspense fallback={null}>\r\n                    <SessionBuilderModal\r\n                        user={user}\r\n                        userData={userData}\r\n                        cart={sessionCart}\r\n                        onRemoveFromCart={(index) => {\r\n                            setSessionCart(prev => prev.filter((_, i) => i !== index));\r\n                        }}\r\n                        onClose={() => {\r\n                            setShowSessionBuilder(false);\r\n                            handleTabChange('my-bookings');\r\n                        }}\r\n                        onComplete={() => {\r\n                            setShowSessionBuilder(false);\r\n                            setSessionCart([]);\r\n                            handleTabChange('my-bookings');\r\n                            // Reload bookings\r\n                            window.location.reload();\r\n                        }}\r\n                    />\r\n                </Suspense>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"file":"assets/BookingSystem-7SGkQU2g.js"}