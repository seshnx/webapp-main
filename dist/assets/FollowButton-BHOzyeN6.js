import{r as o,j as n,L as j,cy as F,ci as v,a8 as $}from"./vendor-CBQkcJic.js";import{s as y}from"./chat-DHXQrQts.js";import{m as h,A as L}from"./vendor-framer-CtwjM_uu.js";function M(e){const[l,i]=o.useState([]),[a,u]=o.useState([]),[m,p]=o.useState({followersCount:0,followingCount:0}),[d,w]=o.useState(!0),s=o.useCallback(async()=>{},[e]);o.useEffect(()=>{s()},[e,s]);const c=o.useCallback(t=>l.some(r=>r.odId===t),[l]),b=o.useCallback(async t=>{if(!e||!t||e===t)return;const{error:r}=await y.from("follows").insert([{follower_id:e,following_id:t}]);return r?(console.error("Follow error:",r),{success:!1,error:r}):(s(),{success:!0})},[e,s]),g=o.useCallback(async t=>{if(!e||!t)return;const{error:r}=await y.from("follows").delete().match({follower_id:e,following_id:t});return r?(console.error("Unfollow error:",r),{success:!1,error:r}):(s(),{success:!0})},[e,s]),f=o.useCallback(async t=>c(t)?g(t):b(t),[c,b,g]),x=o.useCallback(()=>l.map(t=>t.odId),[l]);return{following:l,followers:a,stats:m,loading:d,isFollowing:c,followUser:b,unfollowUser:g,toggleFollow:f,getFollowingIds:x}}function N(e){const[l,i]=o.useState({followersCount:0,followingCount:0}),[a,u]=o.useState(!0);return o.useEffect(()=>{{u(!1);return}},[e]),{stats:l,loading:a}}function P({isFollowing:e,onToggle:l,size:i="md",variant:a="default",disabled:u=!1,showIcon:m=!0,className:p=""}){const[d,w]=o.useState(!1),[s,c]=o.useState(!1),b=async C=>{if(C.stopPropagation(),!(u||d)){w(!0);try{await l()}catch(S){console.error("Follow toggle error:",S)}w(!1)}},g={sm:"px-3 py-1 text-xs",md:"px-4 py-1.5 text-sm",lg:"px-6 py-2 text-base"},f={sm:12,md:14,lg:16},x=()=>e?a==="outline"||a==="minimal"?s?"border-red-300 text-red-500 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300":s?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200":a==="outline"?"border-brand-blue text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":a==="minimal"?"text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":"bg-brand-blue text-white hover:bg-blue-600",t=`
        font-semibold rounded-full transition-all duration-200 
        flex items-center justify-center gap-1.5
        disabled:opacity-50 disabled:cursor-not-allowed
        ${a==="outline"?"border-2 bg-transparent":""}
        ${a==="minimal"?"bg-transparent":""}
        ${g[i]}
        ${x()}
        ${p}
    `,r=()=>d?n.jsx(j,{className:"animate-spin",size:f[i]}):e?s?n.jsx(F,{size:f[i]}):n.jsx(v,{size:f[i]}):n.jsx($,{size:f[i]}),k=()=>e?s?"Unfollow":"Following":"Follow";return n.jsx(h.button,{whileHover:{scale:u?1:1.02},whileTap:{scale:u?1:.98},className:t,onClick:b,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),disabled:u||d,children:n.jsx(L,{mode:"wait",children:n.jsxs(h.span,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"flex items-center gap-1.5",children:[m&&r(),n.jsx("span",{children:k()})]},`${e}-${s}`)})})}export{P as F,N as a,M as u};
