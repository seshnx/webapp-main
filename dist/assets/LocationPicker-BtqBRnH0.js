import{r as l,j as a,a1 as w,L as v,c2 as j}from"./vendor-mIyI6DiM.js";import{f as L}from"./edu-V9buPGJB.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="75d4553a-efc8-46f9-949b-bd62c6f2e8de",e._sentryDebugIdIdentifier="sentry-dbid-75d4553a-efc8-46f9-949b-bd62c6f2e8de")})()}catch{}function z({initialZip:e="",onLocationChange:o,showMap:N=!1,label:x="Location"}){const[g,i]=l.useState(e),[u,d]=l.useState(""),[c,r]=l.useState(!1),[k,b]=l.useState(null);l.useEffect(()=>{e&&e!==g&&(i(e),f(e))},[e]);const f=async n=>{const t=n.replace(/\D/g,"").slice(0,5);if(i(t),t.length===5){r(!0);const s=await L(t);s?(d(s.cityState),b({lat:s.lat,lng:s.lng}),o({zip:t,...s})):(d("Unknown Location"),o({zip:t,valid:!1})),r(!1)}else d("")},h=()=>{if(!navigator.geolocation)return alert("Geolocation not supported");r(!0),navigator.geolocation.getCurrentPosition(async n=>{const{latitude:t,longitude:s}=n.coords;try{const m=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${s}`)).json()).address.postcode;if(m){const y=m.split("-")[0];i(y),f(y)}else b({lat:t,lng:s}),d("Current Location"),o({lat:t,lng:s,name:"Current Location",valid:!0})}catch(p){console.error(p),alert("Failed to determine location.")}r(!1)},n=>{console.warn(n),alert("Location access denied."),r(!1)})};return a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:x}),a.jsxs("div",{className:"relative flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{className:"w-full pl-9 p-2.5 bg-white dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all text-sm",placeholder:"Zip Code",maxLength:5,value:g,onChange:n=>f(n.target.value)}),a.jsx(w,{className:`absolute left-3 top-3 text-gray-400 ${c?"animate-pulse":""}`,size:16})]}),a.jsx("button",{onClick:h,disabled:c,className:"p-2.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-brand-blue transition-colors",title:"Use my location",children:c?a.jsx(v,{size:18,className:"animate-spin"}):a.jsx(j,{size:18})})]}),u&&a.jsxs("div",{className:"mt-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 flex items-center gap-1 animate-in fade-in",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),u]})]})}export{z as L};
