import{r as s,j as t}from"./vendor-DTDDt3fP.js";import{h as f,i as p,f as w,C as g,j as b,k as u}from"./chat-BCnoKXi-.js";import{a as y}from"./vendor-convex-DiXsReyd.js";import{m as c,A as C}from"./vendor-framer-CzAUfL-F.js";import"./vendor-firebase-C38qHjbM.js";function S({user:a,userData:l,openPublicProfile:m}){const[i,o]=s.useState(null),[d,n]=s.useState(!1);f(a==null?void 0:a.uid);const r=y(w.conversations.getConversations,a!=null&&a.uid&&p()?{userId:a.uid}:"skip"),h=s.useMemo(()=>r?r.map(e=>({id:e.chatId,uid:e.otherUserId||e.chatId,name:e.chatName||"Unknown",n:e.chatName||"Unknown",photo:e.chatPhoto||"",type:e.chatType||"direct",lm:e.lastMessage||"",lmt:e.lastMessageTime||0,ls:e.lastSenderId||"",uc:e.unreadCount||0})).sort((e,x)=>(x.lmt||0)-(e.lmt||0)):[],[r]);return s.useEffect(()=>{},[]),t.jsxs("div",{className:"flex h-[calc(100vh-100px)] bg-white dark:bg-[#1f2128] rounded-2xl overflow-hidden border dark:border-gray-800 shadow-xl",children:[t.jsx(c.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:`w-full md:w-80 border-r dark:border-gray-800 flex flex-col ${i?"hidden md:flex":"flex"}`,children:t.jsx(g,{user:a,userData:l,conversations:h,activeChat:i,onSelectChat:o})}),t.jsxs("div",{className:`flex-1 flex flex-col relative ${i?"flex":"hidden md:flex"}`,children:[t.jsx(b,{activeChat:i,user:a,userData:l,conversations:h,onBack:()=>o(null),toggleDetails:()=>n(!d),openPublicProfile:m}),t.jsx(C,{children:d&&i&&t.jsx(c.div,{initial:{width:0,opacity:0},animate:{width:300,opacity:1},exit:{width:0,opacity:0},className:"border-l dark:border-gray-800 bg-gray-50 dark:bg-[#23262f] overflow-hidden relative z-20",children:t.jsx(u,{activeChat:i,currentUser:l,onClose:()=>n(!1)})})})]})]})}export{S as default};
