{"version":3,"file":"ClientPortal-Bbs0Gcfn.js","sources":["../../src/components/studio/portal/ClientPortal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Calendar, DollarSign, User, Clock, CheckCircle, XCircle, AlertCircle, RefreshCw, Download, Plus } from 'lucide-react';\r\n\r\n/**\r\n * ClientPortal - Self-service client portal\r\n * Phase 2: Advanced booking features\r\n *\r\n * Allows clients to:\r\n * - View upcoming and past bookings\r\n * - Rebook sessions from templates\r\n * - View payment history and invoices\r\n * - Update their profile information\r\n */\r\nexport default function ClientPortal({ user, userData }) {\r\n    const { studioId } = useParams();\r\n    const [activeTab, setActiveTab] = useState('bookings'); // 'bookings', 'rebook', 'invoices', 'profile'\r\n    const [bookings, setBookings] = useState([]);\r\n    const [templates, setTemplates] = useState([]);\r\n    const [payments, setPayments] = useState([]);\r\n    const [clientInfo, setClientInfo] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (user && studioId) {\r\n            Promise.all([\r\n                fetchBookings(),\r\n                fetchTemplates(),\r\n                fetchPayments(),\r\n                fetchClientInfo()\r\n            ]).finally(() => setLoading(false));\r\n        }\r\n    }, [user, studioId]);\r\n\r\n    const fetchBookings = async () => {\r\n        try {\r\n            const response = await fetch(`/api/studio-ops/bookings?studioId=${studioId}&clientId=${user.id}&limit=20`);\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                setBookings(data.data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching bookings:', error);\r\n        }\r\n    };\r\n\r\n    const fetchTemplates = async () => {\r\n        try {\r\n            const response = await fetch(`/api/studio-ops/booking-templates?studioId=${studioId}`);\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                setTemplates(data.data.filter(t => t.is_active));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching templates:', error);\r\n        }\r\n    };\r\n\r\n    const fetchPayments = async () => {\r\n        try {\r\n            const response = await fetch(`/api/studio-ops/booking-payments?studioId=${studioId}`);\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                // Filter payments for this client's bookings\r\n                const clientBookingIds = bookings.map(b => b.id);\r\n                const clientPayments = (data.data || []).filter(p => clientBookingIds.includes(p.booking_id));\r\n                setPayments(clientPayments);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching payments:', error);\r\n        }\r\n    };\r\n\r\n    const fetchClientInfo = async () => {\r\n        try {\r\n            const response = await fetch(`/api/studio-ops/clients?studioId=${studioId}&clientId=${user.id}`);\r\n            const data = await response.json();\r\n\r\n            if (data.success && data.data.length > 0) {\r\n                setClientInfo(data.data[0]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching client info:', error);\r\n        }\r\n    };\r\n\r\n    const handleRebook = async (template) => {\r\n        const date = prompt('Enter preferred date (YYYY-MM-DD):');\r\n        if (!date) return;\r\n\r\n        const time = prompt('Enter preferred start time (HH:MM, e.g., 10:00):');\r\n        if (!time) return;\r\n\r\n        try {\r\n            const response = await fetch(`/api/studio-ops/booking-templates/${template.id}/use`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    studioId,\r\n                    clientId: user.id,\r\n                    date,\r\n                    startTime: time\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                alert(`Booking created successfully from \"${template.name}\" template!`);\r\n                fetchBookings();\r\n                setActiveTab('bookings');\r\n            } else {\r\n                alert(`Error: ${data.error || 'Failed to create booking'}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error rebooking:', error);\r\n            alert('Failed to create booking. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handleDownloadInvoice = async (booking) => {\r\n        // Placeholder for invoice generation\r\n        alert(`Invoice download for booking on ${booking.date} - Feature coming soon!`);\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return 'N/A';\r\n        return new Date(dateString).toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    const formatCurrency = (amount) => {\r\n        return new Intl.NumberFormat('en-US', {\r\n            style: 'currency',\r\n            currency: 'USD'\r\n        }).format(amount);\r\n    };\r\n\r\n    const getStatusBadge = (status) => {\r\n        const statusConfig = {\r\n            'Confirmed': { color: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400', icon: CheckCircle },\r\n            'Completed': { color: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400', icon: CheckCircle },\r\n            'Cancelled': { color: 'bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400', icon: XCircle },\r\n            'Declined': { color: 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400', icon: XCircle },\r\n            'Pending': { color: 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400', icon: Clock }\r\n        };\r\n\r\n        const config = statusConfig[status] || statusConfig['Pending'];\r\n        const Icon = config.icon;\r\n\r\n        return (\r\n            <span className={`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${config.color}`}>\r\n                <Icon size={12} />\r\n                {status}\r\n            </span>\r\n        );\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n                <div className=\"text-center\">\r\n                    <RefreshCw className=\"animate-spin mx-auto mb-4 text-gray-400\" size={32} />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">Loading your portal...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n            {/* Header */}\r\n            <div className=\"bg-white dark:bg-[#2c2e36] border-b dark:border-gray-700\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold dark:text-white\">Client Portal</h1>\r\n                            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n                                Welcome, {clientInfo?.name || user?.username || 'Client'}\r\n                            </p>\r\n                        </div>\r\n                        {clientInfo && (\r\n                            <div className=\"text-right\">\r\n                                <div className=\"text-sm text-gray-600 dark:text-gray-400\">Client Type</div>\r\n                                <div className=\"text-lg font-semibold dark:text-white capitalize\">\r\n                                    {clientInfo.client_type}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"bg-white dark:bg-[#2c2e36] border-b dark:border-gray-700\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                    <nav className=\"flex space-x-8\">\r\n                        <button\r\n                            onClick={() => setActiveTab('bookings')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                                activeTab === 'bookings'\r\n                                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\r\n                            }`}\r\n                        >\r\n                            <Calendar size={16} className=\"inline mr-2\" />\r\n                            My Bookings\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('rebook')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                                activeTab === 'rebook'\r\n                                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\r\n                            }`}\r\n                        >\r\n                            <Plus size={16} className=\"inline mr-2\" />\r\n                            Book a Session\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('invoices')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                                activeTab === 'invoices'\r\n                                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\r\n                            }`}\r\n                        >\r\n                            <DollarSign size={16} className=\"inline mr-2\" />\r\n                            Invoices & Payments\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('profile')}\r\n                            className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${\r\n                                activeTab === 'profile'\r\n                                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\r\n                            }`}\r\n                        >\r\n                            <User size={16} className=\"inline mr-2\" />\r\n                            My Profile\r\n                        </button>\r\n                    </nav>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                {activeTab === 'bookings' && (\r\n                    <BookingsTab\r\n                        bookings={bookings}\r\n                        formatDate={formatDate}\r\n                        getStatusBadge={getStatusBadge}\r\n                        onDownloadInvoice={handleDownloadInvoice}\r\n                    />\r\n                )}\r\n\r\n                {activeTab === 'rebook' && (\r\n                    <RebookTab\r\n                        templates={templates}\r\n                        onRebook={handleRebook}\r\n                        formatCurrency={formatCurrency}\r\n                    />\r\n                )}\r\n\r\n                {activeTab === 'invoices' && (\r\n                    <InvoicesTab\r\n                        payments={payments}\r\n                        bookings={bookings}\r\n                        formatCurrency={formatCurrency}\r\n                        formatDate={formatDate}\r\n                    />\r\n                )}\r\n\r\n                {activeTab === 'profile' && (\r\n                    <ProfileTab\r\n                        clientInfo={clientInfo}\r\n                        user={user}\r\n                        formatCurrency={formatCurrency}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Bookings Tab Component\r\n */\r\nfunction BookingsTab({ bookings, formatDate, getStatusBadge, onDownloadInvoice }) {\r\n    const [filter, setFilter] = useState('upcoming'); // 'upcoming', 'past', 'all'\r\n\r\n    const now = new Date();\r\n\r\n    const filteredBookings = bookings.filter(booking => {\r\n        const bookingDate = new Date(booking.date);\r\n        if (filter === 'upcoming') return bookingDate >= now;\r\n        if (filter === 'past') return bookingDate < now;\r\n        return true;\r\n    });\r\n\r\n    const upcomingCount = bookings.filter(b => new Date(b.date) >= now).length;\r\n    const pastCount = bookings.filter(b => new Date(b.date) < now).length;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-2xl font-bold dark:text-white\">My Bookings</h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setFilter('upcoming')}\r\n                        className={`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${\r\n                            filter === 'upcoming'\r\n                                ? 'bg-blue-600 text-white'\r\n                                : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                        }`}\r\n                    >\r\n                        Upcoming ({upcomingCount})\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setFilter('past')}\r\n                        className={`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${\r\n                            filter === 'past'\r\n                                ? 'bg-blue-600 text-white'\r\n                                : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\r\n                        }`}\r\n                    >\r\n                        Past ({pastCount})\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {filteredBookings.length === 0 ? (\r\n                <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-8 text-center\">\r\n                    <Calendar size={48} className=\"mx-auto mb-4 text-gray-400\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">\r\n                        {filter === 'upcoming' ? 'No upcoming bookings' : filter === 'past' ? 'No past bookings' : 'No bookings found'}\r\n                    </p>\r\n                    {filter === 'upcoming' && (\r\n                        <button\r\n                            onClick={() => window.location.reload()}\r\n                            className=\"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\r\n                        >\r\n                            Book a Session\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-3\">\r\n                    {filteredBookings.map((booking) => (\r\n                        <div\r\n                            key={booking.id}\r\n                            className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-5 hover:shadow-md transition-shadow\"\r\n                        >\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-3 mb-3\">\r\n                                        <h3 className=\"text-lg font-semibold dark:text-white\">\r\n                                            {formatDate(booking.date)}\r\n                                        </h3>\r\n                                        {getStatusBadge(booking.status)}\r\n                                    </div>\r\n                                    <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                                        <div>\r\n                                            <span className=\"font-medium\">Time:</span> {booking.start_time} - {booking.end_time}\r\n                                        </div>\r\n                                        {booking.venue_name && (\r\n                                            <div>\r\n                                                <span className=\"font-medium\">Room:</span> {booking.venue_name}\r\n                                            </div>\r\n                                        )}\r\n                                        {booking.offer_amount && (\r\n                                            <div>\r\n                                                <span className=\"font-medium\">Total:</span> {formatCurrency(booking.offer_amount)}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => onDownloadInvoice(booking)}\r\n                                    className=\"flex items-center gap-2 px-3 py-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 rounded-lg transition-colors\"\r\n                                >\r\n                                    <Download size={16} />\r\n                                    Invoice\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Rebook Tab Component\r\n */\r\nfunction RebookTab({ templates, onRebook, formatCurrency }) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold dark:text-white mb-2\">Book a Session</h2>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">\r\n                    Choose from our pre-configured booking templates for quick and easy scheduling\r\n                </p>\r\n            </div>\r\n\r\n            {templates.length === 0 ? (\r\n                <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-8 text-center\">\r\n                    <AlertCircle size={48} className=\"mx-auto mb-4 text-gray-400\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No booking templates available</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {templates.map((template) => (\r\n                        <div\r\n                            key={template.id}\r\n                            className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-5 hover:shadow-lg transition-shadow\"\r\n                        >\r\n                            <div className=\"mb-4\">\r\n                                <h3 className=\"text-lg font-semibold dark:text-white mb-2\">{template.name}</h3>\r\n                                {template.description && (\r\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\">\r\n                                        {template.description}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2 mb-4 text-sm\">\r\n                                <div className=\"flex items-center gap-2 text-gray-600 dark:text-gray-400\">\r\n                                    <Clock size={16} />\r\n                                    {template.duration_hours} hour{template.duration_hours !== 1 ? 's' : ''}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2 font-semibold text-green-600 dark:text-green-400\">\r\n                                    <span className=\"text-base\">${template.base_price}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => onRebook(template)}\r\n                                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\r\n                            >\r\n                                <Plus size={16} />\r\n                                Book Now\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Invoices Tab Component\r\n */\r\nfunction InvoicesTab({ payments, bookings, formatCurrency, formatDate }) {\r\n    // Group payments by booking\r\n    const paymentsByBooking = payments.reduce((acc, payment) => {\r\n        if (!acc[payment.booking_id]) {\r\n            const booking = bookings.find(b => b.id === payment.booking_id);\r\n            acc[payment.booking_id] = {\r\n                booking,\r\n                payments: [],\r\n                total: 0,\r\n                paid: 0\r\n            };\r\n        }\r\n        acc[payment.booking_id].payments.push(payment);\r\n        acc[payment.booking_id].total += parseFloat(booking?.offer_amount || 0);\r\n        acc[payment.booking_id].paid += payment.status === 'completed' ? parseFloat(payment.amount) : 0;\r\n        return acc;\r\n    }, {});\r\n\r\n    const bookingPayments = Object.values(paymentsByBooking);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold dark:text-white mb-2\">Invoices & Payments</h2>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">View your payment history and booking invoices</p>\r\n            </div>\r\n\r\n            {bookingPayments.length === 0 ? (\r\n                <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-8 text-center\">\r\n                    <DollarSign size={48} className=\"mx-auto mb-4 text-gray-400\" />\r\n                    <p className=\"text-gray-600 dark:text-gray-400\">No payment history found</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    {bookingPayments.map(({ booking, payments: bookingPs, total, paid }) => {\r\n                        const remaining = total - paid;\r\n                        const isFullyPaid = remaining <= 0;\r\n\r\n                        return (\r\n                            <div\r\n                                key={booking?.id}\r\n                                className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-5\"\r\n                            >\r\n                                <div className=\"flex items-start justify-between mb-4\">\r\n                                    <div>\r\n                                        <h3 className=\"text-lg font-semibold dark:text-white\">\r\n                                            {formatDate(booking?.date)}\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                                            {booking?.venue_name || 'Studio Session'}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className={`px-3 py-1 text-sm font-medium rounded-full ${\r\n                                        isFullyPaid\r\n                                            ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\r\n                                            : 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400'\r\n                                    }`}>\r\n                                        {isFullyPaid ? 'Paid in Full' : 'Payment Pending'}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-3 gap-4 mb-4 text-sm\">\r\n                                    <div>\r\n                                        <div className=\"text-gray-600 dark:text-gray-400\">Total</div>\r\n                                        <div className=\"text-lg font-semibold dark:text-white\">{formatCurrency(total)}</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-gray-600 dark:text-gray-400\">Paid</div>\r\n                                        <div className=\"text-lg font-semibold text-green-600 dark:text-green-400\">\r\n                                            {formatCurrency(paid)}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"text-gray-600 dark:text-gray-400\">Remaining</div>\r\n                                        <div className={`text-lg font-semibold ${\r\n                                            isFullyPaid\r\n                                                ? 'text-gray-600 dark:text-gray-400'\r\n                                                : 'text-yellow-600 dark:text-yellow-400'\r\n                                        }`}>\r\n                                            {formatCurrency(Math.max(0, remaining))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Payment History</div>\r\n                                    {bookingPs.map((payment) => (\r\n                                        <div\r\n                                            key={payment.id}\r\n                                            className=\"flex items-center justify-between text-sm bg-gray-50 dark:bg-gray-800 rounded-lg px-3 py-2\"\r\n                                        >\r\n                                            <div>\r\n                                                <span className=\"font-medium dark:text-white capitalize\">{payment.payment_type}</span>\r\n                                                <span className=\"text-gray-600 dark:text-gray-400 ml-2\">\r\n                                                    {payment.status === 'completed' ? `paid on ${formatDate(payment.paid_at)}` : `due ${formatDate(payment.due_date)}`}\r\n                                                </span>\r\n                                            </div>\r\n                                            <span className=\"font-semibold dark:text-white\">{formatCurrency(payment.amount)}</span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Profile Tab Component\r\n */\r\nfunction ProfileTab({ clientInfo, user, formatCurrency }) {\r\n    if (!clientInfo) {\r\n        return (\r\n            <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-8 text-center\">\r\n                <User size={48} className=\"mx-auto mb-4 text-gray-400\" />\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Client profile not found</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold dark:text-white mb-2\">My Profile</h2>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Manage your client profile information</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {/* Client Info */}\r\n                <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-6\">\r\n                    <h3 className=\"text-lg font-semibold dark:text-white mb-4\">Contact Information</h3>\r\n                    <div className=\"space-y-3\">\r\n                        <div>\r\n                            <label className=\"text-sm text-gray-600 dark:text-gray-400\">Name</label>\r\n                            <div className=\"font-medium dark:text-white\">{clientInfo.name || '-'}</div>\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-sm text-gray-600 dark:text-gray-400\">Email</label>\r\n                            <div className=\"font-medium dark:text-white\">{clientInfo.email || user?.email || '-'}</div>\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-sm text-gray-600 dark:text-gray-400\">Phone</label>\r\n                            <div className=\"font-medium dark:text-white\">{clientInfo.phone || '-'}</div>\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"text-sm text-gray-600 dark:text-gray-400\">Company</label>\r\n                            <div className=\"font-medium dark:text-white\">{clientInfo.company || '-'}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Stats */}\r\n                <div className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-6\">\r\n                    <h3 className=\"text-lg font-semibold dark:text-white mb-4\">Booking Statistics</h3>\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Total Bookings</span>\r\n                            <span className=\"font-semibold dark:text-white\">{clientInfo.total_bookings || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Total Spent</span>\r\n                            <span className=\"font-semibold text-green-600 dark:text-green-400\">\r\n                                {formatCurrency(clientInfo.total_spent || 0)}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">Client Type</span>\r\n                            <span className=\"font-semibold dark:text-white capitalize\">{clientInfo.client_type}</span>\r\n                        </div>\r\n                        {clientInfo.first_booking_date && (\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-600 dark:text-gray-400\">First Booking</span>\r\n                                <span className=\"font-medium dark:text-white\">\r\n                                    {new Date(clientInfo.first_booking_date).toLocaleDateString()}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                        {clientInfo.last_booking_date && (\r\n                            <div className=\"flex justify-between\">\r\n                                <span className=\"text-gray-600 dark:text-gray-400\">Last Booking</span>\r\n                                <span className=\"font-medium dark:text-white\">\r\n                                    {new Date(clientInfo.last_booking_date).toLocaleDateString()}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Notes */}\r\n                {clientInfo.notes && (\r\n                    <div className=\"md:col-span-2 bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-6\">\r\n                        <h3 className=\"text-lg font-semibold dark:text-white mb-4\">Notes</h3>\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">{clientInfo.notes}</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["ClientPortal","user","userData","studioId","useParams","activeTab","setActiveTab","useState","bookings","setBookings","templates","setTemplates","payments","setPayments","clientInfo","setClientInfo","loading","setLoading","useEffect","fetchBookings","fetchTemplates","fetchPayments","fetchClientInfo","data","error","t","clientBookingIds","b","clientPayments","p","handleRebook","template","date","time","handleDownloadInvoice","booking","formatDate","dateString","formatCurrency","amount","getStatusBadge","status","statusConfig","CheckCircle","XCircle","Clock","config","Icon","jsx","jsxs","RefreshCw","Calendar","Plus","DollarSign","User","BookingsTab","RebookTab","InvoicesTab","ProfileTab","onDownloadInvoice","filter","setFilter","now","filteredBookings","bookingDate","upcomingCount","pastCount","Download","onRebook","AlertCircle","paymentsByBooking","acc","payment","bookingPayments","bookingPs","total","paid","remaining","isFullyPaid"],"mappings":"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"}