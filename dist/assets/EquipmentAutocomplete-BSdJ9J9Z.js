import{r as l,j as t,S as E,X as N,L as S}from"./vendor-Ds9T-nZn.js";const _=[{id:"computer_audio_and_interfaces",label:"Computer Audio & Interfaces"},{id:"microphones_and_input_transducers",label:"Microphones"},{id:"mixing_consoles_and_control",label:"Mixing Consoles"},{id:"monitoring_and_playback",label:"Monitoring & Playback"},{id:"outboard_signal_processing",label:"Outboard Gear"}],L=()=>{const[n,u]=l.useState({}),[b,d]=l.useState(!0);return l.useEffect(()=>{(async()=>{{d(!1);return}})()},[]),{loading:b,data:n,categories:_}},q=()=>{const{data:n,loading:u}=L(),[b,d]=l.useState([]),r=l.useMemo(()=>{if(u||!n)return[];let c=[];try{Object.keys(n).forEach(o=>{const p=n[o];p&&Object.entries(p).forEach(([g,e])=>{if(!e||typeof e!="object")return;const h=e.brand||e.searchTokens&&e.searchTokens[0]||"Unknown",i=e.name||e.searchTokens&&e.searchTokens[1]||"Unknown Item",f=e.searchTokens||[],x=[i,h,...f].join(" ").toLowerCase();c.push({id:g,name:i,brand:h,category:e.category||o,subCategory:e.subCategory||"General",searchString:x,original:e})})})}catch(o){console.warn("Error processing equipment data:",o)}return c},[n,u]);return{searchEquipment:c=>{if(!c||c.trim().length<1){d([]);return}const o=c.toLowerCase().trim().split(/\s+/),p=r.filter(g=>o.every(e=>g.searchString.includes(e))).slice(0,50);d(p)},results:b,loading:u}};function T({onSelect:n,placeholder:u="Search for gear (e.g. U87, SSL)...",className:b="",value:d,onChange:r,multi:y=!1}){const{searchEquipment:c,results:o,loading:p}=q(),[g,e]=l.useState(""),[h,i]=l.useState(!1),f=l.useRef(null),x=d!==void 0?d:g;l.useEffect(()=>{function s(a){f.current&&!f.current.contains(a.target)&&i(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[f]);const k=s=>{const a=s.target.value;r?r(a):e(a);const m=y?a.split(",").pop().trim():a;m.length>=2?(c(m),i(!0)):i(!1)},w=s=>{const a=s.brand!=="Various"&&s.brand!=="Unknown"?`${s.brand} ${s.name}`:s.name;if(y){const m=x.split(",");m.pop();const j=[...m.map(v=>v.trim()).filter(Boolean),a].join(", ")+", ";r?r(j):e(j)}else n&&n({...s,fullName:a}),r?r(a):e(a);i(!1)};return t.jsxs("div",{ref:f,className:`relative ${b}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx(E,{className:"absolute left-3 top-3 text-gray-400",size:16}),t.jsx("input",{className:"w-full pl-9 pr-8 p-3 text-sm border rounded-xl bg-white dark:bg-[#1f2128] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none transition-all",placeholder:u,value:x,onChange:k,onFocus:s=>k(s)}),x&&t.jsx("button",{type:"button",onClick:()=>{r?r(""):e(""),i(!1)},className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:t.jsx(N,{size:16})})]}),h&&o.length>0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl max-h-60 overflow-y-auto animate-in fade-in slide-in-from-top-2",children:t.jsx("div",{className:"py-1",children:o.map(s=>{var a;return t.jsxs("button",{type:"button",onClick:()=>w(s),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b dark:border-gray-700/50 last:border-0 group",children:[t.jsx("div",{className:"font-bold text-sm dark:text-white group-hover:text-brand-blue transition-colors",children:s.name}),t.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1.5 mt-0.5",children:[t.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:s.brand}),t.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600"}),t.jsx("span",{className:"opacity-75",children:(a=s.subCategory)==null?void 0:a.replace(/_/g," ")})]})]},s.id)})})}),h&&p&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl p-4 text-center text-gray-500 flex items-center justify-center gap-2",children:[t.jsx(S,{className:"animate-spin",size:16})," Searching database..."]})]})}export{T as E};
