const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-_fFQAoDY.js","assets/vendor-DTDDt3fP.js","assets/vendor-firebase-C38qHjbM.js","assets/chat-BCnoKXi-.js","assets/vendor-convex-DiXsReyd.js","assets/vendor-framer-CzAUfL-F.js","assets/edu-Bzk_yg6o.js","assets/SocialFeed-DpN_4Ppr.js","assets/ReportModal-DUITMmQ7.js","assets/vendor-audio-Bu2lAtPy.js","assets/Inputs-CuyMtJZQ.js","assets/vendor-maps-BqIMtwYB.js","assets/vendor-maps-Dgihpmma.css","assets/BookingSystem-BCQzaFqe.js","assets/useEquipmentDatabase-vs4GZ1qU.js","assets/Marketplace-CxXEgGuf.js","assets/ChatInterface-Bl_dCry2.js","assets/StudioManager-DZXzajd2.js","assets/EquipmentAutocomplete-CagN4z5F.js","assets/ProfileManager-D668m8gb.js","assets/SettingsTab-NbbZQNWV.js","assets/TechServices-DzQlzVXh.js","assets/PaymentsManager-DATjyqa8.js","assets/vendor-stripe-OXK3Micb.js","assets/LabelManager-C4X2nIhr.js"])))=>i.map(i=>d[i]);
var pt=Object.defineProperty;var yt=(t,s,a)=>s in t?pt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var Re=(t,s,a)=>yt(t,typeof s!="symbol"?s+"":s,a);import{j as e,p as jt,N as Te,T as wt,X as he,aI as kt,aJ as vt,aK as Nt,aL as Me,aM as St,_ as Oe,r,aN as Ct,aO as Lt,a7 as Ie,aP as Je,aQ as zt,aR as Xe,aS as Ue,aT as Et,aU as we,a as xe,aV as Rt,aW as Pt,aX as At,aY as _t,aZ as Ft,ae as De,a_ as et,A as tt,a$ as $t,U as ke,d as Tt,a4 as st,Q as at,a5 as Mt,J as rt,Z as Ot,a3 as Ae,u as It,b0 as Bt,b as Wt,G as Vt,ah as Ht,h as ie,L as ee,Y as ot,b1 as qt,W as qe,S as lt,a2 as Gt,b2 as Yt,b3 as Kt,b4 as _e,ac as nt,ad as Qt,b5 as Zt,B as Jt,n as Xt,R as it,v as Ut,b6 as Dt,b7 as es}from"./vendor-DTDDt3fP.js";import{I as ts,C as U,H as ne,q as ae,L as Fe,K as ue,G as D,A as E,E as ve,N as Ne,O as Be,w as ce,D as ss,k as Ge,P as as,Q as rs,R as os,S as ls,M as ns,T as ye,U as is,V as je,B as $e,a as ds,d as cs,W as xs}from"./vendor-firebase-C38qHjbM.js";import{U as We,d as v,g as z,a as le,b as de,c as Ye,e as us}from"./chat-BCnoKXi-.js";import{A as me,m as re}from"./vendor-framer-CzAUfL-F.js";import{u as ms,A as gs,a as hs,S as fs}from"./edu-Bzk_yg6o.js";import{M as bs,T as ps,C as Pe,u as ys}from"./vendor-maps-BqIMtwYB.js";import{b as js}from"./vendor-convex-DiXsReyd.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();const ws="modulepreload",ks=function(t){return"/"+t},Ke={},W=function(s,a,c){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),h=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));l=Promise.allSettled(a.map(x=>{if(x=ks(x),x in Ke)return;Ke[x]=!0;const g=x.endsWith(".css"),d=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${d}`))return;const f=document.createElement("link");if(f.rel=g?"stylesheet":ws,g||(f.as="script"),f.crossOrigin="",f.href=x,h&&f.setAttribute("nonce",h),document.head.appendChild(f),g)return new Promise((b,m)=>{f.addEventListener("load",b),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${x}`)))})}))}function o(n){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=n,window.dispatchEvent(h),!h.defaultPrevented)throw n}return l.then(n=>{for(const h of n||[])h.status==="rejected"&&o(h.reason);return s().catch(o)})},dt="/assets/SeshNx-PNG%20cCropped%20white%20text-BvB6QJif.png",ct="/assets/SeshNx-PNG%20cCropped-mikqxod_.png",vs=({type:t})=>{const s={size:14},a={follow:e.jsx(Oe,{...s}),like:e.jsx(St,{...s}),comment:e.jsx(Me,{...s}),mention:e.jsx(Nt,{...s}),reply:e.jsx(vt,{...s}),save:e.jsx(kt,{...s})},c={follow:"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue/20",like:"bg-red-100 text-red-500 dark:bg-red-900/30 dark:text-red-400",comment:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",mention:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",reply:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",save:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400"};return e.jsx("div",{className:`p-1.5 rounded-full ${c[t]||"bg-gray-100 text-gray-500"}`,children:a[t]||e.jsx(Te,{size:14})})},Ns=t=>{if(!t)return"";const s=t.toMillis?new Date(t.toMillis()):new Date(t),c=new Date-s,l=Math.floor(c/6e4),o=Math.floor(l/60),n=Math.floor(o/24);return l<1?"Just now":l<60?`${l}m`:o<24?`${o}h`:n<7?`${n}d`:s.toLocaleDateString()},Ss=({notification:t,onMarkAsRead:s,onDelete:a,onUserClick:c,onPostClick:l})=>{const o=()=>{t.read||s(t.id),t.type==="follow"&&c?c(t.fromUserId):t.postId&&l&&l(t.postId)};return e.jsxs(re.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:`
                p-3 cursor-pointer border-b dark:border-gray-700 last:border-0 
                flex gap-3 items-start group transition-colors
                ${t.read?"hover:bg-gray-50 dark:hover:bg-gray-800":"bg-blue-50/50 dark:bg-blue-900/10 hover:bg-blue-50 dark:hover:bg-blue-900/20"}
            `,onClick:o,children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx(We,{src:t.fromUserPhoto,name:t.fromUserName,size:"sm"}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx(vs,{type:t.type})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("p",{className:"text-sm dark:text-gray-200 leading-snug",children:[e.jsx("span",{className:"font-bold hover:text-brand-blue transition-colors",children:t.fromUserName})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:t.message})]}),e.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap shrink-0",children:Ns(t.timestamp)})]}),t.postPreview&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 line-clamp-1 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:['"',t.postPreview,'"']}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-brand-blue rounded-full absolute right-3 top-1/2 -translate-y-1/2"})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),a(t.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-all text-gray-400 hover:text-red-500 shrink-0",children:e.jsx(he,{size:14})})]})};function Cs({notifications:t,unreadCount:s,loading:a,onMarkAsRead:c,onMarkAllAsRead:l,onDeleteNotification:o,onClearAll:n,onUserClick:h,onPostClick:x,onClose:g}){return e.jsxs("div",{className:"absolute right-0 top-full mt-3 w-80 sm:w-96 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-2xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"p-3 px-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold dark:text-white text-sm",children:"Notifications"}),s>0&&e.jsx("span",{className:"text-xs bg-brand-blue text-white px-2 py-0.5 rounded-full font-bold animate-pulse",children:s})]}),s>0&&e.jsxs("button",{onClick:l,className:"text-xs text-brand-blue hover:text-blue-700 font-medium flex items-center gap-1 transition",children:[e.jsx(jt,{size:14}),"Mark all read"]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:a?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Loading..."})]}):t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-3",children:e.jsx(Te,{size:24,className:"opacity-30"})}),e.jsx("p",{className:"text-sm font-medium dark:text-gray-400",children:"All caught up!"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No new notifications"})]}):e.jsx(me,{mode:"popLayout",children:t.map(d=>e.jsx(Ss,{notification:d,onMarkAsRead:c,onDelete:o,onUserClick:h,onPostClick:x},d.id))})}),t.length>0&&e.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-[#23262f] border-t dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("button",{onClick:n,className:"text-xs text-gray-400 hover:text-red-500 font-medium flex items-center gap-1 transition px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(wt,{size:12}),"Clear all"]}),e.jsx("button",{onClick:g,className:"text-xs text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:"Close"})]})]})}function Ls({count:t}){return t===0?null:e.jsx(re.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] bg-red-500 rounded-full text-[10px] text-white font-bold flex items-center justify-center border-2 border-white dark:border-dark-card",children:t>99?"99+":t})}function zs(t,s=50){const[a,c]=r.useState([]),[l,o]=r.useState(0),[n,h]=r.useState(!0);r.useEffect(()=>{if(!t){h(!1);return}const b=U(v,z(t).notifications),m=ae(b,ue("timestamp","desc"),Fe(s)),S=D(m,R=>{const p=R.docs.map(u=>({id:u.id,...u.data()}));c(p),o(p.filter(u=>!u.read).length),h(!1)},R=>{console.error("Notifications listener error:",R),h(!1)});return()=>S()},[t,s]);const x=r.useCallback(async b=>{if(t)try{const m=E(v,z(t).notifications,b);await ve(m,{read:!0})}catch(m){console.error("Mark as read error:",m)}},[t]),g=r.useCallback(async()=>{if(!(!t||l===0))try{const b=Ne(v);a.filter(S=>!S.read).forEach(S=>{const R=E(v,z(t).notifications,S.id);b.update(R,{read:!0})}),await b.commit()}catch(b){console.error("Mark all as read error:",b)}},[t,a,l]),d=r.useCallback(async b=>{if(t)try{const m=E(v,z(t).notifications,b);await ve(m,{deleted:!0})}catch(m){console.error("Delete notification error:",m)}},[t]),f=r.useCallback(async()=>{if(t)try{const b=Ne(v);a.forEach(m=>{const S=E(v,z(t).notifications,m.id);b.update(S,{deleted:!0})}),await b.commit()}catch(b){console.error("Clear all error:",b)}},[t,a]);return{notifications:a.filter(b=>!b.deleted),unreadCount:l,loading:n,markAsRead:x,markAllAsRead:g,deleteNotification:d,clearAll:f}}async function Sa({targetUserId:t,type:s,fromUserId:a,fromUserName:c,fromUserPhoto:l,postId:o=null,postPreview:n=null,commentId:h=null,message:x}){if(!(!t||t===a))try{await ts(U(v,z(t).notifications),{type:s,fromUserId:a,fromUserName:c,fromUserPhoto:l||null,postId:o,postPreview:n,commentId:h,message:x,read:!1,timestamp:ne()})}catch(g){console.error("Create notification error:",g)}}function Es({user:t,userData:s,subProfiles:a,darkMode:c,toggleTheme:l,activeTab:o,setActiveTab:n,onMenuClick:h,onRoleSwitch:x,openPublicProfile:g}){var T;const[d,f]=r.useState(!1),[b,m]=r.useState(!1),[S,R]=r.useState(!1),p=r.useRef(null),u=r.useRef(null),{notifications:k,unreadCount:y,loading:M,markAsRead:P,markAllAsRead:C,deleteNotification:F,clearAll:j}=zs(t==null?void 0:t.uid),L=(s==null?void 0:s.activeProfileRole)||((T=s==null?void 0:s.accountTypes)==null?void 0:T[0])||"User",q=(s==null?void 0:s.accountTypes)||[],O=["Student","Instructor","Intern","Admin"],Q=q.some(w=>O.includes(w)),A=o.startsWith("edu"),te=w=>{if(!w||w==="Main"||w==="Fan"||w==="User")return(s==null?void 0:s.effectiveDisplayName)||(s==null?void 0:s.firstName)||"User";const Z=a==null?void 0:a[w];return(Z==null?void 0:Z.displayName)||(s==null?void 0:s.effectiveDisplayName)||(s==null?void 0:s.firstName)||"User"},N=te(L),V=()=>{n(L==="Student"?"edu-student":L==="Intern"?"edu-intern":"edu-overview")};r.useEffect(()=>{{R(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{R(!0)})});const w=setTimeout(()=>R(!1),600);return()=>clearTimeout(w)}},[L]),r.useEffect(()=>{function w(Z){p.current&&!p.current.contains(Z.target)&&f(!1),u.current&&!u.current.contains(Z.target)&&m(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[p,u]);const I=w=>{f(!1),g&&g(w)},J=w=>{f(!1),n("feed")},$=w=>{x&&x(w),m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed top-0 bottom-0 w-full pointer-events-none z-[9999] 
          bg-gradient-to-r from-transparent via-white/30 dark:via-white/10 to-transparent
          ${S?"left-[-100%] transition-all duration-500 ease-out":"left-[100%] transition-none duration-0"}
        `}),e.jsxs("nav",{className:"h-16 bg-white dark:bg-dark-card border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 shrink-0 z-20 sticky top-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:h,className:"p-2 -ml-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 lg:hidden",children:e.jsx(Ct,{size:24})}),e.jsx("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("dashboard"),children:e.jsx("img",{src:c?dt:ct,alt:"SeshNx Logo",className:"h-8 w-auto object-contain transition-opacity duration-300"})})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[Q&&e.jsxs("div",{className:"hidden md:flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1 border dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>n("dashboard"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-2 transition-all ${A?"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200":"bg-white dark:bg-gray-600 shadow-sm text-brand-blue dark:text-white"}`,children:[e.jsx(Lt,{size:14})," Studio"]}),e.jsxs("button",{onClick:V,className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-2 transition-all ${A?"bg-white dark:bg-gray-600 shadow-sm text-indigo-600 dark:text-white":"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[e.jsx(Ie,{size:14})," Education"]})]}),q.length>1&&e.jsxs("div",{className:"relative hidden sm:flex items-center gap-3",ref:u,children:[e.jsxs("button",{onClick:()=>m(!b),className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 text-xs font-bold transition border border-gray-200 dark:border-gray-700",children:[e.jsx(Je,{size:12,className:`text-brand-blue shrink-0 transition-transform ${S?"rotate-180 duration-500":""}`}),e.jsx("span",{children:L}),e.jsx(zt,{size:12,className:`shrink-0 transition-transform ${b?"rotate-180":""}`})]}),e.jsxs("div",{className:"flex flex-col leading-tight",children:[e.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:"Posting as"}),e.jsx("span",{className:"text-xs font-bold dark:text-white truncate max-w-[150px]",children:N})]}),b&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-56 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-1 duration-200",children:[e.jsx("div",{className:"p-2 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:e.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider pl-2",children:"Switch Profile Context"})}),e.jsx("div",{className:"p-1",children:q.map(w=>{const Z=te(w);return e.jsxs("button",{onClick:()=>$(w),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition flex items-center justify-between ${L===w?"bg-blue-50 dark:bg-blue-900/20 text-brand-blue":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:Z}),e.jsx("span",{className:"text-[10px] opacity-70 font-normal uppercase",children:w})]}),L===w&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-brand-blue"})]},w)})})]})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300",children:c?e.jsx(Xe,{size:20}):e.jsx(Ue,{size:20})}),e.jsxs("div",{className:"relative",ref:p,children:[e.jsxs("button",{className:`relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition ${d?"bg-gray-100 dark:bg-gray-800 text-brand-blue":""}`,onClick:()=>f(!d),children:[e.jsx(Te,{size:20}),e.jsx(Ls,{count:y})]}),d&&e.jsx(Cs,{notifications:k,unreadCount:y,loading:M,onMarkAsRead:P,onMarkAllAsRead:C,onDeleteNotification:F,onClearAll:j,onUserClick:I,onPostClick:J,onClose:()=>f(!1)})]}),e.jsx(We,{src:s==null?void 0:s.photoURL,name:N,size:"sm",className:"border-2 border-transparent hover:border-brand-blue transition",onClick:()=>n("profile")})]})]})]})}function Rs({userData:t,activeTab:s,setActiveTab:a,sidebarOpen:c,setSidebarOpen:l,handleLogout:o}){var S,R,p,u;const{isStudent:n,isStaff:h}=ms(),x=[{id:"dashboard",icon:e.jsx(xe,{size:18}),label:"Dashboard"},{id:"feed",icon:e.jsx(Rt,{size:18}),label:"SocialNx"},{id:"marketplace",icon:e.jsx(Pt,{size:18}),label:"Marketplace"},{id:"tech",icon:e.jsx(At,{size:18}),label:"Tech Services"},{id:"bookings",icon:e.jsx(_t,{size:18}),label:"Bookings"},{id:"messages",icon:e.jsx(Me,{size:18}),label:"Messages"},{id:"payments",icon:e.jsx(Ft,{size:18}),label:"Billing"},{id:"profile",icon:e.jsx(De,{size:18}),label:"Profile"}];if((S=t==null?void 0:t.accountTypes)!=null&&S.includes("Studio")){const k=x.findIndex(y=>y.id==="profile");k!==-1&&x.splice(k,0,{id:"studio-ops",icon:e.jsx(Et,{size:18}),label:"Studio Ops",highlight:!0})}const g=(R=t==null?void 0:t.accountTypes)==null?void 0:R.includes("Intern");if(n||g||h||(p=t==null?void 0:t.accountTypes)!=null&&p.includes("student")){const k=x.findIndex(P=>P.id==="payments");let y="EDU Panel";g?y="Internship":h&&(y="School Admin");let M="edu-overview";g?M="edu-intern":n&&(M="edu-student"),x.splice(k,0,{id:M,icon:e.jsx(Ie,{size:18}),label:y,highlight:!0})}const d=o||(()=>Be(le)),f=k=>{a(k);const y=window.innerWidth<1024;l&&(y||c)&&l(!1)},b=({isMobile:k})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 py-4 overflow-y-auto scrollbar-hide",children:[k&&e.jsxs("div",{className:"px-4 mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:"Menu"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:e.jsx(he,{size:20})})]}),e.jsx("nav",{className:"space-y-1 px-2",children:x.map(y=>e.jsxs("button",{onClick:()=>f(y.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition
                ${s===y.id?"bg-blue-50 text-brand-blue dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}
                ${y.highlight?"text-amber-600 dark:text-amber-500":""}
                `,children:[y.icon,y.label]},y.id))}),e.jsx("div",{className:"mt-auto px-2 pt-4",children:e.jsxs("button",{onClick:()=>f("legal"),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium w-full transition ${s==="legal"?"bg-blue-50 text-brand-blue dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[e.jsx(we,{size:18}),"Legal Center"]})})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 shrink-0 bg-white dark:bg-[#1f2128]",children:e.jsxs("button",{onClick:d,className:"flex items-center gap-2 text-red-500 text-sm font-medium hover:opacity-80 px-2 w-full py-2 rounded hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[e.jsx(et,{size:16})," Sign Out"]})})]});if((u=t==null?void 0:t.accountTypes)==null?void 0:u.some(k=>["Label","Agent"].includes(k))){const k=x.findIndex(y=>y.id==="bookings");k!==-1&&x.splice(k,0,{id:"roster",icon:e.jsx(we,{size:18}),label:"Label Roster",highlight:!0})}return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden lg:flex w-64 bg-white dark:bg-[#1f2128] border-r border-gray-200 dark:border-gray-700 flex-col h-full shrink-0 relative z-30",children:e.jsx(b,{isMobile:!1})}),e.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] transition-opacity duration-300 lg:hidden ${c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>l(!1)}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-[10000] w-72 bg-white dark:bg-[#1f2128] shadow-2xl transform transition-transform duration-300 cubic-bezier(0.4, 0, 0.2, 1) flex flex-col h-full lg:hidden ${c?"translate-x-0":"-translate-x-full"}`,children:e.jsx(b,{isMobile:!0})})]})}function Ps({activeTab:t,setActiveTab:s,sidebarOpen:a,setSidebarOpen:c,isGlobalAdmin:l}){const o=[{id:"edu-overview",icon:$t,label:"Overview"},{id:"edu-roster",icon:ke,label:"Student Roster"},{id:"edu-hours",icon:Tt,label:"Internship Hours"},{id:"edu-instructors",icon:Oe,label:"Staff Management"},{id:"edu-roles",icon:st,label:"Role Permissions"},{id:"edu-resources",icon:at,label:"Resource Rules"},{id:"edu-news",icon:Mt,label:"Announcements"},{id:"edu-partners",icon:rt,label:"Partnerships"},{id:"edu-evaluations",icon:Ie,label:"Grading & Evals"},{id:"edu-cohorts",icon:ke,label:"Cohorts"},{id:"edu-audit",icon:Ot,label:"Audit Logs"},{id:"edu-settings",icon:De,label:"School Settings"}],n=x=>{s(x),c&&c(!1)},h=()=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>s("dashboard"),className:"flex items-center gap-2 text-xs font-bold text-gray-500 hover:text-brand-blue transition mb-4",children:[e.jsx(tt,{size:14})," Back to Studio"]}),e.jsx("h2",{className:"text-lg font-extrabold dark:text-white tracking-tight px-1",children:"EDU Control"})]}),e.jsx("div",{className:"flex-1 py-4 overflow-y-auto custom-scrollbar px-3 space-y-1",children:o.map(x=>e.jsxs("button",{onClick:()=>n(x.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                        ${t===x.id?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}
                        `,children:[e.jsx(x.icon,{size:18}),x.label]},x.id))}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 shrink-0 bg-gray-50 dark:bg-[#23262f]",children:e.jsxs("div",{className:"flex items-center gap-3 px-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold text-xs",children:"EA"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold dark:text-white truncate",children:"EDU Admin"}),e.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:"School Management"})]}),e.jsx("button",{onClick:()=>Be(le),className:"text-gray-400 hover:text-red-500",children:e.jsx(et,{size:16})})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden lg:flex w-64 bg-white dark:bg-[#1f2128] border-r border-gray-200 dark:border-gray-700 flex-col h-full shrink-0 relative z-30",children:e.jsx(h,{})}),e.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] transition-opacity duration-300 lg:hidden ${a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>c(!1)}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-[10000] w-72 bg-white dark:bg-[#1f2128] shadow-2xl transform transition-transform duration-300 cubic-bezier(0.4, 0, 0.2, 1) flex flex-col h-full lg:hidden ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(h,{})})]})}const As=async t=>{if(!t||t.length<5)return null;try{const s=await fetch(`https://api.zippopotam.us/us/${t}`);if(!s.ok)return null;const c=(await s.json()).places[0];return{lat:parseFloat(c.latitude),lng:parseFloat(c.longitude),name:c["place name"],state:c["state abbreviation"],cityState:`${c["place name"]}, ${c["state abbreviation"]}`}}catch(s){return console.warn("Geocoding failed:",s),null}},_s=async t=>{if(!t||t.length<3)return{count:0,density:"#6B7280",label:"Scanning..."};try{const s=t.substring(0,3),a=s+"",c=U(v,"artifacts",de,"public","data","profiles"),l=ae(c,ce("zip",">=",s),ce("zip","<=",a)),n=(await ss(l)).data().count;let h="#3D84ED",x="Quiet Area";return n>25&&(h="#10B981",x="Active Area"),n>100&&(h="#F59E0B",x="Buzzing"),n>500&&(h="#EF4444",x="Hotspot"),{count:n,density:h,label:x}}catch(s){return console.warn("Regional stats failed:",s),{count:0,density:"#9CA3AF",label:"Unknown Region"}}};function xt({isEmbedded:t=!1}){const[s,a]=r.useState("tos"),c=[{id:"tos",label:"Terms of Service",icon:It},{id:"privacy",label:"Privacy Policy",icon:at},{id:"cookies",label:"Cookie Policy",icon:Bt},{id:"dmca",label:"DMCA & Copyright",icon:Ae}];return e.jsxs("div",{className:`flex flex-col md:flex-row bg-white dark:bg-[#1f2128] h-full ${t?"":"max-w-6xl mx-auto rounded-2xl shadow-xl border dark:border-gray-700 overflow-hidden my-8 min-h-[600px]"}`,children:[e.jsxs("div",{className:"w-full md:w-72 bg-gray-50 dark:bg-[#23262f] border-r dark:border-gray-700 flex flex-col shrink-0",children:[!t&&e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("h2",{className:"text-2xl font-extrabold dark:text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"text-brand-blue"})," Legal Center"]})}),e.jsx("div",{className:"p-4 space-y-1 overflow-y-auto flex-1",children:c.map(l=>e.jsxs("button",{onClick:()=>a(l.id),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all duration-200 group text-left
                            ${s===l.id?"bg-white dark:bg-[#2c2e36] text-brand-blue shadow-sm border border-gray-200 dark:border-gray-600":"text-gray-600 dark:text-gray-400 hover:bg-gray-200/50 dark:hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{size:18,className:s===l.id?"text-brand-blue":"text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"font-bold text-sm",children:l.label})]}),s===l.id&&e.jsx(Wt,{size:16,className:"text-brand-blue"})]},l.id))}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/10 border-t border-blue-100 dark:border-blue-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400 font-bold text-xs mb-2",children:[e.jsx(Vt,{size:14})," US Compliance Standard"]}),e.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-300 leading-relaxed opacity-80",children:"Documents compliant with CCPA, DMCA, and federal payment regulations."})]})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-[#1f2128] relative overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-12 custom-scrollbar",children:e.jsxs("div",{className:"max-w-3xl mx-auto animate-in fade-in slide-in-from-bottom-2 duration-300",children:[s==="tos"&&e.jsx(Fs,{}),s==="privacy"&&e.jsx($s,{}),s==="cookies"&&e.jsx(Ts,{}),s==="dmca"&&e.jsx(Ms,{}),e.jsx("div",{className:"mt-20 pt-8 border-t dark:border-gray-800",children:e.jsx("p",{className:"text-xs text-gray-400 text-center font-medium",children:"Last updated: November 29, 2025 • SeshNx Legal Department"})})]})})})]})}const Se=({children:t})=>e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-8 tracking-tight",children:t}),K=({title:t,children:s})=>e.jsxs("div",{className:"mb-10",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:t}),e.jsx("div",{className:"text-gray-600 dark:text-gray-300 leading-7 text-sm md:text-base space-y-4",children:s})]}),ge=({items:t})=>e.jsx("ul",{className:"space-y-2 mt-2",children:t.map((s,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-2 w-1.5 h-1.5 rounded-full bg-brand-blue shrink-0"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:s}})]},a))}),Fs=()=>e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:"Terms of Service"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Welcome to SeshNx. By accessing or using our platform, you agree to be bound by these Terms of Service. Please read them carefully."}),e.jsx(K,{title:"1. Platform Services",children:e.jsx("p",{children:'SeshNx provides a marketplace and collaboration tool for music professionals ("Creatives") and educational institutions ("Schools"). We facilitate bookings, payments, and content sharing but are not a party to the actual service contracts between users.'})}),e.jsx(K,{title:"2. User Accounts",children:e.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account credentials. You must be at least 13 years old to use SeshNx. Users under 18 require parental consent or School authorization to participate in educational programs."})}),e.jsxs(K,{title:"3. Payments & Fees",children:[e.jsxs("p",{children:["Payments are processed securely via Stripe. By using our payment features, you agree to the ",e.jsx("a",{href:"https://stripe.com/connect-account/legal",target:"_blank",rel:"noreferrer",className:"text-brand-blue hover:underline font-bold",children:"Stripe Connected Account Agreement"}),"."]}),e.jsx("p",{children:"SeshNx charges a platform fee on transactions (ranging from 0% to 20% depending on your subscription tier), which is automatically deducted at the time of payout."})]}),e.jsx(K,{title:"4. User Generated Content",children:e.jsx("p",{children:"You retain full ownership of the content you upload (audio, images, text). By uploading, you grant SeshNx a non-exclusive, worldwide license to display, transcode, and distribute your content strictly for the purpose of operating the service."})}),e.jsxs(K,{title:"5. Prohibited Conduct",children:[e.jsx("p",{children:"You agree not to use SeshNx for:"}),e.jsx(ge,{items:["Harassment, hate speech, or bullying.","Distribution of malware or unauthorized automated scraping.","Fraudulent transactions or money laundering.","Copyright infringement or uploading content you do not own."]}),e.jsx("p",{className:"mt-2",children:"We reserve the right to suspend or ban accounts violating these rules without prior notice."})]})]}),$s=()=>e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:"Privacy Policy"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Your privacy is critical to us. This policy explains how we collect, use, and share your data in compliance with US and international standards."}),e.jsx(K,{title:"1. Information We Collect",children:e.jsx(ge,{items:["<strong>Account Data:</strong> Name, email, password (hashed), and profile bio.","<strong>Financial Data:</strong> Bank account and tax info (processed and stored securely via Stripe; SeshNx does not store full credit card numbers).","<strong>Usage Data:</strong> Location (for studio search), IP address, and browser type.","<strong>Content:</strong> Direct messages, audio files, and images you upload."]})}),e.jsx(K,{title:"2. How We Use Information",children:e.jsx("p",{children:"We use your data to: provide and personalize services, process payments, verify student enrollment with partner schools, improve platform performance, and comply with legal obligations."})}),e.jsxs(K,{title:"3. Data Sharing",children:[e.jsx("p",{children:"We do not sell your personal data. We only share data with:"}),e.jsx(ge,{items:["<strong>Service Providers:</strong> Google (Hosting/Auth), Stripe (Payments).","<strong>Educational Institutions:</strong> If you link a student account, your School Administrators can view your internship activity logs.","<strong>Legal Authorities:</strong> When required by valid legal process or subpoena."]})]}),e.jsx(K,{title:"4. CCPA / California Rights",children:e.jsxs("p",{children:["California residents have the right to request access to or deletion of their personal data. Please contact ",e.jsx("strong",{children:"legal@seshnx.com"})," to exercise these rights."]})})]}),Ts=()=>e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:"Cookie Policy"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"SeshNx uses cookies to enhance your experience. By using our site, you consent to our use of cookies."}),e.jsx(K,{title:"Types of Cookies We Use",children:e.jsx(ge,{items:["<strong>Essential Cookies:</strong> Required for login authentication (e.g., Firebase Auth tokens). The site cannot function without these.","<strong>Functional Cookies:</strong> Remember your preferences, such as Dark Mode settings and Sidebar state.","<strong>Analytics Cookies:</strong> Help us understand how you use the site to improve features. These are aggregated and anonymous."]})}),e.jsx(K,{title:"Managing Cookies",children:e.jsx("p",{children:"You can control or delete cookies through your browser settings. However, please note that disabling Essential Cookies will prevent you from logging in to SeshNx."})})]}),Ms=()=>e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:"DMCA & Copyright"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"SeshNx respects the intellectual property rights of others and complies with the Digital Millennium Copyright Act (DMCA)."}),e.jsxs(K,{title:"Reporting Infringement",children:[e.jsxs("p",{children:["If you believe your copyrighted work has been infringed on SeshNx, please send a notice to our Designated Agent at ",e.jsx("strong",{children:"legal@seshnx.com"})," including:"]}),e.jsx(ge,{items:["Identification of the copyrighted work claimed to have been infringed.","Identification of the infringing material (URL or Post ID).","Your contact information (Email, Phone).","A statement of good faith belief that the use is unauthorized.","A statement, under penalty of perjury, that the information is accurate and you are the copyright owner."]})]}),e.jsx(K,{title:"Counter-Notices",children:e.jsx("p",{children:"If your content was removed by mistake, you may file a counter-notice. We may restore the content within 10-14 business days if the complainant does not file a court action against you."})})]}),Os=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),Is=["Student","Instructor","Intern","Admin"];function Bs({lat:t,lng:s}){const a=ys();return r.useEffect(()=>{a.setView([t,s],11)},[t,s,a]),null}function Ws({zip:t}){const[s,a]=r.useState({center:[34.0522,-118.2437],userCount:0,densityColor:"gray",locationName:"",regionLabel:"",isValid:!1,loading:!1});return r.useEffect(()=>{if(!t||t.length<5)return;const l=setTimeout(async()=>{a(n=>({...n,loading:!0}));const o=await As(t);if(o){const{count:n,density:h,label:x}=await _s(t);a({center:[o.lat,o.lng],userCount:n,densityColor:h,locationName:o.cityState,regionLabel:x,isValid:!0,loading:!1})}else a(n=>({...n,loading:!1}))},800);return()=>clearTimeout(l)},[t]),e.jsxs("div",{className:"w-full h-36 rounded-xl overflow-hidden relative border dark:border-gray-600 shadow-inner animate-in fade-in duration-500 bg-gray-100 dark:bg-[#1f2128]",children:[e.jsxs(bs,{center:s.center,zoom:11,scrollWheelZoom:!1,zoomControl:!1,className:"h-full w-full",style:{background:"transparent"},children:[e.jsx(ps,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://carto.com/attributions">CARTO</a>'}),e.jsx(Bs,{lat:s.center[0],lng:s.center[1]}),s.isValid&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{center:s.center,radius:8e3,pathOptions:{color:s.densityColor,fillColor:s.densityColor,fillOpacity:.05,stroke:!1}}),e.jsx(Pe,{center:s.center,radius:4e3,pathOptions:{color:s.densityColor,fillColor:s.densityColor,fillOpacity:.15,stroke:!1}}),e.jsx(Pe,{center:s.center,radius:400,pathOptions:{color:"white",fillColor:s.densityColor,fillOpacity:.9,weight:2}})]})]}),e.jsxs("div",{className:"absolute bottom-3 right-3 bg-white/95 dark:bg-black/85 backdrop-blur-md p-2.5 rounded-xl shadow-lg z-[400] border border-gray-100 dark:border-gray-700 flex flex-col items-end min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${s.loading?"animate-ping":""} shadow-sm`,style:{backgroundColor:s.isValid?s.densityColor:"gray"}}),e.jsx("div",{className:"text-xs font-extrabold text-gray-700 dark:text-gray-100 leading-none",children:s.loading?"Scanning...":s.isValid?`${s.userCount} Nearby`:"Enter Zip"})]}),s.isValid&&!s.loading&&e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium uppercase tracking-wider",children:s.regionLabel}),e.jsx("span",{className:"text-[9px] text-gray-400 font-normal truncate max-w-[140px]",children:s.locationName})]})]})]})}function Qe({darkMode:t,toggleTheme:s,user:a,onSuccess:c}){const[l,o]=r.useState(1),[n,h]=r.useState("login"),[x,g]=r.useState(!1),[d,f]=r.useState({email:"",password:"",firstName:"",lastName:"",zip:"",roles:[]}),[b,m]=r.useState(""),[S,R]=r.useState(!1),[p,u]=r.useState("auto"),[k,y]=r.useState(!1),[M,P]=r.useState(!1),C=r.useRef(null),[F,j]=r.useState(!1),[L,q]=r.useState(""),[O,Q]=r.useState([]),[A,te]=r.useState(null),[N,V]=r.useState(""),[I,J]=r.useState(""),[$,T]=r.useState(""),[w,Z]=r.useState(null),[oe,Ce]=r.useState(null),Le=gs.filter(i=>!Is.includes(i)),fe=()=>n==="signup"?"Create your Account":n==="forgot"?"Password Recovery":n==="onboarding"?"Finalize Setup":null;r.useEffect(()=>{if(a){h("onboarding"),o(1);const i=a.displayName?a.displayName.split(" "):["User",""];f(_=>({..._,email:a.email,firstName:i[0]||"",lastName:i.slice(1).join(" ")||""})),g(!1)}else h("login"),o(1),f({email:"",password:"",firstName:"",lastName:"",zip:"",roles:[]})},[a]);const[G,be]=r.useState({hasUpper:!1,hasLower:!1,hasNumber:!1,isLength:!1});r.useEffect(()=>{const i=d.password;be({hasUpper:/[A-Z]/.test(i),hasLower:/[a-z]/.test(i),hasNumber:/[0-9]/.test(i),isLength:i.length>=6})},[d.password]);const se=Object.values(G).every(Boolean);r.useEffect(()=>{if(!C.current)return;const i=new ResizeObserver(()=>{if(C.current){const _=C.current.scrollHeight+80;_>200&&u(`${_}px`)}});return i.observe(C.current),()=>i.disconnect()},[l,n,b,S,d.zip,F,O,w]),r.useEffect(()=>{m("")},[l]);const ze=async()=>{if(!d.email||!d.password)return m("Please fill in all fields.");g(!0);try{await as(le,d.email,d.password)}catch{m("Invalid email or password."),g(!1)}},Ve=async()=>{m(""),g(!0);try{const i=new rs;i.setCustomParameters({prompt:"select_account"}),await os(le,i)}catch(i){console.error("Google Sign-In Error:",i),m(i.message),g(!1)}},mt=async()=>{if(n==="signup"&&!se)return m("Password requirements not met.");g(!0);try{let i;n==="onboarding"&&a?i=a.uid:i=(await ls(le,d.email,d.password)).user.uid;let _=d.roles.length>0?d.roles:["Fan"];if(oe&&!_.includes("Student")&&_.push("Student"),oe){await ns(oe.ref);const Y=oe.data();await ye(E(v,`schools/${A.id}/students`,i),{...Y,uid:i,email:d.email,status:"Active"})}const H={firstName:d.firstName,lastName:d.lastName,zip:d.zip,accountTypes:_,activeProfileRole:_[0],schoolId:(A==null?void 0:A.id)||null,studentId:N||null,createdAt:ne(),email:d.email,photoURL:(a==null?void 0:a.photoURL)||null};await Promise.all([ye(E(v,z(i).userProfile),H,{merge:!0}),ye(E(v,z(i).userPublicProfile),{...H,uid:i,searchTerms:[d.firstName.toLowerCase(),d.lastName.toLowerCase(),d.zip,..._.map(Y=>Y.toLowerCase())]},{merge:!0}),ye(E(v,z(i).userWallet),{balance:0,createdAt:ne()},{merge:!0})]),c&&c()}catch(i){m(i.message.replace("Firebase: ","").replace("auth/","")),g(!1)}},He=async()=>{if(!d.email)return m("Enter email address.");g(!0);try{await is(le,d.email),R(!0),m("")}catch(i){m(i.message)}g(!1)},gt=()=>{if(!navigator.geolocation)return m("Geolocation not supported.");y(!0),navigator.geolocation.getCurrentPosition(async i=>{try{const H=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${i.coords.latitude}&lon=${i.coords.longitude}`)).json();H.address.postcode?f(Y=>({...Y,zip:H.address.postcode.split("-")[0]})):m("Could not determine Zip Code.")}catch{m("Failed to find location.")}y(!1)},()=>{m("Location permission denied."),y(!1)})};r.useEffect(()=>{if(L.length<2){Q([]);return}const i=setTimeout(async()=>{const _=ae(U(v,"schools"),ce("name",">=",L),ce("name","<=",L+"")),H=await Ge(_);Q(H.docs.map(Y=>({id:Y.id,...Y.data()})))},300);return()=>clearTimeout(i)},[L]);const ht=async()=>{if(!A||!N||!I)return m("All fields required.");g(!0);try{const i=ae(U(v,`schools/${A.id}/students`),ce("studentId","==",N)),_=await Ge(i);if(_.empty){m("Student ID not found in this school's roster."),g(!1);return}const H=_.docs[0].data();if(H.email.toLowerCase()!==I.toLowerCase()){m("Email provided does not match the student record."),g(!1);return}f(bt=>({...bt,firstName:H.firstName||H.displayName.split(" ")[0],lastName:H.lastName||H.displayName.split(" ").slice(1).join(" ")}));const Y=Math.floor(1e5+Math.random()*9e5).toString();console.log("MOCK AUTH CODE SENT:",Y),Z(Y),Ce(_.docs[0]),alert(`Code sent to ${I}. (Dev: ${Y})`),g(!1)}catch(i){console.error(i),m("Verification failed."),g(!1)}},ft=()=>{$===w?(f(i=>({...i,roles:[...i.roles,"Student"]})),o(5)):m("Invalid authorization code.")},Ee=(i,_)=>{i.key==="Enter"&&_()},pe=({met:i,text:_})=>e.jsxs("div",{className:`flex items-center gap-1.5 text-xs transition-colors ${i?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}`,children:[i?e.jsx(ie,{size:12,strokeWidth:3}):e.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300 dark:border-gray-600"}),_]});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 p-4 dark:from-gray-900 dark:to-black transition-colors duration-500 relative",children:[e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsx("button",{onClick:s,className:"p-3 rounded-full bg-white/80 dark:bg-black/50 backdrop-blur-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:scale-110 transition-transform shadow-sm",children:t?e.jsx(Xe,{size:20}):e.jsx(Ue,{size:20})})}),e.jsx("div",{className:"bg-white dark:bg-dark-card dark:border dark:border-gray-700 rounded-3xl shadow-2xl w-full max-w-md relative overflow-hidden transition-[height] duration-500 z-10",style:{height:p,minHeight:"500px"},children:e.jsxs("div",{ref:C,className:"pt-12 px-8 pb-8",children:[e.jsxs("div",{className:"relative w-full h-48 mb-6 flex justify-center shrink-0",children:[e.jsx("div",{className:`absolute transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] ${n==="signup"||n==="onboarding"?"top-0 scale-90":"top-8 scale-100"} z-0`,children:e.jsx("div",{className:`w-96 h-40 ${n==="signup"||n==="onboarding"?"":"animate-float"}`,children:e.jsx("img",{src:t?dt:ct,alt:"SeshNx",className:"w-full h-full object-contain drop-shadow-md"})})}),e.jsx("div",{className:"absolute bottom-2 w-full text-center z-10 pointer-events-none",children:fe()&&e.jsx("p",{className:"text-sm font-bold text-gray-500 dark:text-gray-300 uppercase tracking-wider animate-pulse transition-opacity duration-300",children:fe()})})]}),b&&e.jsxs("div",{className:"absolute top-4 left-0 right-0 mx-8 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 p-3 rounded-xl text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-2 z-30 border border-red-100 dark:border-red-800/30",children:[e.jsx(Ht,{size:16}),e.jsx("span",{className:"capitalize font-medium",children:b})]}),S&&e.jsxs("div",{className:"absolute top-4 left-0 right-0 mx-8 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 p-3 rounded-xl text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-2 z-30 border border-green-100 dark:border-green-800/30",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Check your email."})]}),e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500 fill-mode-forwards",children:[n==="login"&&e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all",placeholder:"Email Address",type:"email",value:d.email,onChange:i=>f({...d,email:i.target.value}),onKeyDown:i=>Ee(i,ze),disabled:x}),e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all",type:"password",placeholder:"Password",value:d.password,onChange:i=>f({...d,password:i.target.value}),onKeyDown:i=>Ee(i,ze),disabled:x})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>h("forgot"),className:"text-xs text-gray-500 hover:text-brand-blue font-medium transition-colors",children:"Forgot Password?"})}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 transition-all shadow-lg flex justify-center disabled:opacity-70",onClick:ze,disabled:x,children:x?e.jsx(ee,{className:"animate-spin"}):"Sign In"}),e.jsxs("button",{onClick:Ve,className:"w-full bg-white dark:bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white py-3.5 rounded-xl font-bold hover:bg-gray-50 dark:hover:bg-gray-800 transition-all flex justify-center items-center gap-2",disabled:x,children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative py-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-dark-card text-gray-500",children:"or"})})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 cursor-pointer hover:text-brand-blue font-medium transition-colors pt-2",onClick:()=>h("signup"),children:"New here? Create an Account"})]}),n==="forgot"&&e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-2",children:"Enter your email to receive reset instructions."}),e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all",placeholder:"Email Address",type:"email",value:d.email,onChange:i=>f({...d,email:i.target.value}),onKeyDown:i=>Ee(i,He),disabled:x||S}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 transition-all flex justify-center items-center gap-2 disabled:opacity-50",onClick:He,disabled:x||S,children:x?e.jsx(ee,{className:"animate-spin"}):S?"Sent!":"Send Reset Link"}),e.jsx("button",{className:"w-full text-gray-500 text-sm hover:text-gray-800 dark:hover:text-gray-200 mt-2",onClick:()=>h("login"),children:"Back to Login"})]}),(n==="signup"||n==="onboarding")&&e.jsxs("div",{className:"w-full",children:[l===1&&e.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-8 duration-500",children:n==="signup"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all",placeholder:"Email Address",type:"email",value:d.email,onChange:i=>f({...d,email:i.target.value}),disabled:x}),e.jsx("input",{className:`w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border ${!se&&d.password?"border-red-300 focus:ring-red-200":"border-gray-200 dark:border-gray-600 focus:ring-brand-blue"} rounded-xl focus:ring-2 outline-none dark:text-white transition-all`,type:"password",placeholder:"Create Password",value:d.password,onChange:i=>f({...d,password:i.target.value}),disabled:x})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-1",children:[e.jsx(pe,{met:G.hasUpper,text:"Uppercase Letter"}),e.jsx(pe,{met:G.hasLower,text:"Lowercase Letter"}),e.jsx(pe,{met:G.hasNumber,text:"Number (0-9)"}),e.jsx(pe,{met:G.isLength,text:"6+ Characters"})]})}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 transition-all shadow-lg flex justify-center disabled:opacity-50",onClick:()=>{if(!d.email)return m("Email required");if(!se)return m("Fix password issues");o(2)},disabled:x||!se||!d.email,children:"Continue"}),e.jsxs("button",{onClick:Ve,className:"w-full bg-white dark:bg-transparent border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white py-3.5 rounded-xl font-bold hover:bg-gray-50 dark:hover:bg-gray-800 transition-all flex justify-center items-center gap-2",disabled:x,children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative py-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-dark-card text-gray-500",children:"or"})})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 cursor-pointer hover:text-brand-blue font-medium transition-colors pt-2",onClick:()=>h("login"),children:"Already have an account? Log In"})]}):e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gray-100 dark:bg-gray-800 p-1 border-2 border-brand-blue shadow-lg overflow-hidden",children:a!=null&&a.photoURL?e.jsx("img",{src:a.photoURL,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-brand-blue",children:e.jsx(xe,{size:40})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold dark:text-white",children:["Welcome, ",d.firstName,"!"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Let's finish setting up your creative profile."})]}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 transition-all shadow-lg flex justify-center",onClick:()=>o(2),children:"Let's Go"})]})}),l===2&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{className:"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white",placeholder:"First Name",value:d.firstName,onChange:i=>f({...d,firstName:i.target.value}),autoFocus:!0}),e.jsx("input",{className:"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white",placeholder:"Last Name",value:d.lastName,onChange:i=>f({...d,lastName:i.target.value})})]}),e.jsxs("div",{className:"relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{className:"w-full p-3.5 pl-10 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-brand-blue outline-none dark:text-white",placeholder:"Zip Code",maxLength:5,value:d.zip,onChange:i=>f({...d,zip:i.target.value.replace(/\D/g,"")})}),e.jsx(ot,{className:"absolute left-3 top-3.5 text-gray-400",size:18})]}),e.jsx("button",{onClick:gt,className:"p-3.5 bg-gray-50 dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-brand-blue transition-colors",children:k?e.jsx(ee,{size:20,className:"animate-spin"}):e.jsx(qt,{size:20})})]}),e.jsx(Ws,{zip:d.zip}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#23262f] p-3 rounded-xl border dark:border-gray-700 flex items-center gap-3 cursor-pointer transition-colors hover:bg-gray-100 dark:hover:bg-[#2a2d36]",onClick:()=>j(!F),children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${F?"bg-brand-blue border-brand-blue":"border-gray-400"}`,children:F&&e.jsx(ie,{size:12,className:"text-white",strokeWidth:3})}),e.jsx("span",{className:"text-sm font-bold dark:text-white flex-1",children:"Are you a student?"}),e.jsx(qe,{size:18,className:F?"text-brand-blue":"text-gray-400"})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsxs("button",{className:`text-gray-500 flex items-center gap-1 text-sm font-medium ${n==="onboarding"?"opacity-0 pointer-events-none":""}`,onClick:()=>o(1),children:[e.jsx(tt,{size:16})," Back"]}),e.jsx("button",{className:"bg-gray-900 dark:bg-white dark:text-black text-white px-6 py-2.5 rounded-xl font-bold transition-transform active:scale-95",onClick:()=>{d.firstName&&d.zip?o(F?3:5):m("Info required")},children:"Next Step"})]})]}),l===3&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold dark:text-white text-lg mb-2",children:"Find your School"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Search for your institution to link your enrollment."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-3 top-3 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",placeholder:"Search School Name...",value:L,onChange:i=>q(i.target.value),autoFocus:!0}),O.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-xl max-h-48 overflow-y-auto p-1",children:O.map(i=>e.jsxs("div",{onClick:()=>{te(i),o(4)},className:"p-3 hover:bg-gray-50 dark:hover:bg-white/10 cursor-pointer rounded-lg flex items-center gap-3 transition",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-gray-500",children:e.jsx(qe,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold dark:text-white text-sm",children:i.name}),e.jsx("div",{className:"text-xs text-gray-500",children:i.city||"Location N/A"})]})]},i.id))})]}),e.jsx("button",{className:"w-full text-gray-400 text-sm hover:text-gray-600",onClick:()=>o(2),children:"Back"})]}),l===4&&A&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold dark:text-white text-lg",children:A.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Verify your enrollment"})]}),w?e.jsxs("div",{className:"space-y-4 text-center animate-in fade-in",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-800",children:e.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400",children:["Code sent to ",I]})}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-3 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white text-center font-mono tracking-widest text-lg",placeholder:"000000",maxLength:6,value:$,onChange:i=>T(i.target.value)})]}),e.jsx("button",{onClick:ft,className:"w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition",children:"Confirm Code"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-3 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"Student ID Number",value:N,onChange:i=>V(i.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-3 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"School Email Address",value:I,onChange:i=>J(i.target.value)})]}),e.jsx("button",{onClick:ht,disabled:x,className:"w-full bg-brand-blue text-white py-3 rounded-xl font-bold hover:bg-blue-600 transition",children:x?"Verifying...":"Verify & Send Code"})]}),e.jsx("button",{className:"w-full text-gray-400 text-sm hover:text-gray-600",onClick:()=>o(3),children:"Change School"})]}),l===5&&e.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-bold dark:text-white",children:"Select Additional Roles"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"You can change these later."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2.5 h-auto",children:Le.map(i=>e.jsxs("div",{onClick:()=>{const _=d.roles.includes(i)?d.roles.filter(H=>H!==i):[...d.roles,i];f({...d,roles:_})},className:`relative p-3 border-2 rounded-xl cursor-pointer text-sm font-bold text-center transition-colors duration-200 select-none ${d.roles.includes(i)?"bg-blue-50 border-brand-blue text-brand-blue dark:bg-blue-900/20 dark:border-blue-500 dark:text-blue-300 shadow-sm":"bg-white border-gray-100 text-gray-500 hover:border-gray-300 dark:bg-[#1f2128] dark:border-gray-700 dark:text-gray-400"}`,children:[i,d.roles.includes(i)&&e.jsx("div",{className:"absolute top-1 right-1 text-brand-blue",children:e.jsx(ie,{size:10,strokeWidth:4})})]},i))}),e.jsxs("p",{className:"text-[10px] text-gray-400 text-center px-4 leading-tight",children:["By completing setup, you agree to our ",e.jsx("button",{onClick:()=>P(!0),className:"underline hover:text-brand-blue mx-1",children:"Terms of Service"})," and ",e.jsx("button",{onClick:()=>P(!0),className:"underline hover:text-brand-blue mx-1",children:"Privacy Policy"}),"."]}),e.jsx("button",{className:"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold mt-2 hover:bg-green-700 transition-colors flex justify-center items-center gap-2 disabled:opacity-50",onClick:mt,disabled:x,children:x?e.jsx(ee,{className:"animate-spin"}):"Complete Setup"}),e.jsx("button",{className:"w-full text-gray-400 text-xs hover:text-gray-600 transition-colors",onClick:()=>o(2),children:"Back to Personal Info"})]})]})]},n)]})}),e.jsx("div",{className:"absolute bottom-6 z-20",children:e.jsxs("button",{onClick:()=>P(!0),className:"text-xs text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors flex items-center gap-2 opacity-80 hover:opacity-100 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[e.jsx(we,{size:14})," Legal Center & Terms"]})}),M&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col border border-gray-200 dark:border-gray-700 relative animate-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f] shrink-0",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white flex items-center gap-2",children:[e.jsx(we,{size:20,className:"text-brand-blue"})," Legal Center"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition",children:e.jsx(he,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto relative",children:e.jsx(xt,{isEmbedded:!0})})]})})]})}function Vs({rating:t=0,setRating:s,interactive:a=!1,size:c=16}){const[l,o]=r.useState(0);return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>e.jsx(Yt,{size:c,className:`transition-colors ${a?"cursor-pointer":""} ${(a&&l||t)>=n?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`,fill:(a&&l||t)>=n?"currentColor":"none",onMouseEnter:()=>a&&o(n),onMouseLeave:()=>a&&o(0),onClick:()=>a&&s(n)},n))})}function Hs(t,s){const[a,c]=r.useState([]),[l,o]=r.useState([]),[n,h]=r.useState({followersCount:0,followingCount:0}),[x,g]=r.useState(!0);r.useEffect(()=>{if(!t){g(!1);return}const p=U(v,z(t).following),u=U(v,z(t).followers),k=E(v,z(t).socialStats),y=D(ae(p,ue("timestamp","desc")),C=>{const F=C.docs.map(j=>({odId:j.id,...j.data()}));c(F)},C=>console.error("Following listener error:",C)),M=D(ae(u,ue("timestamp","desc")),C=>{const F=C.docs.map(j=>({odId:j.id,...j.data()}));o(F)},C=>console.error("Followers listener error:",C)),P=D(k,C=>{C.exists()&&h(C.data()),g(!1)});return()=>{y(),M(),P()}},[t]);const d=r.useCallback(p=>a.some(u=>u.odId===p),[a]),f=r.useCallback(async(p,u)=>{if(!t||!p||t===p)return;const k=Ne(v),y=E(v,z(t).following,p);k.set(y,{displayName:(u==null?void 0:u.displayName)||(u==null?void 0:u.firstName)||"User",photoURL:(u==null?void 0:u.photoURL)||null,role:(u==null?void 0:u.activeProfileRole)||"User",timestamp:ne()});const M=E(v,z(p).followers,t);k.set(M,{displayName:(s==null?void 0:s.displayName)||`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim()||"User",photoURL:(s==null?void 0:s.photoURL)||null,role:(s==null?void 0:s.activeProfileRole)||"User",timestamp:ne()});const P=E(v,z(t).socialStats);k.set(P,{followingCount:je(1)},{merge:!0});const C=E(v,z(p).socialStats);k.set(C,{followersCount:je(1)},{merge:!0});const F=E(U(v,z(p).notifications));k.set(F,{type:"follow",fromUserId:t,fromUserName:(s==null?void 0:s.displayName)||`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim()||"Someone",fromUserPhoto:(s==null?void 0:s.photoURL)||null,message:"started following you",read:!1,timestamp:ne()});try{return await k.commit(),{success:!0}}catch(j){return console.error("Follow error:",j),{success:!1,error:j}}},[t,s]),b=r.useCallback(async p=>{if(!t||!p)return;const u=Ne(v),k=E(v,z(t).following,p);u.delete(k);const y=E(v,z(p).followers,t);u.delete(y);const M=E(v,z(t).socialStats);u.set(M,{followingCount:je(-1)},{merge:!0});const P=E(v,z(p).socialStats);u.set(P,{followersCount:je(-1)},{merge:!0});try{return await u.commit(),{success:!0}}catch(C){return console.error("Unfollow error:",C),{success:!1,error:C}}},[t]),m=r.useCallback(async(p,u)=>d(p)?b(p):f(p,u),[d,f,b]),S=r.useCallback(async p=>{try{const u=await $e(E(v,z(p).socialStats));return u.exists()?u.data():{followersCount:0,followingCount:0}}catch(u){return console.error("Get stats error:",u),{followersCount:0,followingCount:0}}},[]),R=r.useCallback(()=>a.map(p=>p.odId),[a]);return{following:a,followers:l,stats:n,loading:x,isFollowing:d,followUser:f,unfollowUser:b,toggleFollow:m,getUserStats:S,getFollowingIds:R}}function qs(t){const[s,a]=r.useState({followersCount:0,followingCount:0}),[c,l]=r.useState(!0);return r.useEffect(()=>{if(!t){l(!1);return}const o=E(v,z(t).socialStats),n=D(o,h=>{h.exists()&&a(h.data()),l(!1)});return()=>n()},[t]),{stats:s,loading:c}}function ut({isFollowing:t,onToggle:s,size:a="md",variant:c="default",disabled:l=!1,showIcon:o=!0,className:n=""}){const[h,x]=r.useState(!1),[g,d]=r.useState(!1),f=async k=>{if(k.stopPropagation(),!(l||h)){x(!0);try{await s()}catch(y){console.error("Follow toggle error:",y)}x(!1)}},b={sm:"px-3 py-1 text-xs",md:"px-4 py-1.5 text-sm",lg:"px-6 py-2 text-base"},m={sm:12,md:14,lg:16},S=()=>t?c==="outline"||c==="minimal"?g?"border-red-300 text-red-500 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300":g?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200":c==="outline"?"border-brand-blue text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":c==="minimal"?"text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":"bg-brand-blue text-white hover:bg-blue-600",R=`
        font-semibold rounded-full transition-all duration-200 
        flex items-center justify-center gap-1.5
        disabled:opacity-50 disabled:cursor-not-allowed
        ${c==="outline"?"border-2 bg-transparent":""}
        ${c==="minimal"?"bg-transparent":""}
        ${b[a]}
        ${S()}
        ${n}
    `,p=()=>h?e.jsx(ee,{className:"animate-spin",size:m[a]}):t?g?e.jsx(Kt,{size:m[a]}):e.jsx(_e,{size:m[a]}):e.jsx(Oe,{size:m[a]}),u=()=>t?g?"Unfollow":"Following":"Follow";return e.jsx(re.button,{whileHover:{scale:l?1:1.02},whileTap:{scale:l?1:.98},className:R,onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),disabled:l||h,children:e.jsx(me,{mode:"wait",children:e.jsxs(re.span,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"flex items-center gap-1.5",children:[o&&p(),e.jsx("span",{children:u()})]},`${t}-${g}`)})})}const X={FOLLOWERS:"followers",FOLLOWING:"following"};function Gs({userId:t,userName:s,initialTab:a=X.FOLLOWERS,currentUser:c,currentUserData:l,isFollowing:o,toggleFollow:n,onClose:h,openPublicProfile:x}){const[g,d]=r.useState(a),[f,b]=r.useState([]),[m,S]=r.useState([]),[R,p]=r.useState(!0),[u,k]=r.useState("");r.useEffect(()=>{if(!t)return;p(!0);const j=U(v,z(t).followers),L=ae(j,ue("timestamp","desc"),Fe(100)),q=D(L,O=>{const Q=O.docs.map(A=>({odId:A.id,userId:A.id,...A.data()}));b(Q),p(!1)},O=>{console.error("Followers fetch error:",O),p(!1)});return()=>q()},[t]),r.useEffect(()=>{if(!t)return;const j=U(v,z(t).following),L=ae(j,ue("timestamp","desc"),Fe(100)),q=D(L,O=>{const Q=O.docs.map(A=>({odId:A.id,userId:A.id,...A.data()}));S(Q)},O=>{console.error("Following fetch error:",O)});return()=>q()},[t]);const y=g===X.FOLLOWERS?f:m,M=u.trim()?y.filter(j=>{var L;return(L=j.displayName)==null?void 0:L.toLowerCase().includes(u.toLowerCase())}):y,P=t===(c==null?void 0:c.uid),C=j=>{x&&(x(j),h())},F=async j=>{n&&await n(j.userId,{displayName:j.displayName,photoURL:j.photoURL,role:j.role})};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4",children:e.jsxs(re.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:s||"User"}),e.jsx("button",{onClick:h,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:e.jsx(he,{size:20})})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>d(X.FOLLOWERS),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${g===X.FOLLOWERS?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"Followers"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${g===X.FOLLOWERS?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:f.length})]}),e.jsxs("button",{onClick:()=>d(X.FOLLOWING),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${g===X.FOLLOWING?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(_e,{size:16}),e.jsx("span",{children:"Following"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${g===X.FOLLOWING?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:m.length})]})]})]}),y.length>5&&e.jsx("div",{className:"px-4 py-3 border-b dark:border-gray-700 shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(lt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:u,onChange:j=>k(j.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white transition"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:R?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ee,{className:"animate-spin text-brand-blue mb-2",size:28}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."})]}):M.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:g===X.FOLLOWERS?e.jsx(ke,{size:24,className:"text-gray-400"}):e.jsx(_e,{size:24,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-center",children:u?`No results for "${u}"`:g===X.FOLLOWERS?P?"You don't have any followers yet":"No followers yet":P?"You're not following anyone yet":"Not following anyone yet"}),!u&&g===X.FOLLOWING&&P&&e.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Find artists and creators to follow in the feed!"})]}):e.jsx(me,{mode:"popLayout",children:M.map((j,L)=>e.jsx(Ys,{user:j,index:L,currentUserId:c==null?void 0:c.uid,isFollowingUser:o==null?void 0:o(j.userId),onToggleFollow:()=>F(j),onUserClick:()=>C(j.userId)},j.userId))})})]})})}function Ys({user:t,index:s,currentUserId:a,isFollowingUser:c,onToggleFollow:l,onUserClick:o}){const n=t.userId===a;return e.jsxs(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-10},transition:{delay:s*.03},className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition border-b dark:border-gray-700/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:o,children:[e.jsx(We,{src:t.photoURL,name:t.displayName,size:"md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm dark:text-white truncate hover:text-brand-blue transition",children:t.displayName}),t.role&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.role})]})]}),!n&&e.jsx(ut,{isFollowing:c,onToggle:l,size:"sm",variant:"outline"}),n&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full",children:"You"})]})}function Ks({followersCount:t=0,followingCount:s=0,onFollowersClick:a,onFollowingClick:c,size:l="md"}){const o={sm:"text-xs gap-3",md:"text-sm gap-4",lg:"text-base gap-5"},n={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`flex items-center ${o[l]}`,children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${n[l]}`,children:t.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:t===1?"Follower":"Followers"})]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),e.jsxs("button",{onClick:c,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${n[l]}`,children:s.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:"Following"})]})]})}function Qs({userId:t,currentUser:s,currentUserData:a,onClose:c,onMessage:l}){var q,O,Q,A,te;const[o,n]=r.useState(null),[h,x]=r.useState(!0),[g,d]=r.useState(null),[f,b]=r.useState(!1),[m,S]=r.useState(!1),[R,p]=r.useState("followers"),u=(s==null?void 0:s.uid)===t,{uploadImage:k}=hs(),{isFollowing:y,toggleFollow:M}=Hs(s==null?void 0:s.uid,a),{stats:P}=qs(t),C=(N="followers")=>{p(N),S(!0)},F=async()=>{try{const N=E(v,z(t).userPublicProfile),V=await $e(N);if(V.exists())n(V.data());else{const I=E(v,z(t).userProfile),J=await $e(I);J.exists()?n(J.data()):d("Profile not found or is private.")}}catch(N){console.error("Failed to load profile:",N),d("Unable to load profile. Please try again later.")}finally{x(!1)}};r.useEffect(()=>{t&&F()},[t]);const j=async N=>{const V=N.target.files[0];if(!(!V||!u)){b(!0);try{const I=await k(V,`artifacts/${t}/images/banners`);I&&(await ve(E(v,z(t).userPublicProfile),{bannerURL:I}),n(J=>({...J,bannerURL:I})))}catch(I){console.error("Banner upload failed:",I),alert("Failed to upload banner.")}b(!1)}};if(!t)return null;const L=()=>e.jsxs("div",{className:"p-8 flex flex-col items-center space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-40 w-full bg-gray-200 dark:bg-gray-700 rounded-xl"}),e.jsx("div",{className:"h-28 w-28 bg-gray-300 dark:bg-gray-600 rounded-full -mt-20 border-4 border-white dark:border-dark-card"}),e.jsx("div",{className:"h-6 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 dark:bg-gray-700 rounded"})]});return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-gray-700",onClick:N=>N.stopPropagation(),children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 z-30 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full transition-colors backdrop-blur-md",children:e.jsx(he,{size:20})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:h?e.jsx(L,{}):g||!o?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 text-gray-500",children:[e.jsx(nt,{size:48,className:"text-yellow-500 mb-4 opacity-80"}),e.jsx("h3",{className:"text-xl font-bold dark:text-gray-200 mb-2",children:"Profile Unavailable"}),e.jsx("p",{className:"text-sm text-center max-w-xs",children:g||"This user's profile information could not be retrieved."}),e.jsx("button",{onClick:c,className:"mt-6 px-6 py-2 bg-gray-200 dark:bg-gray-700 rounded-full font-bold text-sm hover:bg-gray-300 transition",children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-48 relative bg-gray-800 group",children:[o.bannerURL?e.jsx("img",{src:o.bannerURL,alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-brand-blue to-purple-600",children:e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),u&&e.jsxs("label",{className:"absolute top-4 left-4 cursor-pointer bg-black/40 hover:bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-bold backdrop-blur-md transition-all flex items-center gap-2 border border-white/10",children:[f?e.jsx(ee,{size:14,className:"animate-spin"}):e.jsx(Qt,{size:14}),f?"Uploading...":"Edit Cover",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:j,disabled:f})]}),e.jsxs("div",{className:"absolute bottom-4 right-6 flex gap-3 opacity-90",children:[o.rate>0&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(Zt,{size:12})," $",o.rate,"/hr"]}),o.city&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(ot,{size:12})," ",o.city,", ",o.state]})]})]}),e.jsxs("div",{className:"px-8 pb-8 relative",children:[e.jsxs("div",{className:"flex justify-between items-end -mt-14 mb-6",children:[e.jsx("div",{className:"relative z-10 group",children:e.jsx("div",{className:"h-32 w-32 rounded-full border-[5px] border-white dark:border-[#1f2128] bg-gray-200 dark:bg-gray-700 overflow-hidden shadow-xl",children:o.photoURL?e.jsx("img",{src:o.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400",children:e.jsx(xe,{size:48})})})}),s&&!u&&e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ut,{isFollowing:y(t),onToggle:()=>{var N;return M(t,{displayName:`${o.firstName||""} ${o.lastName||""}`.trim(),photoURL:o.photoURL,role:((N=o.accountTypes)==null?void 0:N[0])||"User"})},size:"md"}),e.jsxs("button",{onClick:()=>l(t,`${o.firstName} ${o.lastName}`),className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-2 border dark:border-gray-700",children:[e.jsx(Me,{size:18})," Message"]})]}),u&&e.jsx("div",{className:"mb-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-lg border border-green-200 dark:border-green-800",children:"Public View Mode"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-extrabold dark:text-white flex items-center gap-2 mb-2",children:[o.firstName||"User"," ",o.lastName||"",o.isVerified&&e.jsx(Ae,{size:22,className:"text-blue-500 fill-blue-500 text-white"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm text-gray-500 dark:text-gray-400 font-medium mb-4",children:(o.accountTypes||["Creative"]).map((N,V)=>e.jsx("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-xs font-bold",children:N},V))}),e.jsx(Ks,{followersCount:P.followersCount||0,followingCount:P.followingCount||0,onFollowersClick:()=>C("followers"),onFollowingClick:()=>C("following"),size:"md"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-6 border-y dark:border-gray-800 mb-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Rating"}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-1",children:[e.jsx("span",{className:"text-xl font-bold dark:text-white",children:o.rating||"New"}),o.rating>0&&e.jsx(Vs,{rating:o.rating,size:14})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Experience"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:[o.yearsExp||"1+"," ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Yrs"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Response"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:["~1 ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Hr"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Bookings"}),e.jsx("div",{className:"text-xl font-bold dark:text-white",children:o.completedJobs||0})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(xe,{size:14})," About"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#252830] p-5 rounded-xl border dark:border-gray-800",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:o.bio||"No biography provided yet."})})]}),(((q=o.genres)==null?void 0:q.length)>0||((O=o.instruments)==null?void 0:O.length)>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(Jt,{size:14})," Sound Profile"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(Q=o.genres)==null?void 0:Q.map(N=>e.jsx("span",{className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-bold border border-purple-100 dark:border-purple-800",children:N},N)),(A=o.instruments)==null?void 0:A.map(N=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-brand-blue dark:text-blue-300 rounded-lg text-xs font-bold border border-blue-100 dark:border-blue-800",children:N},N))]})]}),((te=o.equipmentList)==null?void 0:te.length)>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(rt,{size:14})," Select Gear"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#252830] rounded-xl p-4 border dark:border-gray-800",children:[e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-400",children:o.equipmentList.slice(0,10).map((N,V)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Xt,{size:14,className:"text-brand-blue shrink-0 mt-0.5"}),e.jsx("span",{className:"truncate",children:N})]},V))}),o.equipmentList.length>10&&e.jsx("div",{className:"mt-3 pt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("span",{className:"text-xs text-gray-400 font-medium italic",children:["+",o.equipmentList.length-10," more items available"]})})]})]})]})]})})]}),m&&e.jsx(Gs,{userId:t,userName:`${(o==null?void 0:o.firstName)||""} ${(o==null?void 0:o.lastName)||""}`.trim()||"User",initialTab:R,currentUser:s,currentUserData:a,isFollowing:y,toggleFollow:M,onClose:()=>S(!1),openPublicProfile:N=>{S(!1)}})]})}const Zs={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}};function Js({children:t,className:s=""}){return e.jsx(re.div,{initial:"initial",animate:"animate",exit:"exit",variants:Zs,transition:{duration:.3,ease:"easeOut"},className:s,children:t})}const Xs=(t,s={},a={})=>{const c={message:(t==null?void 0:t.message)||"Unknown error",stack:t==null?void 0:t.stack,name:t==null?void 0:t.name,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,...s,context:a};try{const l=JSON.parse(localStorage.getItem("seshnx_errors")||"[]");l.unshift(c),l.splice(10),localStorage.setItem("seshnx_errors",JSON.stringify(l))}catch{}return c};class Us extends it.Component{constructor(a){super(a);Re(this,"handleReset",()=>{if(this.setState({hasError:!1,error:null,errorInfo:null,errorId:null,copied:!1}),this.props.onReset)this.props.onReset();else{const a=window.location.pathname;a!=="/"&&a!=="/dashboard"?window.location.href="/?tab=dashboard":window.location.reload()}});Re(this,"handleCopyError",async()=>{var c,l,o;const a=`
Error ID: ${this.state.errorId}
Message: ${((c=this.state.error)==null?void 0:c.message)||"Unknown error"}
Stack: ${((l=this.state.error)==null?void 0:l.stack)||"No stack trace"}
Component Stack: ${((o=this.state.errorInfo)==null?void 0:o.componentStack)||"No component stack"}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Timestamp: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(a),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}catch(n){console.error("Failed to copy error:",n)}});this.state={hasError:!1,error:null,errorInfo:null,meme:"Unexpected signal chain failure.",errorId:null,copied:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorId:`ERR-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(a,c){const l={componentStack:c.componentStack,errorBoundary:this.props.name||"Default",props:this.props.context||{}},o=Xs(a,c,l);this.setState({errorInfo:{...c,errorId:this.state.errorId||o.timestamp}})}componentDidMount(){const a=["CoreAudio Overload detected.","The plugin crashed the session.","Buffer underrun exception.","Who deleted the master fader?","Sample rate mismatch: Reality is 44.1k, we are 48k.","The drummer kicked the power cable.","Ilok license not found.","Fatal Error: Not enough headroom.","The mix bus is clipping... hard.","Phantom power failure."];this.setState({meme:a[Math.floor(Math.random()*a.length)]})}render(){var a,c;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-[#1f2128] flex flex-col items-center justify-center p-4 text-center text-white font-sans",children:e.jsxs("div",{className:"bg-[#2c2e36] border border-red-500/30 p-8 rounded-2xl shadow-2xl max-w-lg w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-red-500/20 blur-[50px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mb-6 text-red-500",children:e.jsx(nt,{size:32,strokeWidth:2})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Session Crashed"}),e.jsxs("p",{className:"text-xl text-[#3D84ED] font-medium mb-6 italic",children:['"',this.state.meme,'"']}),e.jsxs("div",{className:"bg-[#1f2128] p-4 rounded-lg w-full mb-6 text-left border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Error Details"}),e.jsx("button",{onClick:this.handleCopyError,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1 transition-colors",title:"Copy error details",children:this.state.copied?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:12}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:12}),"Copy"]})})]}),e.jsxs("div",{className:"space-y-2",children:[this.state.errorId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Error ID: "}),e.jsx("code",{className:"text-xs text-blue-400 font-mono",children:this.state.errorId})]}),e.jsx("code",{className:"text-sm text-red-400 font-mono break-words block",children:((a=this.state.error)==null?void 0:a.message)||"Unknown error occurred"}),((c=this.state.error)==null?void 0:c.stack)&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Stack Trace"}),e.jsx("pre",{className:"text-xs text-gray-400 font-mono mt-2 overflow-auto max-h-32",children:this.state.error.stack})]})]})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:"Go Back"}),e.jsxs("button",{onClick:this.handleReset,className:"flex-1 bg-[#3D84ED] hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-bold transition-all shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2",children:[e.jsx(Je,{size:18}),"Reload App"]})]})]})]})}):this.props.children}}const Ze=r.lazy(()=>W(()=>import("./Dashboard-_fFQAoDY.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ds=r.lazy(()=>W(()=>import("./SocialFeed-DpN_4Ppr.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,6,10,11,12]))),ea=r.lazy(()=>W(()=>import("./BookingSystem-BCQzaFqe.js"),__vite__mapDeps([13,1,2,3,4,5,11,12,6,14]))),ta=r.lazy(()=>W(()=>import("./Marketplace-CxXEgGuf.js"),__vite__mapDeps([15,1,2,3,4,5,6,8,9]))),sa=r.lazy(()=>W(()=>import("./ChatInterface-Bl_dCry2.js"),__vite__mapDeps([16,1,3,2,4,5]))),aa=r.lazy(()=>W(()=>import("./StudioManager-DZXzajd2.js"),__vite__mapDeps([17,1,2,3,4,5,6,18,14]))),ra=r.lazy(()=>W(()=>import("./ProfileManager-D668m8gb.js"),__vite__mapDeps([19,1,2,3,4,5,6,20,10,18,14]))),oa=r.lazy(()=>W(()=>import("./SettingsTab-NbbZQNWV.js"),__vite__mapDeps([20,1,2,3,4,5,6]))),la=r.lazy(()=>W(()=>import("./TechServices-DzQlzVXh.js"),__vite__mapDeps([21,1,2,3,4,5,6,10]))),na=r.lazy(()=>W(()=>Promise.resolve().then(()=>Os),void 0)),ia=r.lazy(()=>W(()=>import("./PaymentsManager-DATjyqa8.js"),__vite__mapDeps([22,1,2,3,4,5,6,23]))),da=r.lazy(()=>W(()=>import("./LabelManager-C4X2nIhr.js"),__vite__mapDeps([24,1,2,3,4,5]))),ca=r.lazy(()=>W(()=>import("./edu-Bzk_yg6o.js").then(t=>t.g),__vite__mapDeps([6,1,2,3,4,5]))),xa=r.lazy(()=>W(()=>import("./edu-Bzk_yg6o.js").then(t=>t.i),__vite__mapDeps([6,1,2,3,4,5]))),ua=r.lazy(()=>W(()=>import("./edu-Bzk_yg6o.js").then(t=>t.h),__vite__mapDeps([6,1,2,3,4,5]))),ma=r.lazy(()=>W(()=>import("./edu-Bzk_yg6o.js").then(t=>t.j),__vite__mapDeps([6,1,2,3,4,5]))),ga=r.lazy(()=>W(()=>import("./edu-Bzk_yg6o.js").then(t=>t.k),__vite__mapDeps([6,1,2,3,4,5]))),B=()=>e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ee,{className:"animate-spin text-brand-blue",size:32})});function ha(){var N,V,I,J;const[t,s]=r.useState(null),[a,c]=r.useState(null),[l,o]=r.useState({}),[n,h]=r.useState([]),[x,g]=r.useState(!0),[d,f]=r.useState(()=>typeof window<"u"&&new URLSearchParams(window.location.search).get("tab")||"dashboard"),b=$=>{if(f($),new URLSearchParams(window.location.search).get("tab")!==$){const w=`${window.location.pathname}?tab=${$}`;window.history.pushState({tab:$},"",w)}};r.useEffect(()=>{const $=()=>{const w=new URLSearchParams(window.location.search).get("tab")||"dashboard";f(w)};return window.addEventListener("popstate",$),()=>window.removeEventListener("popstate",$)},[]);const[m,S]=r.useState(!1),[R,p]=r.useState(null),[u,k]=r.useState(0),[y,M]=r.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);r.useEffect(()=>{y?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[y]);const P=()=>M(!y),C=ds(Ye),F=cs(Ye);r.useEffect(()=>{const $=xs(C,async T=>{if(g(!0),T){s(T);const w=E(F,`artifacts/${de}/users/${T.uid}/profiles/main`),Z=D(w,G=>{G.exists()?c(G.data()):c(null)}),oe=E(F,`artifacts/${de}/users/${T.uid}/wallet/account`),Ce=D(oe,G=>{G.exists()&&k(G.data().balance||0)}),Le=U(F,`artifacts/${de}/users/${T.uid}/profiles`),fe=D(Le,G=>{const be={};G.forEach(se=>{se.id!=="main"&&(be[se.id]=se.data())}),o(be)});return h([{id:1,text:"Welcome to SeshNx!",type:"system",timestamp:new Date}]),g(!1),()=>{Z(),Ce(),fe()}}else s(null),c(null),o({}),g(!1)});return()=>$()},[]);const j=()=>Be(C),L=($,T)=>p({uid:$,name:T}),q=async $=>{if(t)try{const T=E(F,`artifacts/${de}/users/${t.uid}/profiles/main`);await ve(T,{activeProfileRole:$})}catch(T){console.error("Role switch failed:",T)}};if(x)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(ee,{className:"animate-spin text-brand-blue",size:48})});if(!t)return e.jsx(Qe,{darkMode:y,toggleTheme:P});if(t&&!a)return e.jsx(Qe,{user:t,isNewUser:!0,darkMode:y,toggleTheme:P});const O=()=>{var $,T,w;if(d.startsWith("edu-"))return d==="edu-enroll"?e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ga,{user:t,userData:a})}):($=a==null?void 0:a.accountTypes)!=null&&$.includes("Admin")?e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ua,{user:t,userData:a,currentView:d})}):(T=a==null?void 0:a.accountTypes)!=null&&T.includes("Instructor")?e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(xa,{user:t,userData:a,currentView:d})}):(w=a==null?void 0:a.accountTypes)!=null&&w.includes("Intern")?e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ma,{user:t,userData:a,currentView:d})}):e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ca,{user:t,userData:a})});switch(d){case"dashboard":case"home":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Ze,{user:t,userData:a,subProfiles:l,notifications:n,setActiveTab:b,tokenBalance:u})});case"feed":case"social":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Ds,{user:t,userData:a,openPublicProfile:L})});case"bookings":case"find-talent":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ea,{user:t,userData:a,openPublicProfile:L})});case"marketplace":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ta,{user:t,userData:a,tokenBalance:u})});case"messages":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(sa,{user:t,userData:a,openPublicProfile:L})});case"tech":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(la,{user:t,userData:a})});case"studio-ops":case"studio-manager":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(aa,{user:t,userData:a})});case"label-manager":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(da,{user:t,userData:a})});case"payments":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ia,{user:t,userData:a})});case"profile":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ra,{user:t,userData:a,subProfiles:l,handleLogout:j})});case"settings":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(oa,{user:t,userData:a,handleLogout:j})});case"legal":return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(na,{})});default:return e.jsx(r.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Ze,{user:t,userData:a,setActiveTab:b,subProfiles:l,notifications:n})})}},A=d.startsWith("edu-")&&(((N=a==null?void 0:a.accountTypes)==null?void 0:N.includes("Admin"))||((V=a==null?void 0:a.accountTypes)==null?void 0:V.includes("Instructor")));return e.jsx(fs,{user:t,userData:a,children:e.jsxs("div",{className:"flex h-screen flex-col bg-gray-50 dark:bg-[#1a1d21] overflow-hidden selection:bg-brand-blue selection:text-white",children:[e.jsx(Dt,{position:"bottom-right",toastOptions:{style:{background:"#333",color:"#fff"},success:{style:{background:"green"},iconTheme:{primary:"white",secondary:"green"}},error:{style:{background:"red"}}}}),e.jsx(Es,{user:t,userData:a,subProfiles:l,onMenuClick:()=>S(!m),setActiveTab:b,activeTab:d,tokenBalance:u,darkMode:y,toggleTheme:P,onRoleSwitch:q,openPublicProfile:L}),e.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 ${m?"translate-x-0 shadow-2xl":"-translate-x-full"} bg-white dark:bg-[#23262f] border-r dark:border-gray-800`,children:A?e.jsx(Ps,{activeTab:d,setActiveTab:b,sidebarOpen:m,setSidebarOpen:S,isStaff:(I=a.accountTypes)==null?void 0:I.includes("Instructor"),isAdmin:(J=a.accountTypes)==null?void 0:J.includes("Admin")}):e.jsx(Rs,{activeTab:d,setActiveTab:b,sidebarOpen:m,setSidebarOpen:S,userData:a,handleLogout:j})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 scroll-smooth",id:"main-scroll",children:e.jsx(me,{mode:"wait",children:e.jsx(Js,{className:"max-w-7xl mx-auto",children:O()},d)})})]}),e.jsx(me,{children:R&&e.jsx(Qs,{userId:R.uid,currentUser:t,currentUserData:a,onClose:()=>p(null),onMessage:($,T)=>{p(null),b("messages")}})})]})})}es.createRoot(document.getElementById("root")).render(e.jsx(it.StrictMode,{children:e.jsx(Us,{name:"Root",children:e.jsx(js,{client:us,children:e.jsx(ha,{})})})}));const fa=()=>{const t=document.getElementById("loading-fallback");t&&(t.classList.add("fade-out"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),document.body.style.overflow="auto"},500))};setTimeout(fa,800);export{ut as F,Sa as c,As as f,Hs as u};
