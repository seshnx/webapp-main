import{r as o,j as e,bT as le,U as be,b_ as qe,c8 as Ne,a0 as dt,a5 as Ue,bV as ge,x as Fe,Q as He,g as we,B as We,c_ as yt,c$ as jt,T as oe,d0 as vt,c7 as kt,d1 as Te,d2 as Nt,d3 as wt,P as Se,M as nt,a9 as Oe,d4 as it,cu as ot,b$ as V,L as de,ak as he,N as Me,al as ct,bZ as xt,d5 as St,X as ce,h as _e,bO as Ct,bP as Je,F as Ee,an as zt,af as Ye,bK as At,S as Ge,d6 as ve,m as gt,ab as Mt,d7 as Rt,bU as $t,a as mt,cQ as Ae,d8 as De,cc as Pt,d9 as Tt,bY as Et,c0 as Bt,c1 as Lt,ap as bt,da as It,ca as qt,ae as Ut,ci as Ft,db as Ht,dc as Wt,c2 as J,c3 as et,c4 as tt,W as Be,a8 as Ot,K as _t,J as Le,cW as Yt,O as Gt,cH as Vt,dd as Kt,de as Qt,df as Xt}from"./vendor-M-mhr7Zm.js";import{u as Ve,s as ie}from"./chat-Wu-U_tWR.js";import{E as ht}from"./EquipmentAutocomplete-DRIl8Sr2.js";import{EQUIP_CATEGORIES as Ie,AMENITIES_DATA as Zt,DISTRIBUTION_STORES as ke,RELEASE_TYPES as Jt,DDEX_GENRES as Dt}from"./config-yUl3KxdD.js";import{A as es}from"./edu-CtXdl24B.js";import"./vendor-framer-1_AFqeeG.js";import"./useEquipmentDatabase-DM1VkO2W.js";function st({userData:s,stats:t,onNavigate:f}){var a;const[r,p]=o.useState(new Date),c=(s==null?void 0:s.studioName)||(s==null?void 0:s.profileName)||"My Studio",v=(s==null?void 0:s.rooms)||[],k=(s==null?void 0:s.amenities)||[],n=v.reduce((x,m)=>x+(m.capacity||0),0),i=v.length>0?Math.round(v.reduce((x,m)=>x+(m.rate||0),0)/v.length):0,d=[{label:"Active Rooms",value:v.length,icon:e.jsx(le,{size:20}),color:"blue",onClick:()=>f("rooms")},{label:"Total Capacity",value:`${n} ppl`,icon:e.jsx(be,{size:20}),color:"green"},{label:"Avg. Rate",value:`$${i}/hr`,icon:e.jsx(qe,{size:20}),color:"purple"},{label:"Amenities",value:k.length,icon:e.jsx(Ne,{size:20}),color:"amber"}],w=(t==null?void 0:t.pendingBookings)||0;return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(le,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:c}),e.jsxs("p",{className:"text-blue-100 text-sm flex items-center gap-1",children:[e.jsx(dt,{size:14}),s!=null&&s.city&&(s!=null&&s.state)?`${s.city}, ${s.state}`:"Location not set"]})]})]}),(s==null?void 0:s.studioDescription)&&e.jsx("p",{className:"text-blue-100 text-sm mt-4 max-w-2xl line-clamp-2",children:s.studioDescription})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map((x,m)=>e.jsxs("button",{onClick:x.onClick,className:`bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm text-left transition-all ${x.onClick?"hover:shadow-md hover:border-brand-blue cursor-pointer":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-${x.color}-100 dark:bg-${x.color}-900/20 flex items-center justify-center text-${x.color}-600 dark:text-${x.color}-400 mb-3`,children:x.icon}),e.jsx("div",{className:"text-2xl font-bold dark:text-white",children:x.value}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-medium tracking-wide",children:x.label})]},m))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Ue,{size:18,className:"text-amber-500"}),"Pending Actions"]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[w>0?e.jsxs("button",{onClick:()=>f("bookings"),className:"w-full flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"text-amber-600",size:18}),e.jsxs("span",{className:"text-sm font-medium dark:text-amber-300",children:[w," Pending Booking",w>1?"s":""]})]}),e.jsx("span",{className:"text-xs text-amber-600 font-bold",children:"Review →"})]}):e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(Fe,{className:"text-green-600",size:18}),e.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"All caught up!"})]}),!(s!=null&&s.studioDescription)&&e.jsxs("button",{onClick:()=>f("settings"),className:"w-full flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Add studio description"}),e.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Setup →"})]}),v.length===0&&e.jsxs("button",{onClick:()=>f("rooms"),className:"w-full flex items-center justify-between p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Add your first room"}),e.jsx("span",{className:"text-xs text-purple-600 font-bold",children:"Add →"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-brand-blue"}),"Rooms"]}),e.jsx("button",{onClick:()=>f("rooms"),className:"text-xs text-brand-blue font-bold hover:underline",children:"Manage →"})]}),e.jsx("div",{className:"p-4",children:v.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(le,{size:32,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No rooms configured yet"})]}):e.jsxs("div",{className:"space-y-2",children:[v.slice(0,4).map((x,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#1f2128] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white text-sm",children:x.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.capacity," people • ",x.equipment?x.equipment.split(",").length:0," gear items"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-bold text-green-600 dark:text-green-400",children:["$",x.rate,"/hr"]})})]},m)),v.length>4&&e.jsxs("p",{className:"text-xs text-center text-gray-400 pt-2",children:["+",v.length-4," more rooms"]})]})})]})]}),k.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-5",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Ne,{size:18,className:"text-amber-500"}),"Studio Amenities"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((x,m)=>e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium",children:x},m))})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-brand-blue"}),"Booking Calendar"]}),e.jsx("button",{onClick:()=>f("bookings"),className:"text-xs text-brand-blue font-bold hover:underline",children:"View All →"})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>p(new Date(r.getFullYear(),r.getMonth()-1,1)),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:e.jsx(He,{size:18,className:"text-gray-500"})}),e.jsx("span",{className:"font-bold dark:text-white",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>p(new Date(r.getFullYear(),r.getMonth()+1,1)),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:e.jsx(we,{size:18,className:"text-gray-500"})})]}),e.jsx(ts,{currentDate:r,bookings:(t==null?void 0:t.recentBookings)||[],onNavigate:f}),((a=t==null?void 0:t.recentBookings)==null?void 0:a.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Upcoming Sessions"}),e.jsx("div",{className:"space-y-2",children:t.recentBookings.slice(0,3).map((x,m)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-[#1f2128] rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium dark:text-white",children:x.clientName||"Client"}),e.jsx("span",{className:"text-gray-500 ml-2",children:new Date(x.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.status==="confirmed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:x.status||"pending"})]},m))})]})]})]})]})}function ts({currentDate:s,bookings:t,onNavigate:f}){const r=s.getFullYear(),p=s.getMonth(),c=new Date,v=new Date(r,p,1).getDay(),k=new Date(r,p+1,0).getDate(),n=[];for(let a=0;a<v;a++)n.push(null);for(let a=1;a<=k;a++)n.push(a);const i=a=>a?t.filter(x=>{const m=new Date(x.date);return m.getDate()===a&&m.getMonth()===p&&m.getFullYear()===r}):[],d=a=>a===c.getDate()&&p===c.getMonth()&&r===c.getFullYear(),w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:w.map(a=>e.jsx("div",{className:"text-center text-xs font-bold text-gray-400 py-1",children:a},a))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:n.map((a,x)=>{const m=i(a),M=m.length>0,C=m.some(T=>T.status==="confirmed"),j=m.some(T=>T.status==="pending");return e.jsxs("button",{onClick:()=>a&&M&&f("bookings"),disabled:!a,className:`aspect-square flex flex-col items-center justify-center rounded-lg text-sm relative transition ${a?d(a)?"bg-brand-blue text-white font-bold":M?"bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 cursor-pointer":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":""}`,children:[a,M&&!d(a)&&e.jsxs("div",{className:"flex gap-0.5 mt-0.5",children:[C&&e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),j&&e.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"})]})]},x)})}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Confirmed"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full"}),"Pending"]})]})]})}const Z=10,ss=(s,t,f,r,p,c)=>{const v=s-f,k=t-r,n=p-f,i=c-r,d=v*n+k*i,w=n*n+i*i;let a=-1;w!==0&&(a=d/w);let x,m;a<0?(x=f,m=r):a>1?(x=p,m=c):(x=f+a*n,m=r+a*i);const M=s-x,C=t-m;return Math.sqrt(M*M+C*C)};function as({rooms:s,walls:t,structures:f,onRoomClick:r,onLayoutChange:p,onWallsChange:c,onStructuresChange:v}){var je;const k=o.useRef(null),[n,i]=o.useState(!1),[d,w]=o.useState(!1),[a,x]=o.useState({x:0,y:0}),[m,M]=o.useState(null),[C,j]=o.useState(null),[T,U]=o.useState(null),[I,S]=o.useState(null),[z,y]=o.useState(t||[]),[A,E]=o.useState(f||[]),[b,R]=o.useState(null),[$,B]=o.useState("select"),[W,K]=o.useState(null),D=800,P=600;o.useEffect(()=>{y(t||[])},[t]),o.useEffect(()=>{E(f||[])},[f]);const u=l=>{const h=k.current.getBoundingClientRect();let L=l.clientX,g=l.clientY;l.touches&&l.touches.length>0&&(L=l.touches[0].clientX,g=l.touches[0].clientY);const q=L-h.left,Y=g-h.top;return{x:Math.round(q/Z)*Z,y:Math.round(Y/Z)*Z}},H=l=>{y(l),c(l)},_=l=>{E(l),v(l)},se=o.useCallback(()=>{if(C){const l=A.filter(h=>h.id!==C);_(l),j(null)}else if(T){const l=z.filter(h=>h.id!==T);H(l),U(null)}},[C,T,A,z]),Q=o.useCallback(()=>{if(C){const l=A.find(h=>h.id===C);l&&R({type:"structure",data:l})}else if(T){const l=z.find(h=>h.id===T);l&&R({type:"wall",data:l})}},[C,T,A,z]),ue=o.useCallback(()=>{if(!b)return;const l=20;if(b.type==="structure"){const h={...b.data,id:`struct_${Date.now()}`,layout:{...b.data.layout,x:b.data.layout.x+l,y:b.data.layout.y+l}};_([...A,h]),j(h.id)}else if(b.type==="wall"){const h={...b.data,id:`wall_${Date.now()}`,x1:b.data.x1+l,y1:b.data.y1+l,x2:b.data.x2+l,y2:b.data.y2+l};H([...z,h]),U(h.id)}},[b,A,z]),pe=o.useCallback(()=>{Q(),se()},[Q,se]);o.useEffect(()=>{const l=h=>{(h.key==="Delete"||h.key==="Backspace")&&se(),(h.ctrlKey||h.metaKey)&&h.key==="c"&&(h.preventDefault(),Q()),(h.ctrlKey||h.metaKey)&&h.key==="v"&&(h.preventDefault(),ue()),(h.ctrlKey||h.metaKey)&&h.key==="x"&&(h.preventDefault(),pe())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[se,Q,ue,pe]);const N=o.useCallback((l,h)=>{if($!=="select")return;l.preventDefault(),l.stopPropagation();const{x:L,y:g}=u(l);M(h.id),j(null),U(null),i(!0),w(!1),x({x:L-h.layout.x,y:g-h.layout.y})},[$]),O=o.useCallback((l,h,L)=>{l.preventDefault(),l.stopPropagation(),M(h.id),j(null),U(null),i(!1),w(L)},[]),F=()=>{const l={id:`struct_${Date.now()}`,label:"Lobby / Area",layout:{x:100,y:100,width:150,height:100,color:"#94a3b8"}};_([...A,l]),B("select")},ae=o.useCallback((l,h)=>{if($!=="select")return;l.preventDefault(),l.stopPropagation();const{x:L,y:g}=u(l);j(h.id),M(null),U(null),i(!0),w(!1),x({x:L-h.layout.x,y:g-h.layout.y})},[$]),re=o.useCallback((l,h,L)=>{l.preventDefault(),l.stopPropagation(),j(h.id),M(null),U(null),i(!1),w(L)},[]),me=o.useCallback((l,h,L)=>{$==="select"&&(l.preventDefault(),l.stopPropagation(),S({id:h,point:L}),M(null),j(null),U(h))},[$]),ee=(l,h)=>{$==="select"&&(l.stopPropagation(),U(h),M(null),j(null))},X=o.useCallback(l=>{if(!k.current)return;const{x:h,y:L}=u(l);if($==="wall"&&W){const g={id:"preview",x1:W.x,y1:W.y,x2:h,y2:L};y(q=>[...q.filter(Y=>Y.id!=="preview"),g]);return}if(I){y(g=>g.map(q=>q.id!==I.id?q:I.point==="start"?{...q,x1:h,y1:L}:{...q,x2:h,y2:L}));return}if(n){const g={x:h-a.x,y:L-a.y};if(m){const q=s.find(Y=>Y.id===m);q&&p(m,{...q.layout,...g})}else C&&E(q=>q.map(Y=>Y.id===C?{...Y,layout:{...Y.layout,...g}}:Y))}if(d==="br")if(m){const g=s.find(q=>q.id===m);if(g){const q={width:Math.max(Z,h-g.layout.x),height:Math.max(Z,L-g.layout.y)};p(m,{...g.layout,...q})}}else C&&E(g=>g.map(q=>q.id!==C?q:{...q,layout:{...q.layout,width:Math.max(Z,h-q.layout.x),height:Math.max(Z,L-q.layout.y)}}))},[m,C,n,d,I,a,s,p,$,W]),te=o.useCallback(()=>{(n||d)&&C&&v(A),I&&c(z),i(!1),w(!1),S(null)},[n,d,I,C,A,z,v,c]),fe=o.useCallback(l=>{if($!=="wall"){!n&&!d&&(M(null),j(null),U(null));return}l.stopPropagation();const{x:h,y:L}=u(l);if(!W)K({x:h,y:L});else{const g={id:`wall_${Date.now()}`,x1:W.x,y1:W.y,x2:h,y2:L,stroke:"#52525B",strokeWidth:5},q=[...z.filter(Y=>Y.id!=="preview"),g];H(q),K(null)}},[$,W,n,d,z]),xe=l=>{B(l),K(null),l==="structure"?F():y(h=>h.filter(L=>L.id!=="preview"))};o.useEffect(()=>(document.addEventListener("mousemove",X),document.addEventListener("mouseup",te),document.addEventListener("touchmove",X),document.addEventListener("touchend",te),()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",te),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",te)}),[X,te]);const Re=({wall:l})=>{const h=l.id==="preview",L=T===l.id;return e.jsxs("g",{onClick:g=>ee(g,l.id),cursor:"pointer",children:[e.jsx("line",{x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stroke:"transparent",strokeWidth:"15"}),e.jsx("line",{x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,stroke:h?"#ef4444":L?"#3D84ED":l.stroke,strokeWidth:l.strokeWidth,strokeLinecap:"round",opacity:h?.7:1}),!h&&e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:l.x1,cy:l.y1,r:6,fill:"white",stroke:"#52525B",strokeWidth:"2",className:"cursor-move hover:fill-brand-blue",onMouseDown:g=>me(g,l.id,"start")}),e.jsx("circle",{cx:l.x2,cy:l.y2,r:6,fill:"white",stroke:"#52525B",strokeWidth:"2",className:"cursor-move hover:fill-brand-blue",onMouseDown:g=>me(g,l.id,"end")})]})]})},ye=({data:l,isStructure:h=!1,onClick:L})=>{const{layout:g,name:q,rate:Y,label:ut}=l,Ke=h?C===l.id:m===l.id,Ce=(G,ft)=>z.some(ze=>ss(G,ft,ze.x1,ze.y1,ze.x2,ze.y2)<12),$e=Ce(g.x,g.y),Qe=Ce(g.x+g.width,g.y),Xe=Ce(g.x+g.width,g.y+g.height),Ze=Ce(g.x,g.y+g.height),ne=8,pt=[`M ${g.x+($e?0:ne)} ${g.y}`,`L ${g.x+g.width-(Qe?0:ne)} ${g.y}`,`Q ${g.x+g.width} ${g.y} ${g.x+g.width} ${g.y+(Qe?0:ne)}`,`L ${g.x+g.width} ${g.y+g.height-(Xe?0:ne)}`,`Q ${g.x+g.width} ${g.y+g.height} ${g.x+g.width-(Xe?0:ne)} ${g.y+g.height}`,`L ${g.x+(Ze?0:ne)} ${g.y+g.height}`,`Q ${g.x} ${g.y+g.height} ${g.x} ${g.y+g.height-(Ze?0:ne)}`,`L ${g.x} ${g.y+($e?0:ne)}`,`Q ${g.x} ${g.y} ${g.x+($e?0:ne)} ${g.y}`,"Z"].join(" ");return e.jsxs("g",{onClick:G=>{G.stopPropagation(),L(l)},cursor:"pointer",style:{filter:Ke?`drop-shadow(0 0 5px ${g.color})`:"none"},pointerEvents:$!=="select"?"none":"auto",children:[e.jsx("path",{d:pt,fill:g.color,opacity:h?"0.5":"0.8",stroke:g.color,strokeWidth:"4",strokeDasharray:h?"5,5":"0",onMouseDown:G=>h?ae(G,l):N(G,l),onTouchStart:G=>h?ae(G,l):N(G,l),style:{cursor:d?"default":"grab"}}),e.jsxs("text",{x:g.x+g.width/2,y:g.y+g.height/2,fill:"white",textAnchor:"middle",dominantBaseline:"middle",style:{pointerEvents:"none",userSelect:"none"},children:[e.jsx("tspan",{x:g.x+g.width/2,dy:"-0.5em",fontWeight:"bold",fontSize:"14",children:h?ut||"Area":q}),!h&&Y&&e.jsxs("tspan",{x:g.x+g.width/2,dy:"1.2em",fontSize:"12",children:["$",Y,"/hr"]})]}),Ke&&e.jsx("rect",{x:g.x+g.width-10,y:g.y+g.height-10,width:"20",height:"20",fill:"white",stroke:"black",strokeWidth:"2",rx:"4",cursor:"nwse-resize",onMouseDown:G=>h?re(G,l,"br"):O(G,l,"br"),onTouchStart:G=>h?re(G,l,"br"):O(G,l,"br")})]})};return e.jsxs("div",{className:"flex flex-col h-[650px]",children:[e.jsxs("div",{className:"p-3 border-b dark:border-gray-700 flex justify-between items-center bg-white dark:bg-[#2c2e36] rounded-t-xl",children:[e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 font-medium",children:[e.jsxs("button",{onClick:Q,disabled:!C&&!T,className:"hover:text-brand-blue disabled:opacity-50 flex items-center gap-1",children:[e.jsx(We,{size:14})," Copy"]}),e.jsxs("button",{onClick:ue,disabled:!b,className:"hover:text-brand-blue disabled:opacity-50 flex items-center gap-1",children:[e.jsx(yt,{size:14})," Paste"]}),e.jsxs("button",{onClick:pe,disabled:!C&&!T,className:"hover:text-brand-blue disabled:opacity-50 flex items-center gap-1",children:[e.jsx(jt,{size:14})," Cut"]}),e.jsxs("button",{onClick:se,disabled:!C&&!T,className:"hover:text-red-500 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(oe,{size:14})," Delete"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:`px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 transition ${$==="structure"?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200"}`,onClick:()=>xe("structure"),children:[e.jsx(vt,{size:16})," Add Lobby / Area"]}),e.jsxs("button",{className:`px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 transition ${$==="wall"?"bg-red-500 text-white shadow-lg":"bg-brand-blue text-white hover:bg-blue-600"}`,onClick:()=>xe($==="wall"?"select":"wall"),children:[e.jsx(kt,{size:16})," ",$==="wall"?W?"Finish Wall":"Drawing Mode":"Add Wall"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-[#1f2128] rounded-b-xl border-x border-b dark:border-gray-700 relative",style:{cursor:$==="wall"?"crosshair":"default"},tabIndex:0,onKeyDown:l=>{},children:[e.jsxs("svg",{ref:k,width:D,height:P,className:"w-full h-full shadow-inner focus:outline-none",viewBox:`0 0 ${D} ${P}`,onMouseMove:X,onMouseUp:te,onTouchMove:X,onTouchEnd:te,onClick:fe,children:[e.jsx("pattern",{id:"smallGrid",width:Z,height:Z,patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:`M ${Z} 0 L 0 0 0 ${Z}`,fill:"none",stroke:"#e5e7eb",strokeWidth:"0.5"})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#smallGrid)"}),A.map(l=>e.jsx(ye,{data:l,isStructure:!0,onClick:()=>j(l.id)},l.id)),s.map(l=>e.jsx(ye,{data:l,onClick:h=>r(s.findIndex(L=>L.id===h.id))},l.id)),z.map(l=>e.jsx(Re,{wall:l},l.id)),e.jsxs("text",{x:"10",y:"20",fontSize:"10",fill:"#9CA3AF",children:["Grid: ",Z,"px | ",z.length," Walls"]})]}),C&&e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white dark:bg-dark-card p-2 rounded shadow border dark:border-gray-600 text-xs flex gap-2",children:[e.jsx("input",{className:"bg-transparent border-b border-gray-300 focus:border-blue-500 outline-none dark:text-white",value:(je=A.find(l=>l.id===C))==null?void 0:je.label,onChange:l=>{const h=l.target.value;E(L=>L.map(q=>q.id===C?{...q,label:h}:q))},onBlur:()=>_(A)}),e.jsx("button",{onClick:se,className:"text-red-500 hover:bg-red-50 rounded p-1",children:e.jsx(oe,{size:14})})]})]})]})}function rs({user:s,userData:t,onUpdate:f}){const[r,p]=o.useState((t==null?void 0:t.rooms)||[]),[c,v]=o.useState((t==null?void 0:t.floorplanWalls)||[]),[k,n]=o.useState((t==null?void 0:t.floorplanStructures)||[]),[i,d]=o.useState(null),[w,a]=o.useState(!1),[x,m]=o.useState(!1),[M,C]=o.useState(null),[j,T]=o.useState("list"),U={name:"",description:"",rate:50,capacity:4,equipment:"",amenities:[],minBookingHours:1,active:!0,color:"#3B82F6"},I=async(P,u=c,H=k)=>{},S=(P,u)=>{const H=r.map(_=>_.id===P?{..._,layout:u}:_);p(H)},z=async P=>{},y=async P=>{},A=P=>{P>=0&&P<r.length&&b(P)},E=()=>{d({...U,name:`Room ${r.length+1}`}),a(!0)},b=P=>{d({...r[P]}),a(!1),C(P)},R=async()=>{if(!i.name.trim()){V.error("Room name is required");return}w?[...r]:r.map((P,u)=>u===M?i:P),await I(),d(null),a(!1),C(null)},$=async P=>{confirm(`Delete "${r[P].name}"? This cannot be undone.`)&&(r.filter((u,H)=>H!==P),await I())},B=async P=>{const u={...r[P],name:`${r[P].name} (Copy)`};[...r],await I()},W=()=>{d(null),a(!1),C(null)},K=["Isolation Booth","Live Room","Control Room","Lounge Area","Private Bathroom","Natural Light","Blackout Curtains","Video Feed","Climate Control","Sound Lock"],D=r.map((P,u)=>({...P,id:P.id||`room_${u}`,layout:P.layout||{x:50+u%3*200,y:50+Math.floor(u/3)*150,width:180,height:120,color:P.color||"#3B82F6"}}));return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Te,{className:"text-brand-blue",size:24}),"Room Management"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure your studio rooms, rates, and equipment"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>T("list"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition flex items-center gap-1.5 ${j==="list"?"bg-white dark:bg-gray-700 shadow text-brand-blue":"text-gray-600 dark:text-gray-400"}`,children:[e.jsx(Nt,{size:16})," List"]}),e.jsxs("button",{onClick:()=>T("floorplan"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition flex items-center gap-1.5 ${j==="floorplan"?"bg-white dark:bg-gray-700 shadow text-brand-blue":"text-gray-600 dark:text-gray-400"}`,children:[e.jsx(wt,{size:16})," Floorplan"]})]}),e.jsxs("button",{onClick:E,disabled:w||i,className:"bg-brand-blue text-white px-4 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Se,{size:18})," Add Room"]})]})]}),w&&i&&e.jsx(at,{room:i,setRoom:d,onSave:R,onCancel:W,saving:x,isNew:!0,roomAmenities:K}),j==="floorplan"&&!w&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsx(as,{rooms:D,walls:c,structures:k,onRoomClick:A,onLayoutChange:S,onWallsChange:z,onStructuresChange:y}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-[#23262f] border-t dark:border-gray-700 text-xs text-gray-500",children:[e.jsx("strong",{children:"Tips:"})," Click a room to edit • Drag to reposition • Use corner handles to resize • Add walls to define boundaries"]})]}),j==="list"&&e.jsx("div",{className:"space-y-4",children:r.length===0&&!w?e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border-2 border-dashed dark:border-gray-700 p-12 text-center",children:[e.jsx(Te,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-2",children:"No Rooms Yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4 max-w-sm mx-auto",children:"Add your first room to start accepting bookings"}),e.jsx("button",{onClick:E,className:"bg-brand-blue text-white px-6 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition",children:"Add Your First Room"})]}):r.map((P,u)=>e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-[#23262f] transition",onClick:()=>C(M===u?null:u),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:P.color||"#3B82F6"},children:P.name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:P.name}),P.active===!1&&e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-0.5 rounded",children:"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qe,{size:14}),"$",P.rate,"/hr"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{size:14}),P.capacity," people"]}),P.equipment&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(nt,{size:14}),P.equipment.split(",").length," items"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),B(u)},className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Duplicate",children:e.jsx(We,{size:16})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),b(u)},className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edit",children:e.jsx(Oe,{size:16})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),$(u)},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Delete",children:e.jsx(oe,{size:16})}),M===u?e.jsx(it,{size:20}):e.jsx(ot,{size:20})]})]}),M===u&&i&&e.jsx("div",{className:"border-t dark:border-gray-700",children:e.jsx(at,{room:i,setRoom:d,onSave:R,onCancel:W,saving:x,isNew:!1,roomAmenities:K})}),M===u&&!i&&e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#1f2128]",children:[P.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:P.description}),P.equipment&&e.jsx("div",{className:"flex flex-wrap gap-2",children:P.equipment.split(",").map((H,_)=>e.jsx("span",{className:"text-xs bg-white dark:bg-gray-800 border dark:border-gray-700 px-2 py-1 rounded",children:H.trim()},_))})]})]},u))})]})}function at({room:s,setRoom:t,onSave:f,onCancel:r,saving:p,isNew:c,roomAmenities:v}){const k=n=>{const i=s.amenities||[];i.includes(n)?t({...s,amenities:i.filter(d=>d!==n)}):t({...s,amenities:[...i,n]})};return e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-[#1f2128] space-y-5",children:[c&&e.jsx("h3",{className:"font-bold dark:text-white text-lg mb-4",children:"Add New Room"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Room Name *"}),e.jsx("input",{className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",value:s.name,onChange:n=>t({...s,name:n.target.value}),placeholder:"e.g. Studio A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Room Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",className:"w-12 h-12 rounded-lg border dark:border-gray-600 cursor-pointer",value:s.color||"#3B82F6",onChange:n=>t({...s,color:n.target.value})}),e.jsx("input",{className:"flex-1 p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white",value:s.color||"#3B82F6",onChange:n=>t({...s,color:n.target.value}),placeholder:"#3B82F6"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Description"}),e.jsx("textarea",{className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",rows:2,value:s.description||"",onChange:n=>t({...s,description:n.target.value}),placeholder:"Describe this room, its vibe, and what makes it special..."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Hourly Rate ($)"}),e.jsx("input",{type:"number",className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",value:s.rate,onChange:n=>t({...s,rate:parseInt(n.target.value)||0}),min:0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Capacity"}),e.jsx("input",{type:"number",className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",value:s.capacity,onChange:n=>t({...s,capacity:parseInt(n.target.value)||1}),min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Min Hours"}),e.jsx("input",{type:"number",className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",value:s.minBookingHours||1,onChange:n=>t({...s,minBookingHours:parseInt(n.target.value)||1}),min:1})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 p-3 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl cursor-pointer w-full",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-brand-blue",checked:s.active!==!1,onChange:n=>t({...s,active:n.target.checked})}),e.jsx("span",{className:"text-sm font-medium dark:text-white",children:"Active"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Equipment"}),e.jsx(ht,{value:s.equipment||"",onChange:n=>t({...s,equipment:n}),placeholder:"Search and add equipment...",multi:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:"Room Features"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(n=>e.jsx("button",{type:"button",onClick:()=>k(n),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all border ${(s.amenities||[]).includes(n)?"bg-brand-blue text-white border-brand-blue":"bg-white dark:bg-[#2c2e36] text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-600 hover:border-brand-blue"}`,children:n},n))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[e.jsx("button",{onClick:r,className:"px-5 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl font-medium transition",children:"Cancel"}),e.jsxs("button",{onClick:f,disabled:p,className:"px-6 py-2.5 bg-brand-blue text-white rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50",children:[p?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(he,{size:18}),c?"Add Room":"Save Changes"]})]})]})}function ls({user:s,userData:t,onUpdate:f}){const[r,p]=o.useState((t==null?void 0:t.studioPhotos)||[]),[c,v]=o.useState(0),[k,n]=o.useState(null),[i,d]=o.useState(null),{uploadMedia:w,uploading:a}=Ve(),x=(s==null?void 0:s.id)||(s==null?void 0:s.uid),m=o.useCallback(async y=>!1,[x,f]),M=o.useCallback(async y=>{if(!y||y.length===0)return;const A=12;if(r.length>=A){V.error(`Maximum ${A} photos allowed`);return}const E=V.loading("Uploading photos..."),b=[];for(const R of Array.from(y).slice(0,A-r.length)){if(!R.type.startsWith("image/")){V.error(`${R.name} is not an image`);continue}if(R.size>5*1024*1024){V.error(`${R.name} is too large (max 5MB)`);continue}try{const $=Date.now(),B=await w(R,`studio/gallery/${x}`);B!=null&&B.url&&b.push({id:$.toString(),url:B.url,path:B.storageRef||`studio/gallery/${x}/${$}_${R.name}`,filename:R.name,caption:"",isCover:r.length===0&&b.length===0,uploadedAt:new Date().toISOString()})}catch($){console.error("Upload error:",$),V.error(`Failed to upload ${R.name}`)}}b.length>0?await m([...r,...b])&&V.success(`${b.length} photo(s) uploaded!`,{id:E}):V.dismiss(E),v(0)},[r,x,m,w]),C=async y=>{const A=r[y];if(!confirm("Delete this photo?"))return;const E=V.loading("Deleting...");try{let b=r.filter((R,$)=>$!==y);A.isCover&&b.length>0&&(b=b.map((R,$)=>({...R,isCover:$===0}))),await m(b),V.success("Photo deleted",{id:E})}catch(b){console.error("Delete error:",b),V.error("Failed to delete photo",{id:E})}},j=async y=>{const A=r.map((E,b)=>({...E,isCover:b===y}));await m(A),V.success("Cover photo updated")},T=y=>{d(y)},U=(y,A)=>{if(y.preventDefault(),i===null||i===A)return;const E=[...r],[b]=E.splice(i,1);E.splice(A,0,b),p(E),d(A)},I=async()=>{i!==null&&(await m(r),d(null))},S=y=>{var E;y.preventDefault();const A=(E=y.dataTransfer)==null?void 0:E.files;A&&M(A)},z=r.find(y=>y.isCover)||r[0];return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Me,{className:"text-brand-blue",size:24}),"Photo Gallery"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Showcase your studio with up to 12 photos"})]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.length,"/12 photos"]})]}),z&&e.jsxs("div",{className:"relative rounded-xl overflow-hidden aspect-video bg-gray-100 dark:bg-gray-800 group",children:[e.jsx("img",{src:z.url,alt:"Cover",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ne,{size:16,className:"fill-yellow-400 text-yellow-400"}),"Cover Photo"]})})})]}),e.jsx("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${a?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-brand-blue hover:bg-blue-50/50 dark:hover:bg-blue-900/10"}`,onDrop:S,onDragOver:y=>y.preventDefault(),children:a?e.jsxs("div",{className:"space-y-3",children:[e.jsx(de,{className:"mx-auto animate-spin text-brand-blue",size:40}),e.jsx("div",{className:"w-full max-w-xs mx-auto bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-brand-blue h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Uploading... ",Math.round(c),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"mx-auto text-gray-400 mb-3",size:40}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Drag & drop images here, or"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"text-brand-blue font-bold hover:underline",children:"browse files"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:y=>M(y.target.files),disabled:a})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"JPG, PNG or WebP. Max 5MB per file."})]})}),r.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[r.map((y,A)=>e.jsxs("div",{draggable:!0,onDragStart:()=>T(A),onDragOver:E=>U(E,A),onDragEnd:I,className:`relative aspect-square rounded-xl overflow-hidden group bg-gray-100 dark:bg-gray-800 cursor-move ${i===A?"opacity-50 ring-2 ring-brand-blue":""}`,children:[e.jsx("img",{src:y.url,alt:y.caption||`Studio photo ${A+1}`,className:"w-full h-full object-cover"}),y.isCover&&e.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-lg flex items-center gap-1",children:[e.jsx(Ne,{size:12,className:"fill-white"})," Cover"]}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>n(y),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition",title:"View",children:e.jsx(xt,{size:18})}),!y.isCover&&e.jsx("button",{onClick:()=>j(A),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition",title:"Set as cover",children:e.jsx(Ne,{size:18})}),e.jsx("button",{onClick:()=>C(A),className:"p-2 bg-red-500/80 hover:bg-red-500 rounded-lg text-white transition",title:"Delete",children:e.jsx(oe,{size:18})})]}),e.jsx("div",{className:"absolute top-2 right-2 p-1 bg-black/40 rounded text-white opacity-0 group-hover:opacity-100 transition",children:e.jsx(St,{size:14})})]},y.id)),r.length<12&&e.jsxs("label",{className:"aspect-square rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-brand-blue transition cursor-pointer flex flex-col items-center justify-center text-gray-400 hover:text-brand-blue",children:[e.jsx(Se,{size:32}),e.jsx("span",{className:"text-xs mt-1",children:"Add Photo"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:y=>M(y.target.files),disabled:a})]})]}),r.length===0&&!a&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Me,{size:48,className:"mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"No photos uploaded yet"}),e.jsx("p",{className:"text-sm",children:"Add photos to attract more clients"})]}),k&&e.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>n(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition",onClick:()=>n(null),children:e.jsx(ce,{size:32})}),e.jsx("img",{src:k.url,alt:k.caption||"Studio photo",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:y=>y.stopPropagation()}),k.caption&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 bg-black/70 text-white px-6 py-3 rounded-xl",children:k.caption})]})]})}const Pe=[{id:"sunday",label:"Sunday",short:"Sun"},{id:"monday",label:"Monday",short:"Mon"},{id:"tuesday",label:"Tuesday",short:"Tue"},{id:"wednesday",label:"Wednesday",short:"Wed"},{id:"thursday",label:"Thursday",short:"Thu"},{id:"friday",label:"Friday",short:"Fri"},{id:"saturday",label:"Saturday",short:"Sat"}],ds={sunday:{closed:!0,open:"10:00",close:"18:00"},monday:{closed:!1,open:"09:00",close:"22:00"},tuesday:{closed:!1,open:"09:00",close:"22:00"},wednesday:{closed:!1,open:"09:00",close:"22:00"},thursday:{closed:!1,open:"09:00",close:"22:00"},friday:{closed:!1,open:"09:00",close:"23:00"},saturday:{closed:!1,open:"10:00",close:"23:00"}};function ns({user:s,userData:t,onUpdate:f}){const[r,p]=o.useState((t==null?void 0:t.operatingHours)||ds),[c,v]=o.useState((t==null?void 0:t.blackoutDates)||[]),[k,n]=o.useState(!1),[i,d]=o.useState({start:"",end:"",reason:""}),[w,a]=o.useState(!1),x=async()=>{},m=(S,z,y)=>{p(A=>({...A,[S]:{...A[S],[z]:y}}))},M=S=>{p(z=>{var y;return{...z,[S]:{...z[S],closed:!((y=z[S])!=null&&y.closed)}}})},C=S=>{const z=r[S],y=["monday","tuesday","wednesday","thursday","friday"];p(A=>{const E={...A};return y.forEach(b=>{E[b]={...z}}),E}),V.success("Copied to all weekdays")},j=()=>{if(!i.start){V.error("Start date is required");return}const S={id:Date.now().toString(),start:i.start,end:i.end||i.start,reason:i.reason||"Blocked"};v([...c,S]),d({start:"",end:"",reason:""}),a(!1)},T=S=>{v(c.filter(z=>z.id!==S))},U=S=>{if(!S)return"";const[z,y]=S.split(":"),A=parseInt(z),E=A>=12?"PM":"AM";return`${A===0?12:A>12?A-12:A}:${y} ${E}`},I=Pe.reduce((S,z)=>{const y=r[z.id];if(y!=null&&y.closed)return S;const[A,E]=((y==null?void 0:y.open)||"09:00").split(":").map(Number),[b,R]=((y==null?void 0:y.close)||"17:00").split(":").map(Number),$=A*60+E,B=b*60+R;return S+Math.max(0,(B-$)/60)},0);return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(_e,{className:"text-brand-blue",size:24}),"Availability & Hours"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Set your operating hours and manage blackout dates"})]}),e.jsxs("button",{onClick:x,disabled:k,className:"bg-brand-blue text-white px-6 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50",children:[k?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(he,{size:18}),"Save Changes"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:"Weekly Availability"}),e.jsxs("p",{className:"text-indigo-100",children:[Pe.filter(S=>{var z;return!((z=r[S.id])!=null&&z.closed)}).length," days open • ",Math.round(I)," hours/week"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold",children:Math.round(I)}),e.jsx("div",{className:"text-sm text-indigo-100",children:"hours"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Ct,{size:18,className:"text-amber-500"}),"Operating Hours"]})}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:Pe.map(S=>{const z=r[S.id]||{closed:!1,open:"09:00",close:"17:00"};return e.jsxs("div",{className:`p-4 flex items-center gap-4 ${z.closed?"bg-gray-50 dark:bg-[#1f2128]":""}`,children:[e.jsx("div",{className:"w-28",children:e.jsx("span",{className:`font-medium ${z.closed?"text-gray-400":"dark:text-white"}`,children:S.label})}),e.jsx("button",{onClick:()=>M(S.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${z.closed?"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}`,children:z.closed?"Closed":"Open"}),!z.closed&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"time",value:z.open||"09:00",onChange:y=>m(S.id,"open",y.target.value),className:"p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white text-sm"}),e.jsx("span",{className:"text-gray-400",children:"to"}),e.jsx("input",{type:"time",value:z.close||"17:00",onChange:y=>m(S.id,"close",y.target.value),className:"p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white text-sm"})]}),e.jsxs("span",{className:"text-sm text-gray-400 hidden md:inline",children:[U(z.open)," – ",U(z.close)]}),e.jsx("button",{onClick:()=>C(S.id),className:"ml-auto p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Copy to all weekdays",children:e.jsx(We,{size:16})})]})]},S.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Je,{size:18,className:"text-indigo-500"}),"Blackout Dates"]}),e.jsxs("button",{onClick:()=>a(!w),className:"text-sm bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 px-3 py-1.5 rounded-lg font-bold hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition flex items-center gap-1",children:[e.jsx(Se,{size:16})," Add Blackout"]})]}),w&&e.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 border-b dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Start Date *"}),e.jsx("input",{type:"date",value:i.start,onChange:S=>d({...i,start:S.target.value}),className:"w-full p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"End Date"}),e.jsx("input",{type:"date",value:i.end,onChange:S=>d({...i,end:S.target.value}),className:"w-full p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:i.start})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Reason"}),e.jsx("input",{type:"text",value:i.reason,onChange:S=>d({...i,reason:S.target.value}),placeholder:"e.g. Holiday, Maintenance",className:"w-full p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:j,className:"flex-1 p-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition",children:"Add"}),e.jsx("button",{onClick:()=>a(!1),className:"p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(ce,{size:20})})]})]})}),e.jsx("div",{className:"p-4",children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Je,{size:32,className:"mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No blackout dates scheduled"}),e.jsx("p",{className:"text-xs",children:"Add dates when your studio is unavailable"})]}):e.jsx("div",{className:"space-y-2",children:c.sort((S,z)=>new Date(S.start)-new Date(z.start)).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#1f2128] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center",children:e.jsx(ge,{className:"text-indigo-600 dark:text-indigo-400",size:18})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium dark:text-white text-sm",children:[new Date(S.start).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S.end!==S.start&&e.jsxs(e.Fragment,{children:[" – ",new Date(S.end).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:S.reason})]})]}),e.jsx("button",{onClick:()=>T(S.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:e.jsx(oe,{size:16})})]},S.id))})})]}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ue,{className:"text-amber-600 flex-shrink-0",size:20}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold text-amber-800 dark:text-amber-300 mb-1",children:"Availability Tips"}),e.jsxs("ul",{className:"text-amber-700 dark:text-amber-400 space-y-1",children:[e.jsx("li",{children:"• Operating hours determine when clients can book sessions"}),e.jsx("li",{children:"• Use blackout dates for holidays, maintenance, or personal time"}),e.jsx("li",{children:"• Individual room availability can be set in the Rooms section"})]})]})]})})]})}function is({user:s,userData:t,onUpdate:f}){var x,m,M,C,j,T,U,I,S,z,y,A,E,b,R,$,B,W,K,D,P;const[r,p]=o.useState({minBookingHours:((x=t==null?void 0:t.policies)==null?void 0:x.minBookingHours)??2,maxBookingHours:((m=t==null?void 0:t.policies)==null?void 0:m.maxBookingHours)??12,advanceBookingDays:((M=t==null?void 0:t.policies)==null?void 0:M.advanceBookingDays)??14,minAdvanceHours:((C=t==null?void 0:t.policies)==null?void 0:C.minAdvanceHours)??24,autoApprove:((j=t==null?void 0:t.policies)==null?void 0:j.autoApprove)??!1,cancellationPolicy:((T=t==null?void 0:t.policies)==null?void 0:T.cancellationPolicy)??"moderate",cancellationNoticeHours:((U=t==null?void 0:t.policies)==null?void 0:U.cancellationNoticeHours)??48,refundPercentage:((I=t==null?void 0:t.policies)==null?void 0:I.refundPercentage)??50,depositRequired:((S=t==null?void 0:t.policies)==null?void 0:S.depositRequired)??!0,depositPercentage:((z=t==null?void 0:t.policies)==null?void 0:z.depositPercentage)??25,peakHourMultiplier:((y=t==null?void 0:t.policies)==null?void 0:y.peakHourMultiplier)??1,peakHoursStart:((A=t==null?void 0:t.policies)==null?void 0:A.peakHoursStart)??"",peakHoursEnd:((E=t==null?void 0:t.policies)==null?void 0:E.peakHoursEnd)??"",weekendMultiplier:((b=t==null?void 0:t.policies)==null?void 0:b.weekendMultiplier)??1,houseRules:((R=t==null?void 0:t.policies)==null?void 0:R.houseRules)??"",whatToExpect:(($=t==null?void 0:t.policies)==null?void 0:$.whatToExpect)??"",whatToBring:((B=t==null?void 0:t.policies)==null?void 0:B.whatToBring)??"",parkingInstructions:((W=t==null?void 0:t.policies)==null?void 0:W.parkingInstructions)??"",requiresWaiver:((K=t==null?void 0:t.policies)==null?void 0:K.requiresWaiver)??!1,waiverText:((D=t==null?void 0:t.policies)==null?void 0:D.waiverText)??"",ageRequirement:((P=t==null?void 0:t.policies)==null?void 0:P.ageRequirement)??18}),[c,v]=o.useState(!1),[k,n]=o.useState("booking"),i=async()=>{},d=(u,H)=>{p(_=>({..._,[u]:H}))},w=[{id:"flexible",label:"Flexible",description:"Full refund up to 24 hours before session",color:"green"},{id:"moderate",label:"Moderate",description:"50% refund up to 48 hours before session",color:"amber"},{id:"strict",label:"Strict",description:"No refunds within 7 days of session",color:"red"},{id:"custom",label:"Custom",description:"Set your own cancellation terms",color:"blue"}],a=({id:u,title:H,icon:_,children:se})=>{const Q=k===u;return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>n(Q?null:u),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-[#23262f] transition",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-blue/10 rounded-lg flex items-center justify-center",children:e.jsx(_,{className:"text-brand-blue",size:20})}),e.jsx("h3",{className:"font-bold dark:text-white",children:H})]}),Q?e.jsx(it,{size:20}):e.jsx(ot,{size:20})]}),Q&&e.jsx("div",{className:"p-4 pt-0 border-t dark:border-gray-700",children:se})]})};return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Ee,{className:"text-brand-blue",size:24}),"Policies & Rules"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Set booking rules, cancellation policies, and house rules"})]}),e.jsxs("button",{onClick:i,disabled:c,className:"bg-brand-blue text-white px-6 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50",children:[c?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(he,{size:18}),"Save Changes"]})]}),e.jsx(a,{id:"booking",title:"Booking Rules",icon:_e,children:e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Min Hours"}),e.jsx("input",{type:"number",value:r.minBookingHours,onChange:u=>d("minBookingHours",parseInt(u.target.value)||1),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Max Hours"}),e.jsx("input",{type:"number",value:r.maxBookingHours,onChange:u=>d("maxBookingHours",parseInt(u.target.value)||12),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Book Ahead (Days)"}),e.jsx("input",{type:"number",value:r.advanceBookingDays,onChange:u=>d("advanceBookingDays",parseInt(u.target.value)||7),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:1})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Min Notice (Hrs)"}),e.jsx("input",{type:"number",value:r.minAdvanceHours,onChange:u=>d("minAdvanceHours",parseInt(u.target.value)||0),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white",children:"Auto-Approve Bookings"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Automatically confirm bookings without manual approval"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.autoApprove,onChange:u=>d("autoApprove",u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-brand-blue"})]})]})]})}),e.jsx(a,{id:"cancellation",title:"Cancellation Policy",icon:zt,children:e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:w.map(u=>e.jsxs("button",{onClick:()=>d("cancellationPolicy",u.id),className:`p-4 rounded-xl border-2 text-left transition ${r.cancellationPolicy===u.id?`border-${u.color}-500 bg-${u.color}-50 dark:bg-${u.color}-900/20`:"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:`font-bold mb-1 ${r.cancellationPolicy===u.id?`text-${u.color}-700 dark:text-${u.color}-400`:"dark:text-white"}`,children:u.label}),e.jsx("div",{className:"text-xs text-gray-500",children:u.description})]},u.id))}),r.cancellationPolicy==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Notice Required (Hours)"}),e.jsx("input",{type:"number",value:r.cancellationNoticeHours,onChange:u=>d("cancellationNoticeHours",parseInt(u.target.value)||24),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Refund Percentage"}),e.jsx("input",{type:"number",value:r.refundPercentage,onChange:u=>d("refundPercentage",parseInt(u.target.value)||0),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:0,max:100})]})]})]})}),e.jsx(a,{id:"pricing",title:"Pricing & Deposits",icon:qe,children:e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white",children:"Require Deposit"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Collect partial payment when booking"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.depositRequired,onChange:u=>d("depositRequired",u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-blue"})]})]}),r.depositRequired&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Deposit Percentage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",value:r.depositPercentage,onChange:u=>d("depositPercentage",parseInt(u.target.value)),className:"flex-1",min:10,max:100,step:5}),e.jsxs("span",{className:"font-bold text-brand-blue w-14 text-right",children:[r.depositPercentage,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white mb-3",children:"Peak Hour Pricing"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Peak Start"}),e.jsx("input",{type:"time",value:r.peakHoursStart,onChange:u=>d("peakHoursStart",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Peak End"}),e.jsx("input",{type:"time",value:r.peakHoursEnd,onChange:u=>d("peakHoursEnd",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Rate Multiplier"}),e.jsx("input",{type:"number",value:r.peakHourMultiplier,onChange:u=>d("peakHourMultiplier",parseFloat(u.target.value)||1),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:1,max:3,step:.1})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Weekend Rate Multiplier"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",value:r.weekendMultiplier,onChange:u=>d("weekendMultiplier",parseFloat(u.target.value)),className:"flex-1",min:1,max:2,step:.1}),e.jsxs("span",{className:"font-bold dark:text-white w-16 text-right",children:[r.weekendMultiplier,"x"]})]}),r.weekendMultiplier>1&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Saturday & Sunday bookings will be ",Math.round((r.weekendMultiplier-1)*100),"% more"]})]})]})}),e.jsx(a,{id:"rules",title:"House Rules & Info",icon:Ee,children:e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Studio Rules"}),e.jsx("textarea",{value:r.houseRules,onChange:u=>d("houseRules",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",rows:4,placeholder:`• No smoking inside the studio
• Please arrive 10 minutes early
• Clean up after your session`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"What to Expect"}),e.jsx("textarea",{value:r.whatToExpect,onChange:u=>d("whatToExpect",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",rows:3,placeholder:"Describe what clients can expect when they arrive..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"What to Bring"}),e.jsx("textarea",{value:r.whatToBring,onChange:u=>d("whatToBring",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",rows:3,placeholder:`• Instrument cables
• Lyrics/charts
• Reference tracks`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Parking Instructions"}),e.jsx("textarea",{value:r.parkingInstructions,onChange:u=>d("parkingInstructions",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",rows:3,placeholder:"Describe parking situation and directions..."})]})]})]})}),e.jsx(a,{id:"legal",title:"Legal & Safety",icon:Ye,children:e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Minimum Age Requirement"}),e.jsx("input",{type:"number",value:r.ageRequirement,onChange:u=>d("ageRequirement",parseInt(u.target.value)||0),className:"w-32 p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",min:0})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-6",children:r.ageRequirement>0?`Clients must be ${r.ageRequirement}+ to book`:"No age restriction"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white",children:"Require Liability Waiver"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Clients must sign a waiver before booking"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.requiresWaiver,onChange:u=>d("requiresWaiver",u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-blue"})]})]}),r.requiresWaiver&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Waiver Text"}),e.jsx("textarea",{value:r.waiverText,onChange:u=>d("waiverText",u.target.value),className:"w-full p-3 border rounded-xl dark:bg-[#2c2e36] dark:border-gray-600 dark:text-white font-mono text-sm",rows:6,placeholder:"Enter your liability waiver text..."})]})]})]})})]})}const rt={pending:{label:"Pending",color:"amber",icon:Rt,bgClass:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"},confirmed:{label:"Confirmed",color:"green",icon:Fe,bgClass:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"},cancelled:{label:"Cancelled",color:"red",icon:Mt,bgClass:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"},completed:{label:"Completed",color:"blue",icon:gt,bgClass:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}};function os({user:s,onNavigateToChat:t}){const[f,r]=o.useState([]),[p,c]=o.useState([]),[v,k]=o.useState(!0),[n,i]=o.useState("all"),[d,w]=o.useState(""),[a,x]=o.useState(null),[m,M]=o.useState(null),[C,j]=o.useState("list"),[T,U]=o.useState(new Date),[I,S]=o.useState(!1),[z,y]=o.useState(null),[A,E]=o.useState(""),[b,R]=o.useState("full"),[$,B]=o.useState("09:00"),[W,K]=o.useState("17:00");o.useEffect(()=>{!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie},[s==null?void 0:s.id,s==null?void 0:s.uid]),o.useEffect(()=>{!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie},[s==null?void 0:s.id,s==null?void 0:s.uid]);const D=async(N,O)=>{},P=async()=>{!z||!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie},u=async N=>{},H=N=>{y(N),S(!0)},_=f.filter(N=>{var ae,re;const O=n==="all"||N.status===n,F=!d||((ae=N.clientName)==null?void 0:ae.toLowerCase().includes(d.toLowerCase()))||((re=N.roomName)==null?void 0:re.toLowerCase().includes(d.toLowerCase()));return O&&F}),se=_.reduce((N,O)=>{const F=O.date.toDateString();return N[F]||(N[F]=[]),N[F].push(O),N},{}),Q=f.filter(N=>N.status==="pending").length,ue=f.filter(N=>{const O=new Date().toDateString();return N.date.toDateString()===O&&N.status==="confirmed"}).length,pe=f.filter(N=>N.status==="confirmed"&&N.date>=new Date).reduce((N,O)=>N+(O.totalPrice||0),0);return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(At,{className:"animate-spin text-brand-blue",size:32})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(ge,{className:"text-brand-blue",size:24}),"Booking Management"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[f.length," total bookings • ",p.length," blocked slots"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-1 rounded-lg flex",children:[e.jsx("button",{onClick:()=>j("list"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition ${C==="list"?"bg-white dark:bg-gray-700 text-brand-blue shadow-sm":"text-gray-500"}`,children:"List"}),e.jsx("button",{onClick:()=>j("calendar"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition ${C==="calendar"?"bg-white dark:bg-gray-700 text-brand-blue shadow-sm":"text-gray-500"}`,children:"Calendar"})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:Q}),e.jsx("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Pending Approval"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ue}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Today's Sessions"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",pe.toLocaleString()]}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Upcoming Revenue"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",value:d,onChange:N=>w(N.target.value),placeholder:"Search by client or room...",className:"w-full pl-10 pr-4 py-2.5 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","confirmed","completed","cancelled"].map(N=>e.jsxs("button",{onClick:()=>i(N),className:`px-4 py-2 rounded-lg font-medium text-sm transition ${n===N?"bg-brand-blue text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[N.charAt(0).toUpperCase()+N.slice(1),N==="pending"&&Q>0&&e.jsx("span",{className:"ml-1.5 bg-amber-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:Q})]},N))})]}),C==="calendar"&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] flex justify-between items-center",children:[e.jsx("button",{onClick:()=>U(new Date(T.getFullYear(),T.getMonth()-1,1)),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition",children:e.jsx(He,{size:20,className:"text-gray-600 dark:text-gray-300"})}),e.jsx("h3",{className:"font-bold dark:text-white text-lg",children:T.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>U(new Date(T.getFullYear(),T.getMonth()+1,1)),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition",children:e.jsx(we,{size:20,className:"text-gray-600 dark:text-gray-300"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(N=>e.jsx("div",{className:"text-center text-sm font-bold text-gray-500 py-2",children:N},N))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const N=T.getFullYear(),O=T.getMonth(),F=new Date(N,O,1).getDay(),ae=new Date(N,O+1,0).getDate(),re=new Date,me=[];for(let ee=0;ee<F;ee++)me.push(e.jsx("div",{className:"aspect-square"},`empty-${ee}`));for(let ee=1;ee<=ae;ee++){const X=new Date(N,O,ee),te=X<new Date(re.getFullYear(),re.getMonth(),re.getDate()),fe=X.toDateString()===re.toDateString(),xe=f.filter(h=>new Date(h.date).toDateString()===X.toDateString()),Re=p.filter(h=>new Date(h.date).toDateString()===X.toDateString()),ye=xe.some(h=>h.status==="confirmed"),je=xe.some(h=>h.status==="pending"),l=Re.length>0;me.push(e.jsxs("button",{onClick:()=>!te&&H(X),disabled:te,className:`aspect-square p-1 rounded-xl flex flex-col items-center justify-center relative transition ${te?"opacity-40 cursor-not-allowed":l?"bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-700 hover:bg-red-200 dark:hover:bg-red-900/40":fe?"bg-brand-blue text-white":ye||je?"bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:`text-sm font-medium ${fe?"text-white":l?"text-red-700 dark:text-red-400":"dark:text-white"}`,children:ee}),e.jsxs("div",{className:"flex gap-0.5 mt-0.5",children:[ye&&e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),je&&e.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),l&&e.jsx(ve,{size:10,className:"text-red-600 dark:text-red-400"})]}),xe.length>0&&!fe&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-brand-blue text-white text-[10px] rounded-full flex items-center justify-center font-bold",children:xe.length})]},ee))}return me})()}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-4 pt-4 border-t dark:border-gray-700 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Confirmed"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full"}),"Pending"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{size:12,className:"text-red-500"}),"Blocked"]}),e.jsx("div",{className:"ml-auto text-gray-400",children:"Click a date to block off-platform bookings"})]})]}),p.length>0&&e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:[e.jsxs("h4",{className:"font-bold text-sm dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(ve,{size:14,className:"text-red-500"}),"Blocked Time Slots"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-[#2c2e36] rounded-lg border dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium dark:text-white text-sm",children:[new Date(N.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),N.timeSlot!=="full"&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",N.timeSlot==="custom"?`${N.startTime} - ${N.endTime}`:N.timeSlot,")"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:N.reason})]}),e.jsx("button",{onClick:()=>u(N.id),className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition",title:"Remove block",children:e.jsx(oe,{size:16})})]},N.id))})]})]}),C==="list"&&e.jsx(e.Fragment,{children:_.length===0?e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-12 text-center",children:[e.jsx(ge,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-2",children:"No Bookings Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n!=="all"?`No ${n} bookings`:"Bookings will appear here when clients book your studio"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(se).map(([N,O])=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase mb-3 flex items-center gap-2",children:[e.jsx(ge,{size:14}),new Date(N).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),e.jsxs("span",{className:"text-gray-400",children:["(",O.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:O.map(F=>{const ae=rt[F.status]||rt.pending;return e.jsx("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"text-center min-w-[70px]",children:[e.jsx("div",{className:"text-lg font-bold dark:text-white",children:F.startTime}),e.jsxs("div",{className:"text-xs text-gray-500",children:[F.duration,"h"]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold dark:text-white truncate",children:F.clientName||"Unknown Client"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${ae.bgClass}`,children:ae.label})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[F.roomName||"Main Room"," • $",F.totalPrice||0]}),F.notes&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 truncate",children:["Note: ",F.notes]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[F.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(F.id),disabled:m===F.id,className:"p-2 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition",title:"Approve",children:e.jsx(gt,{size:18})}),e.jsx("button",{onClick:()=>D(F.id),disabled:m===F.id,className:"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition",title:"Decline",children:e.jsx(ce,{size:18})})]}),F.status==="confirmed"&&e.jsx("button",{onClick:()=>D(F.id),disabled:m===F.id,className:"px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition text-sm font-medium",children:"Mark Complete"}),F.clientId&&t&&e.jsx("button",{onClick:()=>t(F.clientId),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Message Client",children:e.jsx($t,{size:18})}),e.jsx("button",{onClick:()=>x(F),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"View Details",children:e.jsx(xt,{size:18})})]})]})},F.id)})})]},N))})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(ve,{size:18,className:"text-red-500"}),"Block Time Slot"]}),e.jsx("button",{onClick:()=>{S(!1),y(null),E("")},children:e.jsx(ce,{size:20,className:"text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 uppercase font-bold mb-1",children:"Selected Date"}),e.jsx("div",{className:"text-lg font-bold dark:text-white",children:z==null?void 0:z.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold dark:text-white mb-2 block",children:"Time Slot"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"full",label:"Full Day"},{id:"morning",label:"Morning (6AM-12PM)"},{id:"afternoon",label:"Afternoon (12PM-6PM)"},{id:"evening",label:"Evening (6PM-12AM)"}].map(N=>e.jsx("button",{onClick:()=>R(N.id),className:`p-2 text-sm rounded-lg border transition ${b===N.id?"bg-red-100 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-700 dark:text-red-400":"border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-gray-300"}`,children:N.label},N.id))}),e.jsx("button",{onClick:()=>R("custom"),className:`w-full mt-2 p-2 text-sm rounded-lg border transition ${b==="custom"?"bg-red-100 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-700 dark:text-red-400":"border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 dark:text-gray-300"}`,children:"Custom Time Range"}),b==="custom"&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Start"}),e.jsx("input",{type:"time",value:$,onChange:N=>B(N.target.value),className:"w-full p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"End"}),e.jsx("input",{type:"time",value:W,onChange:N=>K(N.target.value),className:"w-full p-2 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white text-sm"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold dark:text-white mb-2 block",children:"Reason (optional)"}),e.jsx("input",{type:"text",value:A,onChange:N=>E(N.target.value),placeholder:"e.g., Private session, Maintenance, Personal...",className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{S(!1),y(null),E("")},className:"flex-1 py-2.5 border dark:border-gray-600 rounded-lg font-bold dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:"Cancel"}),e.jsxs("button",{onClick:P,className:"flex-1 py-2.5 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition flex items-center justify-center gap-2",children:[e.jsx(ve,{size:16}),"Block Time"]})]})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:"Booking Details"}),e.jsx("button",{onClick:()=>x(null),children:e.jsx(ce,{size:20,className:"text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-blue/10 rounded-full flex items-center justify-center",children:e.jsx(mt,{className:"text-brand-blue",size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold dark:text-white",children:a.clientName}),e.jsx("div",{className:"text-sm text-gray-500",children:a.clientEmail})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Date"}),e.jsx("div",{className:"dark:text-white",children:a.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Time"}),e.jsxs("div",{className:"dark:text-white",children:[a.startTime," (",a.duration,"h)"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Room"}),e.jsx("div",{className:"dark:text-white",children:a.roomName})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Total"}),e.jsxs("div",{className:"dark:text-white font-bold text-green-600",children:["$",a.totalPrice]})]})]}),a.notes&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg",children:[e.jsx("div",{className:"text-xs text-amber-600 uppercase font-bold mb-1",children:"Client Notes"}),e.jsx("div",{className:"text-amber-800 dark:text-amber-300 text-sm",children:a.notes})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Booked ",a.createdAt.toLocaleDateString()]})]})]})})]})}function cs({user:s,userData:t,onUpdate:f}){const[r,p]=o.useState((t==null?void 0:t.studioEquipment)||[]),[c,v]=o.useState(!1),[k,n]=o.useState(""),[i,d]=o.useState("all"),[w,a]=o.useState(!1),[x,m]=o.useState(null),M=async b=>{},C=async b=>{const R={...b,id:Date.now().toString(),addedAt:new Date().toISOString()};await M([...r,R]),a(!1)},j=async b=>{r.map(R=>R.id===b.id?b:R),await M(),m(null)},T=async b=>{confirm("Remove this item from inventory?")&&(r.filter(R=>R.id!==b),await M())},U=r.filter(b=>{var B,W,K;const R=!k||((B=b.name)==null?void 0:B.toLowerCase().includes(k.toLowerCase()))||((W=b.brand)==null?void 0:W.toLowerCase().includes(k.toLowerCase()))||((K=b.model)==null?void 0:K.toLowerCase().includes(k.toLowerCase())),$=i==="all"||b.category===i;return R&&$}),I=U.reduce((b,R)=>{const $=R.category||"Other";return b[$]||(b[$]=[]),b[$].push(R),b},{}),S=[...new Set(r.map(b=>b.category).filter(Boolean))],z=r.length,y=r.reduce((b,R)=>b+(parseFloat(R.value)||0),0),A=b=>({microphones_and_input_transducers:nt,monitoring_and_playback:Tt,mixing_consoles_and_control:Pt,outboard_signal_processing:De,computer_audio_and_interfaces:De})[b]||Ae,E=b=>{const R=Ie.find($=>$.id===b);return(R==null?void 0:R.label)||b};return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"text-brand-blue",size:24}),"Equipment Inventory"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage your studio gear and equipment"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"bg-brand-blue text-white px-4 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2",children:[e.jsx(Se,{size:18})," Add Equipment"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsx("div",{className:"text-2xl font-bold dark:text-white",children:z}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Items"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",y.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Est. Value"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsx("div",{className:"text-2xl font-bold dark:text-white",children:S.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Categories"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-blue",children:r.filter(b=>b.featured).length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Featured Items"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",value:k,onChange:b=>n(b.target.value),placeholder:"Search equipment...",className:"w-full pl-10 pr-4 py-2.5 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white"})]}),e.jsxs("select",{value:i,onChange:b=>d(b.target.value),className:"px-4 py-2.5 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),Ie.map(b=>e.jsx("option",{value:b.id,children:b.label},b.id))]})]}),U.length===0?e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border-2 border-dashed dark:border-gray-700 p-12 text-center",children:[e.jsx(Ae,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-2",children:"No Equipment Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:k||i!=="all"?"Try adjusting your filters":"Add your studio equipment to showcase your gear"}),e.jsx("button",{onClick:()=>a(!0),className:"bg-brand-blue text-white px-6 py-2.5 rounded-xl font-bold hover:bg-blue-600 transition",children:"Add Your First Item"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([b,R])=>{const $=A(b);return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#23262f] border-b dark:border-gray-700 flex items-center gap-3",children:[e.jsx($,{className:"text-brand-blue",size:20}),e.jsx("h3",{className:"font-bold dark:text-white",children:E(b)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",R.length,")"]})]}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:R.map(B=>e.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-[#23262f] transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold dark:text-white",children:[B.brand&&e.jsx("span",{className:"text-gray-500 font-medium",children:B.brand})," ",B.name||B.model]}),B.featured&&e.jsx("span",{className:"text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 px-2 py-0.5 rounded",children:"Featured"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[B.model&&B.name!==B.model&&e.jsx("span",{children:B.model}),B.serial&&e.jsxs("span",{className:"ml-2",children:["S/N: ",B.serial]})]}),B.notes&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:B.notes})]}),B.value&&e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["$",parseFloat(B.value).toLocaleString()]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>m(B),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",children:e.jsx(Oe,{size:16})}),e.jsx("button",{onClick:()=>T(B.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:e.jsx(oe,{size:16})})]})]},B.id))})]},b)})}),(w||x)&&e.jsx(xs,{item:x,onSave:x?j:C,onClose:()=>{a(!1),m(null)},saving:c})]})}function xs({item:s,onSave:t,onClose:f,saving:r}){const[p,c]=o.useState(s||{name:"",brand:"",model:"",category:"",serial:"",value:"",notes:"",featured:!1}),v=()=>{if(!p.name&&!p.model){V.error("Name or model is required");return}t(p)},k=n=>{c(i=>({...i,name:n.name||i.name,brand:n.brand||i.brand,model:n.model||i.model,category:n.category||i.category}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto animate-in zoom-in-95",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:s?"Edit Equipment":"Add Equipment"}),e.jsx("button",{onClick:f,children:e.jsx(ce,{size:20,className:"text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Quick Search"}),e.jsx(ht,{onSelect:k,placeholder:"Search for equipment..."})]}),e.jsxs("div",{className:"border-t dark:border-gray-700 pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Brand"}),e.jsx("input",{value:p.brand,onChange:n=>c({...p,brand:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",placeholder:"e.g. Neumann"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Model *"}),e.jsx("input",{value:p.model||p.name,onChange:n=>c({...p,model:n.target.value,name:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",placeholder:"e.g. U87"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Category"}),e.jsxs("select",{value:p.category,onChange:n=>c({...p,category:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Select category..."}),Ie.map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Serial Number"}),e.jsx("input",{value:p.serial,onChange:n=>c({...p,serial:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",placeholder:"Optional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Value ($)"}),e.jsx("input",{type:"number",value:p.value,onChange:n=>c({...p,value:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",placeholder:"Estimated value"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:n=>c({...p,notes:n.target.value}),className:"w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",rows:2,placeholder:"Additional details..."})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-[#1f2128] rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.featured,onChange:n=>c({...p,featured:n.target.checked}),className:"w-4 h-4 text-brand-blue rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white text-sm",children:"Featured Equipment"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Highlight this item on your studio profile"})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:f,className:"px-5 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium",children:"Cancel"}),e.jsxs("button",{onClick:v,disabled:r,className:"px-6 py-2.5 bg-brand-blue text-white rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50",children:[r?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(he,{size:18}),s?"Update":"Add Item"]})]})]})})}const gs=Lt({studioName:J().min(3,"Studio name is required"),address:J().min(5,"Address is required"),city:J().optional(),state:J().optional(),zip:J().optional(),lat:et().optional(),lng:et().optional(),studioDescription:J().max(1e3).optional(),email:J().email().optional().or(tt("")),phoneCell:J().optional(),phoneLand:J().optional(),website:J().url().optional().or(tt("")),hours:J().optional(),amenities:Wt(J()).optional(),hideAddress:Ht().optional()});function ms({user:s,userData:t,onUpdate:f}){const[r,p]=o.useState(!1),{register:c,control:v,handleSubmit:k,watch:n,setValue:i,formState:{errors:d,isDirty:w}}=Et({resolver:Bt(gs),defaultValues:{studioName:(t==null?void 0:t.studioName)||(t==null?void 0:t.profileName)||"",address:(t==null?void 0:t.address)||"",city:(t==null?void 0:t.city)||"",state:(t==null?void 0:t.state)||"",zip:(t==null?void 0:t.zip)||"",lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng,studioDescription:(t==null?void 0:t.studioDescription)||"",email:(t==null?void 0:t.email)||"",phoneCell:(t==null?void 0:t.phoneCell)||"",phoneLand:(t==null?void 0:t.phoneLand)||"",website:(t==null?void 0:t.website)||"",hours:(t==null?void 0:t.hours)||"",amenities:(t==null?void 0:t.amenities)||[],hideAddress:(t==null?void 0:t.hideAddress)||!1}}),a=n("amenities"),x=n("hideAddress"),m=j=>{const T=a||[];T.includes(j)?i("amenities",T.filter(U=>U!==j),{shouldDirty:!0}):i("amenities",[...T,j],{shouldDirty:!0})},M=async j=>{},C=j=>`w-full p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white transition-all focus:ring-2 focus:ring-brand-blue outline-none ${j?"border-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-200"}`;return e.jsxs("form",{onSubmit:k(M),className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(bt,{className:"text-brand-blue",size:24}),"Studio Settings"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Basic information and contact details"})]}),e.jsxs("button",{type:"submit",disabled:r||!w,className:`px-6 py-2.5 rounded-xl font-bold flex items-center gap-2 transition ${r||!w?"bg-gray-200 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-brand-blue text-white hover:bg-blue-600"}`,children:[r?e.jsx(de,{className:"animate-spin",size:18}):e.jsx(he,{size:18}),"Save Changes"]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-brand-blue"}),"General Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Studio Name *"}),e.jsx("input",{...c("studioName"),className:C(d.studioName),placeholder:"Your Studio Name"}),d.studioName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.studioName.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Description"}),e.jsx("textarea",{...c("studioDescription"),rows:3,className:C(d.studioDescription),placeholder:"Describe your studio, the vibe, and what makes it special..."})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(dt,{size:18,className:"text-brand-blue"}),"Location"]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800 mb-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",...c("hideAddress"),className:"w-5 h-5 mt-0.5 text-brand-blue rounded"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[e.jsx(Ye,{size:16,className:"text-brand-blue"}),"Private Home Studio Mode"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your exact address will be hidden from the public map. It will only be revealed after you approve a booking request."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(It,{control:v,name:"address",render:({field:{onChange:j,value:T}})=>{var U;return e.jsx(es,{label:"Street Address",value:T||"",onChange:j,onSelect:I=>{I.lat&&i("lat",I.lat),I.lng&&i("lng",I.lng),I.city&&i("city",I.city,{shouldDirty:!0}),I.state&&i("state",I.state,{shouldDirty:!0}),I.zip&&i("zip",I.zip,{shouldDirty:!0})},placeholder:"Start typing your address...",error:(U=d.address)==null?void 0:U.message,required:!0})}}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"City"}),e.jsx("input",{...c("city"),className:C(),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"State"}),e.jsx("input",{...c("state"),className:C(),placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"ZIP"}),e.jsx("input",{...c("zip"),className:C(),placeholder:"ZIP Code"})]})]})]}),x&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-amber-600 dark:text-amber-400",children:[e.jsx(qt,{size:16}),e.jsx("span",{children:"Address will be hidden until booking approval"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ut,{size:18,className:"text-brand-blue"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Email"}),e.jsx("input",{...c("email"),type:"email",className:C(d.email),placeholder:"studio@email.com"}),d.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Website"}),e.jsx("input",{...c("website"),className:C(d.website),placeholder:"https://yourstudio.com"}),d.website&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.website.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Cell Phone"}),e.jsx("input",{...c("phoneCell"),className:C(),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Landline"}),e.jsx("input",{...c("phoneLand"),className:C(),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Hours of Operation"}),e.jsx("input",{...c("hours"),className:C(),placeholder:"e.g. Mon-Fri 9AM-10PM, Sat-Sun 10AM-8PM"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ft,{size:18,className:"text-brand-blue"}),"Amenities"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Zt.map(j=>e.jsx("button",{type:"button",onClick:()=>m(j),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border ${a!=null&&a.includes(j)?"bg-brand-blue text-white border-brand-blue shadow-md":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:j},j))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:r||!w,className:`px-8 py-3 rounded-xl font-bold text-lg flex items-center gap-2 transition shadow-lg ${r||!w?"bg-gray-200 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-brand-blue text-white hover:bg-blue-600 hover:scale-[1.01]"}`,children:[r?e.jsx(de,{className:"animate-spin",size:20}):e.jsx(he,{size:20}),"Save Settings"]})})]})}const lt=[{id:"overview",label:"Overview",icon:le,description:"Dashboard & quick stats"},{id:"rooms",label:"Rooms",icon:Te,description:"Manage studio rooms"},{id:"equipment",label:"Equipment",icon:Ae,description:"Equipment inventory"},{id:"gallery",label:"Gallery",icon:Me,description:"Photo gallery"},{id:"availability",label:"Hours",icon:_e,description:"Operating hours"},{id:"policies",label:"Policies",icon:Ee,description:"Rules & pricing"},{id:"bookings",label:"Bookings",icon:ge,description:"Manage bookings"},{id:"settings",label:"Settings",icon:bt,description:"Studio info"}];function bs({user:s,userData:t}){const[f,r]=o.useState("overview"),[p,c]=o.useState({pendingBookings:0,recentBookings:[],totalRevenue:0}),[v,k]=o.useState(t);o.useEffect(()=>{(async()=>{!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie})()},[s==null?void 0:s.id,s==null?void 0:s.uid]);const n=a=>{k(x=>({...x,...a}))},i=a=>{r(a)},d=()=>{const a={user:s,userData:v,onUpdate:n};switch(f){case"overview":return e.jsx(st,{...a,stats:p,onNavigate:i});case"rooms":return e.jsx(rs,{...a});case"equipment":return e.jsx(cs,{...a});case"gallery":return e.jsx(ls,{...a});case"availability":return e.jsx(ns,{...a});case"policies":return e.jsx(is,{...a});case"bookings":return e.jsx(os,{...a});case"settings":return e.jsx(ms,{...a});default:return e.jsx(st,{...a,stats:p,onNavigate:i})}},w=lt.find(a=>a.id===f);return e.jsxs("div",{className:"max-w-7xl mx-auto pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx(Be,{size:14}),e.jsx("span",{children:"Business Center"}),e.jsx(we,{size:14}),e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Studio Manager"})]}),e.jsxs("h1",{className:"text-3xl font-bold dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white",children:e.jsx(le,{size:24})}),(v==null?void 0:v.studioName)||(v==null?void 0:v.profileName)||"Studio Manager"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 mb-6 overflow-hidden",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:lt.map(a=>{const x=a.icon,m=f===a.id,M=a.id==="bookings"&&p.pendingBookings>0;return e.jsxs("button",{onClick:()=>r(a.id),className:`flex items-center gap-2 px-5 py-4 text-sm font-medium whitespace-nowrap transition-all border-b-2 relative ${m?"border-brand-blue text-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[e.jsx(x,{size:18}),a.label,M&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:p.pendingBookings})]},a.id)})})}),e.jsx("div",{className:"md:hidden mb-4 px-1",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:w==null?void 0:w.description})}),e.jsx("div",{className:"min-h-[50vh]",children:d()})]})}function hs({user:s}){const[t,f]=o.useState([]),[r,p]=o.useState(""),[c,v]=o.useState([]),[k,n]=o.useState(!1),[i,d]=o.useState("list");o.useEffect(()=>{!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie},[s==null?void 0:s.id,s==null?void 0:s.uid]);const w=async()=>{r.length<3||ie},a=async m=>{{alert("Database unavailable.");return}},x=async(m,M)=>{!confirm(`Release ${M} from your roster?`)||ie};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-in fade-in pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Ye,{className:"text-purple-600"})," Label Management"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your artist roster and bookings."})]}),e.jsx("button",{onClick:()=>d(i==="list"?"search":"list"),className:"bg-purple-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:i==="list"?e.jsxs(e.Fragment,{children:[e.jsx(Ot,{size:18})," Sign Artist"]}):"Back to Roster"})]}),i==="search"&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm animate-in slide-in-from-top-4",children:[e.jsx("h3",{className:"font-bold dark:text-white mb-4",children:"Find Talent"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ge,{className:"absolute left-3 top-3 text-gray-400",size:18}),e.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl dark:bg-[#1f2128] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Search by name...",value:r,onChange:m=>p(m.target.value),onKeyDown:m=>m.key==="Enter"&&w()})]}),e.jsx("button",{onClick:w,disabled:k,className:"bg-gray-900 dark:bg-white dark:text-black text-white px-6 rounded-xl font-bold",children:k?"...":"Search"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map(m=>{var M;return e.jsxs("div",{className:"p-4 border dark:border-gray-700 rounded-xl flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden",children:m.photoURL?e.jsx("img",{src:m.photoURL,className:"h-full w-full object-cover"}):e.jsx(mt,{className:"m-2 text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold dark:text-white text-sm",children:[m.firstName," ",m.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:((M=m.accountTypes)==null?void 0:M[0])||"User"})]})]}),e.jsx("button",{onClick:()=>a(),className:"text-xs bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 px-3 py-1.5 rounded-lg font-bold hover:bg-purple-200",children:"Sign"})]},m.id)}),c.length===0&&r&&!k&&e.jsx("div",{className:"col-span-full text-center text-gray-500 text-sm",children:"No artists found."})]})]}),i==="list"&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-2xl border dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-[#23262f] border-b dark:border-gray-700 flex justify-between items-center",children:e.jsxs("span",{className:"font-bold text-sm text-gray-500 uppercase tracking-wide",children:["Current Roster (",t.length,")"]})}),t.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(be,{size:48,className:"mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No artists signed yet."})]}):e.jsx("div",{className:"divide-y dark:divide-gray-700",children:t.map(m=>{var M;return e.jsxs("div",{className:"p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 font-bold text-lg overflow-hidden",children:m.photoURL?e.jsx("img",{src:m.photoURL,className:"h-full w-full object-cover"}):m.name[0]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold dark:text-white text-lg",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Signed: ",(M=m.signedAt)!=null&&M.toDate?m.signedAt.toDate().toLocaleDateString():"Recent"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded text-xs font-bold",children:m.status}),e.jsx("button",{onClick:()=>x(m.id,m.name),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Release Artist",children:e.jsx(oe,{size:18})})]})]},m.id)})})]})]})}const us=({data:s,setData:t})=>e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-4",children:"Release Essentials"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Release Title"}),e.jsx("input",{className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.title,onChange:f=>t({...s,title:f.target.value}),placeholder:"e.g. Dark Side of the Moon"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Primary Artist"}),e.jsx("input",{className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.primaryArtist,onChange:f=>t({...s,primaryArtist:f.target.value}),placeholder:"e.g. Pink Floyd"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Release Type"}),e.jsx("select",{className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.type,onChange:f=>t({...s,type:f.target.value}),children:Jt.map(f=>e.jsx("option",{value:f.id,children:f.label},f.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Primary Genre"}),e.jsxs("select",{className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.genre,onChange:f=>t({...s,genre:f.target.value}),children:[e.jsx("option",{value:"",children:"Select Genre..."}),Dt.map(f=>e.jsx("option",{value:f,children:f},f))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Release Date"}),e.jsx("input",{type:"date",className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.releaseDate,onChange:f=>t({...s,releaseDate:f.target.value})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Standard: 2 weeks out. Express: 48hrs."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Label Name"}),e.jsx("input",{className:"w-full p-3 border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:s.labelName,onChange:f=>t({...s,labelName:f.target.value}),placeholder:"Optional (Default: Independent)"})]})]})]}),ps=({data:s,setData:t,user:f})=>{const{uploadMedia:r,uploading:p}=Ve(),[c,v]=o.useState(s.artworkUrl||null),[k,n]=o.useState(""),i=async d=>{const w=d.target.files[0];if(!w)return;const a=new Image;a.src=URL.createObjectURL(w),a.onload=async()=>{if(a.width<3e3||a.height<3e3){n("Error: Image must be at least 3000 x 3000 pixels.");return}a.width!==a.height?n("Warning: Image should be a perfect square (1:1 ratio)."):n("");const x=await r(w,`distribution/${f.uid}/artwork`);x!=null&&x.url&&(v(x.url),t({...s,artworkUrl:x.url}))}};return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Upload Cover Art"}),e.jsx("p",{className:"text-sm text-gray-500",children:"3000 x 3000 px • JPG or PNG • No Blurry Text"})]}),e.jsxs("div",{className:"relative group w-64 h-64 bg-gray-100 dark:bg-[#1f2128] rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center overflow-hidden",children:[c?e.jsx("img",{src:c,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[e.jsx(Me,{size:48,className:"mb-2"}),e.jsx("span",{className:"text-xs font-bold",children:"Click to Upload"})]}),e.jsxs("label",{className:"absolute inset-0 cursor-pointer bg-black/0 hover:bg-black/20 transition flex items-center justify-center",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/png, image/jpeg",onChange:i,disabled:p}),p&&e.jsx(de,{className:"animate-spin text-white",size:32})]})]}),k&&e.jsxs("div",{className:"text-red-500 text-sm font-bold flex items-center gap-2 bg-red-50 dark:bg-red-900/20 px-4 py-2 rounded-lg",children:[e.jsx(Ue,{size:16})," ",k]})]})},fs=({data:s,setData:t,user:f})=>{var n,i;const{uploadMedia:r,uploading:p}=Ve(),c=async d=>{if(!d.name.toLowerCase().endsWith(".wav")){alert("Only .WAV files are accepted for distribution.");return}const w={id:Date.now(),title:d.name.replace(".wav",""),fileUrl:"",status:"uploading",isExplicit:!1,isInstrumental:!1},a=[...s.tracks||[],w];t({...s,tracks:a});try{const x=await r(d,`distribution/${f.uid}/audio_vault`);if(x!=null&&x.url){const m=a.map(M=>M.id===w.id?{...M,fileUrl:x.url,status:"ready",duration:0}:M);t({...s,tracks:m})}}catch(x){console.error("Track upload failed",x),alert("Upload failed.")}},v=d=>{t({...s,tracks:s.tracks.filter(w=>w.id!==d)})},k=(d,w,a)=>{t({...s,tracks:s.tracks.map(x=>x.id===d?{...x,[w]:a}:x)})};return e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Upload Audio"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Stereo WAV files only (16-bit / 44.1kHz minimum)"})]}),e.jsxs("label",{className:"bg-brand-blue hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs cursor-pointer flex items-center gap-2 transition",children:[e.jsx(ct,{size:14})," Add Track",e.jsx("input",{type:"file",className:"hidden",accept:".wav",onChange:d=>c(d.target.files[0]),disabled:p})]})]}),e.jsxs("div",{className:"space-y-3",children:[((n=s.tracks)==null?void 0:n.length)===0&&e.jsx("div",{className:"text-center py-12 border-2 border-dashed dark:border-gray-700 rounded-xl text-gray-400",children:"No tracks added yet."}),(i=s.tracks)==null?void 0:i.map((d,w)=>e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] p-4 rounded-xl border dark:border-gray-700 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-2 rounded text-gray-500 font-mono text-xs",children:["#",w+1]}),e.jsx("div",{className:"font-bold dark:text-white text-sm",children:d.status==="uploading"?e.jsxs("span",{className:"flex items-center gap-2 text-brand-blue",children:[e.jsx(de,{className:"animate-spin",size:14})," Uploading..."]}):d.title})]}),e.jsx("button",{onClick:()=>v(d.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(ce,{size:16})})]}),d.status==="ready"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("input",{className:"col-span-2 p-2 text-xs border rounded bg-transparent dark:border-gray-600 dark:text-white",placeholder:"Track Title",value:d.title,onChange:a=>k(d.id,"title",a.target.value)}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300 p-2 bg-gray-50 dark:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.isExplicit,onChange:a=>k(d.id,"isExplicit",a.target.checked)})," Explicit"]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300 p-2 bg-gray-50 dark:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.isInstrumental,onChange:a=>k(d.id,"isInstrumental",a.target.checked)})," Instrumental"]})]})]},d.id))]})]})},ys=({data:s,setData:t})=>{var p;const f=c=>{const v=s.stores||[],k=v.includes(c)?v.filter(n=>n!==c):[...v,c];t({...s,stores:k})},r=()=>{var c;((c=s.stores)==null?void 0:c.length)===ke.length?t({...s,stores:[]}):t({...s,stores:ke.map(v=>v.id)})};return e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Select Stores"}),e.jsx("button",{onClick:r,className:"text-xs font-bold text-brand-blue hover:underline",children:((p=s.stores)==null?void 0:p.length)===ke.length?"Deselect All":"Select All"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ke.map(c=>{var k;const v=(k=s.stores)==null?void 0:k.includes(c.id);return e.jsxs("div",{onClick:()=>f(c.id),className:`p-3 rounded-xl border flex items-center gap-3 cursor-pointer transition-all ${v?"bg-blue-50 border-brand-blue dark:bg-blue-900/20":"bg-white dark:bg-[#1f2128] dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${v?"bg-brand-blue border-brand-blue":"border-gray-400"}`,children:v&&e.jsx(Fe,{size:12,className:"text-white"})}),e.jsx("span",{className:`text-sm font-bold ${v?"text-brand-blue dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:c.name})]},c.id)})}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800 text-sm text-yellow-800 dark:text-yellow-200 flex items-start gap-3",children:[e.jsx(_t,{size:18,className:"mt-0.5 shrink-0"}),e.jsx("p",{children:"Deliveries usually take 2-5 days for Spotify/Apple, and up to 2 weeks for other stores. Please plan your release date accordingly."})]})]})};function js({user:s,userData:t,initialData:f,onCancel:r,onSuccess:p}){const[c,v]=o.useState(1),[k,n]=o.useState(!1),[i,d]=o.useState(f||{title:"",primaryArtist:t&&`${t.firstName||""} ${t.lastName||""}`.trim()||"Artist",type:"single",genre:"",releaseDate:"",labelName:"",artworkUrl:"",tracks:[],stores:ke.map(x=>x.id),status:"Draft"}),w=()=>c===1?i.title&&i.primaryArtist&&i.genre&&i.releaseDate:c===2?!!i.artworkUrl:c===3?i.tracks.length>0&&i.tracks.every(x=>x.status==="ready"):c===4?i.stores.length>0:!0,a=async()=>{};return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-[#2c2e36] rounded-2xl shadow-xl overflow-hidden border dark:border-gray-700 min-h-[600px] flex flex-col",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#23262f] p-6 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-extrabold dark:text-white",children:"New Release"}),e.jsxs("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mt-1",children:["Step ",c," of 4"]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-white",children:e.jsx(ce,{})})]}),e.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700 w-full",children:e.jsx("div",{className:"h-full bg-brand-blue transition-all duration-300",style:{width:`${c/4*100}%`}})}),e.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[c===1&&e.jsx(us,{data:i,setData:d}),c===2&&e.jsx(ps,{data:i,setData:d,user:s}),c===3&&e.jsx(fs,{data:i,setData:d,user:s}),c===4&&e.jsx(ys,{data:i,setData:d})]}),e.jsxs("div",{className:"p-6 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] flex justify-between items-center",children:[c>1?e.jsxs("button",{onClick:()=>v(c-1),className:"flex items-center gap-2 text-gray-500 font-bold hover:text-gray-800 dark:hover:text-white transition",children:[e.jsx(He,{size:18})," Back"]}):e.jsx("div",{}),c<4?e.jsxs("button",{onClick:()=>v(c+1),disabled:!w(),className:"bg-brand-blue text-white px-6 py-2.5 rounded-xl font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition",children:["Next Step ",e.jsx(we,{size:18})]}):e.jsx("button",{onClick:a,disabled:k||!w(),className:"bg-green-600 text-white px-8 py-2.5 rounded-xl font-bold flex items-center gap-2 disabled:opacity-50 hover:bg-green-700 transition shadow-lg",children:k?e.jsx(de,{className:"animate-spin"}):"Submit Release"})]})]})}function vs({user:s,userData:t}){const[f,r]=o.useState("list"),[p,c]=o.useState([]),[v,k]=o.useState(!0),[n,i]=o.useState(null);o.useEffect(()=>{!(s!=null&&s.id)&&!(s!=null&&s.uid)||ie},[s==null?void 0:s.id,s==null?void 0:s.uid]);const d=async(a,x)=>{!confirm(`Are you sure you want to delete "${x}"? This cannot be undone if already distributed.`)||ie},w=a=>{if(a.status!=="Draft"&&a.status!=="Action Needed")return alert("Cannot edit a release that is currently processing or live. Contact support for takedowns.");i(a),r("create")};return f==="create"?e.jsx(js,{user:s,userData:t,initialData:n,onCancel:()=>{r("list"),i(null)},onSuccess:()=>{r("list"),i(null)}}):e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(Le,{className:"text-brand-blue"})," Distribution Portal"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your catalog across Spotify, Apple Music, and 150+ stores."})]}),e.jsxs("button",{onClick:()=>r("create"),className:"bg-brand-blue text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-600 transition flex items-center gap-2 shadow-lg hover:shadow-blue-500/20",children:[e.jsx(Se,{size:20})," New Release"]})]}),e.jsx("div",{className:"bg-white dark:bg-[#2c2e36] rounded-2xl border dark:border-gray-700 overflow-hidden min-h-[400px]",children:v?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading catalog..."}):p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-6 rounded-full mb-4",children:e.jsx(Yt,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"No Releases Yet"}),e.jsx("p",{className:"text-gray-500 max-w-sm mt-2 mb-6",children:"Start your journey by uploading your first single, EP, or album to the world."}),e.jsx("button",{onClick:()=>r("create"),className:"text-brand-blue font-bold hover:underline",children:"Create First Release"})]}):e.jsx("div",{className:"divide-y dark:divide-gray-700",children:p.map(a=>{var x;return e.jsxs("div",{className:"p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition flex flex-col md:flex-row md:items-center justify-between gap-4 group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 bg-gray-200 dark:bg-black rounded-lg shadow-sm overflow-hidden shrink-0 border dark:border-gray-700",children:a.artworkUrl?e.jsx("img",{src:a.artworkUrl,alt:"Art",className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:e.jsx(Gt,{size:20})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide border ${a.status==="Live"?"bg-green-100 text-green-700 border-green-200":a.status==="Processing"?"bg-blue-100 text-blue-700 border-blue-200":a.status==="Action Needed"?"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600"}`,children:a.status}),e.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:a.type})]}),e.jsx("h4",{className:"font-bold text-lg dark:text-white leading-tight",children:a.title||"Untitled Release"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.primaryArtist," • ",((x=a.tracks)==null?void 0:x.length)||0," Tracks"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pl-4 md:pl-0 border-l md:border-l-0 dark:border-gray-700",children:[e.jsxs("div",{className:"text-right hidden md:block mr-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase font-bold",children:"Release Date"}),e.jsx("div",{className:"text-sm font-medium dark:text-gray-200",children:a.releaseDate?new Date(a.releaseDate).toLocaleDateString():"TBD"})]}),e.jsx("button",{onClick:()=>w(a),className:"p-2 text-gray-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"Edit / View Details",children:e.jsx(Oe,{size:18})}),(a.status==="Draft"||a.status==="Action Needed")&&e.jsx("button",{onClick:()=>d(a.id,a.title),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Delete Release",children:e.jsx(oe,{size:18})})]})]},a.id)})})})]})}function Rs({user:s,userData:t}){var a,x,m,M,C;const[f,r]=o.useState("overview"),p=(a=t==null?void 0:t.accountTypes)==null?void 0:a.includes("Studio"),c=(x=t==null?void 0:t.accountTypes)==null?void 0:x.some(j=>["Label","Agent"].includes(j)),v=(m=t==null?void 0:t.accountTypes)==null?void 0:m.some(j=>["Talent","Producer","Engineer"].includes(j)),k=p||c||v,n=[{id:"overview",label:"Overview",icon:e.jsx(Be,{size:18}),available:!0},{id:"studio",label:"Studio Ops",icon:e.jsx(le,{size:18}),available:p,description:"Manage rooms, rates & amenities"},{id:"distribution",label:"Distribution",icon:e.jsx(Le,{size:18}),available:k,description:"Release music to streaming platforms"},{id:"roster",label:"Artist Roster",icon:e.jsx(be,{size:18}),available:c,description:"Manage your signed artists"}].filter(j=>j.available),i=[{label:"Account Type",value:((M=t==null?void 0:t.accountTypes)==null?void 0:M.join(", "))||"User",icon:e.jsx(Vt,{size:16})},{label:"Studio Rooms",value:((C=t==null?void 0:t.rooms)==null?void 0:C.length)||0,icon:e.jsx(le,{size:16}),show:p},{label:"Releases",value:"—",icon:e.jsx(Kt,{size:16}),show:k},{label:"Roster Artists",value:"—",icon:e.jsx(be,{size:16}),show:c}].filter(j=>j.show!==!1),d=[{id:"studio",title:"Studio Settings",description:"Configure your studio rooms, rates, and amenities",icon:e.jsx(le,{className:"text-blue-500"}),color:"blue",show:p},{id:"distribution",title:"New Release",description:"Distribute your music to 150+ streaming platforms",icon:e.jsx(Le,{className:"text-green-500"}),color:"green",show:k},{id:"roster",title:"Manage Roster",description:"Sign artists and manage your label roster",icon:e.jsx(be,{className:"text-purple-500"}),color:"purple",show:c}].filter(j=>j.show),w=()=>{switch(f){case"studio":return e.jsx(bs,{user:s,userData:t});case"distribution":return e.jsx(vs,{user:s,userData:t});case"roster":return e.jsx(hs,{user:s,userData:t});case"overview":default:return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Business Center"}),e.jsx("p",{className:"text-indigo-100 max-w-xl",children:"Manage your studio operations, distribute music, and grow your roster — all in one place."})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.map((j,T)=>e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-2",children:[j.icon,e.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:j.label})]}),e.jsx("div",{className:"text-2xl font-bold dark:text-white",children:j.value})]},T))}),d.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Qt,{size:20,className:"text-gray-400"}),"Quick Actions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(j=>e.jsxs("button",{onClick:()=>r(j.id),className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm hover:shadow-md transition-all text-left group hover:border-brand-blue dark:hover:border-brand-blue",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${j.color}-50 dark:bg-${j.color}-900/20 flex items-center justify-center mb-4`,children:j.icon}),e.jsxs("h3",{className:"font-bold dark:text-white mb-1 flex items-center gap-2",children:[j.title,e.jsx(we,{size:16,className:"text-gray-400 group-hover:text-brand-blue group-hover:translate-x-1 transition-all"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.description})]},j.id))})]}),d.length===0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold dark:text-white mb-2",children:"No Business Features Enabled"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-6",children:"Upgrade your account to access studio management, music distribution, and label features."}),e.jsx("p",{className:"text-sm text-gray-400",children:'Update your profile to add "Studio", "Talent", "Label", or "Agent" account types.'})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] rounded-xl p-6 border dark:border-gray-700",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Xt,{size:18,className:"text-brand-blue"}),"Coming Soon"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-blue"}),"Advanced Analytics Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-blue"}),"Royalty Management & Splits"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-blue"}),"Contract Templates"]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-blue"}),"Multi-Artist Collaboration Tools"]})]})]})]})}};return e.jsxs("div",{className:"max-w-7xl mx-auto pb-20",children:[e.jsx("div",{className:"mb-6 bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 p-1.5 flex flex-wrap gap-1 shadow-sm sticky top-0 z-10",children:n.map(j=>e.jsxs("button",{onClick:()=>r(j.id),className:`
                            flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all
                            ${f===j.id?"bg-brand-blue text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[j.icon,e.jsx("span",{className:"hidden sm:inline",children:j.label})]},j.id))}),w()]})}export{Rs as default};
