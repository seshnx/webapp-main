{"version":3,"file":"BroadcastList-CI6Lm6gV.js","sources":["../../src/components/BidModal.jsx","../../src/components/BroadcastList.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X, DollarSign, CheckCircle, AlertCircle, Loader2 } from 'lucide-react';\r\nimport { supabase } from '../config/supabase';\r\n\r\nexport default function BidModal({ user, userData, broadcast, onClose }) {\r\n    const [bidRate, setBidRate] = useState(Math.floor((broadcast.offer_amount || broadcast.offerAmount) / (broadcast.duration || 1)));\r\n    const [message, setMessage] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    // Calculate total based on rate * duration\r\n    const totalBid = bidRate * (broadcast.duration || 1);\r\n    const maxBudget = broadcast.offer_amount || broadcast.offerAmount; \r\n    const isOverBudget = totalBid > maxBudget;\r\n\r\n    const handleSubmit = async () => {\r\n        if (!bidRate || !message) return alert(\"Please enter a rate and a message.\");\r\n        if (isOverBudget) return alert(\"Your bid exceeds the client's budget.\");\r\n\r\n        if (!supabase) {\r\n            alert(\"Database unavailable.\");\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            \r\n            // Save as a standard booking request in Supabase\r\n            // This ensures it uses existing permissions and appears in the \r\n            // broadcaster's \"Incoming Requests\" dashboard automatically.\r\n            const { error } = await supabase\r\n                .from('bookings')\r\n                .insert({\r\n                    type: 'Bid', // Distinguish this from a regular 'Direct' booking\r\n                    broadcast_id: broadcast.id, // Reference the original broadcast\r\n                    \r\n                    // Routing: Send this TO the broadcaster\r\n                    target_id: broadcast.sender_id || broadcast.senderId, \r\n                    target_name: broadcast.sender_name || broadcast.senderName,\r\n                    \r\n                    // Sender Info (The Pro bidding)\r\n                    sender_id: userId,\r\n                    sender_name: userData ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' : 'User',\r\n                    \r\n                    // Details\r\n                    service_type: `Bid: ${broadcast.service_type || broadcast.serviceType || 'Session'}`,\r\n                    offer_amount: totalBid,\r\n                    rate_per_hour: parseInt(bidRate),\r\n                    message: message,\r\n                    \r\n                    // Metadata\r\n                    status: 'Pending',\r\n                    date: 'Flexible', // Bids on broadcasts usually imply flexibility\r\n                    timestamp: new Date().toISOString()\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            alert(\"Bid submitted successfully! The client has been notified.\");\r\n            onClose();\r\n        } catch (e) {\r\n            console.error(\"Error submitting bid:\", e);\r\n            alert(\"Failed to submit bid: \" + (e.message || \"Unknown error\"));\r\n        }\r\n        setIsSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4\">\r\n            <div className=\"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md animate-in zoom-in-95\">\r\n                <div className=\"p-5 border-b dark:border-gray-700 flex justify-between items-center\">\r\n                    <h3 className=\"font-bold text-lg dark:text-white\">Place Your Bid</h3>\r\n                    <button onClick={onClose}><X size={20} className=\"text-gray-500 hover:text-white\"/></button>\r\n                </div>\r\n                \r\n                <div className=\"p-6 space-y-6\">\r\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800\">\r\n                        <div className=\"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase mb-1\">Client's Budget</div>\r\n                        <div className=\"text-2xl font-extrabold dark:text-white\">${maxBudget} <span className=\"text-sm font-normal text-gray-500\">Total ({broadcast.duration} hrs)</span></div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-bold text-gray-500 mb-2\">Your Hourly Rate ($)</label>\r\n                        <div className=\"relative\">\r\n                            <DollarSign size={16} className=\"absolute left-3 top-3.5 text-gray-400\"/>\r\n                            <input \r\n                                type=\"number\" \r\n                                className={`w-full pl-8 p-3 border rounded-xl font-bold text-lg outline-none dark:bg-[#1f2128] dark:text-white ${isOverBudget ? 'border-red-500 focus:ring-red-500' : 'border-gray-200 dark:border-gray-600 focus:ring-brand-blue'}`}\r\n                                value={bidRate}\r\n                                onChange={e => setBidRate(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex justify-between items-center mt-2 text-sm\">\r\n                            <span className=\"text-gray-500\">Total Bid:</span>\r\n                            <span className={`font-bold ${isOverBudget ? 'text-red-500' : 'text-green-600'}`}>${totalBid}</span>\r\n                        </div>\r\n                        {isOverBudget && <div className=\"text-xs text-red-500 mt-1 flex items-center gap-1\"><AlertCircle size={12}/> Bid exceeds budget. Consider lowering your rate.</div>}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-bold text-gray-500 mb-2\">Message to Client</label>\r\n                        <textarea \r\n                            className=\"w-full p-3 border rounded-xl text-sm dark:bg-[#1f2128] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none resize-none\"\r\n                            rows=\"3\"\r\n                            placeholder=\"Introduce yourself and your gear...\"\r\n                            value={message}\r\n                            onChange={e => setMessage(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <button \r\n                        onClick={handleSubmit}\r\n                        disabled={isSubmitting || isOverBudget}\r\n                        className=\"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold shadow-lg hover:bg-blue-600 transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:shadow-none\"\r\n                    >\r\n                        {isSubmitting ? <Loader2 className=\"animate-spin\"/> : \"Submit Proposal\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { MapPin, Clock, DollarSign, User, ChevronRight, Zap, Filter, Trash2 } from 'lucide-react';\r\nimport { supabase } from '../config/supabase';\r\nimport BidModal from './BidModal';\r\nimport { fetchZipLocation } from '../utils/geocode';\r\n\r\n// ... (keep getDistanceFromLatLonInKm) ...\r\nfunction getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\r\n  var R = 6371; \r\n  var dLat = deg2rad(lat2-lat1); \r\n  var dLon = deg2rad(lon2-lon1); \r\n  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2); \r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n  return R * c * 0.621371; \r\n}\r\nfunction deg2rad(deg) { return deg * (Math.PI/180) }\r\n\r\nexport default function BroadcastList({ user, userData, onBid }) {\r\n  const [broadcasts, setBroadcasts] = useState([]);\r\n  const [filteredBroadcasts, setFilteredBroadcasts] = useState([]);\r\n  const [selectedBroadcast, setSelectedBroadcast] = useState(null);\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [rangeFilter, setRangeFilter] = useState(50); \r\n\r\n  useEffect(() => {\r\n      const initLocation = async () => {\r\n          if (userData?.zip) {\r\n              const loc = await fetchZipLocation(userData.zip);\r\n              if (loc) setUserLocation({ lat: loc.lat, lng: loc.lng });\r\n          } else if (navigator.geolocation) {\r\n               navigator.geolocation.getCurrentPosition(p => setUserLocation({ lat: p.coords.latitude, lng: p.coords.longitude }));\r\n          }\r\n      };\r\n      initLocation();\r\n  }, [userData]);\r\n\r\n  useEffect(() => {\r\n    if (!supabase) return;\r\n\r\n    const loadBroadcasts = async () => {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('bookings')\r\n          .select('*')\r\n          .eq('type', 'Broadcast')\r\n          .eq('status', 'Broadcasting')\r\n          .order('created_at', { ascending: false });\r\n        \r\n        if (error) throw error;\r\n        setBroadcasts((data || []).map(b => ({\r\n          id: b.id,\r\n          ...b,\r\n          senderId: b.sender_id,\r\n          targetId: b.target_id,\r\n          timestamp: b.created_at\r\n        })));\r\n      } catch (err) {\r\n        console.error('Error loading broadcasts:', err);\r\n      }\r\n    };\r\n\r\n    loadBroadcasts();\r\n\r\n    // Subscribe to changes\r\n    const channel = supabase\r\n      .channel('broadcasts')\r\n      .on('postgres_changes', {\r\n        event: '*',\r\n        schema: 'public',\r\n        table: 'bookings',\r\n        filter: 'type=eq.Broadcast'\r\n      }, () => {\r\n        loadBroadcasts();\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n      if (!userLocation) {\r\n          setFilteredBroadcasts(broadcasts); \r\n          return;\r\n      }\r\n      const nearby = broadcasts.filter(b => {\r\n          if (!b.location || !b.location.lat || !b.location.lng) return true; \r\n          const dist = getDistanceFromLatLonInKm(userLocation.lat, userLocation.lng, b.location.lat, b.location.lng);\r\n          return dist <= rangeFilter;\r\n      }).map(b => {\r\n          const dist = b.location ? getDistanceFromLatLonInKm(userLocation.lat, userLocation.lng, b.location.lat, b.location.lng) : null;\r\n          return { ...b, distance: dist };\r\n      }).sort((a, b) => (a.distance || 9999) - (b.distance || 9999)); \r\n      setFilteredBroadcasts(nearby);\r\n  }, [broadcasts, userLocation, rangeFilter]);\r\n\r\n  const cancelBroadcast = async (broadcastId) => {\r\n      if(!window.confirm(\"Cancel this broadcast? This will remove it from the board.\")) return;\r\n      if (!supabase) return;\r\n      try {\r\n          const { error } = await supabase\r\n              .from('bookings')\r\n              .update({ status: 'Cancelled', updated_at: new Date().toISOString() })\r\n              .eq('id', broadcastId);\r\n          \r\n          if (error) throw error;\r\n      } catch(e) {\r\n          console.error(e);\r\n          alert(\"Failed to cancel.\");\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-end gap-4\">\r\n          {/* ... (Header) ... */}\r\n          <div><h3 className=\"text-xl font-bold dark:text-white flex items-center gap-2\"><Zap className=\"text-yellow-500\" size={20}/> Open Sessions</h3><p className=\"text-sm text-gray-500 dark:text-gray-400\">Live opportunities near you.</p></div>\r\n          <div className=\"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\r\n              <MapPin size={14} className=\"ml-2 text-gray-500\"/>\r\n              <select className=\"bg-transparent text-sm font-bold text-gray-700 dark:text-gray-300 p-1 outline-none cursor-pointer\" value={rangeFilter} onChange={(e) => setRangeFilter(Number(e.target.value))}>\r\n                  <option value={10}>Within 10 mi</option><option value={25}>Within 25 mi</option><option value={50}>Within 50 mi</option><option value={100}>Within 100 mi</option><option value={5000}>Anywhere</option>\r\n              </select>\r\n          </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        {filteredBroadcasts.length === 0 ? (\r\n            <div className=\"col-span-full text-center py-12 bg-white dark:bg-[#2c2e36] rounded-xl border border-dashed dark:border-gray-700 text-gray-500\">No open sessions found.</div>\r\n        ) : (\r\n            filteredBroadcasts.map(b => (\r\n                <div key={b.id} className=\"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm hover:shadow-md transition-all group relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 right-0 bg-brand-blue text-white text-[10px] font-bold px-3 py-1 rounded-bl-lg\">BUDGET: ${b.offerAmount || 'N/A'}</div>\r\n                    <div className=\"mb-4\">\r\n                        <div className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 flex justify-between\">\r\n                            <span>{b.serviceType}</span>\r\n                            {typeof b.distance === 'number' && (<span className=\"text-brand-blue flex items-center gap-1\"><MapPin size={10}/> {b.distance.toFixed(1)} mi</span>)}\r\n                        </div>\r\n                        <h4 className=\"text-lg font-bold dark:text-white truncate pr-16\">{b.targetName || 'Session Request'}</h4>\r\n                        <div className=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-300 mt-2\">\r\n                            <div className=\"flex items-center gap-1\"><User size={14}/> {b.senderName}</div>\r\n                            {b.date && <div className=\"flex items-center gap-1\"><Clock size={14}/> {b.date === 'Flexible' ? 'Flexible' : new Date(b.date).toLocaleDateString()}</div>}\r\n                        </div>\r\n                    </div>\r\n                    {/* Requirements Tags */}\r\n                    <div className=\"flex flex-wrap gap-1 mb-4\">\r\n                        {b.requirements && b.requirements.slice(0, 3).map((req, i) => (<span key={i} className=\"text-[10px] bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-600 dark:text-gray-300 border dark:border-gray-600\">{req.value}</span>))}\r\n                    </div>\r\n                    {/* Footer Actions */}\r\n                    <div className=\"flex gap-2\">\r\n                        {b.sender_id === (user?.id || user?.uid) ? (\r\n                            <button onClick={() => cancelBroadcast(b.id)} className=\"w-full bg-red-100 text-red-600 py-2.5 rounded-lg font-bold text-sm hover:bg-red-200 transition flex items-center justify-center gap-2\"><Trash2 size={16}/> Cancel</button>\r\n                        ) : (\r\n                            <button onClick={() => setSelectedBroadcast(b)} className=\"w-full bg-gray-900 dark:bg-white dark:text-black text-white py-2.5 rounded-lg font-bold text-sm hover:opacity-90 transition flex justify-center items-center gap-2\">View & Bid <ChevronRight size={16}/></button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            ))\r\n        )}\r\n      </div>\r\n      {selectedBroadcast && <BidModal user={user} userData={userData} broadcast={selectedBroadcast} onClose={() => setSelectedBroadcast(null)} />}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["BidModal","user","userData","broadcast","onClose","bidRate","setBidRate","useState","message","setMessage","isSubmitting","setIsSubmitting","totalBid","maxBudget","isOverBudget","handleSubmit","jsxs","jsx","X","DollarSign","e","AlertCircle","Loader2","getDistanceFromLatLonInKm","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","c","deg","BroadcastList","onBid","broadcasts","setBroadcasts","filteredBroadcasts","setFilteredBroadcasts","selectedBroadcast","setSelectedBroadcast","userLocation","setUserLocation","rangeFilter","setRangeFilter","useEffect","loc","fetchZipLocation","p","nearby","b","dist","cancelBroadcast","broadcastId","Zap","MapPin","User","Clock","req","i","Trash2","ChevronRight"],"mappings":"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"}