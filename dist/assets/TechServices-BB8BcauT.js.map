{"version":3,"file":"TechServices-BB8BcauT.js","sources":["../../src/components/tech/ServiceJobBoard.jsx","../../src/components/tech/TechBookingModal.jsx","../../src/components/tech/TechDirectory.jsx","../../src/components/tech/TechBroadcastBuilder.jsx","../../src/components/tech/TechGearDatabase.jsx","../../src/components/tech/TechProfileEditor.jsx","../../src/components/TechServices.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { User, MessageCircle } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\n\r\nexport default function ServiceJobBoard({ user }) {\r\n    const [requests, setRequests] = useState([]);\r\n    const [filter, setFilter] = useState('All');\r\n\r\n    useEffect(() => {\r\n        if (!supabase) return;\r\n\r\n        // Initial fetch\r\n        supabase\r\n            .from('service_requests')\r\n            .select('*')\r\n            .order('created_at', { ascending: false })\r\n            .limit(50)\r\n            .then(({ data, error }) => {\r\n                if (error) {\r\n                    console.error('Error fetching service requests:', error);\r\n                    return;\r\n                }\r\n                setRequests((data || []).map(item => ({\r\n                    id: item.id,\r\n                    ...item,\r\n                    timestamp: item.created_at,\r\n                    userId: item.user_id,\r\n                    userName: item.user_name\r\n                })));\r\n            });\r\n\r\n        // Subscribe to realtime changes\r\n        const channel = supabase\r\n            .channel('service-requests')\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'service_requests'\r\n                },\r\n                async () => {\r\n                    const { data } = await supabase\r\n                        .from('service_requests')\r\n                        .select('*')\r\n                        .order('created_at', { ascending: false })\r\n                        .limit(50);\r\n                    \r\n                    if (data) {\r\n                        setRequests(data.map(item => ({\r\n                            id: item.id,\r\n                            ...item,\r\n                            timestamp: item.created_at,\r\n                            userId: item.user_id,\r\n                            userName: item.user_name\r\n                        })));\r\n                    }\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex gap-2 overflow-x-auto pb-4 scrollbar-hide mb-2\">\r\n                <button onClick={() => setFilter('All')} className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap border transition ${filter === 'All' ? 'bg-orange-500 text-white border-orange-600' : 'bg-white dark:bg-dark-card border-gray-200 dark:border-gray-700 dark:text-gray-300'}`}>All Jobs</button>\r\n                {SERVICE_CATALOGUE.map(cat => (\r\n                    <button key={cat.id} onClick={() => setFilter(cat.label)} className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap border transition ${filter === cat.label ? 'bg-orange-500 text-white border-orange-600' : 'bg-white dark:bg-dark-card border-gray-200 dark:border-gray-700 dark:text-gray-300'}`}>\r\n                        {cat.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {requests.filter(r => filter === 'All' || r.category === filter).map(req => (\r\n                    <div key={req.id} className=\"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 hover:border-orange-400 transition shadow-sm group\">\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                            <span className=\"text-[10px] font-bold uppercase text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded\">{req.category}</span>\r\n                            {req.budget && <span className=\"text-sm font-bold text-green-600 dark:text-green-400\">${req.budget}</span>}\r\n                        </div>\r\n                        <h3 className=\"font-bold text-lg dark:text-white mb-1\">{req.topic}</h3>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-4\">{req.description}</p>\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-500 border-t dark:border-gray-700 pt-3\">\r\n                            <div className=\"flex items-center gap-2\"><User size={12}/> {req.userName}</div>\r\n                            {req.userId !== (user?.id || user?.uid) && <button className=\"bg-gray-900 dark:bg-white dark:text-black text-white px-3 py-1.5 rounded font-bold hover:opacity-80 flex items-center gap-1\"><MessageCircle size={12}/> Message</button>}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                {requests.length === 0 && <div className=\"col-span-full text-center py-12 text-gray-400\">No active requests.</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { X, Wrench, Calendar, DollarSign, Loader2, Video } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { useMediaUpload } from '../../hooks/useMediaUpload';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\nimport EquipmentAutocomplete from '../shared/EquipmentAutocomplete';\r\n\r\nexport default function TechBookingModal({ user, userData, target, onClose }) {\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [form, setForm] = useState({\r\n        serviceCategory: 'Repair', equipmentName: '', issueDescription: '',\r\n        logistics: 'Drop-off', preferredDate: '', budgetCap: ''\r\n    });\r\n    const [attachments, setAttachments] = useState([]);\r\n    const { uploadMedia, uploading } = useMediaUpload();\r\n\r\n    const handleFileUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const result = await uploadMedia(file, `tech_requests/${user.uid}`);\r\n        if (result) setAttachments(prev => [...prev, result]);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!form.equipmentName || !form.issueDescription || !supabase) {\r\n            if (!form.equipmentName || !form.issueDescription) alert(\"Please describe the equipment and the issue.\");\r\n            return;\r\n        }\r\n        setSubmitting(true);\r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            await supabase\r\n                .from('bookings')\r\n                .insert({\r\n                    sender_id: userId,\r\n                    sender_name: userData ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' : 'User',\r\n                    target_id: target.id,\r\n                    target_name: target.firstName ? `${target.firstName} ${target.lastName}` : target.name,\r\n                    type: 'TechRequest',\r\n                    service_type: form.serviceCategory,\r\n                    equipment: form.equipmentName,\r\n                    description: form.issueDescription,\r\n                    logistics: form.logistics,\r\n                    budget_cap: form.budgetCap || null,\r\n                    status: 'Pending',\r\n                    date: form.preferredDate || 'Flexible',\r\n                    message: `[${form.serviceCategory}] ${form.equipmentName}: ${form.issueDescription}`,\r\n                    attachments: attachments || [],\r\n                    timestamp: new Date().toISOString()\r\n                });\r\n            alert(\"Service request sent!\");\r\n            onClose();\r\n        } catch (e) { alert(\"Failed to send.\"); }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4 animate-in fade-in zoom-in-95\">\r\n            <div className=\"bg-white dark:bg-[#2c2e36] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700 flex flex-col max-h-[90vh]\">\r\n                <div className=\"p-5 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]\">\r\n                    <div>\r\n                        <h3 className=\"font-bold text-lg dark:text-white flex items-center gap-2\"><Wrench size={18} className=\"text-orange-500\"/> Service Request</h3>\r\n                        <p className=\"text-xs text-gray-500\">Hiring <span className=\"font-bold text-orange-600 dark:text-orange-400\">{target.firstName} {target.lastName}</span></p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition\"><X size={20}/></button>\r\n                </div>\r\n                <div className=\"p-6 overflow-y-auto space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Service Type</label><select className=\"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.serviceCategory} onChange={e => setForm({...form, serviceCategory: e.target.value})}>{SERVICE_CATALOGUE.map(s => <option key={s.id} value={s.label}>{s.label}</option>)}</select></div>\r\n                        <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Logistics</label><select className=\"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.logistics} onChange={e => setForm({...form, logistics: e.target.value})}><option value=\"Drop-off\">I will drop it off</option><option value=\"On-site\">Tech comes to me</option><option value=\"Ship\">I will ship it</option></select></div>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Equipment</label>\r\n                        <EquipmentAutocomplete\r\n                            placeholder=\"Search for equipment (e.g. Fender Twin Reverb, U87)...\"\r\n                            value={form.equipmentName}\r\n                            onChange={(value) => setForm({...form, equipmentName: value})}\r\n                            onSelect={(item) => {\r\n                                const fullName = item.brand !== 'Various' && item.brand !== 'Unknown' \r\n                                    ? `${item.brand} ${item.name}` \r\n                                    : item.name;\r\n                                setForm({...form, equipmentName: fullName});\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Issue Description</label><textarea className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px] text-sm\" placeholder=\"Describe symptoms...\" value={form.issueDescription} onChange={e => setForm({...form, issueDescription: e.target.value})}/></div>\r\n                    <div className=\"pt-4 border-t dark:border-gray-700\">\r\n                        <label className=\"flex items-center gap-2 cursor-pointer text-brand-blue hover:text-blue-600 font-bold mb-3\"><Video size={16}/> Add Video/Photo <input type=\"file\" className=\"hidden\" accept=\"image/*,video/*\" onChange={handleFileUpload} disabled={uploading}/></label>\r\n                        <div className=\"flex gap-2 overflow-x-auto\">{attachments.map((f, i) => <div key={i} className=\"h-12 w-12 bg-black rounded border dark:border-gray-600 overflow-hidden\"><img src={f.url} className=\"h-full w-full object-cover\"/></div>)}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-5 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]\"><button onClick={handleSubmit} disabled={submitting || uploading} className=\"w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition shadow-lg\">{submitting ? <Loader2 className=\"animate-spin mx-auto\"/> : \"Submit Request\"}</button></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Search, Loader2, User, Briefcase, Wrench } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { TECH_SPECIALTIES } from '../../config/constants';\r\nimport TechBookingModal from './TechBookingModal';\r\n\r\nexport default function TechDirectory({ user, userData, openPublicProfile }) {\r\n    const [techs, setTechs] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [search, setSearch] = useState('');\r\n    const [specialtyFilter, setSpecialtyFilter] = useState('');\r\n    const [selectedTech, setSelectedTech] = useState(null);\r\n\r\n    const runSearch = async () => {\r\n        if (!supabase) return;\r\n        setLoading(true);\r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            let query = supabase\r\n                .from('profiles')\r\n                .select('id, first_name, last_name, photo_url, account_types, sub_roles, skills, rate, search_terms')\r\n                .contains('account_types', ['Technician'])\r\n                .limit(20);\r\n            \r\n            if (search) {\r\n                query = query.ilike('search_terms', `%${search.toLowerCase()}%`);\r\n            }\r\n            \r\n            const { data: profilesData, error } = await query;\r\n            \r\n            if (error) throw error;\r\n            \r\n            let results = (profilesData || [])\r\n                .filter(t => t.id !== userId)\r\n                .map(t => ({\r\n                    id: t.id,\r\n                    firstName: t.first_name,\r\n                    lastName: t.last_name,\r\n                    photoURL: t.photo_url,\r\n                    accountTypes: t.account_types,\r\n                    subRoles: t.sub_roles,\r\n                    skills: t.skills,\r\n                    rate: t.rate,\r\n                    searchTerms: t.search_terms\r\n                }));\r\n\r\n            if (specialtyFilter) {\r\n                results = results.filter(t => t.subRoles && t.subRoles.includes(specialtyFilter));\r\n            }\r\n\r\n            setTechs(results);\r\n        } catch (e) { console.error(e); }\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => { runSearch(); }, [specialtyFilter]);\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-4 top-3.5 text-gray-400\" size={18}/>\r\n                    <input \r\n                        className=\"w-full pl-12 p-3 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-orange-500 dark:text-white\"\r\n                        placeholder=\"Search technicians...\"\r\n                        value={search} onChange={e => setSearch(e.target.value)} onKeyDown={e => e.key === 'Enter' && runSearch()}\r\n                    />\r\n                </div>\r\n                <div className=\"md:w-1/3\">\r\n                    <select \r\n                        className=\"w-full p-3 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-orange-500 dark:text-white cursor-pointer\"\r\n                        value={specialtyFilter}\r\n                        onChange={e => setSpecialtyFilter(e.target.value)}\r\n                    >\r\n                        <option value=\"\">All Specialties</option>\r\n                        {TECH_SPECIALTIES.map(s => <option key={s} value={s}>{s}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {loading ? <div className=\"text-center py-12\"><Loader2 className=\"animate-spin mx-auto text-orange-500\"/></div> : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {techs.map(tech => (\r\n                        <div key={tech.id} className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-lg transition group\">\r\n                            <div className=\"h-24 bg-gradient-to-r from-slate-700 to-slate-600 relative\">\r\n                                <div className=\"absolute -bottom-8 left-6\">\r\n                                    <div className=\"h-16 w-16 rounded-full border-4 border-white dark:border-[#2c2e36] bg-gray-200 overflow-hidden\">\r\n                                        {tech.photoURL ? <img src={tech.photoURL} className=\"h-full w-full object-cover\"/> : <div className=\"h-full w-full flex items-center justify-center text-gray-400\"><User/></div>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pt-10 px-6 pb-6\">\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <div>\r\n                                        <h3 className=\"font-bold dark:text-white text-lg\">{tech.firstName} {tech.lastName}</h3>\r\n                                        <div className=\"text-xs text-orange-600 dark:text-orange-400 font-bold mb-2 flex items-center gap-1\">\r\n                                            <Briefcase size={12}/> {tech.subRoles?.[0] || 'Technician'}\r\n                                        </div>\r\n                                    </div>\r\n                                    {tech.rate > 0 && <div className=\"text-sm font-bold dark:text-gray-300 border border-gray-200 dark:border-gray-600 px-2 py-1 rounded-lg\">${tech.rate}/hr</div>}\r\n                                </div>\r\n                                \r\n                                <div className=\"flex flex-wrap gap-1 mb-3\">\r\n                                    {tech.subRoles?.slice(0, 3).map(role => (\r\n                                        <span key={role} className=\"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800\">{role}</span>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-wrap gap-1 mb-4 h-6 overflow-hidden\">\r\n                                    {(tech.skills?.split(',') || []).slice(0, 3).map((s,i) => (\r\n                                        <span key={i} className=\"text-[10px] text-gray-500 dark:text-gray-400 pr-2 border-r border-gray-300 dark:border-gray-600 last:border-0\">{s.trim()}</span>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-2 mt-auto\">\r\n                                    <button onClick={() => openPublicProfile(tech.id)} className=\"flex-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg text-xs font-bold transition\">Profile</button>\r\n                                    <button onClick={() => setSelectedTech(tech)} className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs font-bold transition shadow-sm flex items-center justify-center gap-1\"><Wrench size={14}/> Request</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {selectedTech && (\r\n                <TechBookingModal \r\n                    user={user} \r\n                    userData={userData} \r\n                    target={selectedTech} \r\n                    onClose={() => setSelectedTech(null)} \r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Zap, ChevronDown, Loader2, Video, Image as ImageIcon, X } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\nimport { useMediaUpload } from '../../hooks/useMediaUpload';\r\n\r\nexport default function TechBroadcastBuilder({ user, userData, onSuccess, onCancel }) {\r\n    const [category, setCategory] = useState(SERVICE_CATALOGUE[0].label);\r\n    const [equipment, setEquipment] = useState('');\r\n    const [urgency, setUrgency] = useState('Normal');\r\n    const [budget, setBudget] = useState('');\r\n    const [details, setDetails] = useState('');\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [media, setMedia] = useState(null); \r\n    const { uploadMedia, uploading } = useMediaUpload();\r\n\r\n    const handleFileSelect = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const result = await uploadMedia(file, `service_requests/${user.uid}`);\r\n        if (result) setMedia(result);\r\n    };\r\n \r\n    const handleSubmit = async () => {\r\n        if (!equipment || !details || !supabase) {\r\n            if (!equipment || !details) alert(\"Please complete the request.\");\r\n            return;\r\n        }\r\n        setSubmitting(true);\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            \r\n            const { error } = await supabase\r\n                .from('service_requests')\r\n                .insert({\r\n                    user_id: userId,\r\n                    user_name: userData ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' : 'User',\r\n                    topic: `${category} for ${equipment}`,\r\n                    category,\r\n                    equipment,\r\n                    urgency,\r\n                    budget: budget ? parseInt(budget) : null,\r\n                    description: details,\r\n                    status: 'Open',\r\n                    attachment_url: media?.url || null\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            alert(\"Tech Request Broadcasted!\");\r\n            onSuccess();\r\n        } catch (e) { \r\n            console.error(e); \r\n            alert(\"Failed: \" + (e.message || \"Unknown error\"));\r\n        }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto bg-white dark:bg-[#2c2e36] p-8 rounded-2xl border border-orange-200 dark:border-gray-700 shadow-xl animate-in zoom-in-95\">\r\n            <h2 className=\"text-2xl font-extrabold dark:text-white mb-6 flex items-center gap-2 text-orange-600\"><Zap/> Broadcast Tech Need</h2>\r\n            \r\n            <div className=\"space-y-6\">\r\n                {/* UPDATED: Gray-800 background in dark mode for better readability */}\r\n                <div className=\"p-6 bg-orange-50 dark:bg-gray-800 rounded-xl border border-orange-100 dark:border-gray-700\">\r\n                    <div className=\"flex flex-wrap items-center gap-3 text-lg font-medium text-gray-700 dark:text-gray-200\">\r\n                        <span>I need</span>\r\n                        <div className=\"relative\">\r\n                            {/* UPDATED: Gray-700 bg for select to pop against gray-800 container */}\r\n                            <select value={category} onChange={e => setCategory(e.target.value)} className=\"appearance-none bg-white dark:bg-gray-700 border border-orange-300 dark:border-orange-700 rounded-lg py-1 pl-3 pr-8 font-bold text-orange-700 dark:text-white focus:outline-none\">\r\n                                {SERVICE_CATALOGUE.map(c => <option key={c.id} value={c.label}>{c.label}</option>)}\r\n                            </select>\r\n                            <ChevronDown size={14} className=\"absolute right-2 top-1/2 -translate-y-1/2 text-orange-500 dark:text-white pointer-events-none\"/>\r\n                        </div>\r\n                        <span>for my</span>\r\n                        <input className=\"bg-transparent border-b-2 border-orange-300 dark:border-orange-700 text-center w-40 font-bold focus:outline-none focus:border-orange-500 dark:text-white\" placeholder=\"Equipment Name\" value={equipment} onChange={e => setEquipment(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Urgency</label>\r\n                        <select className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={urgency} onChange={e => setUrgency(e.target.value)}>\r\n                            <option>Normal</option>\r\n                            <option>High (Session Blocked)</option>\r\n                            <option>Emergency (24h)</option>\r\n                            <option>Flexible</option>\r\n                        </select>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Est. Budget ($)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" placeholder=\"Optional\" value={budget} onChange={e => setBudget(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Details</label>\r\n                    <textarea className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px]\" placeholder=\"Describe the issue, specific model, symptoms...\" value={details} onChange={e => setDetails(e.target.value)}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-2 block\">Visual Reference</label>\r\n                    {!media && !uploading && (\r\n                        <label className=\"flex items-center justify-center gap-2 w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition text-gray-500\">\r\n                            <Video size={20}/><span className=\"text-sm font-bold\">Upload Video or Image</span>\r\n                            <input type=\"file\" className=\"hidden\" accept=\"video/*,image/*\" onChange={handleFileSelect} />\r\n                        </label>\r\n                    )}\r\n                    {media && (\r\n                        <div className=\"relative w-full rounded-xl overflow-hidden border dark:border-gray-700 bg-black\">\r\n                            {media.type === 'video' ? <video src={media.url} controls className=\"w-full h-48 object-contain\"/> : <img src={media.url} className=\"w-full h-48 object-contain\"/>}\r\n                            <button onClick={() => setMedia(null)} className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600\"><X size={14}/></button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                    <button onClick={onCancel} className=\"flex-1 py-3 text-gray-500 font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition\">Cancel</button>\r\n                    <button onClick={handleSubmit} disabled={submitting || uploading} className=\"flex-1 bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition flex items-center justify-center gap-2 disabled:opacity-50\">\r\n                        {submitting ? <Loader2 className=\"animate-spin\"/> : \"Broadcast Now\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Database, CheckCircle, Loader2, User, ThumbsUp, ThumbsDown, Copy \r\n} from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { EQUIP_CATEGORIES } from '../../config/constants';\r\n\r\nexport default function TechGearDatabase({ user, isTech }) {\r\n    const [view, setView] = useState('feed'); \r\n    const [pendingItems, setPendingItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!supabase) return;\r\n        \r\n        const channel = supabase\r\n            .channel('equipment-submissions')\r\n            .on('postgres_changes', {\r\n                event: '*',\r\n                schema: 'public',\r\n                table: 'equipment_submissions',\r\n                filter: 'status=eq.pending'\r\n            }, () => {\r\n                loadPendingItems();\r\n            })\r\n            .subscribe();\r\n\r\n        loadPendingItems();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [user?.id, user?.uid]);\r\n\r\n    const loadPendingItems = async () => {\r\n        if (!supabase) return;\r\n        setLoading(true);\r\n        try {\r\n            const { data: itemsData, error } = await supabase\r\n                .from('equipment_submissions')\r\n                .select('*')\r\n                .eq('status', 'pending')\r\n                .order('timestamp', { ascending: false })\r\n                .limit(20);\r\n            \r\n            if (error) throw error;\r\n            \r\n            setPendingItems((itemsData || []).map(item => ({\r\n                id: item.id,\r\n                ...item,\r\n                submittedBy: item.submitted_by,\r\n                timestamp: item.timestamp\r\n            })));\r\n        } catch (error) {\r\n            console.error('Error loading pending items:', error);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleVote = async (itemId, voteType, currentData) => {\r\n        if (!isTech || !supabase) {\r\n            if (!isTech) alert(\"Only verified Technicians can vote on gear accuracy.\");\r\n            return;\r\n        }\r\n        \r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            // Get current votes and add new vote\r\n            const currentVotes = currentData.votes || {};\r\n            const voteArray = currentVotes[voteType] || [];\r\n            if (voteArray.includes(userId)) {\r\n                alert(\"You've already voted on this item.\");\r\n                return;\r\n            }\r\n            \r\n            const updatedVotes = {\r\n                ...currentVotes,\r\n                [voteType]: [...voteArray, userId]\r\n            };\r\n            \r\n            await supabase\r\n                .from('equipment_submissions')\r\n                .update({ votes: updatedVotes })\r\n                .eq('id', itemId);\r\n\r\n            const YES_THRESHOLD = 3;\r\n            const REJECT_THRESHOLD = 3;\r\n\r\n            const yesVotes = (updatedVotes.yes?.length || 0);\r\n            const fakeVotes = (updatedVotes.fake?.length || 0);\r\n            const dupVotes = (updatedVotes.duplicate?.length || 0);\r\n\r\n            if (yesVotes >= YES_THRESHOLD) {\r\n                // Add to equipment database\r\n                await supabase\r\n                    .from('equipment_database')\r\n                    .insert({\r\n                        name: currentData.model,\r\n                        brand: currentData.brand,\r\n                        category: currentData.category,\r\n                        sub_category: currentData.subCategory,\r\n                        specs: currentData.specs,\r\n                        verified_by: [userId],\r\n                        added_by: currentData.submittedBy,\r\n                        added_at: new Date().toISOString()\r\n                    });\r\n                \r\n                // Update submission status\r\n                await supabase\r\n                    .from('equipment_submissions')\r\n                    .update({ status: 'approved' })\r\n                    .eq('id', itemId);\r\n                \r\n                // Update wallets (using RPC or direct update)\r\n                const { data: submitterWallet } = await supabase\r\n                    .from('wallets')\r\n                    .select('balance')\r\n                    .eq('user_id', currentData.submittedBy)\r\n                    .single();\r\n                \r\n                const { data: voterWallet } = await supabase\r\n                    .from('wallets')\r\n                    .select('balance')\r\n                    .eq('user_id', userId)\r\n                    .single();\r\n                \r\n                if (submitterWallet) {\r\n                    await supabase\r\n                        .from('wallets')\r\n                        .update({ balance: (submitterWallet.balance || 0) + 50 })\r\n                        .eq('user_id', currentData.submittedBy);\r\n                }\r\n                \r\n                if (voterWallet) {\r\n                    await supabase\r\n                        .from('wallets')\r\n                        .update({ balance: (voterWallet.balance || 0) + 5 })\r\n                        .eq('user_id', userId);\r\n                }\r\n                \r\n                alert(\"Consensus reached! Item approved and rewards distributed.\");\r\n\r\n            } else if (fakeVotes >= REJECT_THRESHOLD || dupVotes >= REJECT_THRESHOLD) {\r\n                await supabase\r\n                    .from('equipment_submissions')\r\n                    .update({ status: 'rejected' })\r\n                    .eq('id', itemId);\r\n            }\r\n        } catch (e) { console.error(\"Voting failed:\", e); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold dark:text-white flex items-center gap-2\"><Database className=\"text-orange-500\"/> Gear Knowledge Base</h3>\r\n                    <p className=\"text-sm text-gray-500\">Crowdsourced equipment specs verified by pros.</p>\r\n                </div>\r\n                <div className=\"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\r\n                    <button onClick={() => setView('feed')} className={`px-4 py-2 rounded-md text-xs font-bold transition ${view === 'feed' ? 'bg-white dark:bg-gray-600 shadow text-orange-600 dark:text-orange-400' : 'text-gray-500'}`}>The Bench (Queue)</button>\r\n                    <button onClick={() => setView('submit')} className={`px-4 py-2 rounded-md text-xs font-bold transition ${view === 'submit' ? 'bg-white dark:bg-gray-600 shadow text-orange-600 dark:text-orange-400' : 'text-gray-500'}`}>Submit New Gear</button>\r\n                </div>\r\n            </div>\r\n\r\n            {view === 'feed' && (\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                    {loading ? <div className=\"p-10 text-center\"><Loader2 className=\"animate-spin mx-auto\"/></div> : \r\n                     pendingItems.length === 0 ? (\r\n                        <div className=\"text-center py-12 border-2 border-dashed dark:border-gray-700 rounded-xl\">\r\n                            <CheckCircle size={48} className=\"mx-auto text-green-500 mb-2 opacity-50\"/>\r\n                            <p className=\"text-gray-500\">The bench is clear. No pending submissions.</p>\r\n                        </div>\r\n                     ) : (\r\n                        pendingItems.map(item => (\r\n                            <div key={item.id} className=\"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm flex flex-col md:flex-row gap-6\">\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <span className=\"text-[10px] font-bold uppercase bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-500\">{item.brand}</span>\r\n                                        <span className=\"text-[10px] font-bold uppercase bg-blue-50 dark:bg-blue-900/20 text-blue-600 px-2 py-0.5 rounded\">{item.category?.replace(/_/g, ' ')}</span>\r\n                                    </div>\r\n                                    <h4 className=\"text-lg font-extrabold dark:text-white mb-2\">{item.model}</h4>\r\n                                    <div className=\"bg-gray-50 dark:bg-black/20 p-3 rounded-lg text-sm text-gray-600 dark:text-gray-300 mb-2 border dark:border-gray-700\">{item.specs}</div>\r\n                                    <div className=\"text-xs text-gray-400 flex items-center gap-1\"><User size={12}/> Submitted by {item.submitterName || 'Unknown'} â€¢ 50 TK Reward Pending</div>\r\n                                </div>\r\n                                <div className=\"w-full md:w-48 flex flex-col justify-center gap-2 border-l dark:border-gray-700 pl-0 md:pl-6\">\r\n                                    <button onClick={() => handleVote(item.id, 'yes', item)} disabled={item.votes?.yes?.includes(user.uid)} className=\"w-full py-2 bg-green-100 dark:bg-green-900/20 hover:bg-green-200 text-green-700 dark:text-green-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><ThumbsUp size={14}/> Yes ({item.votes?.yes?.length || 0})</button>\r\n                                    <button onClick={() => handleVote(item.id, 'fake', item)} disabled={item.votes?.fake?.includes(user.uid)} className=\"w-full py-2 bg-red-100 dark:bg-red-900/20 hover:bg-red-200 text-red-700 dark:text-red-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><ThumbsDown size={14}/> Fake ({item.votes?.fake?.length || 0})</button>\r\n                                    <button onClick={() => handleVote(item.id, 'duplicate', item)} disabled={item.votes?.duplicate?.includes(user.uid)} className=\"w-full py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 text-gray-600 dark:text-gray-300 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><Copy size={14}/> Dup ({item.votes?.duplicate?.length || 0})</button>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                     )}\r\n                </div>\r\n            )}\r\n\r\n            {view === 'submit' && <GearSubmissionForm user={user} userData={userData} onSuccess={() => setView('feed')} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction GearSubmissionForm({ user, userData, onSuccess }) {\r\n    const [form, setForm] = useState({ brand: '', model: '', category: EQUIP_CATEGORIES[0].id, subCategory: '', specs: '' });\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!form.brand || !form.model || !form.specs) return alert(\"All fields required.\");\r\n        if (!supabase) {\r\n            alert(\"Database unavailable.\");\r\n            return;\r\n        }\r\n        \r\n        setSubmitting(true);\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            const submitterName = userData \r\n                ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' \r\n                : 'User';\r\n            \r\n            const { error } = await supabase\r\n                .from('equipment_submissions')\r\n                .insert({\r\n                    brand: form.brand,\r\n                    model: form.model,\r\n                    category: form.category,\r\n                    sub_category: form.subCategory,\r\n                    specs: form.specs,\r\n                    submitted_by: userId,\r\n                    submitter_name: submitterName,\r\n                    status: 'pending',\r\n                    timestamp: new Date().toISOString(),\r\n                    votes: { yes: [], fake: [], duplicate: [] }\r\n                });\r\n            \r\n            if (error) throw error;\r\n            \r\n            alert(\"Submission Received! You'll earn 50 TK once verified.\");\r\n            onSuccess();\r\n        } catch (e) { \r\n            console.error(e); \r\n            alert(\"Submission failed: \" + (e.message || \"Unknown error\")); \r\n        }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-xl mx-auto bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border border-orange-200 dark:border-gray-700 shadow-lg\">\r\n            <h4 className=\"font-bold text-lg dark:text-white mb-4\">Submit New Equipment</h4>\r\n            <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Category</label>\r\n                        <select className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.category} onChange={e => setForm({...form, category: e.target.value})}>\r\n                            {EQUIP_CATEGORIES.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Sub-Category</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. Compressor\" value={form.subCategory} onChange={e => setForm({...form, subCategory: e.target.value})}/></div>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Brand</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. Neve\" value={form.brand} onChange={e => setForm({...form, brand: e.target.value})}/></div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Model</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. 1073LB\" value={form.model} onChange={e => setForm({...form, model: e.target.value})}/></div>\r\n                </div>\r\n                <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Specs / Description</label><textarea className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm h-24\" placeholder=\"Brief technical specs...\" value={form.specs} onChange={e => setForm({...form, specs: e.target.value})}/></div>\r\n                <button onClick={handleSubmit} disabled={submitting} className=\"w-full bg-orange-600 text-white py-2.5 rounded-lg font-bold hover:bg-orange-700 flex items-center justify-center gap-2\">{submitting ? <Loader2 className=\"animate-spin\"/> : \"Submit for Verification\"}</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Save, Loader2 } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { TECH_SPECIALTIES } from '../../config/constants';\r\nimport { MultiSelect } from '../shared/Inputs';\r\n\r\nexport default function TechProfileEditor({ user }) {\r\n    const [data, setData] = useState({ skills: '', rate: '', serviceRadius: '', subRoles: [] });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!user?.id && !user?.uid || !supabase) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        \r\n        const userId = user.id || user.uid;\r\n        \r\n        // Fetch sub-profile data from profiles table or sub_profiles\r\n        supabase\r\n            .from('sub_profiles')\r\n            .select('*')\r\n            .eq('user_id', userId)\r\n            .eq('role', 'Technician')\r\n            .single()\r\n            .then(({ data, error }) => {\r\n                if (error && error.code !== 'PGRST116') {\r\n                    console.error('Error fetching tech profile:', error);\r\n                }\r\n                if (data) {\r\n                    setData({\r\n                        skills: data.skills || '',\r\n                        rate: data.rate || '',\r\n                        serviceRadius: data.service_radius || data.serviceRadius || '',\r\n                        subRoles: data.sub_roles || data.subRoles || []\r\n                    });\r\n                }\r\n                setLoading(false);\r\n            });\r\n    }, [user?.id, user?.uid]);\r\n\r\n    const handleSave = async () => {\r\n        if (!supabase) {\r\n            alert(\"Database unavailable.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            \r\n            // Update sub-profile\r\n            const { error: subProfileError } = await supabase\r\n                .from('sub_profiles')\r\n                .upsert({\r\n                    user_id: userId,\r\n                    role: 'Technician',\r\n                    skills: data.skills,\r\n                    rate: data.rate ? parseInt(data.rate) : null,\r\n                    service_radius: data.serviceRadius ? parseInt(data.serviceRadius) : null,\r\n                    sub_roles: data.subRoles || [],\r\n                    updated_at: new Date().toISOString()\r\n                }, { onConflict: 'user_id,role' });\r\n\r\n            if (subProfileError) throw subProfileError;\r\n            \r\n            // Sync searchable fields to public profile\r\n            const searchTerms = [\r\n                ...(data.skills ? data.skills.toLowerCase().split(',').map(s => s.trim()) : []),\r\n                ...(data.subRoles ? data.subRoles.map(r => r.toLowerCase()) : [])\r\n            ];\r\n\r\n            const { error: publicProfileError } = await supabase\r\n                .from('public_profiles')\r\n                .update({\r\n                    rate: parseInt(data.rate) || 0,\r\n                    sub_roles: data.subRoles || [],\r\n                    search_terms: searchTerms\r\n                })\r\n                .eq('id', userId);\r\n\r\n            if (publicProfileError) throw publicProfileError;\r\n\r\n            alert(\"Tech Profile Updated Successfully\");\r\n        } catch (e) { \r\n            console.error(e);\r\n            alert(\"Update failed: \" + (e.message || \"Unknown error\"));\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-10 text-center\"><Loader2 className=\"animate-spin mx-auto\"/></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm animate-in fade-in\">\r\n            <h3 className=\"font-bold text-lg dark:text-white mb-6 border-b dark:border-gray-700 pb-2\">Your Technician Settings</h3>\r\n            \r\n            <div className=\"space-y-5\">\r\n                <MultiSelect \r\n                    label=\"Primary Specialties\" \r\n                    fieldKey=\"subRoles\" \r\n                    options={TECH_SPECIALTIES} \r\n                    initialValues={data.subRoles} \r\n                    onChange={(k, v) => setData(prev => ({...prev, [k]: v}))}\r\n                />\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Detailed Skills (Comma Separated)</label>\r\n                    <input className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.skills || ''} onChange={e => setData({...data, skills: e.target.value})} placeholder=\"e.g. SSL 4000 Maintenance, Tube Bias...\"/>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Hourly Rate ($)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.rate || ''} onChange={e => setData({...data, rate: e.target.value})}/>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Service Radius (Miles)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.serviceRadius || ''} onChange={e => setData({...data, serviceRadius: e.target.value})}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"pt-4\">\r\n                    <button onClick={handleSave} className=\"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 flex items-center justify-center gap-2\">\r\n                        <Save size={18}/> Save Changes\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Wrench, Settings } from 'lucide-react';\r\nimport ServiceJobBoard from './tech/ServiceJobBoard';\r\nimport TechDirectory from './tech/TechDirectory';\r\nimport TechBroadcastBuilder from './tech/TechBroadcastBuilder';\r\nimport TechGearDatabase from './tech/TechGearDatabase';\r\nimport TechProfileEditor from './tech/TechProfileEditor';\r\n\r\nexport default function TechServices({ user, userData, openPublicProfile }) {\r\n    const [activeTab, setActiveTab] = useState('board');\r\n    const isTech = userData?.accountTypes?.includes('Technician');\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto gap-fluid pb-20 container-fluid\">\r\n            <div className=\"bg-gradient-to-r from-orange-900 to-slate-900 p-8 rounded-2xl text-white shadow-xl relative overflow-hidden flex flex-col md:flex-row justify-between items-end\">\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-2 text-orange-400 font-bold uppercase tracking-widest text-xs mb-2\"><Wrench size={14}/> SeshNx Technical</div>\r\n                    <h1 className=\"text-3xl font-extrabold mb-2\">Studio Tech Services</h1>\r\n                    <p className=\"text-slate-300 max-w-lg\">Hire professionals for equipment repair, studio wiring, and acoustic calibration.</p>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 relative z-10 mt-4 md:mt-0\">\r\n                    <button onClick={() => setActiveTab('board')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'board' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Job Board</button>\r\n                    <button onClick={() => setActiveTab('directory')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'directory' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Find a Tech</button>\r\n                    <button onClick={() => setActiveTab('broadcast')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'broadcast' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Post Request</button>\r\n                    <button onClick={() => setActiveTab('database')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'database' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Gear DB</button>\r\n                    {isTech && <button onClick={() => setActiveTab('profile')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'profile' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Tech Portal</button>}\r\n                </div>\r\n                <Settings size={200} className=\"absolute -right-10 -top-10 text-white opacity-5 rotate-12 pointer-events-none\"/>\r\n            </div>\r\n            <div className=\"min-h-[400px]\">\r\n                {activeTab === 'board' && <ServiceJobBoard user={user} />}\r\n                {activeTab === 'directory' && <TechDirectory user={user} userData={userData} openPublicProfile={openPublicProfile} />}\r\n                {activeTab === 'broadcast' && <TechBroadcastBuilder user={user} userData={userData} onSuccess={() => setActiveTab('board')} onCancel={() => setActiveTab('board')} />}\r\n                {activeTab === 'database' && <TechGearDatabase user={user} isTech={isTech} />}\r\n                {activeTab === 'profile' && isTech && <TechProfileEditor user={user} />}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["ServiceJobBoard","user","requests","setRequests","useState","filter","setFilter","useEffect","supabase","data","error","item","channel","jsxs","jsx","SERVICE_CATALOGUE","cat","r","req","User","MessageCircle","TechBookingModal","userData","target","onClose","submitting","setSubmitting","form","setForm","attachments","setAttachments","uploadMedia","uploading","useMediaUpload","handleFileUpload","e","file","result","prev","handleSubmit","userId","Wrench","X","s","EquipmentAutocomplete","value","fullName","Video","f","i","Loader2","TechDirectory","openPublicProfile","techs","setTechs","loading","setLoading","search","setSearch","specialtyFilter","setSpecialtyFilter","selectedTech","setSelectedTech","runSearch","query","profilesData","results","t","Search","TECH_SPECIALTIES","tech","Briefcase","_a","_b","role","_c","TechBroadcastBuilder","onSuccess","onCancel","category","setCategory","equipment","setEquipment","urgency","setUrgency","budget","setBudget","details","setDetails","media","setMedia","handleFileSelect","Zap","c","ChevronDown","TechGearDatabase","isTech","view","setView","pendingItems","setPendingItems","loadPendingItems","itemsData","handleVote","itemId","voteType","currentData","currentVotes","voteArray","updatedVotes","YES_THRESHOLD","REJECT_THRESHOLD","yesVotes","fakeVotes","dupVotes","submitterWallet","voterWallet","Database","CheckCircle","ThumbsUp","_e","_d","_g","_f","ThumbsDown","_i","_h","_k","_j","Copy","_m","_l","GearSubmissionForm","EQUIP_CATEGORIES","submitterName","TechProfileEditor","setData","handleSave","subProfileError","searchTerms","publicProfileError","MultiSelect","k","v","Save","TechServices","activeTab","setActiveTab","Settings"],"mappings":"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"}