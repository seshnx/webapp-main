const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthWizard-Bb1mQEVZ.js","assets/edu-B_3o1btY.js","assets/vendor-DpIp-Nyk.js","assets/chat-DJYVPNtG.js","assets/vendor-framer-RaTCtWVJ.js","assets/config-yUl3KxdD.js","assets/vendor-maps-DwfP8u5o.js","assets/vendor-maps-Dgihpmma.css","assets/SeshNx-PNG cCropped white text-CY2zM0R9.js","assets/AppRoutes-D-BLfYuu.js","assets/MainLayout-BkJYHRHc.js"])))=>i.map(i=>d[i]);
var I=Object.defineProperty;var L=(t,i,s)=>i in t?I(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s;var j=(t,i,s)=>L(t,typeof i!="symbol"?i+"":i,s);import{r as o,bH as R,bI as D,j as e,L as d,bJ as _,R as C,an as z,m as A,B as O,bK as T,bL as U,bM as P,bN as M}from"./vendor-DpIp-Nyk.js";import{_ as N}from"./edu-B_3o1btY.js";import{s as B,c as F}from"./chat-DJYVPNtG.js";import"./config-yUl3KxdD.js";import"./vendor-framer-RaTCtWVJ.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const f=o.lazy(()=>N(()=>import("./AuthWizard-Bb1mQEVZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),$=o.lazy(()=>N(()=>import("./AppRoutes-D-BLfYuu.js"),__vite__mapDeps([9,1,2,3,4,5]))),W=o.lazy(()=>N(()=>import("./MainLayout-BkJYHRHc.js"),__vite__mapDeps([10,1,2,3,4,5])));function J(){const[t,i]=o.useState(null),[s,a]=o.useState(null),[r,n]=o.useState(!0),u=o.useRef(!1),l=R(),p=D(),[c,v]=o.useState(()=>typeof window<"u"?localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches:!1);o.useEffect(()=>{c?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[c]);const m=()=>v(!c);o.useEffect(()=>{u.current=!1;{n(!1);return}},[]);const w=o.useCallback(async()=>{try{i(null),a(null),l("/login",{replace:!0})}catch(E){console.error("Logout error:",E),i(null),a(null),l("/login",{replace:!0})}},[l]);if(r)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})});const S=new URLSearchParams(window.location.search).get("intent")==="signup",h=t&&t.id,x=s&&s.id,g=p.pathname==="/login",b=p.pathname==="/test-login";return!h&&!g&&!b?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}),children:e.jsx(f,{darkMode:c,toggleTheme:m,onSuccess:()=>l("/"),isNewUser:!1})}):h&&!x&&!g&&!b?e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}):b?h&&x?(l("/debug-report",{replace:!0}),null):e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}),children:e.jsx(f,{darkMode:c,toggleTheme:m,onSuccess:()=>l("/debug-report"),isNewUser:!1})}):g?h&&x?(l("/",{replace:!0}),null):e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}),children:e.jsx(f,{darkMode:c,toggleTheme:m,onSuccess:()=>l("/"),isNewUser:!1})}):h&&!x&&S?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}),children:e.jsx(f,{user:t,isNewUser:!0,darkMode:c,toggleTheme:m,onSuccess:()=>l("/debug-report")})}):!h||!x?e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-[#1a1d21]",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:48})}),children:e.jsx(f,{darkMode:c,toggleTheme:m,onSuccess:()=>l("/"),isNewUser:!1})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21]",children:[e.jsx(_,{position:"bottom-right",toastOptions:{style:{background:"#333",color:"#fff"}}}),p.pathname==="/settings"||p.pathname==="/debug-report"?e.jsx("main",{className:"p-6",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:32})}),children:e.jsx($,{user:t,userData:s,loading:r,darkMode:c,toggleTheme:m,handleLogout:w})})}):e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(d,{className:"animate-spin text-brand-blue",size:32})}),children:e.jsx(W,{user:t,userData:s,loading:r,darkMode:c,toggleTheme:m,handleLogout:w})})]})}let y=null,k=!1;const V=async()=>y!==null?y:(k||(k=!0,y=!1),null),H=(t,i={},s={})=>{const a={message:(t==null?void 0:t.message)||"Unknown error",stack:t==null?void 0:t.stack,name:t==null?void 0:t.name,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,...i,context:s};V().then(r=>{r&&r.captureException&&r.captureException(t,{extra:a,tags:{component:s.component||"Unknown",errorBoundary:s.errorBoundary||"None"},contexts:{custom:s}})}).catch(()=>{});try{const r=JSON.parse(localStorage.getItem("seshnx_errors")||"[]");r.unshift(a),r.splice(10),localStorage.setItem("seshnx_errors",JSON.stringify(r))}catch{}return a};class K extends C.Component{constructor(s){super(s);j(this,"handleReset",()=>{if(this.setState({hasError:!1,error:null,errorInfo:null,errorId:null,copied:!1}),this.props.onReset)this.props.onReset();else{const s=window.location.pathname;s!=="/"&&s!=="/dashboard"?window.location.href="/?tab=dashboard":window.location.reload()}});j(this,"handleCopyError",async()=>{var a,r,n;const s=`
Error ID: ${this.state.errorId}
Message: ${((a=this.state.error)==null?void 0:a.message)||"Unknown error"}
Stack: ${((r=this.state.error)==null?void 0:r.stack)||"No stack trace"}
Component Stack: ${((n=this.state.errorInfo)==null?void 0:n.componentStack)||"No component stack"}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Timestamp: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(s),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}catch(u){console.error("Failed to copy error:",u)}});this.state={hasError:!1,error:null,errorInfo:null,meme:"Unexpected signal chain failure.",errorId:null,copied:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorId:`ERR-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(s,a){const r={componentStack:a.componentStack,errorBoundary:this.props.name||"Default",props:this.props.context||{}},n=H(s,a,r);this.setState({errorInfo:{...a,errorId:this.state.errorId||n.timestamp}})}componentDidMount(){const s=["CoreAudio Overload detected.","The plugin crashed the session.","Buffer underrun exception.","Who deleted the master fader?","Sample rate mismatch: Reality is 44.1k, we are 48k.","The drummer kicked the power cable.","Ilok license not found.","Fatal Error: Not enough headroom.","The mix bus is clipping... hard.","Phantom power failure."];this.setState({meme:s[Math.floor(Math.random()*s.length)]})}render(){var s,a;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-[#1f2128] flex flex-col items-center justify-center p-4 text-center text-white font-sans",children:e.jsxs("div",{className:"bg-[#2c2e36] border border-red-500/30 p-8 rounded-2xl shadow-2xl max-w-lg w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-red-500/20 blur-[50px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mb-6 text-red-500",children:e.jsx(z,{size:32,strokeWidth:2})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Session Crashed"}),e.jsxs("p",{className:"text-xl text-[#3D84ED] font-medium mb-6 italic",children:['"',this.state.meme,'"']}),e.jsxs("div",{className:"bg-[#1f2128] p-4 rounded-lg w-full mb-6 text-left border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Error Details"}),e.jsx("button",{onClick:this.handleCopyError,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1 transition-colors",title:"Copy error details",children:this.state.copied?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:12}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:12}),"Copy"]})})]}),e.jsxs("div",{className:"space-y-2",children:[this.state.errorId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Error ID: "}),e.jsx("code",{className:"text-xs text-blue-400 font-mono",children:this.state.errorId})]}),e.jsx("code",{className:"text-sm text-red-400 font-mono break-words block",children:((s=this.state.error)==null?void 0:s.message)||"Unknown error occurred"}),((a=this.state.error)==null?void 0:a.stack)&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Stack Trace"}),e.jsx("pre",{className:"text-xs text-gray-400 font-mono mt-2 overflow-auto max-h-32",children:this.state.error.stack})]})]})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:"Go Back"}),e.jsxs("button",{onClick:this.handleReset,className:"flex-1 bg-[#3D84ED] hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-bold transition-all shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2",children:[e.jsx(T,{size:18}),"Reload App"]})]})]})]})}):this.props.children}}const q=({children:t})=>e.jsx(e.Fragment,{children:t});U.createRoot(document.getElementById("root")).render(e.jsx(q,{children:e.jsx(K,{name:"Root",children:e.jsx(P,{client:F,children:e.jsx(M,{children:e.jsx(J,{})})})})}));const G=()=>{const t=document.getElementById("loading-fallback");t&&(t.classList.add("fade-out"),setTimeout(()=>{t&&t.parentNode&&t.parentNode.removeChild(t),document.body.style.overflow="auto"},400))};setTimeout(G,600);export{K as E};
