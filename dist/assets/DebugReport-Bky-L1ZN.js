import{r as x,j as e,bO as y,G as A,D,y as U,ac as T,a6 as C}from"./vendor-Dl7DtIXW.js";import{s as d}from"./chat-BYF7Vx2D.js";import"./vendor-framer-CUELlS5e.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};a.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new a.Error().stack;l&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[l]="2bc788ee-1cca-4245-9f64-c57f85ad7622",a._sentryDebugIdIdentifier="sentry-dbid-2bc788ee-1cca-4245-9f64-c57f85ad7622")})()}catch{}function I({user:a,userData:l}){const[s,v]=x.useState(null),[k,h]=x.useState(!0),[w,p]=x.useState(!1);x.useEffect(()=>{b()},[a,l]);const b=async()=>{var o,c,i,f,j;h(!0);const t={timestamp:new Date().toISOString(),environment:{nodeEnv:"production",isDev:!1,isProd:!0,baseUrl:"Set",anonKey:"Set"},browser:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,storage:{localStorage:typeof Storage<"u"?"Available":"Unavailable",sessionStorage:typeof sessionStorage<"u"?"Available":"Unavailable"}},authentication:{userExists:!!a,userDataExists:!!l,userId:(a==null?void 0:a.id)||"N/A",userEmail:(a==null?void 0:a.email)||"N/A",userMetadata:(a==null?void 0:a.user_metadata)||{},appMetadata:(a==null?void 0:a.app_metadata)||{},createdAt:(a==null?void 0:a.created_at)||"N/A",lastSignIn:(a==null?void 0:a.last_sign_in_at)||"N/A",confirmedAt:(a==null?void 0:a.confirmed_at)||"N/A"},userData:l||null,supabase:{initialized:!!d,authUrl:((o=d)==null?void 0:o.supabaseUrl)||"N/A",authKey:(c=d)!=null&&c.supabaseKey?"Set":"Missing"},session:null,profile:null,errors:[]};try{if(d&&(a!=null&&a.id)){const{data:r,error:g}=await d.auth.getSession();t.session={exists:!!(r!=null&&r.session),accessToken:(i=r==null?void 0:r.session)!=null&&i.access_token?"Present":"Missing",refreshToken:(f=r==null?void 0:r.session)!=null&&f.refresh_token?"Present":"Missing",expiresAt:((j=r==null?void 0:r.session)==null?void 0:j.expires_at)||"N/A",error:(g==null?void 0:g.message)||null};const{data:N,error:m}=await d.from("profiles").select("*").eq("id",a.id).maybeSingle();t.profile={exists:!!N,data:N||null,error:(m==null?void 0:m.message)||null};const{error:u}=await d.from("profiles").select("id").limit(1);u&&t.errors.push(`Database query test failed: ${u.message}`)}}catch(r){t.errors.push(`Error during checks: ${r.message}`)}v(t),h(!1)},S=()=>{const t=JSON.stringify(s,null,2);navigator.clipboard.writeText(t).then(()=>{p(!0),setTimeout(()=>p(!1),2e3)})},E=()=>{const t=JSON.stringify(s,null,2),o=new Blob([t],{type:"application/json"}),c=URL.createObjectURL(o),i=document.createElement("a");i.href=c,i.download=`debug-report-${Date.now()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(c)},n=({status:t})=>t===!0||t==="Available"||t==="Set"||t==="Present"?e.jsx(U,{className:"w-5 h-5 text-green-500"}):t===!1||t==="Unavailable"||t==="Missing"?e.jsx(T,{className:"w-5 h-5 text-red-500"}):e.jsx(C,{className:"w-5 h-5 text-yellow-500"});return k?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(y,{className:"animate-spin text-brand-blue w-8 h-8"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating debug report..."})]})})})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:"Debug Report"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),w?"Copied!":"Copy JSON"]}),e.jsxs("button",{onClick:E,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Download"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Generated: ",new Date(s.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Environment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.environment.isDev?"Dev":"Prod"}),e.jsxs("span",{className:"dark:text-gray-300",children:["Mode: ",s.environment.nodeEnv]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.environment.baseUrl}),e.jsxs("span",{className:"dark:text-gray-300",children:["Supabase URL: ",s.environment.baseUrl]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.environment.anonKey}),e.jsxs("span",{className:"dark:text-gray-300",children:["Supabase Key: ",s.environment.anonKey]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Browser"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.browser.storage.localStorage}),e.jsxs("span",{className:"dark:text-gray-300",children:["LocalStorage: ",s.browser.storage.localStorage]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.browser.storage.sessionStorage}),e.jsxs("span",{className:"dark:text-gray-300",children:["SessionStorage: ",s.browser.storage.sessionStorage]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.browser.cookieEnabled}),e.jsxs("span",{className:"dark:text-gray-300",children:["Cookies: ",s.browser.cookieEnabled?"Enabled":"Disabled"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User Agent:"}),e.jsx("p",{className:"text-xs dark:text-gray-300 break-all",children:s.browser.userAgent})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Authentication"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.authentication.userExists}),e.jsxs("span",{className:"dark:text-gray-300",children:["User Object: ",s.authentication.userExists?"Exists":"Missing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.authentication.userDataExists}),e.jsxs("span",{className:"dark:text-gray-300",children:["User Data: ",s.authentication.userDataExists?"Exists":"Missing"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"User ID:"}),e.jsx("p",{className:"dark:text-gray-300 font-mono",children:s.authentication.userId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.userEmail})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Created At:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.createdAt})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Sign In:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.lastSignIn})]})]}),Object.keys(s.authentication.userMetadata).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"User Metadata:"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.authentication.userMetadata,null,2)})]})]})]}),s.session&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Session"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.session.exists}),e.jsxs("span",{className:"dark:text-gray-300",children:["Session: ",s.session.exists?"Active":"Missing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.session.accessToken}),e.jsxs("span",{className:"dark:text-gray-300",children:["Access Token: ",s.session.accessToken]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.session.refreshToken}),e.jsxs("span",{className:"dark:text-gray-300",children:["Refresh Token: ",s.session.refreshToken]})]}),s.session.error&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Error: ",s.session.error]})})]})]}),s.profile&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Database Profile"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{status:s.profile.exists}),e.jsxs("span",{className:"dark:text-gray-300",children:["Profile: ",s.profile.exists?"Found":"Not Found"]})]}),s.profile.error&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Error: ",s.profile.error]})}),s.profile.data&&e.jsx("div",{className:"mt-4",children:e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.profile.data,null,2)})})]})]}),s.userData&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"User Data (State)"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.userData,null,2)})]}),s.errors.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4 text-red-500",children:"Errors"}),e.jsx("div",{className:"space-y-2",children:s.errors.map((t,o)=>e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t})},o))})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Raw JSON"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded text-xs overflow-auto max-h-96",children:JSON.stringify(s,null,2)})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:e.jsx("p",{className:"text-red-500",children:"Failed to generate report"})})})})}export{I as default};
