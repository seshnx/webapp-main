const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LegalDocs-tDua3Lfq.js","assets/vendor-M-mhr7Zm.js"])))=>i.map(i=>d[i]);
import{_ as W,f as q}from"./edu-CtXdl24B.js";import{r,j as e,bO as G,bP as H,a5 as Z,m as X,L,a0 as K,bQ as Q,X as J}from"./vendor-M-mhr7Zm.js";import{s as k}from"./chat-Wu-U_tWR.js";import{M as ee,T as ae,C as te,u as se}from"./vendor-maps-6BEm9RMI.js";import{ACCOUNT_TYPES as re,TALENT_SUBROLES as le}from"./config-yUl3KxdD.js";import{L as oe,a as ne}from"./SeshNx-PNG cCropped white text-CY2zM0R9.js";import"./vendor-framer-1_AFqeeG.js";function ie({onImagesLoaded:d}){const[n,l]=r.useState([]),[v,N]=r.useState(0),[i,u]=r.useState(!1),[m,b]=r.useState({x:0,y:0,startX:0,startY:0}),p=r.useRef(null);if(r.useEffect(()=>{l([{id:"1",url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=1920&q=80",order:0},{id:"2",url:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=1920&q=80",order:1},{id:"3",url:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=1920&q=80",order:2},{id:"4",url:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1920&q=80",order:3}])},[]),r.useEffect(()=>{if(n.length===0)return;const c=[{startX:0,startY:0,endX:100,endY:0},{startX:100,startY:0,endX:0,endY:0},{startX:0,startY:0,endX:0,endY:100},{startX:0,startY:100,endX:0,endY:0}],h=c[Math.floor(Math.random()*c.length)];b(h)},[v,n.length]),r.useEffect(()=>{if(n.length===0)return;const c=3e4;return p.current=setInterval(()=>{N(h=>(h+1)%n.length)},c),()=>clearInterval(p.current)},[n.length]),r.useEffect(()=>{if(n.length>0&&!i){const c=new Image;c.onload=()=>{u(!0),d&&d(!0)},c.onerror=()=>{u(!0),d&&d(!0)},c.src=n[0].url}},[n,i,d]),n.length===0)return null;const g=n[v],C=1.8,o=30,j=(c,h)=>{const R=c===0?"0%":c===100?`-${o}%`:`-${o/2}%`,_=h===0?"0%":h===100?`-${o}%`:`-${o/2}%`;return`scale(${C}) translate(${R}, ${_})`},I=j(m.startX,m.startY),$=j(m.endX,m.endY),E=`pan-${m.startX}-${m.startY}-${m.endX}-${m.endY}`;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes ${E} {
          0% { transform: ${I}; }
          100% { transform: ${$}; }
        }
      `}),e.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",style:{zIndex:-1},children:e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${g.url})`,backgroundSize:"cover",backgroundPosition:"center",animation:`${E} 30s linear forwards`,willChange:"transform"}}),e.jsx("div",{className:"absolute inset-0 bg-black/40"})]},g.id)})]})}const de=r.lazy(()=>W(()=>import("./LegalDocs-tDua3Lfq.js"),__vite__mapDeps([0,1]))),ce=["Student","EDUStaff","Intern","EDUAdmin","GAdmin"],ue=re.filter(d=>!ce.includes(d));function me({lat:d,lng:n}){const l=se();return r.useEffect(()=>{l.setView([d,n],11)},[d,n,l]),null}function ge({zip:d}){const[n,l]=r.useState({center:[34.0522,-118.2437],locationName:"",isValid:!1,loading:!1});return r.useEffect(()=>{if(!d||d.length<5)return;const N=setTimeout(async()=>{l(i=>({...i,loading:!0}));try{const i=await q(d);l(i?{center:[i.lat,i.lng],locationName:i.cityState,isValid:!0,loading:!1}:u=>({...u,loading:!1}))}catch{l(u=>({...u,loading:!1}))}},800);return()=>clearTimeout(N)},[d]),e.jsxs("div",{className:"w-full h-36 rounded-xl overflow-hidden relative border dark:border-gray-600 shadow-inner bg-gray-100 dark:bg-[#1f2128]",children:[e.jsxs(ee,{center:n.center,zoom:11,scrollWheelZoom:!1,zoomControl:!1,className:"h-full w-full",style:{background:"transparent"},children:[e.jsx(ae,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"© CARTO"}),e.jsx(me,{lat:n.center[0],lng:n.center[1]}),n.isValid&&e.jsx(te,{center:n.center,radius:4e3,pathOptions:{color:"#0066ff",fillColor:"#0066ff",fillOpacity:.15,stroke:!1}})]}),n.isValid&&e.jsx("div",{className:"absolute bottom-3 right-3 bg-white/95 dark:bg-black/85 backdrop-blur-md p-2 rounded-lg shadow-lg z-[400] text-xs font-bold border dark:border-gray-700 dark:text-white",children:n.locationName})]})}function je({darkMode:d,toggleTheme:n,user:l,onSuccess:v,isNewUser:N}){const[i,u]=r.useState("login"),[m,b]=r.useState(1),[p,g]=r.useState(!1),[C,o]=r.useState(""),[j,I]=r.useState(!1),[$,E]=r.useState(!1),[c,h]=r.useState(!1),[R,_]=r.useState(!1),S=r.useRef(null),[Y,A]=r.useState("auto"),[t,x]=r.useState({email:"",password:"",firstName:"",lastName:"",zip:"",roles:[],talentSubRole:""}),[z,F]=r.useState({hasUpper:!1,hasLower:!1,hasNumber:!1,isLength:!1});r.useEffect(()=>{var a,s;if(N&&l&&l.id){u("onboarding"),b(1);const y=(((a=l==null?void 0:l.user_metadata)==null?void 0:a.full_name)||((s=l==null?void 0:l.user_metadata)==null?void 0:s.name)||"").split(" ");x(f=>({...f,email:(l==null?void 0:l.email)||"",firstName:y[0]||"",lastName:y.slice(1).join(" ")||""}))}else(!l||!l.id)&&(u("login"),b(1))},[l,N]),r.useEffect(()=>{const a=t.password;F({hasUpper:/[A-Z]/.test(a),hasLower:/[a-z]/.test(a),hasNumber:/[0-9]/.test(a),isLength:a.length>=6})},[t.password]);const T=Object.values(z).every(Boolean);r.useEffect(()=>{if(!S.current)return;const a=new ResizeObserver(()=>{if(S.current){const s=S.current.scrollHeight+80;s>200&&A(`${s}px`)}});return a.observe(S.current),()=>a.disconnect()},[m,i,C,j,t.zip,t.roles]),r.useEffect(()=>{o("")},[m]);const D=async()=>{var a;if(!t.email||!t.password){o("Please fill in all fields.");return}g(!0),o("");try{const{error:s}=await k.auth.signInWithPassword({email:t.email.trim(),password:t.password});s?((a=s.message)!=null&&a.includes("Invalid login credentials")?o("Invalid email or password."):o(s.message),g(!1)):(console.log("Login success, redirecting..."),setTimeout(()=>{window.location.pathname==="/login"&&(window.location.href="/")},1500))}catch(s){console.error("Login exception:",s),o("Connection error. Please try again."),g(!1)}},U=async()=>{g(!0),o("");try{const{error:a}=await k.auth.signInWithOAuth({provider:"google",options:{queryParams:{access_type:"offline",prompt:"consent"},redirectTo:`${window.location.origin}?intent=signup`}});if(a)throw a}catch(a){console.error(a),o("Failed to initialize Google login."),g(!1)}},M=async()=>{if(i==="signup"&&!T)return o("Password too weak.");if(t.roles.length===0)return o("Please select a role.");g(!0),o("");try{let a=l==null?void 0:l.id;if(!a){const{data:f,error:O}=await k.auth.signUp({email:t.email.trim(),password:t.password,options:{data:{first_name:t.firstName,last_name:t.lastName}}});if(O)return g(!1),o(O.message);if(f!=null&&f.user&&!f.session){g(!1),u("login"),alert("Check your email to confirm your account!");return}a=f.user.id}const s=t.roles.length>0?t.roles:["Fan"],w=`${t.firstName} ${t.lastName}`,{error:y}=await k.from("profiles").upsert({id:a,email:t.email.trim(),first_name:t.firstName,last_name:t.lastName,zip_code:t.zip,account_types:s,active_role:s[0],preferred_role:s[0],effective_display_name:w,search_terms:[t.firstName,t.lastName,w].map(f=>f==null?void 0:f.toLowerCase()).filter(Boolean),updated_at:new Date().toISOString()},{onConflict:"id"});y&&console.error("Profile creation error:",y),await k.from("wallets").upsert({user_id:a,balance:0},{onConflict:"user_id"}),v&&v(),window.location.href="/"}catch(a){console.error(a),o("Signup failed. Please try again."),g(!1)}},V=async()=>{if(!t.email)return o("Enter your email.");g(!0);const{error:a}=await k.auth.resetPasswordForEmail(t.email,{redirectTo:window.location.origin});g(!1),a?o(a.message):I(!0)},B=()=>{if(!navigator.geolocation)return o("Geolocation not supported.");h(!0),navigator.geolocation.getCurrentPosition(async a=>{var s;try{const y=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a.coords.latitude}&lon=${a.coords.longitude}`)).json();(s=y.address)!=null&&s.postcode?x(f=>({...f,zip:y.address.postcode.split("-")[0]})):o("Zip code not found.")}catch{o("Location lookup failed.")}h(!1)},()=>{o("Location permission denied."),h(!1)})},P=({met:a,text:s})=>e.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${a?"text-green-600":"text-gray-400"}`,children:[a?e.jsx(X,{size:12}):e.jsx("div",{className:"w-3 h-3 border rounded-full"}),s]});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:0},children:e.jsx(ie,{onImagesLoaded:E})}),e.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-black transition-opacity duration-1000",style:{opacity:$?0:1,pointerEvents:"none"}}),e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsx("button",{onClick:n,className:"p-3 rounded-full bg-white/80 dark:bg-black/50 backdrop-blur-md border dark:border-gray-700",children:d?e.jsx(G,{size:20}):e.jsx(H,{size:20})})}),e.jsx("div",{className:"bg-white/95 dark:bg-[#1a1d21]/95 dark:border dark:border-gray-700 rounded-3xl shadow-2xl w-full max-w-md relative overflow-hidden transition-[height] duration-500 z-10 backdrop-blur-md",style:{height:Y,minHeight:"500px"},children:e.jsxs("div",{ref:S,className:"pt-12 px-8 pb-8",children:[e.jsxs("div",{className:"relative w-full h-48 mb-6 flex justify-center shrink-0",children:[e.jsx("div",{className:`absolute transition-all duration-500 ${i==="signup"||i==="onboarding"?"top-0 scale-90":"top-8 scale-100"}`,children:e.jsx("img",{src:d?oe:ne,alt:"SeshNx",className:"w-96 h-40 object-contain drop-shadow-md"})}),e.jsx("div",{className:"absolute bottom-2 w-full text-center",children:e.jsx("p",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:i==="signup"?"Create Account":i==="forgot"?"Recovery":i==="onboarding"?"Finalize Setup":""})})]}),C&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm flex items-center gap-2 mb-4",children:[e.jsx(Z,{size:16})," ",C]}),j&&e.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-xl text-sm flex items-center gap-2 mb-4",children:[e.jsx(X,{size:16})," Check your email."]}),i==="login"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"Email",value:t.email,onChange:a=>x(s=>({...s,email:a.target.value}))}),e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",type:"password",placeholder:"Password",value:t.password,onChange:a=>x(s=>({...s,password:a.target.value})),onKeyDown:a=>a.key==="Enter"&&D()}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>u("forgot"),className:"text-xs text-gray-500 hover:text-brand-blue",children:"Forgot Password?"})}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 disabled:opacity-50",onClick:D,disabled:p,children:p?e.jsx(L,{className:"animate-spin mx-auto",size:20}):"Sign In"}),e.jsx("button",{onClick:U,disabled:p,className:"w-full border dark:border-gray-600 py-3.5 rounded-xl font-bold dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800",children:"Continue with Google"}),e.jsx("p",{className:"text-center text-sm text-gray-500 cursor-pointer hover:text-brand-blue pt-2",onClick:()=>u("signup"),children:"New here? Create Account"})]}),(i==="signup"||i==="onboarding")&&e.jsxs("div",{children:[m===1&&e.jsx("div",{className:"space-y-4",children:i==="signup"?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"Email",type:"email",value:t.email,onChange:a=>x(s=>({...s,email:a.target.value}))}),e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",type:"password",placeholder:"Create Password",value:t.password,onChange:a=>x(s=>({...s,password:a.target.value}))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-1",children:[e.jsx(P,{met:z.hasUpper,text:"Uppercase"}),e.jsx(P,{met:z.isLength,text:"6+ Chars"}),e.jsx(P,{met:z.hasLower,text:"Lowercase"}),e.jsx(P,{met:z.hasNumber,text:"Number"})]}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold disabled:opacity-50",onClick:()=>{T&&t.email&&b(2)},disabled:!T||!t.email,children:"Continue"}),e.jsx("p",{className:"text-center text-sm text-gray-500 cursor-pointer pt-2",onClick:()=>u("login"),children:"Have an account? Log In"})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold dark:text-white",children:"Welcome!"}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold",onClick:()=>b(2),children:"Let's Go"})]})}),m===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{className:"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"First Name",value:t.firstName,onChange:a=>x(s=>({...s,firstName:a.target.value}))}),e.jsx("input",{className:"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"Last Name",value:t.lastName,onChange:a=>x(s=>({...s,lastName:a.target.value}))})]}),e.jsxs("div",{className:"relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{className:"w-full p-3.5 pl-10 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"Zip Code",maxLength:5,value:t.zip,onChange:a=>x(s=>({...s,zip:a.target.value.replace(/\D/g,"")}))}),e.jsx(K,{className:"absolute left-3 top-3.5 text-gray-400",size:18})]}),e.jsx("button",{onClick:B,className:"p-3.5 border dark:border-gray-600 rounded-xl text-brand-blue",disabled:c,children:c?e.jsx(L,{className:"animate-spin",size:18}):e.jsx(Q,{size:18})})]}),e.jsx(ge,{zip:t.zip}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("button",{className:"text-gray-500",onClick:()=>b(1),children:"Back"}),e.jsx("button",{className:"bg-black dark:bg-white dark:text-black text-white px-6 py-2.5 rounded-xl font-bold disabled:opacity-50",onClick:()=>{t.firstName&&t.zip&&b(3)},disabled:!t.firstName||!t.zip,children:"Next"})]})]}),m===3&&e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2.5",children:ue.map(a=>e.jsx("div",{onClick:()=>{const s=t.roles.includes(a)?t.roles.filter(w=>w!==a):[...t.roles,a];x(w=>({...w,roles:s}))},className:`p-3 border-2 rounded-xl cursor-pointer text-center font-bold text-sm transition ${t.roles.includes(a)?"border-brand-blue bg-blue-50 text-brand-blue dark:bg-blue-900/20 dark:border-blue-500":"border-gray-100 dark:border-gray-700 hover:border-gray-300"}`,children:a},a))}),t.roles.includes("Talent")&&e.jsxs("select",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",value:t.talentSubRole,onChange:a=>x(s=>({...s,talentSubRole:a.target.value})),children:[e.jsx("option",{value:"",children:"Select Talent Type (Optional)"}),le.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{className:"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold disabled:opacity-50",onClick:M,disabled:p||t.roles.length===0,children:p?e.jsx(L,{className:"animate-spin mx-auto",size:20}):"Complete Setup"}),e.jsx("button",{className:"w-full text-gray-400 text-xs",onClick:()=>b(2),children:"Back"})]})]}),i==="forgot"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{className:"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white",placeholder:"Email",type:"email",value:t.email,onChange:a=>x(s=>({...s,email:a.target.value}))}),e.jsx("button",{className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold disabled:opacity-50",onClick:V,disabled:p||j,children:j?"Sent!":p?e.jsx(L,{className:"animate-spin mx-auto",size:20}):"Send Link"}),e.jsx("button",{className:"w-full text-gray-500 text-sm",onClick:()=>u("login"),children:"Back"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t dark:border-gray-700 text-center",children:e.jsx("button",{onClick:()=>_(!0),className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"Terms of Service • Privacy Policy"})})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1d21] rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold dark:text-white",children:"Legal Documents"}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(J,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(L,{className:"animate-spin",size:24})}),children:e.jsx(de,{isEmbedded:!0})})})]})})]})}export{je as default};
