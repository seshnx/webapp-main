import{r as o,j as e,a0 as N,L as k,bQ as w,c6 as S,h as C,a5 as L,g as z}from"./vendor-CzMudb4J.js";import{f as $}from"./edu-CvezUxxm.js";import{S as F}from"./StudioMap-Tg4P0-nJ.js";import"./chat-C8KEVgfe.js";import"./vendor-framer-BfJ9H82C.js";import"./config-yUl3KxdD.js";import"./vendor-maps-DsW3aofm.js";function M({initialZip:s="",onLocationChange:a,showMap:d=!1,label:p="Location"}){const[n,c]=o.useState(s),[b,u]=o.useState(""),[i,x]=o.useState(!1),[f,m]=o.useState(null);o.useEffect(()=>{s&&s!==n&&(c(s),g(s))},[s]);const g=async l=>{const t=l.replace(/\D/g,"").slice(0,5);if(c(t),t.length===5){x(!0);const r=await $(t);r?(u(r.cityState),m({lat:r.lat,lng:r.lng}),a({zip:t,...r})):(u("Unknown Location"),a({zip:t,valid:!1})),x(!1)}else u("")},h=()=>{if(!navigator.geolocation)return alert("Geolocation not supported");x(!0),navigator.geolocation.getCurrentPosition(async l=>{const{latitude:t,longitude:r}=l.coords;try{const j=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${r}`)).json()).address.postcode;if(j){const v=j.split("-")[0];c(v),g(v)}else m({lat:t,lng:r}),u("Current Location"),a({lat:t,lng:r,name:"Current Location",valid:!0})}catch(y){console.error(y),alert("Failed to determine location.")}x(!1)},l=>{console.warn(l),alert("Location access denied."),x(!1)})};return e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:p}),e.jsxs("div",{className:"relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{className:"w-full pl-9 p-2.5 bg-white dark:bg-[#1f2128] border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition-all text-sm",placeholder:"Zip Code",maxLength:5,value:n,onChange:l=>g(l.target.value)}),e.jsx(N,{className:`absolute left-3 top-3 text-gray-400 ${i?"animate-pulse":""}`,size:16})]}),e.jsx("button",{onClick:h,disabled:i,className:"p-2.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-brand-blue transition-colors",title:"Use my location",children:i?e.jsx(k,{size:18,className:"animate-spin"}):e.jsx(w,{size:18})})]}),b&&e.jsxs("div",{className:"mt-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 flex items-center gap-1 animate-in fade-in",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),b]})]})}function B({userData:s,sessionParams:a,setSessionParams:d,onNext:p}){var h,l;const[n,c]=o.useState(1),[b,u]=o.useState(!1),[i,x]=o.useState([]),f=t=>{t.preventDefault(),c(2),m()},m=async()=>{},g=t=>{d(r=>({...r,venue:t})),p()};return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-2xl border dark:border-gray-700 shadow-sm overflow-hidden min-h-[600px]",children:[e.jsxs("div",{className:"p-6 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:[e.jsxs("h2",{className:"text-xl font-extrabold dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"bg-brand-blue text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:n}),n===1?"Session Logistics":"Select Studio"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-10",children:n===1?"Define the when and where.":`Found ${i.length} studios within range.`})]}),n===1&&e.jsxs("form",{onSubmit:f,className:"p-8 space-y-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(S,{size:14,className:"inline mr-1"})," Date"]}),e.jsx("input",{type:"date",required:!0,className:"w-full p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white outline-none focus:ring-2 focus:ring-brand-blue",value:a.date,onChange:t=>d({...a,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(C,{size:14,className:"inline mr-1"})," Start Time"]}),e.jsx("input",{type:"time",required:!0,className:"w-full p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white outline-none focus:ring-2 focus:ring-brand-blue",value:a.time,onChange:t=>d({...a,time:t.target.value})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{initialZip:s==null?void 0:s.zip,label:"Center Location",onLocationChange:t=>d({...a,location:t})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Max Distance"}),e.jsxs("span",{className:"text-xs font-bold text-brand-blue",children:[a.radius," miles"]})]}),e.jsx("input",{type:"range",min:"5",max:"100",step:"5",value:a.radius,onChange:t=>d({...a,radius:parseInt(t.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-blue"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(L,{size:14,className:"inline mr-1"})," Urgency"]}),e.jsx("div",{className:"flex gap-2",children:["Low","Normal","High"].map(t=>e.jsx("button",{type:"button",onClick:()=>d({...a,urgency:t}),className:`flex-1 py-2 rounded-lg text-sm font-bold border transition ${a.urgency===t?"bg-brand-blue text-white border-brand-blue":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t},t))})]})]}),e.jsx("div",{className:"pt-6",children:e.jsxs("button",{type:"submit",className:"w-full bg-brand-blue text-white py-4 rounded-xl font-bold shadow-lg hover:bg-blue-600 transition flex justify-center items-center gap-2",children:["Find Studios ",e.jsx(z,{size:20})]})})]}),n===2&&e.jsx("div",{className:"flex flex-col h-[600px]",children:b?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx(k,{className:"animate-spin text-brand-blue mb-4",size:40}),e.jsx("p",{className:"text-gray-500",children:"Scouting locations..."})]}):e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-1/2 overflow-y-auto p-4 space-y-3",children:[e.jsx("button",{onClick:()=>c(1),className:"text-xs text-gray-500 hover:text-brand-blue mb-2 flex items-center gap-1",children:"â† Change Filters"}),e.jsxs("div",{onClick:()=>g({id:"remote",name:"Remote / TBD",address:"No physical location set"}),className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer text-center",children:[e.jsx("h4",{className:"font-bold text-gray-600 dark:text-gray-300",children:"No Studio Needed / Remote"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Skip venue selection"})]}),i.map(t=>e.jsxs("div",{onClick:()=>g(t),className:"bg-white dark:bg-[#1f2128] p-4 rounded-xl border dark:border-gray-700 hover:border-brand-blue dark:hover:border-blue-500 cursor-pointer transition shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold dark:text-white group-hover:text-brand-blue",children:t.name||"Studio"}),e.jsxs("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-600 dark:text-gray-300",children:["$",t.rate,"/hr"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[e.jsx(N,{size:10})," ",t.distance.toFixed(1)," miles away"]}),e.jsx("div",{className:"flex gap-1 mt-2",children:(t.equipmentList||[]).slice(0,3).map(r=>e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/20 text-blue-600 px-1.5 py-0.5 rounded",children:r},r))})]},t.id))]}),e.jsx("div",{className:"hidden md:block w-1/2 h-full border-l dark:border-gray-700 relative",children:e.jsx(F,{locations:i,center:[(h=a.location)==null?void 0:h.lat,(l=a.location)==null?void 0:l.lng],height:"100%",drawRadius:!0,radiusMiles:a.radius})})]})})]})}export{B as default};
