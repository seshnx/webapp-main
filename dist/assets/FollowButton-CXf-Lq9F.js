import{r as s,j as d,L as S,c_ as v,ct as _,a9 as E}from"./vendor-mIyI6DiM.js";import{i as F,f as j,z as $,A as L,h as P,B as T,C as D}from"./index-BCKV8ync.js";import{m as k,A as N}from"./vendor-framer-_HoVf1_M.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new e.Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="2329d342-2dff-4103-90be-757692a03637",e._sentryDebugIdIdentifier="sentry-dbid-2329d342-2dff-4103-90be-757692a03637")})()}catch{}function B(e){const[l,f]=s.useState([]),[a,n]=s.useState([]),[m,g]=s.useState({followersCount:0,followingCount:0}),[w,b]=s.useState(!0),c=async o=>{if(!o||o.length===0)return[];try{return(await P(o)).map(t=>({odId:t.user_id||t.id,userId:t.user_id||t.id,displayName:t.display_name||`${t.first_name||""} ${t.last_name||""}`.trim(),photoURL:t.avatar_url||t.photo_url,role:t.active_role||t.role}))}catch(r){return console.error("Error fetching profiles:",r),[]}},i=s.useCallback(async()=>{if(e)try{const o=await F(e),r=await c(o);f(r);const t=await j(e),C=await c(t);n(C),g({followingCount:o.length,followersCount:t.length}),b(!1)}catch(o){console.error("Error loading follow data:",o),b(!1)}},[e]);s.useEffect(()=>{if(i(),!e)return;const o=setInterval(()=>{i()},3e4);return()=>{clearInterval(o)}},[e,i]);const y=s.useCallback(o=>l.some(r=>r.odId===o),[l]),h=s.useCallback(async o=>{if(!(!e||!o||e===o))try{return await $(e,o),i(),{success:!0}}catch(r){return console.error("Follow error:",r),{success:!1,error:r}}},[e,i]),u=s.useCallback(async o=>{if(!(!e||!o))try{return await L(e,o),i(),{success:!0}}catch(r){return console.error("Unfollow error:",r),{success:!1,error:r}}},[e,i]),p=s.useCallback(async o=>y(o)?u(o):h(o),[y,h,u]),x=s.useCallback(()=>l.map(o=>o.odId),[l]);return{following:l,followers:a,stats:m,loading:w,isFollowing:y,followUser:h,unfollowUser:u,toggleFollow:p,getFollowingIds:x}}function H(e){const[l,f]=s.useState({followersCount:0,followingCount:0}),[a,n]=s.useState(!0);return s.useEffect(()=>{if(!e){n(!1);return}(async()=>{try{const[g,w]=await Promise.all([T(e),D(e)]);f({followersCount:g,followingCount:w}),n(!1)}catch(g){console.error("Error fetching social stats:",g),n(!1)}})()},[e]),{stats:l,loading:a}}function M({isFollowing:e,onToggle:l,size:f="md",variant:a="default",disabled:n=!1,showIcon:m=!0,className:g=""}){const[w,b]=s.useState(!1),[c,i]=s.useState(!1),y=async t=>{if(t.stopPropagation(),!(n||w)){b(!0);try{await l()}catch(C){console.error("Follow toggle error:",C)}b(!1)}},h={sm:"px-3 py-1 text-xs",md:"px-4 py-1.5 text-sm",lg:"px-6 py-2 text-base"},u={sm:12,md:14,lg:16},p=()=>e?a==="outline"||a==="minimal"?c?"border-red-300 text-red-500 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300":c?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200":a==="outline"?"border-brand-blue text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":a==="minimal"?"text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":"bg-brand-blue text-white hover:bg-blue-600",x=`
        font-semibold rounded-full transition-all duration-200 
        flex items-center justify-center gap-1.5
        disabled:opacity-50 disabled:cursor-not-allowed
        ${a==="outline"?"border-2 bg-transparent":""}
        ${a==="minimal"?"bg-transparent":""}
        ${h[f]}
        ${p()}
        ${g}
    `,o=()=>w?d.jsx(S,{className:"animate-spin",size:u[f]}):e?c?d.jsx(v,{size:u[f]}):d.jsx(_,{size:u[f]}):d.jsx(E,{size:u[f]}),r=()=>e?c?"Unfollow":"Following":"Follow";return d.jsx(k.button,{whileHover:{scale:n?1:1.02},whileTap:{scale:n?1:.98},className:x,onClick:y,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),disabled:n||w,children:d.jsx(N,{mode:"wait",children:d.jsxs(k.span,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"flex items-center gap-1.5",children:[m&&o(),d.jsx("span",{children:r()})]},`${e}-${c}`)})})}export{M as F,H as a,B as u};
