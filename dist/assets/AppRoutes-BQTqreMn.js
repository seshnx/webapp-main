const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DebugReport-xvBk1iDE.js","assets/vendor-M-mhr7Zm.js","assets/chat-Wu-U_tWR.js","assets/vendor-framer-1_AFqeeG.js","assets/ProfileManager-BQ52_hPS.js","assets/edu-CtXdl24B.js","assets/config-yUl3KxdD.js","assets/SettingsTab-j0oXlEO1.js","assets/index-TFlOXW0C.js","assets/index-DemKsjgZ.css","assets/Inputs-CwjYZ5ZL.js","assets/EquipmentAutocomplete-DRIl8Sr2.js","assets/useEquipmentDatabase-DM1VkO2W.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./edu-CtXdl24B.js";import{j as e,bR as _,bS as n,r as j,L as m,bH as y,bI as b}from"./vendor-M-mhr7Zm.js";import{s as h}from"./chat-Wu-U_tWR.js";import"./config-yUl3KxdD.js";import"./vendor-framer-1_AFqeeG.js";const v=(t,r=3,s=100)=>j.lazy(()=>new Promise((o,p)=>{const d=c=>{try{const a=t();a&&typeof a.then=="function"?a.then(l=>{o(l.default?l:{default:l})}).catch(l=>{c<r?(console.warn(`Lazy load failed, retrying... (${c+1}/${r})`,l),setTimeout(()=>d(c+1),s*(c+1))):(console.error("Lazy load failed after retries:",l),p(l))}):o(a)}catch(a){c<r?(console.warn(`Lazy load sync error, retrying... (${c+1}/${r})`,a),setTimeout(()=>d(c+1),s*(c+1))):(console.error("Lazy load failed after retries (sync error):",a),p(a))}};d(0)})),u=v(()=>f(()=>import("./DebugReport-xvBk1iDE.js"),__vite__mapDeps([0,1,2,3])));v(()=>f(()=>import("./ProfileManager-BQ52_hPS.js"),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11,12])));const L=v(()=>f(()=>import("./SettingsTab-j0oXlEO1.js"),__vite__mapDeps([7,1,2,3,6,8,5,9])));function i({children:t,user:r,loading:s}){const o=y();return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(m,{className:"animate-spin text-brand-blue",size:32})}):(j.useEffect(()=>{!r&&!s&&o("/login",{replace:!0})},[r,s,o]),r?t:null)}function x({to:t,replace:r=!0}){const s=y(),o=b();return j.useEffect(()=>{o.pathname!==t&&s(t,{replace:r})},[t,r,s,o.pathname]),null}function T({user:t,userData:r,loading:s,darkMode:o,toggleTheme:p,handleLogout:d}){return e.jsxs(_,{children:[e.jsx(n,{path:"/",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/feed/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/messages/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/bookings/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/marketplace/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/tech/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/payments/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/profile/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/business-center/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/legal",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/edu-student/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/edu-intern/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/edu-overview/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/edu-admin/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/studio-ops/*",element:e.jsx(i,{user:t,loading:s,children:e.jsx("div",{})})}),e.jsx(n,{path:"/debug-report",element:e.jsx(i,{user:t,loading:s,children:e.jsx(j.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(m,{className:"animate-spin text-brand-blue",size:32})}),children:e.jsx(u,{user:t,userData:r})})})}),e.jsx(n,{path:"/settings",element:e.jsx(i,{user:t,loading:s,children:e.jsx(j.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(m,{className:"animate-spin text-brand-blue",size:32})}),children:e.jsx(L,{user:t,userData:r,onUpdate:async c=>{if(t!=null&&t.id&&h)try{const{error:a}=await h.from("profiles").update({settings:c,updated_at:new Date().toISOString()}).eq("id",t.id);a&&console.error("Settings save failed:",a)}catch(a){console.error("Settings save error:",a)}},onRoleSwitch:async c=>{if(t!=null&&t.id&&h)try{await h.from("profiles").update({active_role:c,updated_at:new Date().toISOString()}).eq("id",t.id),console.log("Role switched to:",c)}catch(a){console.error("Role switch failed:",a)}}})})})}),e.jsx(n,{path:"/dashboard",element:e.jsx(x,{to:"/"})}),e.jsx(n,{path:"/home",element:e.jsx(x,{to:"/"})}),e.jsx(n,{path:"/social",element:e.jsx(x,{to:"/feed"})}),e.jsx(n,{path:"/chat",element:e.jsx(x,{to:"/messages"})}),e.jsx(n,{path:"/billing",element:e.jsx(x,{to:"/payments"})}),e.jsx(n,{path:"*",element:e.jsx(x,{to:"/"})})]})}export{T as default};
