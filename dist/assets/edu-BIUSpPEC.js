import{r as s,j as e,a0 as $,X as G,L as se,a1 as Ae,a2 as D,a3 as B,s as re,a4 as H,S as W,h as K,x as Y,a5 as Ee,a6 as be,U as Z,W as ae,a7 as pe,J as fe,a8 as ye,H as Le,a9 as de,T as O,aa as ze,D as Ie,ab as Pe,P as U,ac as Re,ad as V,ae as je,af as Q,m as Te,ag as _e,$ as Ne,ah as Me,y as $e,a as ve,ai as xe,E as Oe,g as Ue,aj as Fe,ak as ke,al as qe,F as we,am as De,an as Be,ao as He,ap as Ge,aq as ge,ar as me}from"./vendor-DgLHK7fS.js";import{s as I,S as te}from"./chat-B_DYfz3i.js";import{GLOBAL_ADMIN_ROLE as Ve,SCHOOL_PERMISSIONS as he}from"./config-yUl3KxdD.js";const We="modulepreload",Ke=function(c){return"/"+c},ue={},Es=function(l,n,g){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),m=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(x=>{if(x=Ke(x),x in ue)return;ue[x]=!0;const t=x.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${r}`))return;const u=document.createElement("link");if(u.rel=t?"stylesheet":We,t||(u.as="script"),u.crossOrigin="",u.href=x,m&&u.setAttribute("nonce",m),document.head.appendChild(u),t)return new Promise((f,j)=>{u.addEventListener("load",f),u.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(a){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=a,window.dispatchEvent(m),!m.defaultPrevented)throw a}return i.then(a=>{for(const m of a||[])m.status==="rejected"&&d(m.reason);return l().catch(d)})},Ls=async c=>{if(!c||c.length<5)return null;try{const l=await fetch(`https://api.zippopotam.us/us/${c}`);if(!l.ok)return null;const g=(await l.json()).places[0];return{lat:parseFloat(g.latitude),lng:parseFloat(g.longitude),name:g["place name"],state:g["state abbreviation"],cityState:`${g["place name"]}, ${g["state abbreviation"]}`}}catch(l){return console.warn("Geocoding failed:",l),null}},Je=async(c,l)=>{if(!c||!l)return null;try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${c}&lon=${l}`);if(!n.ok)return null;const i=(await n.json()).address,d=i.city||i.town||i.village||i.hamlet||"Unknown Location",a=i.state||"",m=i.postcode||"";return{city:d,state:a,zip:m,displayName:`${d}, ${a} ${m}`.trim()}}catch(n){return console.warn("Reverse geocoding failed:",n),null}},Ye=async(c,l={})=>{if(!c||c.trim().length<3)return[];const{countryCode:n="us",limit:g=5,addressDetails:i=!0}=l;try{const d=new URLSearchParams({q:c,format:"json",addressdetails:i?"1":"0",limit:g.toString(),countrycodes:n}),a=await fetch(`https://nominatim.openstreetmap.org/search?${d}`,{headers:{Accept:"application/json"}});return a.ok?(await a.json()).map(x=>{const t=x.address||{};return{id:x.place_id,displayName:x.display_name,shortName:Ze(x),lat:parseFloat(x.lat),lng:parseFloat(x.lon),type:x.type,category:x.category,address:{houseNumber:t.house_number||"",street:t.road||t.street||"",city:t.city||t.town||t.village||t.hamlet||"",state:t.state||"",stateCode:ne(t.state),zip:t.postcode||"",country:t.country||"",countryCode:t.country_code||""},formattedAddress:Qe(t)}}):(console.warn("Address search failed:",a.status),[])}catch(d){return console.warn("Address search error:",d),[]}};function Ze(c){const l=c.address||{},n=[];l.house_number&&l.road?n.push(`${l.house_number} ${l.road}`):l.road&&n.push(l.road);const g=l.city||l.town||l.village||l.hamlet;g&&n.push(g);const i=ne(l.state);return i&&n.push(i),n.join(", ")||c.display_name.split(",").slice(0,3).join(",")}function Qe(c){const l=[];c.house_number&&c.road?l.push(`${c.house_number} ${c.road}`):c.road&&l.push(c.road);const n=c.city||c.town||c.village||"",g=ne(c.state),i=c.postcode||"",d=[n,g].filter(Boolean).join(", ");return d&&l.push(i?`${d} ${i}`:d),l.join(", ")}function ne(c){if(!c)return"";const l={alabama:"AL",alaska:"AK",arizona:"AZ",arkansas:"AR",california:"CA",colorado:"CO",connecticut:"CT",delaware:"DE",florida:"FL",georgia:"GA",hawaii:"HI",idaho:"ID",illinois:"IL",indiana:"IN",iowa:"IA",kansas:"KS",kentucky:"KY",louisiana:"LA",maine:"ME",maryland:"MD",massachusetts:"MA",michigan:"MI",minnesota:"MN",mississippi:"MS",missouri:"MO",montana:"MT",nebraska:"NE",nevada:"NV","new hampshire":"NH","new jersey":"NJ","new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND",ohio:"OH",oklahoma:"OK",oregon:"OR",pennsylvania:"PA","rhode island":"RI","south carolina":"SC","south dakota":"SD",tennessee:"TN",texas:"TX",utah:"UT",vermont:"VT",virginia:"VA",washington:"WA","west virginia":"WV",wisconsin:"WI",wyoming:"WY","district of columbia":"DC"};return c.length===2?c.toUpperCase():l[c.toLowerCase()]||c}const Xe={schoolId:null,schoolData:null,studentProfile:null,staffProfile:null,myPermissions:[],internshipStudio:null,isStudent:!1,isStaff:!1,checkIn:async()=>{},checkOut:async()=>{},loading:!1},Se=s.createContext(Xe);function X(){return s.useContext(Se)}function zs({children:c,user:l,userData:n}){var p;const[g,i]=s.useState(null),[d,a]=s.useState(null),[m,x]=s.useState(null),[t,r]=s.useState([]),[u,f]=s.useState(null),[j,v]=s.useState(!0);s.useEffect(()=>{if(!l||!(n!=null&&n.schoolId)||!I){v(!1);return}},[l,n]);const E=async(k,L="remote")=>{!d||!n.schoolId||I},C=async k=>{!(d!=null&&d.active_session_id)||!n.schoolId||I},h={schoolId:n==null?void 0:n.schoolId,schoolData:g,studentProfile:d,staffProfile:m,myPermissions:t,internshipStudio:u,isStudent:!!d,isStaff:!!m||((p=n==null?void 0:n.accountTypes)==null?void 0:p.includes("EDUAdmin")),checkIn:E,checkOut:C,loading:j};return e.jsx(Se.Provider,{value:h,children:c})}const es=()=>{const[c,l]=s.useState(!1),[n,g]=s.useState(null);return{uploadImage:async(d,a)=>(d&&(g("Supabase is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your environment variables."),console.error("Supabase Storage is not available.")),null),uploading:c,error:n}};function ss(c={}){const{debounceMs:l=300,countryCode:n="us",limit:g=5}=c,[i,d]=s.useState([]),[a,m]=s.useState(!1),[x,t]=s.useState(null),r=s.useRef(null),u=s.useRef(""),f=s.useRef(0),j=s.useCallback(async E=>{const C=(E==null?void 0:E.trim())||"";if(r.current&&clearTimeout(r.current),C.length<3){d([]),m(!1),t(null);return}C!==u.current&&(m(!0),t(null),r.current=setTimeout(async()=>{const h=++f.current;u.current=C;try{const p=await Ye(C,{countryCode:n,limit:g,addressDetails:!0});h===f.current&&(d(p),m(!1))}catch(p){h===f.current&&(t(p.message||"Address search failed"),d([]),m(!1))}},l))},[l,n,g]),v=s.useCallback(()=>{d([]),t(null),u.current=""},[]);return{search:j,results:i,loading:a,error:x,clearResults:v}}function ts({onSelect:c,value:l,onChange:n,placeholder:g="Start typing an address...",className:i="",label:d="Address",required:a=!1,showGeolocation:m=!0,countryCode:x="us",error:t}){const{search:r,results:u,loading:f,error:j,clearResults:v}=ss({countryCode:x,debounceMs:350,limit:6}),[E,C]=s.useState(""),[h,p]=s.useState(!1),[k,L]=s.useState(!1),y=s.useRef(null),N=s.useRef(null),S=l!==void 0?l:E;s.useEffect(()=>{function b(A){y.current&&!y.current.contains(A.target)&&p(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const P=b=>{const A=b.target.value;n?n(A):C(A),A.trim().length>=3?(r(A),p(!0)):(p(!1),v())},R=b=>{const A={displayName:b.displayName,shortName:b.shortName,formattedAddress:b.formattedAddress,lat:b.lat,lng:b.lng,...b.address},F=b.formattedAddress||b.shortName||b.displayName;n?n(F):C(F),c&&c(A),p(!1),v()},z=async()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}L(!0),navigator.geolocation.getCurrentPosition(async b=>{const{latitude:A,longitude:F}=b.coords;try{const _=await Je(A,F);if(_){const q=_.displayName;n?n(q):C(q),c&&c({displayName:q,formattedAddress:q,lat:A,lng:F,city:_.city,state:_.state,zip:_.zip})}}catch(_){console.error("Reverse geocode failed:",_)}L(!1)},b=>{console.warn("Geolocation error:",b),alert("Unable to get your location. Please enter address manually."),L(!1)},{enableHighAccuracy:!0,timeout:1e4})},T=()=>{var b;n?n(""):C(""),v(),p(!1),(b=N.current)==null||b.focus()},o=t||j;return e.jsxs("div",{ref:y,className:`relative ${i}`,children:[d&&e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:[d,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:`absolute left-3 top-3 ${f?"text-brand-blue animate-pulse":"text-gray-400"}`,size:16}),e.jsx("input",{ref:N,type:"text",className:`
                            w-full pl-9 pr-8 p-2.5 text-sm
                            bg-white dark:bg-[#1f2128] 
                            border ${o?"border-red-400 focus:ring-red-200":"border-gray-200 dark:border-gray-600 focus:ring-brand-blue"}
                            rounded-lg focus:ring-2 outline-none 
                            dark:text-white transition-all
                        `,placeholder:g,value:S,onChange:P,onFocus:()=>{u.length>0&&p(!0)},autoComplete:"off"}),S&&!f&&e.jsx("button",{type:"button",onClick:T,className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(G,{size:16})}),f&&e.jsx(se,{className:"absolute right-3 top-3 text-brand-blue animate-spin",size:16})]}),m&&e.jsx("button",{type:"button",onClick:z,disabled:k,className:"p-2.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-brand-blue transition-colors disabled:opacity-50",title:"Use my current location",children:k?e.jsx(se,{size:18,className:"animate-spin"}):e.jsx(Ae,{size:18})})]}),o&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t||j}),h&&u.length>0&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl max-h-72 overflow-y-auto animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"py-1",children:u.map(b=>{var A;return e.jsx("button",{type:"button",onClick:()=>R(b),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b dark:border-gray-700/50 last:border-0 group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{size:16,className:"text-gray-400 group-hover:text-brand-blue transition-colors mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm dark:text-white group-hover:text-brand-blue transition-colors truncate",children:b.shortName||b.formattedAddress}),b.displayName!==b.shortName&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5",children:b.displayName}),((A=b.address)==null?void 0:A.zip)&&e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:["ZIP: ",b.address.zip]})]})]})},b.id)})}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-t dark:border-gray-700 text-[10px] text-gray-400 text-center",children:"Powered by OpenStreetMap"})]}),h&&f&&u.length===0&&S.length>=3&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl p-4 text-center text-gray-500 flex items-center justify-center gap-2",children:[e.jsx(se,{className:"animate-spin",size:16}),e.jsx("span",{className:"text-sm",children:"Searching addresses..."})]}),h&&!f&&u.length===0&&S.length>=3&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl p-4 text-center text-gray-500 text-sm",children:"No addresses found. Try a different search."})]})}function rs(c){return!c||!c.accountTypes?!1:c.accountTypes.includes(Ve)}const as=s.createContext();function ee(){const c=s.useContext(as);if(!c)throw new Error("useEduAuth must be used within an EduAuthProvider");return c}function ds({user:c,userData:l}){let n;try{n=ee()}catch{n=null}const g=(n==null?void 0:n.user)||c,i=(n==null?void 0:n.userData)||l,{schoolData:d,studentProfile:a}=X(),[m,x]=s.useState(""),[t,r]=s.useState([]),[u,f]=s.useState(!1),[j,v]=s.useState([]),[E,C]=s.useState([]),[h,p]=s.useState([]),[k,L]=s.useState([]),[y,N]=s.useState(!1),S=(i==null?void 0:i.internshipCities)||[],P=i==null?void 0:i.schoolId,R=async()=>{const w=m.trim();g!=null&&g.id||(g==null||g.uid),w&&S.length<3&&I},z=async w=>{g!=null&&g.id||(g==null||g.uid)};s.useEffect(()=>{i!=null&&i.programComplete&&T()},[i==null?void 0:i.programComplete,S]),s.useEffect(()=>{P&&(g!=null&&g.uid)&&(o(),b(),A(),F())},[P,g==null?void 0:g.uid]);const T=async()=>{},o=async()=>{},b=async()=>{},A=async()=>{},F=async()=>{},_=async w=>{},q=E.map(w=>w.courseId),ie=j.filter(w=>!q.includes(w.id)),oe=j.filter(w=>q.includes(w.id)),ce=((a==null?void 0:a.hoursLogged)||0)/((d==null?void 0:d.requiredHours)||100);return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"h-24 w-24 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-gray-200 dark:border-gray-600 shrink-0 p-2",children:d!=null&&d.logoURL?e.jsx("img",{src:d.logoURL,className:"h-full w-full object-contain",alt:"School Logo"}):e.jsx(D,{size:32,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-extrabold dark:text-white tracking-tight mb-1",children:(d==null?void 0:d.name)||"Student Dashboard"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 text-sm font-medium text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 px-2 py-0.5 rounded text-xs uppercase font-bold tracking-wide",children:"Student Portal"}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["ID: ",(i==null?void 0:i.studentId)||"N/A"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Cohort: ",(a==null?void 0:a.cohort)||"General"]})]})]}),e.jsxs("div",{className:"w-full md:w-64 bg-gray-50 dark:bg-black/20 p-4 rounded-xl border dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"dark:text-gray-300",children:"Progress"}),e.jsxs("span",{className:"text-indigo-600",children:[Math.round(ce*100),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-indigo-600",style:{width:`${Math.min(100,ce*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 text-right",children:[(a==null?void 0:a.hoursLogged)||0," / ",(d==null?void 0:d.requiredHours)||100," Hours"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx($,{size:20,className:"text-indigo-500"})," Internship Locations"]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Add up to 3 target locations (City, Zip, or County) to find matched studios."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(w=>e.jsxs("span",{className:"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300 text-sm font-medium px-3 py-1 rounded-full flex items-center gap-1",children:[w,e.jsx("button",{onClick:()=>z(),className:"ml-1 hover:text-indigo-800",children:"×"})]},w))}),S.length<3&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter City or Zip Code",value:m,onChange:w=>x(w.target.value),onKeyDown:w=>w.key==="Enter"&&R(),className:"flex-1 p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"}),e.jsx("button",{onClick:R,disabled:!m.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold disabled:opacity-50",children:"Add"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-indigo-500"}),"My Courses"]}),oe.length===0?e.jsx("p",{className:"text-gray-500",children:"You haven't enrolled in any courses yet."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:oe.map(w=>{const M=E.find(J=>J.courseId===w.id);return e.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:w.title}),e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded",children:"Enrolled"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:w.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(re,{size:14}),e.jsxs("span",{children:[w.lessonCount||0," lessons"]})]}),e.jsx("button",{className:"text-indigo-600 text-sm font-semibold hover:underline",children:"Continue Learning →"})]}),M&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"Progress"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[M.progress||0,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all",style:{width:`${M.progress||0}%`}})})]})]},w.id)})})]}),ie.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-indigo-500"}),"Available Courses"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ie.slice(0,4).map(w=>e.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsx("h3",{className:"font-bold dark:text-white mb-1",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:w.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(re,{size:14}),e.jsxs("span",{children:[w.lessonCount||0," lessons"]})]}),e.jsx("button",{onClick:()=>_(w.id),className:"px-4 py-1.5 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700 transition",children:"Enroll"})]})]},w.id))})]}),k.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-yellow-500"}),"Earned Badges & Certificates"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:k.map(w=>{var M,J;return e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(H,{size:32,className:"mx-auto text-yellow-500 mb-2"}),e.jsx("p",{className:"text-sm font-semibold dark:text-white",children:w.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((J=(M=w.earnedAt)==null?void 0:M.toDate)==null?void 0:J.call(M).toLocaleDateString())||"Recently"})]},w.id)})})]}),(i==null?void 0:i.programComplete)&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(W,{size:20,className:"text-indigo-500"})," Available Studios"]}),u?e.jsxs("p",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(K,{className:"animate-spin",size:16})," Searching..."]}):t.length>0?e.jsx("div",{className:"space-y-3",children:t.map(w=>e.jsxs("div",{className:"p-4 border rounded-lg dark:border-gray-700 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold dark:text-white text-lg",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx($,{size:12})," ",w.city,", ",w.state]})]}),e.jsx("button",{className:"text-indigo-600 font-bold text-sm hover:underline",children:"View Details"})]},w.id))}):e.jsxs("p",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(Y,{size:16})," No studios found matching your criteria yet."]})]})]})}const Is=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),ns=c=>{const l=Math.floor(c/60),n=Math.floor(c%60);return`${l}h ${n>0?`${n}m`:""}`};function ls({user:c,userData:l}){let n;try{n=ee()}catch{n=null}const g=(n==null?void 0:n.user)||c,i=(n==null?void 0:n.userData)||l,{schoolData:d,studentProfile:a,internshipStudio:m,checkIn:x,checkOut:t}=X(),[r,u]=s.useState(""),[f,j]=s.useState(!1),[v,E]=s.useState([]),[C,h]=s.useState([]),[p,k]=s.useState([]),L=i==null?void 0:i.schoolId;s.useEffect(()=>{L&&(g!=null&&g.id||g!=null&&g.uid)&&I&&(y(),N(),S())},[L,g==null?void 0:g.id,g==null?void 0:g.uid]);const y=async()=>{},N=async()=>{},S=async()=>{a!=null&&a.milestones&&k(a.milestones)},P=async()=>{j(!0);try{a!=null&&a.isClockedIn?(await t(r),u("")):await x((m==null?void 0:m.name)||"Remote Internship","studio")}catch(z){console.error(z)}j(!1)};if(!a)return e.jsx("div",{className:"p-8 text-center",children:"Loading student profile..."});const R=Math.min(100,(a.hoursLogged||0)/((d==null?void 0:d.requiredHours)||100)*100);return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"h-20 w-20 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-gray-200 dark:border-gray-600 shrink-0 p-1",children:d!=null&&d.logoURL?e.jsx("img",{src:d.logoURL,className:"h-full w-full object-contain",alt:"School Logo"}):e.jsx(D,{size:32,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-extrabold dark:text-white tracking-tight mb-1",children:(d==null?void 0:d.name)||"Internship Dashboard"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 text-sm font-medium text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 px-2 py-0.5 rounded text-xs uppercase font-bold tracking-wide",children:"Active Intern"}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Cohort: ",a.cohort]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-3xl font-black dark:text-white text-indigo-600",children:a.hoursLogged||0}),e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Total Hours"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-br from-indigo-900 to-slate-900 text-white p-8 rounded-2xl relative overflow-hidden shadow-lg border border-indigo-800/50",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest opacity-60 mb-2",children:"Assigned Studio Location"}),e.jsx("h2",{className:"text-3xl font-extrabold mb-4 tracking-tight",children:(m==null?void 0:m.name)||"Pending Assignment"}),m?e.jsxs("div",{className:"space-y-3 text-sm opacity-90",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx($,{size:18,className:"text-indigo-400"})," ",m.address||"Address not listed"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Y,{size:18,className:"text-green-400"})," Status: Active Placement"]})]}):e.jsxs("div",{className:"bg-white/10 p-4 rounded-xl flex items-start gap-3 border border-white/10",children:[e.jsx(Ee,{className:"text-yellow-400 shrink-0 mt-0.5",size:20}),e.jsx("p",{className:"text-sm leading-relaxed",children:"You haven't been assigned an internship location yet. Please contact your school coordinator to get placed."})]})]}),e.jsx("div",{className:"absolute -right-12 -bottom-12 w-64 h-64 bg-indigo-600/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(K,{className:a.isClockedIn?"text-green-500 animate-pulse":"text-gray-400"}),a.isClockedIn?"Currently Working":"Time Clock"]}),a.isClockedIn&&e.jsx("textarea",{className:"w-full p-3 text-sm border rounded-xl mb-4 dark:bg-black/20 dark:border-gray-600 dark:text-white resize-none focus:ring-2 focus:ring-indigo-500 outline-none",rows:"4",placeholder:"Describe your tasks for this session...",value:r,onChange:z=>u(z.target.value)})]}),e.jsx("button",{onClick:P,disabled:f||!m&&!a.isClockedIn,className:`w-full py-3.5 rounded-xl font-bold text-white transition shadow-lg transform active:scale-95 ${f?"bg-gray-400":a.isClockedIn?"bg-red-500 hover:bg-red-600 shadow-red-500/30":"bg-green-600 hover:bg-green-700 shadow-green-600/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"}`,children:f?"Processing...":a.isClockedIn?"Clock Out":"Clock In"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[e.jsx("span",{className:"dark:text-white",children:"Completion Progress"}),e.jsxs("span",{className:"text-indigo-600",children:[Math.round(R),"%"]})]}),e.jsx("div",{className:"w-full h-4 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-1000 ease-out",style:{width:`${R}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 text-center",children:[a.hoursLogged," / ",(d==null?void 0:d.requiredHours)||100," Hours Required"]})]}),v.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-indigo-500"}),"Course Progress"]}),e.jsx("div",{className:"space-y-3",children:v.map(z=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-semibold dark:text-white",children:["Course ",z.courseId]}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[z.progress||0,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all",style:{width:`${z.progress||0}%`}})})]},z.id))})]}),p.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(be,{size:20,className:"text-purple-500"}),"Internship Milestones"]}),e.jsx("div",{className:"space-y-2",children:p.map((z,T)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[z.completed?e.jsx(Y,{size:20,className:"text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"}),e.jsx("span",{className:z.completed?"text-gray-600 dark:text-gray-400 line-through":"dark:text-white",children:z.name})]},T))})]}),C.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-yellow-500"}),"Earned Badges"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map(z=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(H,{size:32,className:"mx-auto text-yellow-500 mb-2"}),e.jsx("p",{className:"text-sm font-semibold dark:text-white",children:z.name})]},z.id))})]})]})}const Ps=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"})),le=(c,l="export")=>{if(!c||!c.length){console.warn("No data to export.");return}const n=new Set;c.forEach(x=>Object.keys(x).forEach(t=>n.add(t)));const g=Array.from(n),i=[];i.push(g.join(",")),c.forEach(x=>{const t=g.map(r=>{const u=x[r];return u&&typeof u=="object"?u.toMillis?`"${new Date(u.toMillis()).toLocaleString()}"`:`"${JSON.stringify(u).replace(/"/g,'""')}"`:`"${(""+(u??"")).replace(/"/g,'""')}"`});i.push(t.join(","))});const d=new Blob([i.join(`
`)],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(d),m=document.createElement("a");m.href=a,m.setAttribute("download",`${l}_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(m),m.click(),document.body.removeChild(m)};function is({schoolId:c,schoolData:l}){const[n,g]=s.useState({students:0,interns:0,pending:0}),[i,d]=s.useState([]),[a,m]=s.useState(!0);return s.useEffect(()=>{},[c]),a?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Overview..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(te,{title:"Total Students",value:n.students,icon:e.jsx(Z,{className:"text-white"}),bg:"bg-gradient-to-br from-indigo-500 to-blue-600",text:"text-white"}),e.jsx(te,{title:"Active Internships",value:n.interns,icon:e.jsx(ae,{className:"text-white"}),bg:"bg-gradient-to-br from-purple-500 to-pink-600",text:"text-white"}),e.jsx(te,{title:"Pending Approvals",value:n.pending,icon:e.jsx(K,{className:"text-white"}),bg:"bg-gradient-to-br from-yellow-500 to-orange-600",text:"text-white"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(pe,{size:18,className:"text-gray-400"})," Recent Activity"]}),e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No recent activity recorded."}):i.map(x=>{var t;return e.jsxs("div",{className:"text-xs border-b dark:border-gray-700 pb-2 last:border-0",children:[e.jsxs("div",{className:"flex justify-between font-bold dark:text-gray-200",children:[e.jsx("span",{children:x.action}),e.jsx("span",{className:"text-gray-500 font-normal",children:(t=x.timestamp)!=null&&t.toDate?x.timestamp.toDate().toLocaleTimeString():""})]}),e.jsxs("div",{className:"text-gray-500 mt-0.5",children:[x.details," ",e.jsxs("span",{className:"opacity-70",children:["— ",x.adminName]})]})]},x.id)})})]}),e.jsxs("div",{className:"border dark:border-gray-700 rounded-xl p-6 flex flex-col items-center justify-center text-center bg-white dark:bg-black/20 shadow-sm",children:[e.jsx("div",{className:"h-24 w-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center shadow-lg mb-4 overflow-hidden border-4 border-white dark:border-gray-700",children:l!=null&&l.logoURL?e.jsx("img",{src:l.logoURL,className:"h-full w-full object-contain",alt:"School Logo"}):e.jsx(D,{size:40,className:"text-indigo-500"})}),e.jsx("h2",{className:"text-2xl font-extrabold dark:text-white mb-1",children:(l==null?void 0:l.name)||"School Name"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:(l==null?void 0:l.address)||"No Address Set"}),(l==null?void 0:l.website)&&e.jsxs("a",{href:l.website,target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full hover:bg-indigo-100 transition flex items-center gap-1",children:[e.jsx(fe,{size:12})," Visit Website"]})]})]})]})}function os({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState([]),[a,m]=s.useState(!0),[x,t]=s.useState(""),[r,u]=s.useState(!1),[f,j]=s.useState(!1),[v,E]=s.useState(null),[C,h]=s.useState(!1),[p,k]=s.useState({firstName:"",lastName:"",email:"",studentId:"",cohort:"",status:"Enrolled"}),[L,y]=s.useState("");s.useEffect(()=>{},[c]);const N=()=>{k({firstName:"",lastName:"",email:"",studentId:"",cohort:"",status:"Enrolled"}),h(!1),E(null),u(!0)},S=o=>{var b,A;k({firstName:((b=o.displayName)==null?void 0:b.split(" ")[0])||"",lastName:((A=o.displayName)==null?void 0:A.split(" ").slice(1).join(" "))||"",email:o.email||"",studentId:o.studentId||"",cohort:o.cohort||"",status:o.status||"Enrolled"}),h(!0),E(o),u(!0)},P=async()=>{},R=async(o,b)=>{!confirm(`Remove ${b} from the roster? This does not delete their user account.`)||I},z=async()=>{},T=n.filter(o=>{var b,A;return((b=o.displayName)==null?void 0:b.toLowerCase().includes(x.toLowerCase()))||((A=o.studentId)==null?void 0:A.includes(x))});return a?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Roster..."}):e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(W,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-9 p-2 text-sm border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"Search by Name or ID...",value:x,onChange:o=>t(o.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>le(n,"student_roster"),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-bold text-xs",children:"Export CSV"}),e.jsxs("button",{onClick:N,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold text-xs flex items-center gap-2 hover:bg-indigo-700",children:[e.jsx(ye,{size:16})," Add Student"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Name"}),e.jsx("th",{className:"p-3",children:"ID"}),e.jsx("th",{className:"p-3",children:"Cohort"}),e.jsx("th",{className:"p-3",children:"Internship"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:T.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-500",children:"No students found."})}):T.map(o=>e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsx("td",{className:"p-3 font-bold dark:text-white",children:o.displayName}),e.jsx("td",{className:"p-3 text-gray-500",children:o.studentId||"--"}),e.jsx("td",{className:"p-3",children:o.cohort||"General"}),e.jsx("td",{className:"p-3 text-gray-500",children:o.internshipStudioId?e.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-xs bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded w-fit",children:[e.jsx(ae,{size:12})," Assigned"]}):e.jsx("span",{className:"text-gray-400 italic text-xs",children:"Pending"})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{E(o),j(!0)},className:"p-1.5 bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-300 rounded hover:bg-indigo-100",title:"Assign Internship",children:e.jsx(Le,{size:14})}),e.jsx("button",{onClick:()=>S(o),className:"p-1.5 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300 rounded hover:bg-gray-200",title:"Edit Details",children:e.jsx(de,{size:14})}),e.jsx("button",{onClick:()=>R(o.id,o.displayName),className:"p-1.5 bg-red-50 text-red-600 dark:bg-red-900/30 dark:text-red-400 rounded hover:bg-red-100",title:"Remove Student",children:e.jsx(O,{size:14})})]})})]},o.id))})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-md rounded-xl p-6 space-y-4 animate-in zoom-in-95 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-xl dark:text-white",children:C?"Edit Student":"Add New Student"}),e.jsx("button",{onClick:()=>u(!1),children:e.jsx(G,{className:"text-gray-400 hover:text-red-500"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"First Name"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.firstName,onChange:o=>k({...p,firstName:o.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Last Name"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.lastName,onChange:o=>k({...p,lastName:o.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Email Address"}),e.jsx("input",{type:"email",className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.email,onChange:o=>k({...p,email:o.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Student ID"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.studentId,onChange:o=>k({...p,studentId:o.target.value}),placeholder:"e.g. S123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Cohort"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.cohort,onChange:o=>k({...p,cohort:o.target.value}),placeholder:"Fall 2024"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Enrollment Status"}),e.jsxs("select",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:p.status,onChange:o=>k({...p,status:o.target.value}),children:[e.jsx("option",{value:"Enrolled",children:"Enrolled"}),e.jsx("option",{value:"Graduated",children:"Graduated"}),e.jsx("option",{value:"Dropped",children:"Dropped"}),e.jsx("option",{value:"Leave",children:"On Leave"})]})]}),e.jsx("button",{onClick:P,className:"w-full bg-indigo-600 text-white py-2.5 rounded-lg font-bold hover:bg-indigo-700 mt-2",children:C?"Update Student":"Create Student Record"})]})}),f&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-sm rounded-xl p-6 space-y-4 animate-in zoom-in-95 shadow-2xl",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Assign Internship"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Select a partner studio for ",e.jsx("strong",{children:v.displayName}),"."]}),e.jsxs("select",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",value:L,onChange:o=>y(o.target.value),children:[e.jsx("option",{value:"",children:"Select Studio..."}),i.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(!1),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 rounded font-bold text-sm",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:!L,className:"flex-1 bg-indigo-600 text-white py-2 rounded font-bold disabled:opacity-50",children:"Confirm"})]})]})})]})}function cs({schoolId:c}){const[l,n]=s.useState([]),[g,i]=s.useState(!0),[d,a]=s.useState("all");s.useEffect(()=>{},[c]);const m=async(t,r)=>{},x=d==="all"?l:l.filter(t=>t.status===d);return g?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Internship Hours..."}):e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{size:16,className:"text-gray-500"}),e.jsxs("select",{className:"bg-white dark:bg-[#1f2128] border dark:border-gray-600 text-sm rounded-md p-1.5 outline-none dark:text-white",value:d,onChange:t=>a(t.target.value),children:[e.jsx("option",{value:"all",children:"All Activity"}),e.jsx("option",{value:"pending_approval",children:"Pending Approval"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"active",children:"Active (Clocked In)"})]})]}),e.jsxs("button",{onClick:()=>le(x,"internship_hours"),className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-[#1f2128] border dark:border-gray-600 rounded-md text-xs font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Ie,{size:14})," Export CSV"]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 shadow-sm",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Date"}),e.jsx("th",{className:"p-3",children:"Student"}),e.jsx("th",{className:"p-3",children:"Activity / Description"}),e.jsx("th",{className:"p-3",children:"Duration"}),e.jsx("th",{className:"p-3",children:"Status"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:"No logs found matching criteria."})}):x.map(t=>{var r,u;return e.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsxs("td",{className:"p-3 text-gray-600 dark:text-gray-300 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:(r=t.checkIn)!=null&&r.toDate?t.checkIn.toDate().toLocaleDateString():"N/A"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:(u=t.checkIn)!=null&&u.toDate?t.checkIn.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),e.jsx("td",{className:"p-3 font-bold dark:text-white",children:t.studentName}),e.jsxs("td",{className:"p-3 max-w-xs",children:[e.jsxs("span",{className:"block text-[10px] uppercase font-bold text-gray-400 mb-0.5",children:[t.type," • ",t.location]}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate block",title:t.description,children:t.description||e.jsx("span",{className:"italic opacity-50",children:"No description provided"})})]}),e.jsx("td",{className:"p-3 font-mono font-bold text-indigo-600 dark:text-indigo-400",children:t.checkOut?ns(t.duration):e.jsx("span",{className:"animate-pulse text-green-500",children:"Active..."})}),e.jsx("td",{className:"p-3",children:e.jsx(xs,{status:t.status})}),e.jsx("td",{className:"p-3 text-right",children:t.status==="pending_approval"&&e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>m(t.id),className:"p-1.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded hover:bg-green-200 transition",title:"Approve",children:e.jsx(Y,{size:16})}),e.jsx("button",{onClick:()=>m(t.id),className:"p-1.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded hover:bg-red-200 transition",title:"Reject",children:e.jsx(Pe,{size:16})})]})})]},t.id)})})]})})]})}function xs({status:c}){const l={approved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",pending_approval:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",active:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 animate-pulse"},n={approved:"Approved",rejected:"Rejected",pending_approval:"Pending",active:"In Progress"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] uppercase font-bold tracking-wide ${l[c]||"bg-gray-100 text-gray-500"}`,children:n[c]||c})}function gs({schoolId:c,course:l,onSave:n,onCancel:g,logAction:i}){const[d,a]=s.useState({title:"",description:"",duration:"",prerequisites:[],category:""}),[m,x]=s.useState([]),[t,r]=s.useState(!1),[u,f]=s.useState(""),[j,v]=s.useState(null);s.useEffect(()=>{l&&(a({title:l.title||"",description:l.description||"",duration:l.duration||"",prerequisites:l.prerequisites||[],category:l.category||""}),E())},[l]);const E=async()=>{!(l!=null&&l.id)||I},C=async()=>{if(!d.title.trim()){alert("Course title is required.");return}},h=()=>{u.trim()&&!d.prerequisites.includes(u.trim())&&(a(y=>({...y,prerequisites:[...y.prerequisites,u.trim()]})),f(""))},p=y=>{a(N=>({...N,prerequisites:N.prerequisites.filter(S=>S!==y)}))},k=()=>{const y={id:`temp-${Date.now()}`,title:"New Lesson",description:"",type:"video",content:"",order:m.length,duration:0};x([...m,y]),v(y.id)},L=async y=>{!confirm("Delete this lesson?")||I};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:l?"Edit Course":"Create New Course"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:t?"Saving...":"Save Course"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Title *"}),e.jsx("input",{type:"text",value:d.title,onChange:y=>a({...d,title:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"e.g., Introduction to Music Production"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:y=>a({...d,description:y.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"Course description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),e.jsx("input",{type:"text",value:d.duration,onChange:y=>a({...d,duration:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"e.g., 8 weeks"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("input",{type:"text",value:d.category,onChange:y=>a({...d,category:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"e.g., Production, Engineering"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prerequisites"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:u,onChange:y=>f(y.target.value),onKeyPress:y=>y.key==="Enter"&&h(),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"Add prerequisite..."}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.prerequisites.map((y,N)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-sm",children:[y,e.jsx("button",{onClick:()=>p(y),className:"hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx(G,{size:14})})]},N))})]})]}),l&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"Lessons"}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[e.jsx(U,{size:18}),"Add Lesson"]})]}),e.jsxs("div",{className:"space-y-2",children:[m.map((y,N)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(Re,{className:"text-gray-400 cursor-move",size:18}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium dark:text-white",children:y.title||"Untitled Lesson"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.type," • ",y.duration||0," min"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(y.id),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition",children:e.jsx(Edit2,{size:16,className:"text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>L(y.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition",children:e.jsx(O,{size:16,className:"text-red-600 dark:text-red-400"})})]})]},y.id)),m.length===0&&e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No lessons yet. Add your first lesson!"})]})]})]})}function ms({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState(!0),[a,m]=s.useState(""),[x,t]=s.useState(!1),[r,u]=s.useState(null);s.useEffect(()=>{c&&f()},[c]);const f=async()=>{},j=()=>{u(null),t(!0)},v=h=>{u(h),t(!0)},E=async h=>{!confirm("Are you sure you want to delete this course? This action cannot be undone.")||I},C=n.filter(h=>{var p,k;return((p=h.title)==null?void 0:p.toLowerCase().includes(a.toLowerCase()))||((k=h.description)==null?void 0:k.toLowerCase().includes(a.toLowerCase()))});return x?e.jsx(gs,{schoolId:c,course:r,onSave:()=>{t(!1),u(null),f()},onCancel:()=>{t(!1),u(null)},logAction:l}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(B,{size:24}),"Courses"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Manage courses and learning materials"})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition",children:[e.jsx(U,{size:18}),"New Course"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:a,onChange:h=>m(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-800 dark:text-white"})]}),i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading courses..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(B,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"No courses found matching your search.":"No courses yet. Create your first course!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(h=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-1",children:h.title||"Untitled Course"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:h.description||"No description"})]}),e.jsxs("div",{className:"flex gap-2 ml-2",children:[e.jsx("button",{onClick:()=>v(h),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"Edit course",children:e.jsx(de,{size:16,className:"text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>E(h.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Delete course",children:e.jsx(O,{size:16,className:"text-red-600 dark:text-red-400"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{size:14}),e.jsxs("span",{children:[h.lessonCount||0," lessons"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{size:14}),e.jsxs("span",{children:[h.enrollmentCount||0," enrolled"]})]}),h.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{size:14}),e.jsx("span",{children:h.duration})]})]}),h.prerequisites&&h.prerequisites.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Prerequisites:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:h.prerequisites.map((p,k)=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-xs",children:p},k))})]})]},h.id))})]})}function hs({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState(!0),[a,m]=s.useState(""),[x,t]=s.useState(!1),[r,u]=s.useState(null),[f,j]=s.useState({title:"",description:"",courses:[],badges:[],skills:[],mentorshipEnabled:!1}),[v,E]=s.useState([]);s.useEffect(()=>{c&&(C(),h())},[c]);const C=async()=>{},h=async()=>{},p=()=>{j({title:"",description:"",courses:[],badges:[],skills:[],mentorshipEnabled:!1}),u(null),t(!0)},k=o=>{j({title:o.title||"",description:o.description||"",courses:o.courses||[],badges:o.badges||[],skills:o.skills||[],mentorshipEnabled:o.mentorshipEnabled||!1}),u(o),t(!0)},L=async()=>{if(!f.title.trim()||!I){f.title.trim()||alert("Path title is required.");return}},y=async o=>{!confirm("Are you sure you want to delete this learning path?")||I},N=o=>{j(b=>({...b,courses:b.courses.includes(o)?b.courses.filter(A=>A!==o):[...b.courses,o]}))},S=()=>{const o=prompt("Enter badge name:");o&&!f.badges.includes(o)&&j(b=>({...b,badges:[...b.badges,o]}))},P=o=>{j(b=>({...b,badges:b.badges.filter(A=>A!==o)}))},R=()=>{const o=prompt("Enter skill name:");o&&!f.skills.includes(o)&&j(b=>({...b,skills:[...b.skills,o]}))},z=o=>{j(b=>({...b,skills:b.skills.filter(A=>A!==o)}))},T=n.filter(o=>{var b,A;return((b=o.title)==null?void 0:b.toLowerCase().includes(a.toLowerCase()))||((A=o.description)==null?void 0:A.toLowerCase().includes(a.toLowerCase()))});return x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:r?"Edit Learning Path":"Create Learning Path"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{t(!1),u(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:i,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:i?"Saving...":"Save Path"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Path Title *"}),e.jsx("input",{type:"text",value:f.title,onChange:o=>j({...f,title:o.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"e.g., Advanced Music Production Track"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:o=>j({...f,description:o.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-700 dark:text-white",placeholder:"Learning path description..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Courses"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-3",children:[v.map(o=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:f.courses.includes(o.id),onChange:()=>N(o.id),className:"rounded"}),e.jsx("span",{className:"dark:text-white",children:o.title})]},o.id)),v.length===0&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No courses available. Create courses first."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Badges"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:f.badges.map((o,b)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full text-sm",children:[e.jsx(H,{size:14}),o,e.jsx("button",{onClick:()=>P(o),className:"hover:text-yellow-900 dark:hover:text-yellow-100",children:e.jsx(G,{size:14})})]},b))}),e.jsx("button",{onClick:S,className:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline",children:"+ Add Badge"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:f.skills.map((o,b)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(be,{size:14}),o,e.jsx("button",{onClick:()=>z(o),className:"hover:text-blue-900 dark:hover:text-blue-100",children:e.jsx(G,{size:14})})]},b))}),e.jsx("button",{onClick:R,className:"text-sm text-indigo-600 dark:text-indigo-400 hover:underline",children:"+ Add Skill"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"mentorship",checked:f.mentorshipEnabled,onChange:o=>j({...f,mentorshipEnabled:o.target.checked}),className:"rounded"}),e.jsx("label",{htmlFor:"mentorship",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Mentorship Matching"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx(V,{size:24}),"Learning Paths"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Create structured learning programs with courses, badges, and mentorship"})]}),e.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition",children:[e.jsx(U,{size:18}),"New Path"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search learning paths...",value:a,onChange:o=>m(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none dark:bg-gray-800 dark:text-white"})]}),i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading learning paths..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(V,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a?"No paths found matching your search.":"No learning paths yet. Create your first path!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(o=>{var b;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-1",children:o.title||"Untitled Path"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:o.description||"No description"})]}),e.jsxs("div",{className:"flex gap-2 ml-2",children:[e.jsx("button",{onClick:()=>k(o),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"Edit path",children:e.jsx(de,{size:16,className:"text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>y(o.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"Delete path",children:e.jsx(O,{size:16,className:"text-red-600 dark:text-red-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(B,{size:14}),e.jsxs("span",{children:[((b=o.courses)==null?void 0:b.length)||0," courses"]})]}),o.badges&&o.badges.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(H,{size:14}),e.jsxs("span",{children:[o.badges.length," badges"]})]}),o.mentorshipEnabled&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-600 dark:text-indigo-400",children:[e.jsx(Z,{size:14}),e.jsx("span",{children:"Mentorship Enabled"})]})]})]},o.id)})})]})}function us({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState([]),[a,m]=s.useState(!0),[x,t]=s.useState(""),[r,u]=s.useState("");s.useEffect(()=>{},[c]);const f=async()=>alert("Email and Role are required.");return a?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Staff..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-5 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ye,{size:18,className:"text-indigo-600"})," Add New Staff Member"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(je,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{className:"w-full pl-10 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"User Email Address",value:x,onChange:j=>t(j.target.value)})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsx(Q,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsxs("select",{className:"w-full pl-10 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white appearance-none",value:r,onChange:j=>u(j.target.value),children:[e.jsx("option",{value:"",children:"Select Role..."}),i.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsx("button",{onClick:f,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-indigo-700 transition shadow-md",children:"Add Staff"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["* The user must already have a SeshNx account. This will grant them ",e.jsx("strong",{children:"EDUStaff"})," access to this school."]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]",children:[e.jsx("span",{className:"font-bold text-sm dark:text-gray-200",children:"Authorized Personnel"}),e.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 px-2 py-0.5 rounded-full font-bold",children:[n.length," Active"]})]}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:n.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No staff members found."}):n.map(j=>e.jsxs("div",{className:"p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold shadow-sm",children:j.name?j.name.charAt(0):"?"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold dark:text-white text-sm",children:j.name}),e.jsx("div",{className:"text-xs text-gray-500",children:j.email})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs font-bold border dark:border-gray-600",children:j.roleName})})]},j.id))})]})]})}function bs({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState(!0),[a,m]=s.useState(!1),[x,t]=s.useState({name:"",color:"#3b82f6",permissions:[]}),[r,u]=s.useState(!1);s.useEffect(()=>{},[c]);const f=async()=>{!x.name||I},j=async(h,p)=>{!confirm(`Delete role "${p}"? Staff assigned to this role will lose their permissions.`)||I},v=async(h,p)=>{},E=h=>{t(p=>({...p,permissions:p.permissions.includes(h)?p.permissions.filter(k=>k!==h):[...p.permissions,h]}))},C=(h,p)=>{const k=h.permissions||[];k.includes(p)?k.filter(L=>L!==p):[...k],v(h.id)};return i?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Roles..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("button",{onClick:()=>m(!0),className:"w-full py-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl text-gray-500 font-bold hover:bg-gray-50 dark:hover:bg-white/5 transition flex items-center justify-center gap-2",children:[e.jsx(U,{size:20})," Create New Role"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(h=>{var p;return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-sm flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-start bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color}}),h.name]}),e.jsxs("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-bold",children:[((p=h.permissions)==null?void 0:p.length)||0," Permissions"]})]}),e.jsx("button",{onClick:()=>j(h.id,h.name),className:"text-gray-400 hover:text-red-500 transition p-1",title:"Delete Role",children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"p-2 flex-1 overflow-y-auto max-h-[300px] custom-scrollbar",children:e.jsx("div",{className:"space-y-0.5",children:he.map(k=>{var y;const L=(y=h.permissions)==null?void 0:y.includes(k.id);return e.jsxs("label",{className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition ${L?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-white/5"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${L?"bg-indigo-600 border-indigo-600":"border-gray-400"}`,children:L&&e.jsx(Te,{size:10,className:"text-white",strokeWidth:4})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:L,onChange:()=>C(h,k.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-xs font-bold ${L?"text-indigo-700 dark:text-indigo-300":"text-gray-600 dark:text-gray-400"}`,children:k.label}),e.jsx("div",{className:"text-[10px] text-gray-400 leading-tight",children:k.description})]})]},k.id)})})})]},h.id)})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-lg rounded-xl p-6 space-y-4 max-h-[90vh] overflow-y-auto animate-in zoom-in-95 shadow-2xl",children:[e.jsxs("h3",{className:"font-bold text-xl dark:text-white flex items-center gap-2",children:[e.jsx(_e,{className:"text-indigo-600"})," Create New Role"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Role Name"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"e.g. Academic Advisor",value:x.name,onChange:h=>t({...x,name:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Color"}),e.jsx("div",{className:"flex items-center border rounded dark:border-gray-600 p-1 dark:bg-black/20",children:e.jsx("input",{type:"color",className:"h-8 w-8 rounded cursor-pointer border-none bg-transparent",value:x.color,onChange:h=>t({...x,color:h.target.value})})})]})]}),e.jsxs("div",{className:"border-t dark:border-gray-700 pt-4",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-3 block",children:"Assign Initial Permissions"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:he.map(h=>e.jsxs("label",{className:`flex items-start gap-2 p-2 border rounded cursor-pointer transition ${x.permissions.includes(h.id)?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:[e.jsx("input",{type:"checkbox",className:"mt-1",checked:x.permissions.includes(h.id),onChange:()=>E(h.id)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold dark:text-gray-200",children:h.label}),e.jsx("div",{className:"text-[10px] text-gray-500 leading-tight",children:h.description})]})]},h.id))})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 rounded font-bold text-sm",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:r,className:"flex-1 bg-indigo-600 text-white py-2 rounded font-bold hover:bg-indigo-700 disabled:opacity-50",children:r?"Saving...":"Create Role"})]})]})})]})}function ps({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState(!0),[a,m]=s.useState({resource:"",limit:4,unit:"hours/week",role:"Student"});s.useEffect(()=>{},[c]);const x=async()=>{if(!a.resource||!I){a.resource||alert("Resource name required.");return}},t=async(r,u)=>{!confirm("Delete this rule?")||I};return i?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Rules..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-5 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ne,{size:18,className:"text-indigo-600"})," Add Restriction / Quota"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Resource Name"}),e.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"e.g. Studio A, SSL Room",value:a.resource,onChange:r=>m({...a,resource:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Limit"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",className:"w-20 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:a.limit,onChange:r=>m({...a,limit:r.target.value})}),e.jsxs("select",{className:"flex-1 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",value:a.unit,onChange:r=>m({...a,unit:r.target.value}),children:[e.jsx("option",{value:"hours/week",children:"Hrs/Wk"}),e.jsx("option",{value:"hours/term",children:"Hrs/Term"}),e.jsx("option",{value:"bookings/week",children:"Bookings/Wk"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:x,className:"w-full bg-indigo-600 text-white py-2.5 rounded-lg font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[e.jsx(U,{size:18})," Add Rule"]})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Applies To Role"}),e.jsxs("select",{className:"w-full md:w-1/2 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:a.role,onChange:r=>m({...a,role:r.target.value}),children:[e.jsx("option",{value:"Student",children:"All Students"}),e.jsx("option",{value:"Senior",children:"Seniors Only"}),e.jsx("option",{value:"Junior",children:"Juniors Only"}),e.jsx("option",{value:"Probation",children:"Probationary"})]})]})]}),e.jsx("div",{className:"space-y-3",children:n.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8 border-2 border-dashed dark:border-gray-700 rounded-xl",children:"No active restrictions. Students have default access."}):n.map(r=>e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700 flex justify-between items-center shadow-sm hover:shadow-md transition",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold dark:text-white text-lg",children:r.resource}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 mt-1",children:[e.jsxs("span",{className:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 px-2 py-0.5 rounded text-xs font-bold border border-indigo-100 dark:border-indigo-800",children:[r.limit," ",r.unit]}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsxs("span",{children:["Applies to: ",e.jsx("strong",{children:r.role})]})]})]}),e.jsx("button",{onClick:()=>t(r.id,r.resource),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",children:e.jsx(O,{size:18})})]},r.id))})]})}function fs({schoolId:c,logAction:l,user:n,userData:g}){const[i,d]=s.useState([]),[a,m]=s.useState(!0),[x,t]=s.useState(!1),[r,u]=s.useState({title:"",message:"",target:"All"});s.useEffect(()=>{},[c]);const f=async()=>{if(!r.title.trim()||!r.message.trim()||!I){(!r.title.trim()||!r.message.trim())&&alert("Title and Message required.");return}},j=async v=>{!confirm("Delete this announcement?")||I};return a?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading News..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-5 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Me,{size:18,className:"text-indigo-600"})," Post New Announcement"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white font-bold",placeholder:"Headline / Title",value:r.title,onChange:v=>u({...r,title:v.target.value})})}),e.jsx("div",{className:"sm:w-1/4",children:e.jsxs("select",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white cursor-pointer",value:r.target,onChange:v=>u({...r,target:v.target.value}),children:[e.jsx("option",{value:"All",children:"Everyone"}),e.jsx("option",{value:"Student",children:"Students Only"}),e.jsx("option",{value:"EDUStaff",children:"Staff Only"})]})})]}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px]",placeholder:"Write your message here...",value:r.message,onChange:v=>u({...r,message:v.target.value})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:f,disabled:x||!r.title,className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 transition",children:x?"Posting...":e.jsxs(e.Fragment,{children:[e.jsx($e,{size:16})," Post Announcement"]})})})]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center text-gray-500 py-10 border-2 border-dashed dark:border-gray-700 rounded-xl",children:"No announcements yet."}):i.map(v=>{var E;return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold dark:text-white",children:v.title}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ve,{size:12})," ",v.authorName]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[v.target==="All"?e.jsx(Z,{size:12}):e.jsx(Q,{size:12}),v.target]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:(E=v.createdAt)!=null&&E.toDate?v.createdAt.toDate().toLocaleDateString():"Just now"})]})]}),e.jsx("button",{onClick:()=>j(v.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition opacity-0 group-hover:opacity-100",title:"Delete Post",children:e.jsx(O,{size:16})})]}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300 text-sm whitespace-pre-wrap leading-relaxed bg-gray-50 dark:bg-black/20 p-3 rounded-lg",children:v.message})]},v.id)})})]})}function ys({schoolId:c,logAction:l}){const[n,g]=s.useState([]),[i,d]=s.useState(!0),[a,m]=s.useState({name:"",address:"",website:"",contactEmail:""});s.useEffect(()=>{},[c]);const x=async()=>{if(!a.name||!I){a.name||alert("Partner Name is required.");return}},t=async(r,u)=>{!confirm(`Remove ${u} from approved partners?`)||I};return i?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Partners..."}):e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-5 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ae,{size:18,className:"text-indigo-600"})," Add Approved Partner"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Studio / Company Name"}),e.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white font-bold",placeholder:"e.g. Sound City Studios",value:a.name,onChange:r=>m({...a,name:r.target.value})})]}),e.jsx("div",{children:e.jsx(ts,{label:"Address",value:a.address,onChange:r=>m({...a,address:r}),onSelect:r=>{m({...a,address:r.formattedAddress||r.displayName})},placeholder:"123 Main St...",showGeolocation:!1})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Contact Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{size:14,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{className:"w-full pl-9 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"manager@studio.com",value:a.contactEmail,onChange:r=>m({...a,contactEmail:r.target.value})})]})]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{onClick:x,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-indigo-700 flex items-center gap-2 shadow-md transition",children:[e.jsx(U,{size:18})," Add Partner"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.length===0?e.jsx("div",{className:"col-span-full text-center py-10 text-gray-500 border-2 border-dashed dark:border-gray-700 rounded-xl",children:"No partners added yet."}):n.map(r=>e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-4 rounded-xl border dark:border-gray-700 shadow-sm hover:shadow-md transition group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold dark:text-white text-lg truncate pr-8",children:r.name}),e.jsx("button",{onClick:()=>t(r.id,r.name),className:"text-gray-400 hover:text-red-500 absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition",children:e.jsx(O,{size:16})})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[r.address&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($,{size:14,className:"mt-0.5 text-indigo-500 shrink-0"}),e.jsx("span",{className:"truncate",children:r.address})]}),r.contactEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:14,className:"text-green-500 shrink-0"}),e.jsx("a",{href:`mailto:${r.contactEmail}`,className:"hover:underline truncate",children:r.contactEmail})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t dark:border-gray-700 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded border border-green-200 dark:border-green-800",children:"Approved"}),r.website&&e.jsx("a",{href:r.website,target:"_blank",rel:"noreferrer",className:"text-gray-400 hover:text-indigo-500",children:e.jsx(Oe,{size:14})})]})]},r.id))})]})}function js({schoolId:c,logAction:l,graderName:n}){const[g,i]=s.useState([]),[d,a]=s.useState(!0),[m,x]=s.useState(""),[t,r]=s.useState(null),[u,f]=s.useState([]),[j,v]=s.useState(!1),[E,C]=s.useState(!1),[h,p]=s.useState({technical:5,softSkills:5,notes:""});s.useEffect(()=>{},[c]),s.useEffect(()=>{},[t,c]);const k=async()=>{},L=g.filter(N=>{var S,P;return((S=N.displayName)==null?void 0:S.toLowerCase().includes(m.toLowerCase()))||((P=N.studentId)==null?void 0:P.toLowerCase().includes(m.toLowerCase()))}),y=N=>N>=8?"text-green-500":N>=5?"text-yellow-500":"text-red-500";return d?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Roster..."}):e.jsxs("div",{className:"flex flex-col md:flex-row h-[600px] border dark:border-gray-700 rounded-xl overflow-hidden bg-white dark:bg-[#2c2e36] animate-in fade-in shadow-sm",children:[e.jsxs("div",{className:"w-full md:w-1/3 border-r dark:border-gray-700 flex flex-col bg-gray-50 dark:bg-[#23262f]",children:[e.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-2.5 text-gray-400",size:16}),e.jsx("input",{className:"w-full pl-9 p-2 text-sm border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"Search Students...",value:m,onChange:N=>x(N.target.value)})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:L.map(N=>e.jsxs("div",{onClick:()=>r(N),className:`p-3 px-4 cursor-pointer flex justify-between items-center transition border-b dark:border-gray-700/50 last:border-0
                                ${(t==null?void 0:t.id)===N.id?"bg-white dark:bg-[#2c2e36] border-l-4 border-l-indigo-600 shadow-sm":"hover:bg-gray-100 dark:hover:bg-gray-700"}
                            `,children:[e.jsxs("div",{children:[e.jsx("div",{className:`font-bold text-sm ${(t==null?void 0:t.id)===N.id?"text-indigo-700 dark:text-white":"dark:text-gray-300"}`,children:N.displayName}),e.jsxs("div",{className:"text-xs text-gray-500",children:[N.cohort||"General"," • ",N.hoursLogged||0," hrs"]})]}),(t==null?void 0:t.id)===N.id&&e.jsx(Ue,{size:16,className:"text-indigo-500"})]},N.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col relative",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-white dark:bg-[#2c2e36]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-700 dark:text-indigo-300 font-bold",children:t.displayName[0]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold dark:text-white",children:t.displayName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",t.studentId||"N/A"]})]})]}),E?e.jsxs("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-white flex items-center gap-2 text-sm font-bold",children:[e.jsx(Fe,{size:16})," View History"]}):e.jsxs("button",{onClick:()=>C(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-indigo-700 flex items-center gap-2",children:[e.jsx(U,{size:16})," New Evaluation"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-white dark:bg-[#2c2e36]",children:[E&&e.jsxs("div",{className:"max-w-lg mx-auto space-y-6 animate-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg border border-indigo-100 dark:border-indigo-800/50 mb-6",children:[e.jsx("h4",{className:"font-bold text-indigo-800 dark:text-indigo-300 mb-1",children:"New Assessment"}),e.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:["Rating performance for ",new Date().toLocaleDateString(),"."]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"font-bold text-sm dark:text-gray-300",children:"Technical Proficiency"}),e.jsxs("span",{className:`font-bold ${y(h.technical)}`,children:[h.technical,"/10"]})]}),e.jsx("input",{type:"range",min:"1",max:"10",step:"1",className:"w-full accent-indigo-600 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",value:h.technical,onChange:N=>p({...h,technical:parseInt(N.target.value)})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Knowledge of equipment, software, and signal flow."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"font-bold text-sm dark:text-gray-300",children:"Soft Skills / Professionalism"}),e.jsxs("span",{className:`font-bold ${y(h.softSkills)}`,children:[h.softSkills,"/10"]})]}),e.jsx("input",{type:"range",min:"1",max:"10",step:"1",className:"w-full accent-indigo-600 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",value:h.softSkills,onChange:N=>p({...h,softSkills:parseInt(N.target.value)})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Punctuality, attitude, communication, and client handling."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-sm dark:text-gray-300 block mb-2",children:"Instructor Notes"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px]",placeholder:"Detailed feedback...",value:h.notes,onChange:N=>p({...h,notes:N.target.value})})]}),e.jsxs("button",{onClick:k,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(ke,{size:18})," Submit Evaluation"]})]})]}),!E&&e.jsx("div",{className:"space-y-4",children:j?e.jsx("p",{className:"text-center text-gray-500",children:"Loading history..."}):u.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed dark:border-gray-700 rounded-xl",children:[e.jsx(V,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No evaluations recorded yet."}),e.jsx("button",{onClick:()=>C(!0),className:"text-indigo-500 font-bold text-sm mt-2 hover:underline",children:"Start first evaluation"})]}):u.map(N=>{var S;return e.jsxs("div",{className:"border dark:border-gray-700 rounded-xl p-4 hover:shadow-md transition bg-gray-50 dark:bg-[#23262f]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:(S=N.date)!=null&&S.toDate?N.date.toDate().toLocaleDateString():"Unknown Date"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-medium dark:text-gray-200",children:N.evaluator})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"text-center px-3 py-1 bg-white dark:bg-black/20 rounded border dark:border-gray-600",children:[e.jsx("div",{className:`font-bold ${y(N.technical)}`,children:N.technical}),e.jsx("div",{className:"text-[9px] text-gray-400 uppercase",children:"Tech"})]}),e.jsxs("div",{className:"text-center px-3 py-1 bg-white dark:bg-black/20 rounded border dark:border-gray-600",children:[e.jsx("div",{className:`font-bold ${y(N.softSkills)}`,children:N.softSkills}),e.jsx("div",{className:"text-[9px] text-gray-400 uppercase",children:"Soft"})]})]})]}),N.notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 border-t dark:border-gray-700 pt-3 mt-2",children:['"',N.notes,'"']})]},N.id)})})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(V,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{children:"Select a student to view history or submit grades."})]})})]})}function Ns({schoolId:c,logAction:l}){const[n,g]=s.useState(""),[i,d]=s.useState(!1),a=async()=>{if(!n.trim()||!I){n.trim()||alert("Please paste CSV data first.");return}},m=async()=>{prompt("Type 'ROLLOVER' to confirm. This will archive current internship logs for all students.")==="ROLLOVER"&&(alert("Rollover process initiated. (This is a placeholder for the Cloud Function trigger)."),await l("Term Rollover","Initiated term archival"))};return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(qe,{size:18,className:"text-indigo-600"})," Batch Import Students"]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg mb-4 border border-blue-100 dark:border-blue-800 text-xs text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"Format:"})," ",e.jsx("code",{children:"email, first_name, last_name, cohort"}),e.jsx("br",{}),"Example: ",e.jsx("code",{children:"student@test.edu, John, Doe, Fall 2024"})]}),e.jsx("textarea",{className:"w-full h-40 p-3 text-sm border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white font-mono resize-y focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"Paste CSV data here...",value:n,onChange:x=>g(x.target.value),disabled:i}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:a,disabled:i||!n,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 transition",children:i?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(we,{size:16})," Import Students"]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(De,{size:18,className:"text-orange-500"})," Term Management"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm dark:text-gray-200 mb-1",children:"End of Term Rollover"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Use this tool at the end of a semester or cohort period. It will:"}),e.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-500 mt-2 space-y-1 ml-1",children:[e.jsx("li",{children:"Archive all active internship logs."}),e.jsx("li",{children:'Reset "Current Hours" counters (preserving Total Lifetime Hours).'}),e.jsx("li",{children:'Mark graduating students as "Alumni" (optional).'})]})]}),e.jsx("div",{className:"w-full md:w-auto",children:e.jsxs("button",{onClick:m,className:"w-full md:w-auto bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg font-bold text-xs flex items-center justify-center gap-2 border border-red-200 dark:border-red-800 transition",children:[e.jsx(Be,{size:16})," Execute Rollover"]})})]})]})]})}function vs({schoolId:c}){const[l,n]=s.useState([]),[g,i]=s.useState(!0),[d,a]=s.useState(50);s.useEffect(()=>{},[c,d]);const m=x=>x.includes("Delete")||x.includes("Remove")?"text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400":x.includes("Create")||x.includes("Add")?"text-green-600 bg-green-50 dark:bg-green-900/20 dark:text-green-400":x.includes("Update")||x.includes("Edit")?"text-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300";return g&&l.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Audit Trail..."}):e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-3 rounded-lg border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(pe,{size:16}),e.jsxs("span",{children:["Showing last ",e.jsx("strong",{children:l.length})," actions"]})]}),e.jsxs("button",{onClick:()=>le(l,"audit_logs"),className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-[#1f2128] border dark:border-gray-600 rounded-md text-xs font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(we,{size:14})," Export Log"]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 shadow-sm",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-500 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Timestamp"}),e.jsx("th",{className:"p-3",children:"Admin / Staff"}),e.jsx("th",{className:"p-3",children:"Action Type"}),e.jsx("th",{className:"p-3",children:"Details"})]})}),e.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-8 text-center text-gray-500",children:"No audit history found."})}):l.map(x=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[e.jsxs("td",{className:"p-3 text-gray-500 whitespace-nowrap flex items-center gap-2",children:[e.jsx(K,{size:14,className:"opacity-50"}),(t=x.timestamp)!=null&&t.toDate?x.timestamp.toDate().toLocaleString():"N/A"]}),e.jsx("td",{className:"p-3 font-bold dark:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:14,className:"text-indigo-500"}),x.adminName||"System"]})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${m(x.action)}`,children:x.action})}),e.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-300 font-mono text-xs",children:x.details})]},x.id)})})]})}),l.length>=d&&e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{onClick:()=>a(x=>x+50),className:"text-xs font-bold text-indigo-600 hover:underline",children:"Load Older Logs"})})]})}function ks({schoolId:c,initialData:l,logAction:n,refreshMeta:g}){const[i,d]=s.useState(l||{}),{uploading:a}=es();s.useEffect(()=>{l&&d(l)},[l]);const m=async()=>{},x=async r=>{r.target.files[0]},t=r=>{d(u=>({...u,[r]:!u[r]}))};return!i.name&&!l?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Loading Settings..."}):e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("section",{className:"flex flex-col md:flex-row gap-6 items-start",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"h-32 w-32 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 dark:border-gray-600",children:[i.logoURL?e.jsx("img",{src:i.logoURL,className:"h-full w-full object-contain",alt:"Logo"}):e.jsx(D,{size:40,className:"text-gray-400"}),a&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center text-white text-xs",children:"Uploading..."})]}),e.jsxs("label",{className:"absolute bottom-2 right-2 bg-indigo-600 p-2 rounded-full text-white cursor-pointer shadow-lg hover:bg-indigo-700 transition",children:[e.jsx(He,{size:14}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:x,disabled:a})]})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"School Name"}),e.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.name||"",onChange:r=>d({...i,name:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",className:"h-10 w-10 p-0 border-0 rounded cursor-pointer",value:i.primaryColor||"#4f46e5",onChange:r=>d({...i,primaryColor:r.target.value})}),e.jsx("input",{className:"flex-1 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white font-mono",value:i.primaryColor||"",onChange:r=>d({...i,primaryColor:r.target.value})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{className:"w-full pl-10 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.address||"",onChange:r=>d({...i,address:r.target.value})})]})]})]})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{className:"w-full pl-10 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.website||"",onChange:r=>d({...i,website:r.target.value}),placeholder:"https://"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Contact Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(je,{size:16,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{className:"w-full pl-10 p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.contactEmail||"",onChange:r=>d({...i,contactEmail:r.target.value}),placeholder:"admin@school.edu"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white border-b dark:border-gray-700 pb-2 mb-4 flex items-center gap-2",children:[e.jsx(V,{size:18,className:"text-indigo-600"})," Academic Structure"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cohort Mode"}),e.jsxs("select",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.cohortMode||"Semester",onChange:r=>d({...i,cohortMode:r.target.value}),children:[e.jsx("option",{value:"Semester",children:"Semester Based"}),e.jsx("option",{value:"Trimester",children:"Trimester"}),e.jsx("option",{value:"Monthly",children:"Monthly"}),e.jsx("option",{value:"Rolling",children:"Rolling"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Grading Scale"}),e.jsxs("select",{className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",value:i.gradingScale||"1-10",onChange:r=>d({...i,gradingScale:r.target.value}),children:[e.jsx("option",{value:"1-10",children:"Numeric (1-10)"}),e.jsx("option",{value:"Pass/Fail",children:"Pass/Fail"}),e.jsx("option",{value:"Letter",children:"Letter Grades"})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white border-b dark:border-gray-700 pb-2 mb-4 flex items-center gap-2",children:[e.jsx(Ge,{size:18,className:"text-indigo-600"})," Operational Rules"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm dark:text-white",children:"Strict Geofencing"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Require GPS location match for clock-in"})]}),e.jsx("button",{onClick:()=>t("geofencing"),children:i.geofencing?e.jsx(ge,{size:24,className:"text-indigo-600"}):e.jsx(me,{size:24,className:"text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm dark:text-white",children:"Supervisor Approval"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Require partner studio sign-off on hours"})]}),e.jsx("button",{onClick:()=>t("requireApproval"),children:i.requireApproval?e.jsx(ge,{size:24,className:"text-indigo-600"}):e.jsx(me,{size:24,className:"text-gray-400"})})]})]})]}),e.jsx("div",{className:"pt-4 border-t dark:border-gray-700",children:e.jsxs("button",{onClick:m,className:"w-full sm:w-auto bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-indigo-700 flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(ke,{size:18})," Save Configuration"]})})]})}function Ce({user:c,userData:l,allowedTabs:n,staffTitle:g,currentView:i}){let d;try{d=ee()}catch{d=null}const a=(d==null?void 0:d.user)||c,m=(d==null?void 0:d.userData)||l,{schoolId:x}=X(),t=i?i.replace("edu-",""):n?n[0]:"overview",[r,u]=s.useState(x||null),[f,j]=s.useState(null),[v,E]=s.useState([]),[C,h]=s.useState(!1),[p,k]=s.useState({name:"",address:"",primaryColor:"#4f46e5"}),L=rs(m);s.useEffect(()=>{},[L,r,x]),s.useEffect(()=>{},[r]);const y=async(S,P)=>{},N=async()=>{!p.name||I};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[e.jsx("div",{className:"h-24 w-24 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center overflow-hidden border-2 border-gray-200 dark:border-gray-600 shrink-0 p-2 z-10",children:f!=null&&f.logoURL?e.jsx("img",{src:f.logoURL,className:"h-full w-full object-contain",alt:"School Logo"}):e.jsx(D,{size:40,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left z-10",children:[e.jsxs("h1",{className:"text-3xl font-extrabold dark:text-white tracking-tight flex items-center justify-center md:justify-start gap-3",children:[(f==null?void 0:f.name)||"Select School",L&&!g&&e.jsxs("div",{className:"relative group",children:[e.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:r||"",onChange:S=>u(S.target.value),children:v.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 border-none rounded-lg text-sm font-bold p-1 px-2 flex items-center gap-1 pointer-events-none group-hover:bg-gray-200 dark:group-hover:bg-gray-600 transition",children:[e.jsx("span",{children:"Switch"})," ",e.jsx(Q,{size:10})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 text-sm font-medium text-gray-500 dark:text-gray-400 mt-1",children:[g?e.jsxs("span",{className:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300 px-2 py-0.5 rounded text-xs uppercase font-bold tracking-wide",children:[g," Dashboard"]}):e.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 px-2 py-0.5 rounded text-xs uppercase font-bold tracking-wide",children:"Global Admin Mode"}),(f==null?void 0:f.address)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{size:12})," ",f.address]})]})]})]}),L&&e.jsx("div",{className:"z-10",children:e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-indigo-700 transition shadow-md",children:[e.jsx(U,{size:16})," New School"]})}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"})]}),e.jsx("div",{className:"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 min-h-[400px] p-4",children:r?e.jsxs(e.Fragment,{children:[t==="overview"&&e.jsx(is,{schoolId:r,schoolData:f}),t==="roster"&&e.jsx(os,{schoolId:r,logAction:y}),t==="hours"&&e.jsx(cs,{schoolId:r}),t==="courses"&&e.jsx(ms,{schoolId:r,logAction:y}),t==="learning-paths"&&e.jsx(hs,{schoolId:r,logAction:y}),t==="instructors"&&e.jsx(us,{schoolId:r,logAction:y}),t==="roles"&&e.jsx(bs,{schoolId:r,logAction:y}),t==="resources"&&e.jsx(ps,{schoolId:r,logAction:y}),t==="news"&&e.jsx(fs,{schoolId:r,logAction:y,user:a,userData:m}),t==="partners"&&e.jsx(ys,{schoolId:r,logAction:y}),t==="evaluations"&&e.jsx(js,{schoolId:r,logAction:y,graderName:m.displayName}),t==="cohorts"&&e.jsx(Ns,{schoolId:r,logAction:y}),t==="audit"&&e.jsx(vs,{schoolId:r}),t==="settings"&&e.jsx(ks,{schoolId:r,initialData:f,logAction:y,refreshMeta:S=>j(P=>({...P,...S}))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-gray-500",children:[e.jsx(D,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{children:"Please select or create a school to manage."})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-md rounded-xl p-6 space-y-4 animate-in zoom-in-95",children:[e.jsx("h3",{className:"font-bold text-xl dark:text-white",children:"Create School"}),e.jsx("input",{className:"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"School Name",value:p.name,onChange:S=>k({...p,name:S.target.value})}),e.jsx("button",{onClick:N,className:"w-full bg-indigo-600 text-white py-2 rounded font-bold hover:bg-indigo-700",children:"Create"}),e.jsx("button",{onClick:()=>h(!1),className:"w-full text-gray-500 text-sm hover:underline",children:"Cancel"})]})})]})}const Rs=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));function ws({user:c,userData:l,currentView:n}){let g;try{g=ee()}catch{g=null}const i=(g==null?void 0:g.user)||c,d=(g==null?void 0:g.userData)||l,{myPermissions:a,staffProfile:m}=X(),x={manage_roster:"roster",manage_enrollment:"cohorts",approve_hours:"hours",manage_partners:"partners",grade_students:"evaluations",post_announcements:"news",manage_resources:"resources",manage_staff:"instructors",view_audit:"audit",edit_settings:"settings"},t=a.includes("ALL")?Object.values(x):a.map(r=>x[r]).filter(Boolean);return t.length===0&&!a.includes("ALL")?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-gray-500",children:[e.jsx(Ne,{size:48,className:"mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-bold",children:"Access Restricted"}),e.jsx("p",{children:"You are listed as staff but have no assigned permissions."})]}):e.jsx(Ce,{user:i,userData:d,allowedTabs:t,staffTitle:m==null?void 0:m.roleName,currentView:n})}const Ts=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"}));export{ts as A,Is as E,zs as S,Es as _,X as a,Ps as b,Rs as c,Ts as d,Ls as f,es as u};
