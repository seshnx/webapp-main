import{r as t,j as e,U as le,b$ as de,bM as $,aa as ie,L as b,af as I,ae as V,ag as q,ap as ne,c0 as F,c1 as oe,Z as ce,bT as xe,a0 as ge,D as be,bG as me,$ as he,an as pe,X as G,x as ue}from"./vendor-Ds9T-nZn.js";import{s as O}from"./chat-CYdsjRjG.js";import{ACCOUNT_TYPES as fe}from"./config-yUl3KxdD.js";import"./vendor-framer-B02WB5ws.js";const h=["Student","EDUStaff","Intern","EDUAdmin","GAdmin"];function ze({user:W,userData:r,onUpdate:p,onRoleSwitch:ye}){var E,A,R,T,L,M,U;const[d,u]=t.useState((r==null?void 0:r.settings)||{notifications:{email:!0,push:!0,marketing:!1},privacy:{publicProfile:!0,showLocation:!0,hideProfile:!1},theme:"system",social:{mutedUsers:[],blockedUsers:[]},messenger:{mutedThreads:[],blockedContacts:[]},preferences:{seeAllProfiles:!1}}),[n,Y]=t.useState((r==null?void 0:r.accountTypes)||[]),[B,H]=t.useState((r==null?void 0:r.preferredRole)||n[0]),[X,f]=t.useState((r==null?void 0:r.activeProfileRole)||n[0]),[y,je]=t.useState(!1),[j,ke]=t.useState(!1),[k,we]=t.useState(!1),[w,N]=t.useState(""),[Z,v]=t.useState(!1),[_,C]=t.useState(!1),[m,K]=t.useState(null),[i,c]=t.useState({newEmail:"",newPassword:"",currentPassword:""}),[P,Ne]=t.useState(!1);t.useEffect(()=>{r!=null&&r.activeProfileRole&&f(r.activeProfileRole)},[r==null?void 0:r.activeProfileRole]);const o=(s,a)=>{u(l=>{var g;const x={...l,[s]:{...l[s],[a]:!((g=l[s])!=null&&g[a])}};return p(x),x})},J=s=>{u(a=>{const l={...a,theme:s};return p(l),l})},Q=async()=>{if(n.length===0||!O)return alert("You must have at least one role.")},D=s=>{Y(a=>a.includes(s)?a.filter(l=>l!==s):[...a,s])},S=s=>{K(s),c({newEmail:"",newPassword:"",currentPassword:""}),C(!0)},ee=async()=>{if(!i.currentPassword||!O){i.currentPassword||alert("Current password is required to verify your identity.");return}},se=async()=>{{alert("Unable to export data. Please ensure you're logged in.");return}},re=async()=>{},z=({title:s,items:a,type:l,icon:x})=>e.jsxs("div",{className:"mt-4 border-t dark:border-gray-700 pt-4",children:[e.jsxs("h5",{className:"text-sm font-bold dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(x,{size:14})," ",s]}),a&&a.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((g,te)=>e.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded flex items-center gap-1 text-gray-600 dark:text-gray-300",children:[g.substring(0,8),"... ",e.jsx(G,{size:10,className:"cursor-pointer hover:text-red-500"})]},te))}):e.jsxs("p",{className:"text-xs text-gray-400 italic",children:["No active ",l,"."]})]}),ae=fe.filter(s=>!h.includes(s));return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300 pb-20",children:[e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-purple-500"})," Roles & Workflow"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mb-2",children:e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block",children:"Active Account Types"})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ae.map(s=>e.jsx("button",{onClick:()=>D(s),className:`px-3 py-1.5 rounded-full text-xs font-bold transition border ${n.includes(s)?"bg-purple-100 border-purple-200 text-purple-700 dark:bg-purple-900/30 dark:border-purple-700 dark:text-purple-300":"bg-gray-50 border-gray-200 text-gray-500 dark:bg-transparent dark:border-gray-600 dark:text-gray-400"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block flex items-center gap-1",children:[e.jsx(de,{size:12})," Preferred Profile"]}),e.jsx("select",{className:"w-full p-2 text-sm border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:B,onChange:s=>H(s.target.value),children:n.filter(s=>!h.includes(s)).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block flex items-center gap-1",children:[e.jsx($,{size:12})," Active Workflow Context"]}),e.jsx("select",{className:"w-full p-2 text-sm border rounded-lg dark:bg-[#1f2128] dark:border-gray-600 dark:text-white",value:X,onChange:s=>f(s.target.value),children:n.filter(s=>!h.includes(s)).map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 p-2 rounded transition border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:16,className:"text-brand-blue"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"See All (Unfiltered View)"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Show all content types regardless of active workflow."})]})]}),e.jsxs("div",{className:`w-10 h-5 rounded-full p-0.5 flex transition-colors ${(E=d.preferences)!=null&&E.seeAllProfiles?"bg-brand-blue justify-end":"bg-gray-300 dark:bg-gray-600 justify-start"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:((A=d.preferences)==null?void 0:A.seeAllProfiles)||!1,onChange:()=>o("preferences","seeAllProfiles")}),e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:e.jsxs("button",{onClick:Q,disabled:y,className:"w-full bg-purple-600 text-white px-4 py-2.5 rounded-lg font-bold hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2 shadow-md transition",children:[y?e.jsx(b,{className:"animate-spin",size:16}):e.jsx($,{size:16})," Save Workflow Settings"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-blue-500"})," Account Security"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-full text-blue-600 dark:text-blue-400",children:e.jsx(V,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold dark:text-white",children:"Email Address"}),e.jsx("div",{className:"text-xs text-gray-500",children:W.email})]})]}),e.jsx("button",{onClick:()=>S("email"),className:"text-xs font-bold bg-white dark:bg-gray-700 border dark:border-gray-600 px-3 py-1.5 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition",children:"Change Email"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-full text-blue-600 dark:text-blue-400",children:e.jsx(q,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold dark:text-white",children:"Password"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Last changed: Never (or unknown)"})]})]}),e.jsx("button",{onClick:()=>S("password"),className:"text-xs font-bold bg-white dark:bg-gray-700 border dark:border-gray-600 px-3 py-1.5 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition",children:"Change Password"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-gray-500"})," Content & Safety"]}),e.jsx(z,{title:"Blocked Users",items:(R=d.social)==null?void 0:R.blockedUsers,type:"blocks",icon:F}),e.jsx(z,{title:"Muted Threads",items:(T=d.messenger)==null?void 0:T.mutedThreads,type:"mutes",icon:oe})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ce,{size:18,className:"text-brand-blue"})," Notification Preferences"]}),e.jsx("div",{className:"space-y-3",children:Object.entries({email:"Email Notifications",push:"Push Notifications",marketing:"Marketing & Updates"}).map(([s,a])=>{var l;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm dark:text-gray-300",children:a}),e.jsx("div",{onClick:()=>o("notifications",s),className:`w-10 h-5 rounded-full p-0.5 flex cursor-pointer transition-colors ${(l=d.notifications)!=null&&l[s]?"bg-brand-blue justify-end":"bg-gray-300 dark:bg-gray-600 justify-start"}`,children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]},s)})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-green-500"})," Privacy & Visibility"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Public Profile Visibility"})]}),e.jsx("div",{onClick:()=>o("privacy","publicProfile"),className:`w-10 h-5 rounded-full p-0.5 flex cursor-pointer transition-colors ${(L=d.privacy)!=null&&L.publicProfile?"bg-green-500 justify-end":"bg-gray-300 dark:bg-gray-600 justify-start"}`,children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Show Location on Map"})]}),e.jsx("div",{onClick:()=>o("privacy","showLocation"),className:`w-10 h-5 rounded-full p-0.5 flex cursor-pointer transition-colors ${(M=d.privacy)!=null&&M.showLocation?"bg-green-500 justify-end":"bg-gray-300 dark:bg-gray-600 justify-start"}`,children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm dark:text-gray-300",children:"Hide Profile Completely"})]}),e.jsx("div",{onClick:()=>o("privacy","hideProfile"),className:`w-10 h-5 rounded-full p-0.5 flex cursor-pointer transition-colors ${(U=d.privacy)!=null&&U.hideProfile?"bg-brand-blue justify-end":"bg-gray-300 dark:bg-gray-600 justify-start"}`,children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]}),e.jsx("div",{className:"pt-4 mt-2 border-t dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold dark:text-white",children:"Your Data"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Download a copy of your personal data (GDPR/CCPA)."})]}),e.jsxs("button",{onClick:se,disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-xs font-bold text-gray-700 dark:text-gray-200 transition",children:[j?e.jsx(b,{size:14,className:"animate-spin"}):e.jsx(be,{size:14}),"Download Data"]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(me,{size:18,className:"text-purple-500"})," Appearance"]}),e.jsx("div",{className:"flex bg-gray-100 dark:bg-black/20 p-1 rounded-lg",children:["light","dark","system"].map(s=>e.jsx("button",{onClick:()=>J(s),className:`flex-1 py-2 text-xs font-bold rounded-md capitalize transition-all ${d.theme===s?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:s},s))})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-6 rounded-xl border border-red-100 dark:border-red-800/30 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-lg text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(he,{size:18})," Danger Zone"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"Deleting your account is permanent. This action will trigger the data cleanup process, removing your profile, posts, and messages."}),Z?e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] p-4 rounded-xl border border-red-200 dark:border-red-900 shadow-lg animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("h4",{className:"font-bold text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(pe,{size:16})," Confirm Deletion"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:["Type ",e.jsx("strong",{children:"DELETE"})," below to confirm. This cannot be undone."]}),e.jsx("input",{type:"text",className:"w-full p-2 border border-red-300 dark:border-red-900 rounded mb-3 text-sm focus:ring-2 focus:ring-red-500 outline-none dark:bg-black/20 dark:text-white",placeholder:"Type DELETE",value:w,onChange:s=>N(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:re,disabled:w!=="DELETE"||k,className:"flex-1 bg-red-600 text-white py-2 rounded font-bold text-xs hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k?e.jsx(b,{className:"animate-spin",size:14}):"Confirm Delete"}),e.jsx("button",{onClick:()=>{v(!1),N("")},className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 rounded font-bold text-xs hover:opacity-80",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>v(!0),className:"bg-red-100 hover:bg-red-200 dark:bg-red-900/40 dark:hover:bg-red-900/60 text-red-700 dark:text-red-300 px-4 py-2 rounded-lg text-sm font-bold transition",children:"Delete Account"})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-md rounded-xl p-6 shadow-2xl animate-in zoom-in-95 border dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold dark:text-white flex items-center gap-2",children:[m==="email"?e.jsx(V,{size:20}):e.jsx(q,{size:20}),"Update ",m==="email"?"Email":"Password"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-white",children:e.jsx(G,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"Current Password (Required)"}),e.jsx("input",{type:"password",className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"Verify your identity",value:i.currentPassword,onChange:s=>c({...i,currentPassword:s.target.value})})]}),m==="email"?e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"New Email Address"}),e.jsx("input",{type:"email",className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"name@example.com",value:i.newEmail,onChange:s=>c({...i,newEmail:s.target.value})})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-1 block",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white",placeholder:"Min 6 characters",value:i.newPassword,onChange:s=>c({...i,newPassword:s.target.value})})]}),e.jsxs("button",{onClick:ee,disabled:P,className:"w-full bg-blue-600 text-white py-2.5 rounded-lg font-bold hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg mt-2",children:[P?e.jsx(b,{className:"animate-spin",size:18}):e.jsx(ue,{size:18}),"Confirm Update"]})]})]})})]})}export{ze as default};
