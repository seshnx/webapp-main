import{r as d,j as e,cf as Q,X as A,U as P,cl as M,S as V,L as B,ao as H,ap as J,c5 as X,a1 as K,b as W,c1 as Z,ag as ee,Q as ae,Y as te,y as se}from"./vendor-Dl7DtIXW.js";import{u as re}from"./useVercelUpload-OMd9iZ6b.js";import{F as G,u as le,a as oe}from"./FollowButton-CXM6sIaI.js";import{g as ne,c as D,d as ie,e as de,u as ce}from"./index-ScyYHoNo.js";import{U as xe}from"./chat-BYF7Vx2D.js";import{m as Y,A as me}from"./vendor-framer-CUELlS5e.js";import"./edu-BMUxkX2v.js";import"./config-DGZTEYpI.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new s.Error().stack;l&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[l]="81e4e72a-c292-4add-bc7e-f3dec2a6a430",s._sentryDebugIdIdentifier="sentry-dbid-81e4e72a-c292-4add-bc7e-f3dec2a6a430")})()}catch{}function ge({rating:s=0,setRating:l,interactive:c=!1,size:i=16}){const[m,t]=d.useState(0);return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(o=>e.jsx(Q,{size:i,className:`transition-colors ${c?"cursor-pointer":""} ${(c&&m||s)>=o?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`,fill:(c&&m||s)>=o?"currentColor":"none",onMouseEnter:()=>c&&t(o),onMouseLeave:()=>c&&t(0),onClick:()=>c&&l(o)},o))})}const b={FOLLOWERS:"followers",FOLLOWING:"following"};function be({userId:s,userName:l,initialTab:c=b.FOLLOWERS,currentUser:i,currentUserData:m,isFollowing:t,toggleFollow:o,onClose:E,openPublicProfile:F}){const[g,C]=d.useState(c),[p,O]=d.useState([]),[$,y]=d.useState([]),[U,j]=d.useState(!0),[f,w]=d.useState("");d.useEffect(()=>{if(!s)return;j(!0);const r=async()=>{try{const x=await ne(s);if(x.length===0){O([]),j(!1);return}const v=await D(x),u={};v.forEach(n=>{u[n.user_id||n.id]=n});const k=x.map(n=>{const a=u[n];return{userId:n,displayName:(a==null?void 0:a.display_name)||`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim()||"User",photoURL:(a==null?void 0:a.avatar_url)||(a==null?void 0:a.photo_url),role:(a==null?void 0:a.active_role)||(a==null?void 0:a.role),timestamp:(a==null?void 0:a.created_at)||new Date().toISOString()}});O(k),j(!1)}catch(x){console.error("Followers fetch error:",x),j(!1)}};r();const h=setInterval(()=>{r()},3e4);return()=>{clearInterval(h)}},[s]),d.useEffect(()=>{if(!s)return;const r=async()=>{try{const x=await ie(s);if(x.length===0){y([]);return}const v=await D(x),u={};v.forEach(n=>{u[n.user_id||n.id]=n});const k=x.map(n=>{const a=u[n];return{userId:n,displayName:(a==null?void 0:a.display_name)||`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim()||"User",photoURL:(a==null?void 0:a.avatar_url)||(a==null?void 0:a.photo_url),role:(a==null?void 0:a.active_role)||(a==null?void 0:a.role),timestamp:(a==null?void 0:a.created_at)||new Date().toISOString()}});y(k)}catch(x){console.error("Following fetch error:",x)}};r();const h=setInterval(()=>{r()},3e4);return()=>{clearInterval(h)}},[s]);const _=g===b.FOLLOWERS?p:$,z=f.trim()?_.filter(r=>{var h;return(h=r.displayName)==null?void 0:h.toLowerCase().includes(f.toLowerCase())}):_,R=(i==null?void 0:i.id)||(i==null?void 0:i.uid),N=s===R,T=r=>{F&&(F(r),E())},I=async r=>{o&&await o(r.userId,{displayName:r.displayName,photoURL:r.photoURL,role:r.role})};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4",children:e.jsxs(Y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:l||"User"}),e.jsx("button",{onClick:E,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:e.jsx(A,{size:20})})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>C(b.FOLLOWERS),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${g===b.FOLLOWERS?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(P,{size:16}),e.jsx("span",{children:"Followers"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${g===b.FOLLOWERS?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:p.length})]}),e.jsxs("button",{onClick:()=>C(b.FOLLOWING),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${g===b.FOLLOWING?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(M,{size:16}),e.jsx("span",{children:"Following"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${g===b.FOLLOWING?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:$.length})]})]})]}),_.length>5&&e.jsx("div",{className:"px-4 py-3 border-b dark:border-gray-700 shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:f,onChange:r=>w(r.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white transition"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:U?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(B,{className:"animate-spin text-brand-blue mb-2",size:28}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."})]}):z.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:g===b.FOLLOWERS?e.jsx(P,{size:24,className:"text-gray-400"}):e.jsx(M,{size:24,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-center",children:f?`No results for "${f}"`:g===b.FOLLOWERS?N?"You don't have any followers yet":"No followers yet":N?"You're not following anyone yet":"Not following anyone yet"}),!f&&g===b.FOLLOWING&&N&&e.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Find artists and creators to follow in the feed!"})]}):e.jsx(me,{mode:"popLayout",children:z.map((r,h)=>e.jsx(he,{user:r,index:h,currentUserId:R,isFollowingUser:t==null?void 0:t(r.userId),onToggleFollow:()=>I(r),onUserClick:()=>T(r.userId)},r.userId))})})]})})}function he({user:s,index:l,currentUserId:c,isFollowingUser:i,onToggleFollow:m,onUserClick:t}){const o=s.userId===c;return e.jsxs(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-10},transition:{delay:l*.03},className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition border-b dark:border-gray-700/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:t,children:[e.jsx(xe,{src:s.photoURL,name:s.displayName,size:"md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm dark:text-white truncate hover:text-brand-blue transition",children:s.displayName}),s.role&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.role})]})]}),!o&&e.jsx(G,{isFollowing:i,onToggle:m,size:"sm",variant:"outline"}),o&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full",children:"You"})]})}function fe({followersCount:s=0,followingCount:l=0,onFollowersClick:c,onFollowingClick:i,size:m="md"}){const t={sm:"text-xs gap-3",md:"text-sm gap-4",lg:"text-base gap-5"},o={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`flex items-center ${t[m]}`,children:[e.jsxs("button",{onClick:c,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${o[m]}`,children:s.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:s===1?"Follower":"Followers"})]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"â€¢"}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${o[m]}`,children:l.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:"Following"})]})]})}function Le({userId:s,currentUser:l,currentUserData:c,onClose:i,onMessage:m}){var x,v,u,k,n;const[t,o]=d.useState(null),[E,F]=d.useState(!0),[g,C]=d.useState(null),[p,O]=d.useState(!1),[$,y]=d.useState(!1),[U,j]=d.useState("followers"),f=(l==null?void 0:l.id)||(l==null?void 0:l.uid),w=f===s,{uploadImage:_}=re(),{isFollowing:z,toggleFollow:R}=le(f),{stats:N}=oe(s),T=(a="followers")=>{j(a),y(!0)},I=async()=>{try{const a=await de(s);if(!a){C("Profile not found or is private."),F(!1);return}o({...a,firstName:a.first_name,lastName:a.last_name,displayName:a.display_name||a.effective_display_name,photoURL:a.avatar_url||a.photo_url,bannerURL:a.banner_url,hourlyRate:a.hourly_rate,zip:a.zip})}catch(a){console.error("Failed to load profile:",a),C("Unable to load profile. Please try again later.")}finally{F(!1)}};d.useEffect(()=>{s&&I()},[s]);const r=async a=>{const L=a.target.files[0];if(!(!L||!w)){O(!0);try{const S=await _(L,"profile-banners");S&&(await ce(s,{banner_url:S}),o(q=>({...q,bannerURL:S,banner_url:S})))}catch(S){console.error("Banner upload failed:",S),alert("Failed to upload banner.")}O(!1)}};if(!s)return null;const h=()=>e.jsxs("div",{className:"p-8 flex flex-col items-center space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-40 w-full bg-gray-200 dark:bg-gray-700 rounded-xl"}),e.jsx("div",{className:"h-28 w-28 bg-gray-300 dark:bg-gray-600 rounded-full -mt-20 border-4 border-white dark:border-dark-card"}),e.jsx("div",{className:"h-6 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 dark:bg-gray-700 rounded"})]});return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-gray-700",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-30 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full transition-colors backdrop-blur-md",children:e.jsx(A,{size:20})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:E?e.jsx(h,{}):g||!t?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 text-gray-500",children:[e.jsx(H,{size:48,className:"text-yellow-500 mb-4 opacity-80"}),e.jsx("h3",{className:"text-xl font-bold dark:text-gray-200 mb-2",children:"Profile Unavailable"}),e.jsx("p",{className:"text-sm text-center max-w-xs",children:g||"This user's profile information could not be retrieved."}),e.jsx("button",{onClick:i,className:"mt-6 px-6 py-2 bg-gray-200 dark:bg-gray-700 rounded-full font-bold text-sm hover:bg-gray-300 transition",children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-48 relative bg-gray-800 group",children:[t.bannerURL?e.jsx("img",{src:t.bannerURL,alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-brand-blue to-purple-600",children:e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),w&&e.jsxs("label",{className:"absolute top-4 left-4 cursor-pointer bg-black/40 hover:bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-bold backdrop-blur-md transition-all flex items-center gap-2 border border-white/10",children:[p?e.jsx(B,{size:14,className:"animate-spin"}):e.jsx(J,{size:14}),p?"Uploading...":"Edit Cover",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:r,disabled:p})]}),e.jsxs("div",{className:"absolute bottom-4 right-6 flex gap-3 opacity-90",children:[t.rate>0&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(X,{size:12})," $",t.rate,"/hr"]}),t.city&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(K,{size:12})," ",t.city,", ",t.state]})]})]}),e.jsxs("div",{className:"px-8 pb-8 relative",children:[e.jsxs("div",{className:"flex justify-between items-end -mt-14 mb-6",children:[e.jsx("div",{className:"relative z-10 group",children:e.jsx("div",{className:"h-32 w-32 rounded-full border-[5px] border-white dark:border-[#1f2128] bg-gray-200 dark:bg-gray-700 overflow-hidden shadow-xl",children:t.photoURL?e.jsx("img",{src:t.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400",children:e.jsx(W,{size:48})})})}),l&&!w&&e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(G,{isFollowing:z(s),onToggle:()=>{var a;return R(s,{displayName:`${t.firstName||""} ${t.lastName||""}`.trim(),photoURL:t.photoURL,role:((a=t.accountTypes)==null?void 0:a[0])||"User"})},size:"md"}),e.jsxs("button",{onClick:()=>m(s,`${t.firstName} ${t.lastName}`),className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-2 border dark:border-gray-700",children:[e.jsx(Z,{size:18})," Message"]})]}),w&&e.jsx("div",{className:"mb-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-lg border border-green-200 dark:border-green-800",children:"Public View Mode"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-extrabold dark:text-white flex items-center gap-2 mb-2",children:[t.firstName||"User"," ",t.lastName||"",t.isVerified&&e.jsx(ee,{size:22,className:"text-blue-500 fill-blue-500 text-white"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm text-gray-500 dark:text-gray-400 font-medium mb-4",children:(t.accountTypes||["Creative"]).map((a,L)=>e.jsx("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-xs font-bold",children:a},L))}),e.jsx(fe,{followersCount:N.followersCount||0,followingCount:N.followingCount||0,onFollowersClick:()=>T("followers"),onFollowingClick:()=>T("following"),size:"md"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-6 border-y dark:border-gray-800 mb-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Rating"}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-1",children:[e.jsx("span",{className:"text-xl font-bold dark:text-white",children:t.rating||"New"}),t.rating>0&&e.jsx(ge,{rating:t.rating,size:14})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Experience"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:[t.yearsExp||"1+"," ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Yrs"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Response"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:["~1 ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Hr"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Bookings"}),e.jsx("div",{className:"text-xl font-bold dark:text-white",children:t.completedJobs||0})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(W,{size:14})," About"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#252830] p-5 rounded-xl border dark:border-gray-800",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:t.bio||"No biography provided yet."})})]}),(((x=t.genres)==null?void 0:x.length)>0||((v=t.instruments)==null?void 0:v.length)>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(ae,{size:14})," Sound Profile"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(u=t.genres)==null?void 0:u.map(a=>e.jsx("span",{className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-bold border border-purple-100 dark:border-purple-800",children:a},a)),(k=t.instruments)==null?void 0:k.map(a=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-brand-blue dark:text-blue-300 rounded-lg text-xs font-bold border border-blue-100 dark:border-blue-800",children:a},a))]})]}),((n=t.equipmentList)==null?void 0:n.length)>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(te,{size:14})," Select Gear"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#252830] rounded-xl p-4 border dark:border-gray-800",children:[e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-400",children:t.equipmentList.slice(0,10).map((a,L)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(se,{size:14,className:"text-brand-blue shrink-0 mt-0.5"}),e.jsx("span",{className:"truncate",children:a})]},L))}),t.equipmentList.length>10&&e.jsx("div",{className:"mt-3 pt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("span",{className:"text-xs text-gray-400 font-medium italic",children:["+",t.equipmentList.length-10," more items available"]})})]})]})]})]})})]}),$&&e.jsx(be,{userId:s,userName:`${(t==null?void 0:t.firstName)||""} ${(t==null?void 0:t.lastName)||""}`.trim()||"User",initialTab:U,currentUser:l,currentUserData:c,isFollowing:z,toggleFollow:R,onClose:()=>y(!1),openPublicProfile:a=>{y(!1)}})]})}export{Le as default};
