import{r as m,j as e,d as U,ac as M,b8 as y,b9 as f,aY as V,aL as F,e as J,N as I,b as W,aT as O,n as Q,$ as _,S as G,aW as H}from"./vendor-DTDDt3fP.js";import{q as K,L as Z,K as X,C as A,G as P}from"./vendor-firebase-C38qHjbM.js";import{i as D,f as ee,S as j,b as se,d as te}from"./chat-BCnoKXi-.js";import{P as R}from"./edu-Bzk_yg6o.js";import{a as re}from"./vendor-convex-DiXsReyd.js";import"./vendor-framer-CzAUfL-F.js";function ce({user:d,userData:a,setActiveTab:l,bookingCount:N=0,subProfiles:n={},notifications:c=[],tokenBalance:L=0}){var S,z;const[h,v]=m.useState([]),[x,E]=m.useState(null),$=(S=a==null?void 0:a.accountTypes)==null?void 0:S.includes("Studio"),k=((z=n==null?void 0:n.Studio)==null?void 0:z.rooms)||[],q=(a==null?void 0:a.profileViews)||0,B=(a==null?void 0:a.accountTypes)||[];let w=0,p=0;B.forEach(s=>{const t=(n==null?void 0:n[s])||{},r=R[s]||[];if(r.length===0)return;const g=r.filter(i=>!i.isToggle&&i.type!=="list").length||1,u=r.filter(i=>!i.isToggle&&i.type!=="list"&&t[i.key]&&t[i.key].length).length;w+=u/g,p++});const C=p>0?Math.round(w/p*100):100,T=C<60,b=re(ee.conversations.getConversations,d!=null&&d.uid&&D()?{userId:d.uid}:"skip");m.useEffect(()=>{if(!b){v([]);return}const s=b.map(t=>({uid:t.otherUserId||t.chatId,name:t.chatName||"Unknown",lastMessage:t.lastMessage||"",timestamp:t.lastMessageTime||0,isMe:t.lastSenderId===d.uid})).sort((t,r)=>r.timestamp-t.timestamp).slice(0,3);v(s)},[b,d==null?void 0:d.uid]),m.useEffect(()=>{const s=K(A(te,`artifacts/${se}/public/data/market_items`),X("timestamp","desc"),Z(1)),t=P(s,r=>{r.empty||E({id:r.docs[0].id,...r.docs[0].data()})});return()=>t()},[]);const Y=s=>{if(!s)return"Just now";let t;if(typeof s.toMillis=="function")t=new Date(s.toMillis());else if(typeof s=="number")t=new Date(s);else if(s instanceof Date)t=s;else return"Just now";if(isNaN(t.getTime()))return"Just now";const r=new Date;return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()};return e.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto pb-20 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-end gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-extrabold dark:text-white tracking-tight",children:["Welcome, ",a==null?void 0:a.firstName]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Your creative command center."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"text-sm font-medium text-gray-500 bg-white dark:bg-[#2c2e36] px-4 py-2 rounded-full border dark:border-gray-700 shadow-sm flex items-center gap-2",children:[e.jsx(U,{size:14}),new Date().toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})]})})]}),T&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl p-4 flex items-center justify-between gap-4 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/50 p-2 rounded-full text-orange-600 dark:text-orange-400",children:e.jsx(M,{size:20})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-orange-800 dark:text-orange-300 text-sm",children:["Profile Incomplete (",C,"%)"]}),e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:"Please complete your profile details before booking sessions."})]})]}),e.jsx("button",{onClick:()=>l("profile"),className:"bg-orange-600 hover:bg-orange-700 text-white text-xs font-bold px-4 py-2 rounded-lg transition",children:"Complete Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 p-5 rounded-xl text-white shadow-lg cursor-pointer transform transition hover:scale-[1.02] relative overflow-hidden group",onClick:()=>l("payments"),children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-yellow-100 text-sm font-medium mb-1 flex items-center gap-1",children:["SeshFx Balance ",e.jsx(y,{size:12,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"text-3xl font-extrabold flex items-center gap-2",children:[e.jsx(f,{fill:"currentColor",size:28})," ",L]}),e.jsx("div",{className:"text-xs text-yellow-100 mt-2 opacity-80 bg-white/20 inline-block px-2 py-0.5 rounded-full",children:"+ Add Funds"})]}),e.jsx(f,{size:120,className:"absolute -bottom-6 -right-6 text-white opacity-20 rotate-12 group-hover:rotate-0 transition-transform duration-500"})]}),e.jsx("div",{className:"cursor-pointer transform transition hover:scale-[1.02]",onClick:()=>l("bookings"),children:e.jsx(j,{title:"Pending Bookings",value:N,icon:e.jsx(V,{className:"text-white"}),bg:"bg-gradient-to-br from-brand-blue to-blue-600",text:"text-white",sub:N>0?"Action Required":"No pending requests"})}),e.jsx("div",{className:"cursor-pointer transform transition hover:scale-[1.02]",onClick:()=>l("messages"),children:e.jsx(j,{title:"Active Chats",value:h.length,icon:e.jsx(F,{className:"text-brand-blue"}),sub:"Check Inbox"})}),e.jsx("div",{className:"cursor-pointer transform transition hover:scale-[1.02]",onClick:()=>l("profile"),children:e.jsx(j,{title:"Profile Views",value:q,icon:e.jsx(J,{className:"text-brand-blue"}),sub:"Lifetime views"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-5 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-[#23262f]",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-gray-500"})," Activity Feed"]}),c&&c.length>0&&e.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse",children:[c.length," New"]})]}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:!c||c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(I,{size:20,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"You're all caught up!"})]}):c.map((s,t)=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-[#25272e] transition flex justify-between items-center group cursor-pointer",onClick:()=>l("bookings"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${s.type==="booking"?"bg-brand-blue":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm dark:text-gray-200 font-medium",children:s.text}),e.jsx("p",{className:"text-xs text-gray-500",children:Y(s.timestamp)})]})]}),e.jsx(W,{size:14,className:"text-gray-300"})]},s.id||t))})]}),$&&e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 p-5 relative overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(O,{size:18,className:"text-brand-blue"})," Studio Status"]}),e.jsxs("button",{onClick:()=>l("studio-ops"),className:"text-sm text-brand-blue hover:underline flex items-center gap-1",children:["Manage Ops ",e.jsx(y,{size:14})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 relative z-10",children:k.length===0?e.jsxs("div",{className:"col-span-full text-center py-6 text-gray-400 text-sm border-2 border-dashed dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-[#1f2128]",children:[e.jsx("div",{className:"mb-2",children:"No rooms configured."}),e.jsx("button",{className:"text-brand-blue font-bold hover:underline",onClick:()=>l("studio-ops"),children:"+ Add Room"})]}):k.map((s,t)=>{var r;return e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-3 rounded-lg border dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm dark:text-gray-200",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[((r=s.equipment)==null?void 0:r.length)||0," items • $",s.rate,"/hr"]})]}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1 ${s.active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700"}`,children:[s.active?e.jsx(Q,{size:10}):e.jsx(M,{size:10}),s.active?"Active":"Maint."]})]},t)})})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold dark:text-white flex items-center gap-2",children:[e.jsx(F,{size:18,className:"text-gray-400"})," Recent Messages"]}),e.jsx("button",{onClick:()=>l("messages"),className:"text-sm text-brand-blue hover:underline",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"No recent messages."}):h.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-[#25272e] rounded-lg cursor-pointer transition",onClick:()=>l("messages"),children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-300",children:s.name?s.name.charAt(0):"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm font-bold dark:text-gray-200 flex justify-between",children:[s.name||"Unknown User",e.jsx("span",{className:"text-[10px] text-gray-400 font-normal",children:new Date(s.timestamp).toLocaleDateString()})]}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[s.isMe?"You: ":"",s.lastMessage]})]})]},s.uid+t))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 p-4 shadow-sm",children:[e.jsx("h3",{className:"font-bold mb-3 dark:text-white text-sm uppercase tracking-wide text-gray-500",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full text-left px-4 py-3 rounded-lg border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm flex items-center gap-3 dark:text-gray-300 transition group",onClick:()=>l("feed"),children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded text-brand-blue group-hover:scale-110 transition-transform",children:e.jsx(_,{size:16})}),e.jsx("span",{className:"font-medium",children:"Create Post"})]}),e.jsxs("button",{className:"w-full text-left px-4 py-3 rounded-lg border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm flex items-center gap-3 dark:text-gray-300 transition group",onClick:()=>l("bookings"),children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-2 rounded text-purple-600 group-hover:scale-110 transition-transform",children:e.jsx(G,{size:16})}),e.jsx("span",{className:"font-medium",children:"Find Talent"})]}),e.jsxs("button",{className:"w-full text-left px-4 py-3 rounded-lg border dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm flex items-center gap-3 dark:text-gray-300 transition group",onClick:()=>l("marketplace"),children:[e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-2 rounded text-yellow-600 group-hover:scale-110 transition-transform",children:e.jsx(H,{size:16})}),e.jsx("span",{className:"font-medium",children:"Browse Marketplace"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-black text-white rounded-xl p-5 relative overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{size:16,className:"text-yellow-400",fill:"currentColor"}),e.jsx("span",{className:"text-xs font-bold text-yellow-400 uppercase",children:"Trending on SeshFx"})]}),x?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-lg mb-1 truncate",children:x.title}),e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["by ",x.author," • ",x.price," Tokens"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-lg mb-1",children:"Discover Sounds"}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Fresh beats & presets added daily."})]}),e.jsxs("button",{onClick:()=>l("seshfx"),className:"w-full bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition",children:["Visit Store ",e.jsx(y,{size:12})]})]}),e.jsx("div",{className:"absolute -right-4 -bottom-4 w-24 h-24 bg-yellow-500 rounded-full blur-3xl opacity-20 animate-pulse"})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 p-4 shadow-sm",children:[e.jsx("h3",{className:"font-bold dark:text-white text-sm mb-3",children:"Completion"}),e.jsx("div",{className:"space-y-3",children:((a==null?void 0:a.accountTypes)||[]).map(s=>{const t=(n==null?void 0:n[s])||{},r=R[s]||[];if(r.length===0)return null;const g=r.filter(o=>!o.isToggle&&o.type!=="list").length||1,u=r.filter(o=>!o.isToggle&&o.type!=="list"&&t[o.key]&&t[o.key].length).length,i=Math.round(u/g*100);return e.jsxs("div",{className:"space-y-1 cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 p-2 rounded transition",onClick:()=>l("profile"),title:"Click to edit profile",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:s}),e.jsxs("span",{className:i===100?"text-green-500 font-bold":"text-gray-500",children:[i,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${i>=80?"bg-green-500":i>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${i}%`}})})]},s)})})]})]})]})]})}export{ce as default};
