import{r as s,j as e,a1 as X,cB as p,c5 as ee,J as ae,P as re,aq as te,ce as E,Q as se,i as le,dI as ne,T as oe}from"./vendor-Dl7DtIXW.js";import{s as B}from"./chat-BYF7Vx2D.js";import{ACCOUNT_TYPES as ie,INSTRUMENT_DATA as de,GENRE_DATA as ce}from"./config-DGZTEYpI.js";import{S as ge}from"./StudioMap-BTafTf2U.js";import{L as ue}from"./LocationPicker-DrNKDyta.js";import{f as xe}from"./edu-BMUxkX2v.js";import{E as be}from"./EquipmentAutocomplete-BcGdmRJg.js";import"./vendor-framer-CUELlS5e.js";import"./vendor-maps-C5QNFLlQ.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="32ca06c8-3ae0-485c-805f-7d43ed7ba9d3",t._sentryDebugIdIdentifier="sentry-dbid-32ca06c8-3ae0-485c-805f-7d43ed7ba9d3")})()}catch{}function Se({user:t,userData:n,onBack:I,onSuccess:D}){const[j,_]=s.useState(2),k=[5,10,15,25,50,100,250,500],g=k[j],[u,m]=s.useState({lat:34.0522,lng:-118.2437,name:"Default"});s.useEffect(()=>{(async()=>{if(n!=null&&n.zip){const r=await xe(n.zip);if(r){m({lat:r.lat,lng:r.lng,name:r.cityState});return}}navigator.geolocation&&navigator.geolocation.getCurrentPosition(r=>{m({lat:r.coords.latitude,lng:r.coords.longitude,name:"Current Location"})})})()},[n]);const q=a=>{a.lat&&a.lng&&m({lat:a.lat,lng:a.lng,name:a.cityState||"Selected Location"})},[o,z]=s.useState("Talent"),[x,N]=s.useState("Play"),[c,F]=s.useState(""),[h,M]=s.useState(""),[f,G]=s.useState(""),[w,$]=s.useState(""),[S,V]=s.useState(""),[y,O]=s.useState(""),[C,H]=s.useState(""),[T,J]=s.useState("Any"),[R,U]=s.useState("Flat Rate"),[i,v]=s.useState([{id:Date.now(),type:"General",value:""}]),W=ie.filter(a=>a!=="Technician"),L=a=>{switch(a){case"Talent":return["Sing Lead Vocals","Sing Background/Harmonies","Feature on Track","Write Topline/Melody","Play Instrument","Session Recording","Live Performance","Tour Support","DJ Set","DJ Private Event","DJ Club Night","Record Demo","Collaborate","Improvise","Teach/Lesson"];case"Engineer":return["Mix Track","Mix Album/EP","Master Track","Master Album","Record/Track Session","Edit/Comp","Tune Vocals","Sound Design","Dolby Atmos Mix","Live Sound/FOH"];case"Producer":return["Produce Full Track","Co-Produce","Remix","Create Custom Beat","Arrange/Program","Vocal Production","Toplining","Beat Lease","Beat Exclusive","Sound Design"];case"Studio":return["Host Recording Session","Host Mixing Session","Rent Rehearsal Space","Rent Gear/Backline","Full Day Lockout","Podcast Recording"];case"Composer":return["Compose Original Score","Arrange Song","Orchestrate","Write Library Music","Create Jingle","Score Film/TV","Score Video Game","Ghostwrite"];case"Label":return["Sign Artist","Distribution Deal","Licensing"];case"Agent":return["Book Artist","Negotiate Deal","Represent"];default:return["Work","Collaborate","Consult"]}},Z=()=>v([...i,{id:Date.now(),type:"Gear",value:"",gearSelection:{}}]),Y=a=>{i.length!==1&&v(i.filter(r=>r.id!==a))},b=(a,r,l)=>v(i.map(d=>d.id===a?{...d,[r]:l}:d)),P=o==="Talent"&&["Play Instrument","Session Work"].includes(x),Q=async()=>{if(!f||!h)return alert("Please complete the request sentence.");if(P&&!c)return alert("Please select an instrument.");const a=i.filter(l=>l.value.trim()!=="");let r=`${o} - ${x}`;if(c&&(r+=` ${c}`),!B){alert("Database unavailable.");return}try{const l=(t==null?void 0:t.id)||(t==null?void 0:t.uid),{error:d}=await B.from("bookings").insert({sender_id:l,sender_name:"Broadcast Request",target_id:"BROADCAST",target_name:f,role:o,action:x,instrument:c||null,genre:h,service_type:r,date:w||"Flexible",time:S||"Flexible",offer_amount:y?parseInt(y):null,reference_links:C,experience_level:T,payment_type:R,requirements:a,message:a.map(A=>`[${A.type}] ${A.value}`).join(`
`),range:g,status:"Broadcasting",type:"Broadcast",location:{lat:u.lat,lng:u.lng},created_at:new Date().toISOString()});if(d)throw d;alert(`Broadcast sent to ${o}s within ${g} miles!`),D()}catch(l){console.error(l),alert("Failed to send broadcast.")}},K=[{label:"Gear / Equipment",value:"Gear",icon:te},{label:"Technique / Skill",value:"Technique",icon:E},{label:"Feel / Vibe",value:"Vibe",icon:se},{label:"Logistics",value:"Logistics",icon:le},{label:"General Note",value:"General",icon:ne}];return e.jsxs("div",{className:"max-w-5xl mx-auto bg-white dark:bg-[#2c2e36] p-6 rounded-xl border dark:border-gray-700 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg text-brand-blue",children:e.jsx(X,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold dark:text-white",children:"Broadcast Builder"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reach professionals in your area."})]})]}),e.jsx("button",{onClick:I,className:"text-sm font-medium text-gray-500 hover:text-brand-blue transition",children:"Cancel & Exit"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-4 space-y-5",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-[#1f2128] p-5 rounded-2xl border dark:border-gray-700",children:[e.jsx(ue,{initialZip:n==null?void 0:n.zip,onLocationChange:q,label:"Broadcast Center"}),e.jsxs("div",{className:"mt-4 flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider",children:"Range"}),e.jsxs("span",{className:"bg-brand-blue text-white text-xs font-bold px-2 py-1 rounded-md",children:[g," Miles"]})]}),e.jsx("div",{className:"mb-5 rounded-xl overflow-hidden border dark:border-gray-600 shadow-md relative h-48",children:e.jsx(ge,{center:[u.lat,u.lng],zoom:9,height:"100%",drawRadius:!0,radiusMiles:g})}),e.jsx("input",{type:"range",min:"0",max:k.length-1,value:j,onChange:a=>_(parseInt(a.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-brand-blue"})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl border-2 border-blue-100 dark:border-gray-700 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-brand-blue"}),e.jsx("label",{className:"text-xs font-extrabold text-brand-blue uppercase tracking-widest mb-4 block",children:"Step 1: Core Request"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-lg md:text-xl text-gray-700 dark:text-gray-200 leading-relaxed font-medium",children:[e.jsx("span",{children:"I need a"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("select",{value:o,onChange:a=>{z(a.target.value),N(L(a.target.value)[0])},className:"appearance-none bg-blue-50 dark:bg-gray-700 text-blue-700 dark:text-white font-bold py-1 pl-3 pr-8 rounded-lg border-b-2 border-blue-200 dark:border-gray-600 focus:outline-none cursor-pointer hover:bg-blue-100 dark:hover:bg-gray-600 transition",children:W.map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsx(p,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-blue-500 dark:text-gray-400 pointer-events-none",size:16})]}),e.jsx("span",{children:"that can"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("select",{value:x,onChange:a=>N(a.target.value),className:"appearance-none bg-purple-50 dark:bg-gray-700 text-purple-700 dark:text-white font-bold py-1 pl-3 pr-8 rounded-lg border-b-2 border-purple-200 dark:border-gray-600 focus:outline-none cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-600 transition",children:L(o).map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsx(p,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-purple-500 dark:text-gray-400 pointer-events-none",size:16})]}),P&&e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("select",{value:c,onChange:a=>F(a.target.value),className:"appearance-none bg-green-50 dark:bg-gray-700 text-green-700 dark:text-white font-bold py-1 pl-3 pr-8 rounded-lg border-b-2 border-green-200 dark:border-gray-600 focus:outline-none cursor-pointer hover:bg-green-100 dark:hover:bg-gray-600 transition",children:[e.jsx("option",{value:"",children:"(Select Instrument)"}),Object.entries(de).map(([a,r])=>e.jsx("optgroup",{label:a,children:r.map(l=>e.jsx("option",{value:l,children:l},l))},a))]}),e.jsx(p,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-green-500 dark:text-gray-400 pointer-events-none",size:16})]}),e.jsx("span",{children:"for a song in the"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("select",{value:h,onChange:a=>M(a.target.value),className:"appearance-none bg-orange-50 dark:bg-gray-700 text-orange-700 dark:text-white font-bold py-1 pl-3 pr-8 rounded-lg border-b-2 border-orange-200 dark:border-gray-600 focus:outline-none cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-600 transition",children:[e.jsx("option",{value:"",children:"(Select Genre)"}),ce.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx(p,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-orange-500 dark:text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t dark:border-gray-700",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Project Title"}),e.jsx("input",{className:"w-full bg-gray-50 dark:bg-black/20 border-none rounded-lg p-3 text-gray-700 dark:text-gray-200 font-medium placeholder-gray-400 focus:ring-2 focus:ring-brand-blue",placeholder:"e.g. Summer Hit Single - Drum Tracking",value:f,onChange:a=>G(a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] p-5 rounded-xl border dark:border-gray-700",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-3 block",children:"Logistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Date"}),e.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",value:w,onChange:a=>$(a.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Time"}),e.jsx("input",{type:"time",className:"w-full p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",value:S,onChange:a=>V(a.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Budget ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-2.5 text-green-500",size:14}),e.jsx("input",{type:"number",className:"w-full pl-8 p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm font-bold",placeholder:"Flexible",value:y,onChange:a=>O(a.target.value)})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] p-5 rounded-xl border dark:border-gray-700",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-3 block",children:"Project Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Payment Type"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",value:R,onChange:a=>U(a.target.value),children:[e.jsx("option",{children:"Flat Rate"}),e.jsx("option",{children:"Hourly"}),e.jsx("option",{children:"Royalty Split"}),e.jsx("option",{children:"Trade / Barter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Experience Required"}),e.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",value:T,onChange:a=>J(a.target.value),children:[e.jsx("option",{children:"Any"}),e.jsx("option",{children:"Intermediate"}),e.jsx("option",{children:"Pro / Expert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-gray-400 uppercase",children:"Reference Link"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 text-gray-400",size:14}),e.jsx("input",{className:"w-full pl-8 p-2 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm",placeholder:"Spotify / SoundCloud...",value:C,onChange:a=>H(a.target.value)})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] p-6 rounded-2xl border dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsx("label",{className:"text-xs font-extrabold text-brand-blue uppercase tracking-widest",children:"Step 2: Specific Needs"}),e.jsxs("button",{onClick:Z,className:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white px-3 py-1.5 rounded-full font-bold flex items-center gap-1 transition",children:[e.jsx(re,{size:14})," Add Condition"]})]}),e.jsx("div",{className:"flex flex-col gap-3",children:i.map(a=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 bg-gray-50 dark:bg-black/20 p-3 rounded-xl border dark:border-gray-700 animate-in slide-in-from-bottom-2",children:[e.jsx("div",{className:"w-full sm:w-1/3 min-w-[140px]",children:e.jsx("select",{className:"w-full p-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-[#2c2e36] dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",value:a.type,onChange:r=>b(a.id,"type",r.target.value),children:K.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[a.type==="Gear"?e.jsx("div",{className:"w-full",children:e.jsx(be,{placeholder:"Search for gear (e.g. U87, SSL, Fender Twin)...",value:a.value||"",onChange:r=>b(a.id,"value",r),onSelect:r=>{const l=r.brand!=="Various"&&r.brand!=="Unknown"?`${r.brand} ${r.name}`:r.name;b(a.id,"value",l)},className:"w-full"})}):e.jsx("input",{className:"w-full p-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-[#2c2e36] dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-brand-blue",placeholder:"Describe requirement...",value:a.value,onChange:r=>b(a.id,"value",r.target.value)}),e.jsx("button",{onClick:()=>Y(a.id),className:"text-gray-400 hover:text-red-500 px-2",children:e.jsx(oe,{size:18})})]})]},a.id))}),e.jsx("div",{className:"h-6 w-0.5 bg-gray-200 dark:bg-gray-700 mx-auto my-2"}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-brand-blue to-blue-600 text-white py-4 rounded-xl font-bold shadow-lg hover:scale-[1.01] transition-all text-lg flex items-center justify-center gap-2",onClick:Q,children:[e.jsx(E,{fill:"currentColor",size:20})," Broadcast Opportunity"]})]})]})]})]})}export{Se as default};
