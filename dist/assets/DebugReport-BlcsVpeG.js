import{r as l,j as e,bK as g,B as f,D as u,x as v,ab as y,a5 as k}from"./vendor-DpIp-Nyk.js";import{s as w}from"./chat-DJYVPNtG.js";import"./vendor-framer-RaTCtWVJ.js";function D({user:a,userData:d}){const[s,h]=l.useState(null),[p,c]=l.useState(!0),[b,o]=l.useState(!1);l.useEffect(()=>{x()},[a,d]);const x=async()=>{c(!0);const t={timestamp:new Date().toISOString(),environment:{nodeEnv:"production",isDev:!1,isProd:!0,baseUrl:"Missing",anonKey:"Missing"},browser:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,storage:{localStorage:typeof Storage<"u"?"Available":"Unavailable",sessionStorage:typeof sessionStorage<"u"?"Available":"Unavailable"}},authentication:{userExists:!!a,userDataExists:!!d,userId:(a==null?void 0:a.id)||"N/A",userEmail:(a==null?void 0:a.email)||"N/A",userMetadata:(a==null?void 0:a.user_metadata)||{},appMetadata:(a==null?void 0:a.app_metadata)||{},createdAt:(a==null?void 0:a.created_at)||"N/A",lastSignIn:(a==null?void 0:a.last_sign_in_at)||"N/A",confirmedAt:(a==null?void 0:a.confirmed_at)||"N/A"},userData:d||null,supabase:{initialized:!1,authUrl:"N/A",authKey:"Missing"},session:null,profile:null,errors:[]};try{w&&(a!=null&&a.id)}catch(i){t.errors.push(`Error during checks: ${i.message}`)}h(t),c(!1)},j=()=>{const t=JSON.stringify(s,null,2);navigator.clipboard.writeText(t).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},N=()=>{const t=JSON.stringify(s,null,2),i=new Blob([t],{type:"application/json"}),m=URL.createObjectURL(i),n=document.createElement("a");n.href=m,n.download=`debug-report-${Date.now()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(m)},r=({status:t})=>t===!0||t==="Available"||t==="Set"||t==="Present"?e.jsx(v,{className:"w-5 h-5 text-green-500"}):t===!1||t==="Unavailable"||t==="Missing"?e.jsx(y,{className:"w-5 h-5 text-red-500"}):e.jsx(k,{className:"w-5 h-5 text-yellow-500"});return p?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(g,{className:"animate-spin text-brand-blue w-8 h-8"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating debug report..."})]})})})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:"Debug Report"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:j,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),b?"Copied!":"Copy JSON"]}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Download"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Generated: ",new Date(s.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Environment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.environment.isDev?"Dev":"Prod"}),e.jsxs("span",{className:"dark:text-gray-300",children:["Mode: ",s.environment.nodeEnv]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.environment.baseUrl}),e.jsxs("span",{className:"dark:text-gray-300",children:["Supabase URL: ",s.environment.baseUrl]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.environment.anonKey}),e.jsxs("span",{className:"dark:text-gray-300",children:["Supabase Key: ",s.environment.anonKey]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Browser"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.browser.storage.localStorage}),e.jsxs("span",{className:"dark:text-gray-300",children:["LocalStorage: ",s.browser.storage.localStorage]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.browser.storage.sessionStorage}),e.jsxs("span",{className:"dark:text-gray-300",children:["SessionStorage: ",s.browser.storage.sessionStorage]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.browser.cookieEnabled}),e.jsxs("span",{className:"dark:text-gray-300",children:["Cookies: ",s.browser.cookieEnabled?"Enabled":"Disabled"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"User Agent:"}),e.jsx("p",{className:"text-xs dark:text-gray-300 break-all",children:s.browser.userAgent})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Authentication"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.authentication.userExists}),e.jsxs("span",{className:"dark:text-gray-300",children:["User Object: ",s.authentication.userExists?"Exists":"Missing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.authentication.userDataExists}),e.jsxs("span",{className:"dark:text-gray-300",children:["User Data: ",s.authentication.userDataExists?"Exists":"Missing"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"User ID:"}),e.jsx("p",{className:"dark:text-gray-300 font-mono",children:s.authentication.userId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.userEmail})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Created At:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.createdAt})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Sign In:"}),e.jsx("p",{className:"dark:text-gray-300",children:s.authentication.lastSignIn})]})]}),Object.keys(s.authentication.userMetadata).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"User Metadata:"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.authentication.userMetadata,null,2)})]})]})]}),s.session&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Session"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.session.exists}),e.jsxs("span",{className:"dark:text-gray-300",children:["Session: ",s.session.exists?"Active":"Missing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.session.accessToken}),e.jsxs("span",{className:"dark:text-gray-300",children:["Access Token: ",s.session.accessToken]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.session.refreshToken}),e.jsxs("span",{className:"dark:text-gray-300",children:["Refresh Token: ",s.session.refreshToken]})]}),s.session.error&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Error: ",s.session.error]})})]})]}),s.profile&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Database Profile"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{status:s.profile.exists}),e.jsxs("span",{className:"dark:text-gray-300",children:["Profile: ",s.profile.exists?"Found":"Not Found"]})]}),s.profile.error&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Error: ",s.profile.error]})}),s.profile.data&&e.jsx("div",{className:"mt-4",children:e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.profile.data,null,2)})})]})]}),s.userData&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"User Data (State)"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 rounded text-xs overflow-auto",children:JSON.stringify(s.userData,null,2)})]}),s.errors.length>0&&e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow mb-6 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4 text-red-500",children:"Errors"}),e.jsx("div",{className:"space-y-2",children:s.errors.map((t,i)=>e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t})},i))})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold dark:text-white mb-4",children:"Raw JSON"}),e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded text-xs overflow-auto max-h-96",children:JSON.stringify(s,null,2)})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#1a1d21] p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-[#1f2128] rounded-lg shadow p-6",children:e.jsx("p",{className:"text-red-500",children:"Failed to generate report"})})})})}export{D as default};
