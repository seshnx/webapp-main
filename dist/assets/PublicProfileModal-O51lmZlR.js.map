{"version":3,"file":"PublicProfileModal-O51lmZlR.js","sources":["../../src/components/shared/StarRating.jsx","../../src/components/social/FollowersListModal.jsx","../../src/components/PublicProfileModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Star } from 'lucide-react';\r\n\r\nexport default function StarRating({ rating = 0, setRating, interactive = false, size = 16 }) {\r\n  const [hover, setHover] = useState(0);\r\n\r\n  return (\r\n    <div className=\"flex gap-1\">\r\n      {[1, 2, 3, 4, 5].map((star) => (\r\n        <Star\r\n          key={star}\r\n          size={size}\r\n          className={`transition-colors ${interactive ? 'cursor-pointer' : ''} ${\r\n            (interactive ? hover || rating : rating) >= star\r\n              ? 'fill-yellow-400 text-yellow-400'\r\n              : 'text-gray-300 dark:text-gray-600'\r\n          }`}\r\n          fill={(interactive ? hover || rating : rating) >= star ? \"currentColor\" : \"none\"}\r\n          onMouseEnter={() => interactive && setHover(star)}\r\n          onMouseLeave={() => interactive && setHover(0)}\r\n          onClick={() => interactive && setRating(star)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { X, Users, UserCheck, Search, Loader2 } from 'lucide-react';\r\nimport { getFollowers, getFollowing, getProfilesByIds } from '../../config/neonQueries';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport UserAvatar from '../shared/UserAvatar';\r\nimport FollowButton from './FollowButton';\r\n\r\nconst TABS = {\r\n    FOLLOWERS: 'followers',\r\n    FOLLOWING: 'following'\r\n};\r\n\r\n/**\r\n * Modal component for displaying followers/following lists\r\n * @param {string} userId - The user whose followers/following to display\r\n * @param {string} userName - Display name for the header\r\n * @param {string} initialTab - Which tab to show first ('followers' | 'following')\r\n * @param {object} currentUser - The authenticated user\r\n * @param {object} currentUserData - The authenticated user's profile data\r\n * @param {function} isFollowing - Check if current user follows a target\r\n * @param {function} toggleFollow - Toggle follow state\r\n * @param {function} onClose - Close modal callback\r\n * @param {function} openPublicProfile - Navigate to user profile\r\n */\r\nexport default function FollowersListModal({\r\n    userId,\r\n    userName,\r\n    initialTab = TABS.FOLLOWERS,\r\n    currentUser,\r\n    currentUserData,\r\n    isFollowing,\r\n    toggleFollow,\r\n    onClose,\r\n    openPublicProfile\r\n}) {\r\n    const [activeTab, setActiveTab] = useState(initialTab);\r\n    const [followers, setFollowers] = useState([]);\r\n    const [following, setFollowing] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    // Fetch followers\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n\r\n        setLoading(true);\r\n\r\n        const loadFollowers = async () => {\r\n            try {\r\n                // Get follower IDs\r\n                const followerIds = await getFollowers(userId);\r\n\r\n                if (followerIds.length === 0) {\r\n                    setFollowers([]);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // Get profile data for all followers\r\n                const profiles = await getProfilesByIds(followerIds);\r\n\r\n                // Create a map for easy lookup\r\n                const profileMap = {};\r\n                profiles.forEach(p => {\r\n                    profileMap[p.user_id || p.id] = p;\r\n                });\r\n\r\n                // Map follower IDs to profiles with timestamps\r\n                const followersList = followerIds.map(fid => {\r\n                    const profile = profileMap[fid];\r\n                    return {\r\n                        userId: fid,\r\n                        displayName: profile?.display_name || `${profile?.first_name || ''} ${profile?.last_name || ''}`.trim() || 'User',\r\n                        photoURL: profile?.avatar_url || profile?.photo_url,\r\n                        role: profile?.active_role || profile?.role,\r\n                        timestamp: profile?.created_at || new Date().toISOString()\r\n                    };\r\n                });\r\n\r\n                setFollowers(followersList);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error('Followers fetch error:', error);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadFollowers();\r\n\r\n        // Set up polling (every 30 seconds)\r\n        const pollInterval = setInterval(() => {\r\n            loadFollowers();\r\n        }, 30000);\r\n\r\n        return () => {\r\n            clearInterval(pollInterval);\r\n        };\r\n    }, [userId]);\r\n\r\n    // Fetch following\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n\r\n        const loadFollowing = async () => {\r\n            try {\r\n                // Get following IDs\r\n                const followingIds = await getFollowing(userId);\r\n\r\n                if (followingIds.length === 0) {\r\n                    setFollowing([]);\r\n                    return;\r\n                }\r\n\r\n                // Get profile data for all following\r\n                const profiles = await getProfilesByIds(followingIds);\r\n\r\n                // Create a map for easy lookup\r\n                const profileMap = {};\r\n                profiles.forEach(p => {\r\n                    profileMap[p.user_id || p.id] = p;\r\n                });\r\n\r\n                // Map following IDs to profiles with timestamps\r\n                const followingList = followingIds.map(fid => {\r\n                    const profile = profileMap[fid];\r\n                    return {\r\n                        userId: fid,\r\n                        displayName: profile?.display_name || `${profile?.first_name || ''} ${profile?.last_name || ''}`.trim() || 'User',\r\n                        photoURL: profile?.avatar_url || profile?.photo_url,\r\n                        role: profile?.active_role || profile?.role,\r\n                        timestamp: profile?.created_at || new Date().toISOString()\r\n                    };\r\n                });\r\n\r\n                setFollowing(followingList);\r\n            } catch (error) {\r\n                console.error('Following fetch error:', error);\r\n            }\r\n        };\r\n\r\n        loadFollowing();\r\n\r\n        // Set up polling (every 30 seconds)\r\n        const pollInterval = setInterval(() => {\r\n            loadFollowing();\r\n        }, 30000);\r\n\r\n        return () => {\r\n            clearInterval(pollInterval);\r\n        };\r\n    }, [userId]);\r\n\r\n    const activeList = activeTab === TABS.FOLLOWERS ? followers : following;\r\n    \r\n    // Filter by search\r\n    const filteredList = searchQuery.trim() \r\n        ? activeList.filter(user => \r\n            user.displayName?.toLowerCase().includes(searchQuery.toLowerCase())\r\n          )\r\n        : activeList;\r\n\r\n    const currentUserId = currentUser?.id || currentUser?.uid;\r\n    const isOwnProfile = userId === currentUserId;\r\n\r\n    const handleUserClick = (targetUserId) => {\r\n        if (openPublicProfile) {\r\n            openPublicProfile(targetUserId);\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const handleToggleFollow = async (targetUser) => {\r\n        if (!toggleFollow) return;\r\n        await toggleFollow(targetUser.userId, {\r\n            displayName: targetUser.displayName,\r\n            photoURL: targetUser.photoURL,\r\n            role: targetUser.role\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4\">\r\n            <motion.div \r\n                initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                className=\"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden\"\r\n            >\r\n                {/* Header */}\r\n                <div className=\"p-4 border-b dark:border-gray-700 shrink-0\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                        <h3 className=\"font-bold text-lg dark:text-white\">\r\n                            {userName || 'User'}\r\n                        </h3>\r\n                        <button \r\n                            onClick={onClose}\r\n                            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition\"\r\n                        >\r\n                            <X size={20} />\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1\">\r\n                        <button\r\n                            onClick={() => setActiveTab(TABS.FOLLOWERS)}\r\n                            className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${\r\n                                activeTab === TABS.FOLLOWERS\r\n                                    ? 'bg-white dark:bg-gray-700 shadow-sm text-brand-blue'\r\n                                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\r\n                            }`}\r\n                        >\r\n                            <Users size={16} />\r\n                            <span>Followers</span>\r\n                            <span className={`text-xs px-1.5 py-0.5 rounded-full ${\r\n                                activeTab === TABS.FOLLOWERS\r\n                                    ? 'bg-brand-blue/10 text-brand-blue'\r\n                                    : 'bg-gray-200 dark:bg-gray-600'\r\n                            }`}>\r\n                                {followers.length}\r\n                            </span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab(TABS.FOLLOWING)}\r\n                            className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${\r\n                                activeTab === TABS.FOLLOWING\r\n                                    ? 'bg-white dark:bg-gray-700 shadow-sm text-brand-blue'\r\n                                    : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\r\n                            }`}\r\n                        >\r\n                            <UserCheck size={16} />\r\n                            <span>Following</span>\r\n                            <span className={`text-xs px-1.5 py-0.5 rounded-full ${\r\n                                activeTab === TABS.FOLLOWING\r\n                                    ? 'bg-brand-blue/10 text-brand-blue'\r\n                                    : 'bg-gray-200 dark:bg-gray-600'\r\n                            }`}>\r\n                                {following.length}\r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                {activeList.length > 5 && (\r\n                    <div className=\"px-4 py-3 border-b dark:border-gray-700 shrink-0\">\r\n                        <div className=\"relative\">\r\n                            <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search...\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                className=\"w-full pl-9 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white transition\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* List */}\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                    {loading ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-12\">\r\n                            <Loader2 className=\"animate-spin text-brand-blue mb-2\" size={28} />\r\n                            <p className=\"text-sm text-gray-500\">Loading...</p>\r\n                        </div>\r\n                    ) : filteredList.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-12 px-4\">\r\n                            <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4\">\r\n                                {activeTab === TABS.FOLLOWERS ? (\r\n                                    <Users size={24} className=\"text-gray-400\" />\r\n                                ) : (\r\n                                    <UserCheck size={24} className=\"text-gray-400\" />\r\n                                )}\r\n                            </div>\r\n                            <p className=\"text-gray-500 text-center\">\r\n                                {searchQuery ? (\r\n                                    `No results for \"${searchQuery}\"`\r\n                                ) : activeTab === TABS.FOLLOWERS ? (\r\n                                    isOwnProfile ? \"You don't have any followers yet\" : \"No followers yet\"\r\n                                ) : (\r\n                                    isOwnProfile ? \"You're not following anyone yet\" : \"Not following anyone yet\"\r\n                                )}\r\n                            </p>\r\n                            {!searchQuery && activeTab === TABS.FOLLOWING && isOwnProfile && (\r\n                                <p className=\"text-xs text-gray-400 mt-2 text-center\">\r\n                                    Find artists and creators to follow in the feed!\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <AnimatePresence mode=\"popLayout\">\r\n                            {filteredList.map((user, index) => (\r\n                                <UserListItem\r\n                                    key={user.userId}\r\n                                    user={user}\r\n                                    index={index}\r\n                                    currentUserId={currentUserId}\r\n                                    isFollowingUser={isFollowing?.(user.userId)}\r\n                                    onToggleFollow={() => handleToggleFollow(user)}\r\n                                    onUserClick={() => handleUserClick(user.userId)}\r\n                                />\r\n                            ))}\r\n                        </AnimatePresence>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Individual user list item\r\n */\r\nfunction UserListItem({ \r\n    user, \r\n    index, \r\n    currentUserId, \r\n    isFollowingUser, \r\n    onToggleFollow, \r\n    onUserClick \r\n}) {\r\n    const isOwnUser = user.userId === currentUserId;\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, x: -10 }}\r\n            transition={{ delay: index * 0.03 }}\r\n            className=\"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition border-b dark:border-gray-700/50 last:border-0\"\r\n        >\r\n            <div \r\n                className=\"flex items-center gap-3 flex-1 min-w-0 cursor-pointer\"\r\n                onClick={onUserClick}\r\n            >\r\n                <UserAvatar\r\n                    src={user.photoURL}\r\n                    name={user.displayName}\r\n                    size=\"md\"\r\n                />\r\n                <div className=\"min-w-0\">\r\n                    <h4 className=\"font-semibold text-sm dark:text-white truncate hover:text-brand-blue transition\">\r\n                        {user.displayName}\r\n                    </h4>\r\n                    {user.role && (\r\n                        <p className=\"text-xs text-gray-500 truncate\">\r\n                            {user.role}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {!isOwnUser && (\r\n                <FollowButton\r\n                    isFollowing={isFollowingUser}\r\n                    onToggle={onToggleFollow}\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                />\r\n            )}\r\n\r\n            {isOwnUser && (\r\n                <span className=\"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full\">\r\n                    You\r\n                </span>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n\r\n/**\r\n * Compact trigger component for opening the modal\r\n * Shows follower/following counts as clickable links\r\n */\r\nexport function FollowStats({ \r\n    followersCount = 0, \r\n    followingCount = 0, \r\n    onFollowersClick, \r\n    onFollowingClick,\r\n    size = 'md' // 'sm' | 'md' | 'lg'\r\n}) {\r\n    const sizeClasses = {\r\n        sm: 'text-xs gap-3',\r\n        md: 'text-sm gap-4',\r\n        lg: 'text-base gap-5'\r\n    };\r\n\r\n    const numberClasses = {\r\n        sm: 'text-sm',\r\n        md: 'text-base',\r\n        lg: 'text-lg'\r\n    };\r\n\r\n    return (\r\n        <div className={`flex items-center ${sizeClasses[size]}`}>\r\n            <button \r\n                onClick={onFollowersClick}\r\n                className=\"flex items-center gap-1 hover:text-brand-blue transition group\"\r\n            >\r\n                <span className={`font-bold dark:text-white group-hover:text-brand-blue ${numberClasses[size]}`}>\r\n                    {followersCount.toLocaleString()}\r\n                </span>\r\n                <span className=\"text-gray-500\">\r\n                    {followersCount === 1 ? 'Follower' : 'Followers'}\r\n                </span>\r\n            </button>\r\n            \r\n            <span className=\"text-gray-300 dark:text-gray-600\">â€¢</span>\r\n            \r\n            <button \r\n                onClick={onFollowingClick}\r\n                className=\"flex items-center gap-1 hover:text-brand-blue transition group\"\r\n            >\r\n                <span className={`font-bold dark:text-white group-hover:text-brand-blue ${numberClasses[size]}`}>\r\n                    {followingCount.toLocaleString()}\r\n                </span>\r\n                <span className=\"text-gray-500\">Following</span>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    X, MapPin, MessageCircle, Shield, User,\r\n    Briefcase, Music, Award, AlertTriangle, CheckCircle,\r\n    DollarSign, Camera, Loader2\r\n} from 'lucide-react';\r\nimport StarRating from './shared/StarRating';\r\nimport { useVercelImageUpload } from '../hooks/useVercelUpload';\r\nimport { useFollowSystem, useUserSocialStats } from '../hooks/useFollowSystem';\r\nimport FollowButton from './social/FollowButton';\r\nimport FollowersListModal, { FollowStats } from './social/FollowersListModal';\r\nimport { getProfile, updateProfile } from '../config/neonQueries';\r\n\r\nexport default function PublicProfileModal({ userId, currentUser, currentUserData, onClose, onMessage }) {\r\n  const [profile, setProfile] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [bannerUploading, setBannerUploading] = useState(false);\r\n  const [showFollowersModal, setShowFollowersModal] = useState(false);\r\n  const [followersModalTab, setFollowersModalTab] = useState('followers');\r\n\r\n  // Determine if the viewer is the owner\r\n  const currentUserId = currentUser?.id || currentUser?.uid;\r\n  const isOwner = currentUserId === userId;\r\n\r\n  const { uploadImage } = useVercelImageUpload();\r\n\r\n  // Follow system hooks\r\n  const { isFollowing, toggleFollow } = useFollowSystem(currentUserId, currentUserData);\r\n  const { stats: socialStats } = useUserSocialStats(userId);\r\n\r\n  const handleOpenFollowers = (tab = 'followers') => {\r\n    setFollowersModalTab(tab);\r\n    setShowFollowersModal(true);\r\n  };\r\n\r\n  const refreshProfile = async () => {\r\n      try {\r\n        // Fetch profile using Neon\r\n        const profileData = await getProfile(userId);\r\n\r\n        if (!profileData) {\r\n            setError(\"Profile not found or is private.\");\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        // Normalize data structure\r\n        setProfile({\r\n            ...profileData,\r\n            firstName: profileData.first_name,\r\n            lastName: profileData.last_name,\r\n            displayName: profileData.display_name || profileData.effective_display_name,\r\n            photoURL: profileData.avatar_url || profileData.photo_url,\r\n            bannerURL: profileData.banner_url,\r\n            hourlyRate: profileData.hourly_rate,\r\n            zip: profileData.zip\r\n        });\r\n      } catch (e) {\r\n        console.error(\"Failed to load profile:\", e);\r\n        setError(\"Unable to load profile. Please try again later.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userId) refreshProfile();\r\n  }, [userId]);\r\n\r\n  const handleBannerUpload = async (e) => {\r\n      const file = e.target.files[0];\r\n      if (!file || !isOwner) return;\r\n\r\n      setBannerUploading(true);\r\n      try {\r\n          // Upload to Vercel Blob\r\n          const url = await uploadImage(file, 'profile-banners');\r\n          if (url) {\r\n              // Update Profile using Neon\r\n              await updateProfile(userId, {\r\n                  banner_url: url,\r\n              });\r\n\r\n              // Optimistic update\r\n              setProfile(prev => ({ ...prev, bannerURL: url, banner_url: url }));\r\n          }\r\n      } catch (err) {\r\n          console.error(\"Banner upload failed:\", err);\r\n          alert(\"Failed to upload banner.\");\r\n      }\r\n      setBannerUploading(false);\r\n  };\r\n\r\n  if (!userId) return null;\r\n\r\n  // --- RENDER HELPERS ---\r\n\r\n  const LoadingSkeleton = () => (\r\n      <div className=\"p-8 flex flex-col items-center space-y-6 animate-pulse\">\r\n          <div className=\"h-40 w-full bg-gray-200 dark:bg-gray-700 rounded-xl\"></div>\r\n          <div className=\"h-28 w-28 bg-gray-300 dark:bg-gray-600 rounded-full -mt-20 border-4 border-white dark:border-dark-card\"></div>\r\n          <div className=\"h-6 w-1/2 bg-gray-200 dark:bg-gray-700 rounded\"></div>\r\n          <div className=\"h-4 w-1/3 bg-gray-200 dark:bg-gray-700 rounded\"></div>\r\n      </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n      <div \r\n        className=\"bg-white dark:bg-[#1f2128] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-gray-700\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        \r\n        {/* --- CLOSE BUTTON --- */}\r\n        <button \r\n            onClick={onClose}\r\n            className=\"absolute top-4 right-4 z-30 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full transition-colors backdrop-blur-md\"\r\n        >\r\n            <X size={20} />\r\n        </button>\r\n\r\n        {/* --- MAIN CONTENT SCROLL AREA --- */}\r\n        <div className=\"flex-1 overflow-y-auto custom-scrollbar relative\">\r\n            \r\n            {loading ? <LoadingSkeleton /> : error || !profile ? (\r\n                <div className=\"h-full flex flex-col items-center justify-center p-12 text-gray-500\">\r\n                    <AlertTriangle size={48} className=\"text-yellow-500 mb-4 opacity-80\"/>\r\n                    <h3 className=\"text-xl font-bold dark:text-gray-200 mb-2\">Profile Unavailable</h3>\r\n                    <p className=\"text-sm text-center max-w-xs\">{error || \"This user's profile information could not be retrieved.\"}</p>\r\n                    <button onClick={onClose} className=\"mt-6 px-6 py-2 bg-gray-200 dark:bg-gray-700 rounded-full font-bold text-sm hover:bg-gray-300 transition\">Close</button>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {/* COVER BANNER */}\r\n                    <div className=\"h-48 relative bg-gray-800 group\">\r\n                        {profile.bannerURL ? (\r\n                            <img src={profile.bannerURL} alt=\"Cover\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <div className=\"w-full h-full bg-gradient-to-r from-brand-blue to-purple-600\">\r\n                                <div className=\"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]\"></div>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Edit Banner Trigger */}\r\n                        {isOwner && (\r\n                            <label className=\"absolute top-4 left-4 cursor-pointer bg-black/40 hover:bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-bold backdrop-blur-md transition-all flex items-center gap-2 border border-white/10\">\r\n                                {bannerUploading ? <Loader2 size={14} className=\"animate-spin\"/> : <Camera size={14}/>}\r\n                                {bannerUploading ? 'Uploading...' : 'Edit Cover'}\r\n                                <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={handleBannerUpload} disabled={bannerUploading} />\r\n                            </label>\r\n                        )}\r\n\r\n                        {/* Badges Overlay */}\r\n                        <div className=\"absolute bottom-4 right-6 flex gap-3 opacity-90\">\r\n                            {profile.rate > 0 && (\r\n                                <span className=\"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm\">\r\n                                    <DollarSign size={12}/> ${profile.rate}/hr\r\n                                </span>\r\n                            )}\r\n                            {profile.city && (\r\n                                <span className=\"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm\">\r\n                                    <MapPin size={12}/> {profile.city}, {profile.state}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* PROFILE HEADER INFO */}\r\n                    <div className=\"px-8 pb-8 relative\">\r\n                        <div className=\"flex justify-between items-end -mt-14 mb-6\">\r\n                            {/* Avatar */}\r\n                            <div className=\"relative z-10 group\">\r\n                                <div className=\"h-32 w-32 rounded-full border-[5px] border-white dark:border-[#1f2128] bg-gray-200 dark:bg-gray-700 overflow-hidden shadow-xl\">\r\n                                    {profile.photoURL ? (\r\n                                        <img src={profile.photoURL} alt=\"Profile\" className=\"h-full w-full object-cover\" />\r\n                                    ) : (\r\n                                        <div className=\"h-full w-full flex items-center justify-center bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400\">\r\n                                            <User size={48} />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            {/* CTA Actions */}\r\n                            {currentUser && !isOwner && (\r\n                                <div className=\"flex gap-2 mb-2\">\r\n                                    <FollowButton\r\n                                        isFollowing={isFollowing(userId)}\r\n                                        onToggle={() => toggleFollow(userId, {\r\n                                            displayName: `${profile.firstName || ''} ${profile.lastName || ''}`.trim(),\r\n                                            photoURL: profile.photoURL,\r\n                                            role: profile.accountTypes?.[0] || 'User'\r\n                                        })}\r\n                                        size=\"md\"\r\n                                    />\r\n                                    <button \r\n                                        onClick={() => onMessage(userId, `${profile.firstName} ${profile.lastName}`)}\r\n                                        className=\"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-2 border dark:border-gray-700\"\r\n                                    >\r\n                                        <MessageCircle size={18} /> Message\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                            \r\n                            {isOwner && (\r\n                                <div className=\"mb-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-lg border border-green-200 dark:border-green-800\">\r\n                                    Public View Mode\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"mb-6\">\r\n                            <h1 className=\"text-3xl font-extrabold dark:text-white flex items-center gap-2 mb-2\">\r\n                                {profile.firstName || 'User'} {profile.lastName || ''}\r\n                                {profile.isVerified && <Shield size={22} className=\"text-blue-500 fill-blue-500 text-white\" />}\r\n                            </h1>\r\n                            <div className=\"flex flex-wrap gap-2 text-sm text-gray-500 dark:text-gray-400 font-medium mb-4\">\r\n                                {(profile.accountTypes || ['Creative']).map((role, i) => (\r\n                                    <span key={i} className=\"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-xs font-bold\">\r\n                                        {role}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                            \r\n                            {/* Follower/Following Stats */}\r\n                            <FollowStats\r\n                                followersCount={socialStats.followersCount || 0}\r\n                                followingCount={socialStats.followingCount || 0}\r\n                                onFollowersClick={() => handleOpenFollowers('followers')}\r\n                                onFollowingClick={() => handleOpenFollowers('following')}\r\n                                size=\"md\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* STATS GRID */}\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 py-6 border-y dark:border-gray-800 mb-8\">\r\n                            <div className=\"text-center md:text-left\">\r\n                                <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">Rating</div>\r\n                                <div className=\"flex items-center justify-center md:justify-start gap-1\">\r\n                                    <span className=\"text-xl font-bold dark:text-white\">{profile.rating || 'New'}</span>\r\n                                    {profile.rating > 0 && <StarRating rating={profile.rating} size={14} />}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-center md:text-left\">\r\n                                <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">Experience</div>\r\n                                <div className=\"text-xl font-bold dark:text-white\">{profile.yearsExp || '1+'} <span className=\"text-sm font-medium text-gray-500\">Yrs</span></div>\r\n                            </div>\r\n                            <div className=\"text-center md:text-left\">\r\n                                <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">Response</div>\r\n                                <div className=\"text-xl font-bold dark:text-white\">~1 <span className=\"text-sm font-medium text-gray-500\">Hr</span></div>\r\n                            </div>\r\n                            <div className=\"text-center md:text-left\">\r\n                                <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">Bookings</div>\r\n                                <div className=\"text-xl font-bold dark:text-white\">{profile.completedJobs || 0}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* BIO SECTION */}\r\n                        <div className=\"mb-8\">\r\n                            <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n                                <User size={14}/> About\r\n                            </h3>\r\n                            <div className=\"bg-gray-50 dark:bg-[#252830] p-5 rounded-xl border dark:border-gray-800\">\r\n                                <p className=\"text-gray-700 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line\">\r\n                                    {profile.bio || \"No biography provided yet.\"}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* SKILLS & GENRES */}\r\n                        {(profile.genres?.length > 0 || profile.instruments?.length > 0) && (\r\n                            <div className=\"mb-8\">\r\n                                <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n                                    <Music size={14}/> Sound Profile\r\n                                </h3>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {profile.genres?.map(g => (\r\n                                        <span key={g} className=\"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-bold border border-purple-100 dark:border-purple-800\">\r\n                                            {g}\r\n                                        </span>\r\n                                    ))}\r\n                                    {profile.instruments?.map(i => (\r\n                                        <span key={i} className=\"px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-brand-blue dark:text-blue-300 rounded-lg text-xs font-bold border border-blue-100 dark:border-blue-800\">\r\n                                            {i}\r\n                                        </span>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* EQUIPMENT LIST */}\r\n                        {profile.equipmentList?.length > 0 && (\r\n                            <div className=\"mb-8\">\r\n                                <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n                                    <Briefcase size={14}/> Select Gear\r\n                                </h3>\r\n                                <div className=\"bg-gray-50 dark:bg-[#252830] rounded-xl p-4 border dark:border-gray-800\">\r\n                                    <ul className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-400\">\r\n                                        {profile.equipmentList.slice(0, 10).map((item, i) => (\r\n                                            <li key={i} className=\"flex items-start gap-2\">\r\n                                                <CheckCircle size={14} className=\"text-brand-blue shrink-0 mt-0.5\"/> \r\n                                                <span className=\"truncate\">{item}</span>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                    {profile.equipmentList.length > 10 && (\r\n                                        <div className=\"mt-3 pt-3 border-t dark:border-gray-700 text-center\">\r\n                                            <span className=\"text-xs text-gray-400 font-medium italic\">\r\n                                                +{profile.equipmentList.length - 10} more items available\r\n                                            </span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Followers/Following Modal */}\r\n      {showFollowersModal && (\r\n          <FollowersListModal\r\n              userId={userId}\r\n              userName={`${profile?.firstName || ''} ${profile?.lastName || ''}`.trim() || 'User'}\r\n              initialTab={followersModalTab}\r\n              currentUser={currentUser}\r\n              currentUserData={currentUserData}\r\n              isFollowing={isFollowing}\r\n              toggleFollow={toggleFollow}\r\n              onClose={() => setShowFollowersModal(false)}\r\n              openPublicProfile={(targetId) => {\r\n                  setShowFollowersModal(false);\r\n                  // Re-open with new user - handled by parent\r\n              }}\r\n          />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["StarRating","rating","setRating","interactive","size","hover","setHover","useState","jsx","star","Star","TABS","FollowersListModal","userId","userName","initialTab","currentUser","currentUserData","isFollowing","toggleFollow","onClose","openPublicProfile","activeTab","setActiveTab","followers","setFollowers","following","setFollowing","loading","setLoading","searchQuery","setSearchQuery","useEffect","loadFollowers","followerIds","getFollowers","profiles","getProfilesByIds","profileMap","p","followersList","fid","profile","error","pollInterval","loadFollowing","followingIds","getFollowing","followingList","activeList","filteredList","user","_a","currentUserId","isOwnProfile","handleUserClick","targetUserId","handleToggleFollow","targetUser","jsxs","motion","X","Users","UserCheck","Search","e","Loader2","AnimatePresence","index","UserListItem","isFollowingUser","onToggleFollow","onUserClick","isOwnUser","UserAvatar","FollowButton","FollowStats","followersCount","followingCount","onFollowersClick","onFollowingClick","sizeClasses","numberClasses","PublicProfileModal","onMessage","setProfile","setError","bannerUploading","setBannerUploading","showFollowersModal","setShowFollowersModal","followersModalTab","setFollowersModalTab","isOwner","uploadImage","useVercelImageUpload","useFollowSystem","socialStats","useUserSocialStats","handleOpenFollowers","tab","refreshProfile","profileData","getProfile","handleBannerUpload","file","url","updateProfile","prev","err","LoadingSkeleton","AlertTriangle","Fragment","Camera","DollarSign","MapPin","User","MessageCircle","Shield","role","i","_b","Music","_c","g","_d","_e","Briefcase","item","CheckCircle","targetId"],"mappings":"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"}