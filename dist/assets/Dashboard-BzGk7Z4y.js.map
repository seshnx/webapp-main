{"version":3,"mappings":"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","names":["AnimatedNumber","value","jsx","getGreetingKey","hour","Dashboard","user","userData","setActiveTab","bookingCount","subProfiles","tokenBalance","recentConvos","setRecentConvos","useState","trendingItem","setTrendingItem","profileSchemas","setProfileSchemas","bookingThreshold","setBookingThreshold","notifications","unreadCount","useNotifications","convexAvailable","isConvexAvailable","conversationsQuery","useMemo","conversationsData","useQuery","api","useEffect","timer","__vitePreload","mod","err","t","useLanguage","greetingKey","greetingEmoji","greeting","isStudio","_a","studioRooms","_b","profileViews","roles","avgCompletion","showCompletionWarning","totalPct","roleCount","role","data","talentData","schema","relevantFields","f","totalFields","filledFields","completion","GlassStatCard","title","icon","gradient","onClick","trend","trendUp","jsxs","motion","ArrowUpRight","QuickActionButton","label","description","color","ArrowRight","ActivityItem","notification","formatTime","getActivityIcon","type","Users","Heart","MessageCircle","Mic2","Calendar","Bell","Clock","convos","conv","b","supabase","error","channel","formatNotificationTime","ts","date","diffMs","diffMins","diffHours","_c","Zap","Eye","AnimatePresence","Target","Sparkles","Activity","n","i","Headphones","Radio","room","idx","CheckCircle","AlertTriangle","c","Flame","_d","r","Fragment","_e","_f","Edit2","_g","Search","ShoppingBag","Play","Crown","Star","total","filled","pct"],"ignoreList":[],"sources":["../../src/components/shared/AnimatedNumber.jsx","../../src/components/Dashboard.jsx"],"sourcesContent":["import React from 'react';\r\n\r\n/**\r\n * AnimatedNumber - Displays a formatted number\r\n * Simplified to avoid TDZ issues - animation removed temporarily\r\n */\r\nexport default function AnimatedNumber({ value }) {\r\n    // Direct display without animation to avoid TDZ issues with useState during module initialization\r\n    return <span>{value.toLocaleString()}</span>;\r\n}\r\n\r\n","// Import React and hooks first to ensure they're available\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { \r\n    Calendar, User, MessageCircle, Search, Edit2, Zap, Sliders, \r\n    ArrowRight, Bell, Music, TrendingUp, Clock, AlertTriangle, \r\n    CheckCircle, XCircle, ShoppingBag, ChevronRight, Sparkles,\r\n    Headphones, Radio, Mic2, Play, Heart, Star, ArrowUpRight,\r\n    Wallet, Users, Eye, Activity, BarChart3, Crown, Flame, Target\r\n} from 'lucide-react';\r\nimport { useQuery } from \"convex/react\";\r\nimport { api } from \"../../convex/_generated/api\";\r\nimport { isConvexAvailable } from '../config/convex';\r\nimport { supabase } from '../config/supabase'; \r\nimport { useNotifications } from '../hooks/useNotifications';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport AnimatedNumber from './shared/AnimatedNumber';\r\nimport { useLanguage } from '../contexts/LanguageContext';\r\n\r\n// Get time-based greeting key - will be translated in component\r\nconst getGreetingKey = () => {\r\n    const hour = new Date().getHours();\r\n    if (hour < 12) return 'goodMorning';\r\n    if (hour < 17) return 'goodAfternoon';\r\n    if (hour < 21) return 'goodEvening';\r\n    return 'goodNight';\r\n};\r\n\r\nexport default function Dashboard({ \r\n    user, \r\n    userData, \r\n    setActiveTab, \r\n    bookingCount = 0, \r\n    subProfiles = {}, \r\n    tokenBalance = 0 \r\n}) {\r\n    // ===== ALL HOOKS MUST BE CALLED FIRST (React Rules) =====\r\n    // Initialize state first to avoid TDZ issues\r\n    const [recentConvos, setRecentConvos] = useState([]);\r\n    const [trendingItem, setTrendingItem] = useState(null);\r\n    const [profileSchemas, setProfileSchemas] = useState(null);\r\n    const [bookingThreshold, setBookingThreshold] = useState(60);\r\n\r\n    // Real-time notifications from Supabase\r\n    const { notifications, unreadCount } = useNotifications(user?.id || user?.uid);\r\n\r\n    // Check Convex availability directly to avoid hook initialization issues\r\n    const convexAvailable = isConvexAvailable();\r\n    const conversationsQuery = useMemo(() => {\r\n        return (user?.id || user?.uid) && convexAvailable ? { userId: user?.id || user?.uid } : \"skip\";\r\n    }, [user?.uid, convexAvailable]);\r\n\r\n    const conversationsData = useQuery(\r\n        api.conversations.getConversations,\r\n        conversationsQuery\r\n    );\r\n\r\n    // Load constants asynchronously after component mounts\r\n    useEffect(() => {\r\n        // Use a small delay to ensure module initialization is complete\r\n        const timer = setTimeout(() => {\r\n            import('../config/constants').then(mod => {\r\n                if (mod.PROFILE_SCHEMAS) {\r\n                    setProfileSchemas(mod.PROFILE_SCHEMAS);\r\n                }\r\n                if (mod.BOOKING_THRESHOLD) {\r\n                    setBookingThreshold(mod.BOOKING_THRESHOLD);\r\n                }\r\n            }).catch(err => {\r\n                console.warn('Failed to load constants:', err);\r\n                // Set empty object as fallback\r\n                setProfileSchemas({});\r\n            });\r\n        }, 0);\r\n        \r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    // ===== DERIVED VALUES (after hooks) =====\r\n    const { t } = useLanguage();\r\n    const greetingKey = getGreetingKey();\r\n    const greetingEmoji = greetingKey === 'goodMorning' ? 'â˜€ï¸' : greetingKey === 'goodAfternoon' ? 'ðŸŒ¤ï¸' : greetingKey === 'goodEvening' ? 'ðŸŒ…' : 'ðŸŒ™';\r\n    const greeting = { text: t(greetingKey), emoji: greetingEmoji };\r\n    const isStudio = userData?.accountTypes?.includes('Studio');\r\n    const studioRooms = subProfiles?.['Studio']?.rooms || [];\r\n    const profileViews = userData?.profileViews || 0;\r\n    const roles = userData?.accountTypes || [];\r\n\r\n    // Calculate Overall Completion for Banner (only when constants are loaded)\r\n    const { avgCompletion, showCompletionWarning } = useMemo(() => {\r\n        if (!profileSchemas) {\r\n            return { avgCompletion: 100, showCompletionWarning: false };\r\n        }\r\n        \r\n        let totalPct = 0;\r\n        let roleCount = 0;\r\n\r\n        roles.forEach(role => {\r\n            const data = subProfiles?.[role] || {};\r\n            // Also check userData for Talent subRole\r\n            const talentData = role === 'Talent' ? { ...data, talentSubRole: userData?.talentSubRole } : data;\r\n            const schema = profileSchemas[role] || [];\r\n            if (schema.length === 0) return;\r\n            \r\n            // Filter out toggle fields and list fields, but include subRole fields\r\n            const relevantFields = schema.filter(f => !f.isToggle && f.type !== 'list');\r\n            const totalFields = relevantFields.length || 1;\r\n            \r\n            const filledFields = relevantFields.filter(f => {\r\n                const value = f.isSubRole ? talentData[f.key] : data[f.key];\r\n                // Check if the value is truthy and has content\r\n                if (value === null || value === undefined) return false;\r\n                if (Array.isArray(value)) return value.length > 0;\r\n                if (typeof value === 'string') return value.trim().length > 0;\r\n                if (typeof value === 'number') return true;\r\n                return !!value;\r\n            }).length;\r\n            \r\n            totalPct += (filledFields / totalFields);\r\n            roleCount++;\r\n        });\r\n        \r\n        const completion = roleCount > 0 ? Math.round((totalPct / roleCount) * 100) : 100;\r\n        return { \r\n            avgCompletion: completion, \r\n            showCompletionWarning: completion < 60 \r\n        };\r\n    }, [profileSchemas, roles, subProfiles, userData?.talentSubRole]);\r\n\r\n    // ===== COMPONENT DEFINITIONS (after all hooks and derived values) =====\r\n    // Glassmorphic stat card - using Suspense for AnimatedNumber to avoid TDZ issues\r\n    const GlassStatCard = ({ title, value, icon, gradient, onClick, trend, trendUp }) => (\r\n        <motion.div\r\n            whileHover={{ scale: 1.02, y: -4 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            onClick={onClick}\r\n            className={`relative p-5 rounded-[1.25rem] cursor-pointer overflow-hidden group ${gradient}`}\r\n        >\r\n            {/* Animated background elements */}\r\n            <div className=\"absolute inset-0 opacity-30\">\r\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full blur-2xl transform translate-x-16 -translate-y-16 group-hover:scale-150 transition-transform duration-700\" />\r\n                <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full blur-xl transform -translate-x-8 translate-y-8\" />\r\n            </div>\r\n            \r\n            <div className=\"relative z-10\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                    <div className=\"p-2.5 bg-white/20 backdrop-blur-sm rounded-xl\">\r\n                        {icon}\r\n                    </div>\r\n                    {trend && (\r\n                        <div className={`flex items-center gap-1 text-xs font-bold ${trendUp ? 'text-green-300' : 'text-red-300'}`}>\r\n                            <ArrowUpRight size={14} className={!trendUp ? 'rotate-90' : ''} />\r\n                            {trend}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"text-3xl font-black text-white mb-1\">\r\n                    <AnimatedNumber value={value} />\r\n                </div>\r\n                <div className=\"text-white/80 text-sm font-medium\">{title}</div>\r\n            </div>\r\n            \r\n            {/* Hover shine effect */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n        </motion.div>\r\n    );\r\n\r\n    // Quick action button with enhanced styling - moved inside to avoid TDZ issues\r\n    const QuickActionButton = ({ icon, label, description, onClick, color }) => (\r\n        <motion.button\r\n            whileHover={{ scale: 1.01, x: 4 }}\r\n            whileTap={{ scale: 0.99 }}\r\n            onClick={onClick}\r\n            className=\"w-full text-left px-4 py-3.5 rounded-xl border dark:border-gray-700/50 hover:border-gray-300 dark:hover:border-gray-600 bg-white dark:bg-[#1f2128] hover:shadow-lg dark:hover:shadow-black/20 transition-all duration-300 group\"\r\n        >\r\n            <div className=\"flex items-center gap-4\">\r\n                <div className={`p-2.5 rounded-xl ${color} group-hover:scale-110 transition-transform duration-300`}>\r\n                    {icon}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <span className=\"font-semibold dark:text-white block\">{label}</span>\r\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">{description}</span>\r\n                </div>\r\n                <ArrowRight size={16} className=\"text-gray-400 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-300\" />\r\n            </div>\r\n        </motion.button>\r\n    );\r\n\r\n    // Activity item with better styling - moved inside to avoid TDZ issues\r\n    const ActivityItem = ({ notification, onClick, formatTime }) => {\r\n        const getActivityIcon = (type) => {\r\n            switch (type) {\r\n                case 'follow': return { icon: <Users size={14} />, color: 'bg-blue-500' };\r\n                case 'like': return { icon: <Heart size={14} />, color: 'bg-red-500' };\r\n                case 'comment': return { icon: <MessageCircle size={14} />, color: 'bg-green-500' };\r\n                case 'mention': return { icon: <Mic2 size={14} />, color: 'bg-purple-500' };\r\n                case 'booking': return { icon: <Calendar size={14} />, color: 'bg-amber-500' };\r\n                default: return { icon: <Bell size={14} />, color: 'bg-gray-500' };\r\n            }\r\n        };\r\n        \r\n        const { icon, color } = getActivityIcon(notification.type);\r\n        \r\n        return (\r\n            <motion.div\r\n                initial={{ opacity: 0, x: -20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                whileHover={{ x: 4, backgroundColor: 'rgba(59, 130, 246, 0.05)' }}\r\n                onClick={onClick}\r\n                className={`p-4 cursor-pointer transition-colors duration-200 ${!notification.read ? 'bg-gradient-to-r from-blue-50/50 to-transparent dark:from-blue-900/10' : ''}`}\r\n            >\r\n                <div className=\"flex items-start gap-3\">\r\n                    <div className={`${color} p-2 rounded-full text-white shrink-0`}>\r\n                        {icon}\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm dark:text-gray-200\">\r\n                            <span className=\"font-semibold\">{notification.fromUserName}</span>{' '}\r\n                            <span className=\"text-gray-600 dark:text-gray-400\">{notification.message}</span>\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-400 mt-1 flex items-center gap-1\">\r\n                            <Clock size={10} />\r\n                            {formatTime(notification.timestamp)}\r\n                        </p>\r\n                    </div>\r\n                    {!notification.read && (\r\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse shrink-0 mt-2\" />\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        );\r\n    };\r\n\r\n    // ===== EFFECTS AND DATA FETCHING (after component definitions) =====\r\n    // Process conversations data when it changes\r\n    useEffect(() => {\r\n        if (!conversationsData) {\r\n            setRecentConvos([]);\r\n            return;\r\n        }\r\n        const convos = conversationsData\r\n            .map(conv => ({\r\n                uid: conv.otherUserId || conv.chatId,\r\n                name: conv.chatName || 'Unknown',\r\n                lastMessage: conv.lastMessage || '',\r\n                timestamp: conv.lastMessageTime || 0,\r\n                isMe: conv.lastSenderId === (user?.id || user?.uid),\r\n                photo: conv.chatPhoto\r\n            }))\r\n            .sort((a, b) => b.timestamp - a.timestamp)\r\n            .slice(0, 4);\r\n        setRecentConvos(convos);\r\n    }, [conversationsData, user?.id, user?.uid]);\r\n\r\n    useEffect(() => {\r\n        if (!supabase) return;\r\n        \r\n        // Initial fetch - use maybeSingle() to handle empty results gracefully\r\n        supabase\r\n            .from('market_items')\r\n            .select('*')\r\n            .eq('status', 'active') // Filter by active status to match RLS policy\r\n            .order('created_at', { ascending: false })\r\n            .limit(1)\r\n            .maybeSingle()\r\n            .then(({ data, error }) => {\r\n                if (error) {\r\n                    // Only log non-404/406 errors (404 means table doesn't exist, 406 might be RLS/format issue)\r\n                    if (error.code !== 'PGRST116' && error.code !== 'PGRST301' && !error.message?.includes('does not exist')) {\r\n                        console.warn('Error fetching trending item:', error.message, error.code);\r\n                    }\r\n                    return;\r\n                }\r\n                if (data) {\r\n                    setTrendingItem({ \r\n                        id: data.id, \r\n                        ...data,\r\n                        timestamp: data.created_at\r\n                    });\r\n                }\r\n            });\r\n        \r\n        // Subscribe to changes (only if table exists)\r\n        const channel = supabase\r\n            .channel('trending-item')\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'market_items'\r\n                },\r\n                async () => {\r\n                    const { data, error } = await supabase\r\n                        .from('market_items')\r\n                        .select('*')\r\n                        .eq('status', 'active') // Filter by active status to match RLS policy\r\n                        .order('created_at', { ascending: false })\r\n                        .limit(1)\r\n                        .maybeSingle();\r\n                    \r\n                    if (error) {\r\n                        // Silently handle errors (table might not exist or RLS issue)\r\n                        return;\r\n                    }\r\n                    if (data) {\r\n                        setTrendingItem({ \r\n                            id: data.id, \r\n                            ...data,\r\n                            timestamp: data.created_at\r\n                        });\r\n                    }\r\n                }\r\n            )\r\n            .subscribe();\r\n        \r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, []);\r\n\r\n    const formatNotificationTime = (ts) => {\r\n        if (!ts) return 'Just now';\r\n        let date;\r\n        if (typeof ts.toMillis === 'function') {\r\n            date = new Date(ts.toMillis());\r\n        } else if (typeof ts === 'number') {\r\n            date = new Date(ts);\r\n        } else if (ts instanceof Date) {\r\n            date = ts;\r\n        } else {\r\n            return 'Just now';\r\n        }\r\n        if (isNaN(date.getTime())) return 'Just now';\r\n        const now = new Date();\r\n        const diffMs = now - date;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMins / 60);\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen pb-24 px-fluid pt-fluid\">\r\n            {/* Hero Section with Gradient Background */}\r\n            <div className=\"relative overflow-hidden rounded-3xl md:rounded-[2rem] shadow-2xl max-w-7xl mx-auto\">\r\n                {/* Animated gradient background */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-br from-brand-blue via-purple-600 to-pink-500 opacity-90\" />\r\n                <div className=\"absolute inset-0\">\r\n                    <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse\" />\r\n                    <div className=\"absolute top-0 right-1/4 w-96 h-96 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse\" style={{ animationDelay: '1s' }} />\r\n                    <div className=\"absolute bottom-0 left-1/3 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse\" style={{ animationDelay: '2s' }} />\r\n                </div>\r\n                \r\n                {/* Grid pattern overlay */}\r\n                <div \r\n                    className=\"absolute inset-0 opacity-10\"\r\n                    style={{\r\n                        backgroundImage: `linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,\r\n                        backgroundSize: '50px 50px'\r\n                    }}\r\n                />\r\n\r\n                <div className=\"relative z-10 px-5 md:px-8 py-8 md:py-12\">\r\n                    {/* Header */}\r\n                    <motion.div \r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.6 }}\r\n                        className=\"flex flex-col md:flex-row justify-between md:items-end gap-6 mb-10\"\r\n                    >\r\n                        <div>\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <span className=\"text-2xl\">{greeting.emoji}</span>\r\n                                <span className=\"text-white/80 text-lg font-medium\">{greeting.text}</span>\r\n                            </div>\r\n                            <h1 className=\"text-4xl md:text-5xl font-black text-white tracking-tight\">\r\n                                {userData?.effectiveDisplayName || \r\n                                 userData?.displayName ||\r\n                                 (userData?.firstName && userData?.lastName ? `${userData.firstName} ${userData.lastName}` : userData?.firstName || userData?.lastName) ||\r\n                                 userData?.email?.split('@')[0] ||\r\n                                 'Creator'}\r\n                            </h1>\r\n                            <p className=\"text-white/60 mt-2 text-lg\">Your creative command center</p>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center gap-3\">\r\n                            <motion.div \r\n                                whileHover={{ scale: 1.05 }}\r\n                                className=\"bg-white/10 backdrop-blur-md border border-white/20 px-5 py-2.5 rounded-full flex items-center gap-2 text-white\"\r\n                            >\r\n                                <Clock size={16} className=\"text-white/70\" />\r\n                                <span className=\"text-sm font-medium\">\r\n                                    {new Date().toLocaleDateString(undefined, { weekday: 'short', month: 'short', day: 'numeric' })}\r\n                                </span>\r\n                            </motion.div>\r\n                            \r\n                            <motion.button\r\n                                whileHover={{ scale: 1.05 }}\r\n                                whileTap={{ scale: 0.95 }}\r\n                                onClick={() => setActiveTab('feed')}\r\n                                className=\"relative bg-white text-gray-900 px-5 py-2.5 rounded-full font-bold text-sm flex items-center gap-2 shadow-lg hover:shadow-xl transition-shadow\"\r\n                            >\r\n                                <Bell size={16} />\r\n                                {unreadCount > 0 && (\r\n                                    <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-bounce\">\r\n                                        {unreadCount}\r\n                                    </span>\r\n                                )}\r\n                            </motion.button>\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    {/* Stats Grid */}\r\n                    <motion.div \r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ duration: 0.6, delay: 0.2 }}\r\n                        className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\"\r\n                    >\r\n                        <GlassStatCard\r\n                            title=\"SeshFx Balance\"\r\n                            value={tokenBalance}\r\n                            icon={<Zap size={20} className=\"text-white\" fill=\"currentColor\" />}\r\n                            gradient=\"bg-gradient-to-br from-amber-500/90 to-orange-600/90 backdrop-blur-sm\"\r\n                            onClick={() => setActiveTab('payments')}\r\n                            trend=\"+12%\"\r\n                            trendUp={true}\r\n                        />\r\n                        <GlassStatCard\r\n                            title=\"Pending Bookings\"\r\n                            value={bookingCount}\r\n                            icon={<Calendar size={20} className=\"text-white\" />}\r\n                            gradient=\"bg-gradient-to-br from-blue-500/90 to-indigo-600/90 backdrop-blur-sm\"\r\n                            onClick={() => setActiveTab('bookings')}\r\n                        />\r\n                        <GlassStatCard\r\n                            title=\"Active Chats\"\r\n                            value={recentConvos.length}\r\n                            icon={<MessageCircle size={20} className=\"text-white\" />}\r\n                            gradient=\"bg-gradient-to-br from-emerald-500/90 to-teal-600/90 backdrop-blur-sm\"\r\n                            onClick={() => setActiveTab('messages')}\r\n                        />\r\n                        <GlassStatCard\r\n                            title=\"Profile Views\"\r\n                            value={profileViews}\r\n                            icon={<Eye size={20} className=\"text-white\" />}\r\n                            gradient=\"bg-gradient-to-br from-pink-500/90 to-rose-600/90 backdrop-blur-sm\"\r\n                            onClick={() => setActiveTab('profile')}\r\n                            trend=\"+8%\"\r\n                            trendUp={true}\r\n                        />\r\n                    </motion.div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"max-w-7xl mx-auto mt-6 md:mt-8 relative z-20\">\r\n                {/* Completion Warning Banner */}\r\n                <AnimatePresence>\r\n                    {showCompletionWarning && (\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: -20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -20 }}\r\n                            className=\"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800/50 rounded-[1.25rem] p-5 flex flex-col md:flex-row items-start md:items-center justify-between gap-4 shadow-lg\"\r\n                        >\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"bg-gradient-to-br from-amber-400 to-orange-500 p-3 rounded-xl text-white shadow-lg\">\r\n                                    <Target size={24} />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-amber-800 dark:text-amber-300 flex items-center gap-2\">\r\n                                        Complete Your Profile\r\n                                        <span className=\"text-sm font-normal bg-amber-200 dark:bg-amber-800 px-2 py-0.5 rounded-full\">\r\n                                            {avgCompletion}%\r\n                                        </span>\r\n                                    </h4>\r\n                                    <p className=\"text-sm text-amber-700 dark:text-amber-400\">\r\n                                        A complete profile increases your visibility and booking chances\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <motion.button \r\n                                whileHover={{ scale: 1.05 }}\r\n                                whileTap={{ scale: 0.95 }}\r\n                                onClick={() => setActiveTab('profile')} \r\n                                className=\"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold px-6 py-2.5 rounded-xl transition shadow-lg flex items-center gap-2\"\r\n                            >\r\n                                <Sparkles size={16} />\r\n                                Complete Now\r\n                            </motion.button>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Left Column: Main Feeds */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        \r\n                        {/* Activity Feed */}\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.3 }}\r\n                            className=\"bg-white dark:bg-[#1f2128] rounded-[1.25rem] border dark:border-gray-800 overflow-hidden shadow-xl\"\r\n                        >\r\n                            <div className=\"p-5 border-b dark:border-gray-800 flex justify-between items-center bg-gradient-to-r from-gray-50 to-white dark:from-[#23262f] dark:to-[#1f2128]\">\r\n                                <h3 className=\"font-bold dark:text-white flex items-center gap-2\">\r\n                                    <div className=\"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\r\n                                        <Activity size={16} className=\"text-blue-600 dark:text-blue-400\" />\r\n                                    </div>\r\n                                    {t('activityFeed')}\r\n                                </h3>\r\n                                {unreadCount > 0 && (\r\n                                    <span className=\"bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs px-3 py-1 rounded-full font-bold animate-pulse shadow-lg\">\r\n                                        {unreadCount} New\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"divide-y dark:divide-gray-800\">\r\n                                {(!notifications || notifications.length === 0) ? (\r\n                                    <div className=\"p-12 text-center\">\r\n                                        <div className=\"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-[1.25rem] flex items-center justify-center mx-auto mb-4\">\r\n                                            <Sparkles size={28} className=\"text-gray-400\" />\r\n                                        </div>\r\n                                        <p className=\"text-gray-600 dark:text-gray-400 font-medium\">{t('allCaughtUp')}</p>\r\n                                        <p className=\"text-sm text-gray-400 dark:text-gray-500 mt-1\">{t('noNewNotifications')}</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    notifications.slice(0, 5).map((n, i) => (\r\n                                        <ActivityItem\r\n                                            key={n.id || i}\r\n                                            notification={n}\r\n                                            onClick={() => setActiveTab('feed')}\r\n                                            formatTime={formatNotificationTime}\r\n                                        />\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                            {notifications?.length > 5 && (\r\n                                <div className=\"p-4 border-t dark:border-gray-800 bg-gray-50 dark:bg-[#1a1c23]\">\r\n                                    <button \r\n                                        onClick={() => setActiveTab('feed')}\r\n                                        className=\"w-full text-center text-sm text-brand-blue font-semibold hover:underline\"\r\n                                    >\r\n                                        {t('viewAllActivity')} â†’\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n\r\n                        {/* Studio Overview */}\r\n                        {isStudio && (\r\n                            <motion.div \r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: 0.4 }}\r\n                                className=\"bg-white dark:bg-[#1f2128] rounded-[1.25rem] border dark:border-gray-800 overflow-hidden shadow-xl\"\r\n                            >\r\n                                <div className=\"p-5 border-b dark:border-gray-800 flex justify-between items-center bg-gradient-to-r from-purple-50 to-white dark:from-purple-900/10 dark:to-[#1f2128]\">\r\n                                    <h3 className=\"font-bold dark:text-white flex items-center gap-2\">\r\n                                        <div className=\"p-1.5 bg-purple-100 dark:bg-purple-900/30 rounded-lg\">\r\n                                            <Headphones size={16} className=\"text-purple-600 dark:text-purple-400\" />\r\n                                        </div>\r\n                                        Studio Status\r\n                                    </h3>\r\n                                    <button \r\n                                        onClick={() => setActiveTab('studio-ops')} \r\n                                        className=\"text-sm text-purple-600 dark:text-purple-400 hover:underline flex items-center gap-1 font-medium\"\r\n                                    >\r\n                                        {t('manage')} <ArrowRight size={14}/>\r\n                                    </button>\r\n                                </div>\r\n                                \r\n                                <div className=\"p-5\">\r\n                                    {studioRooms.length === 0 ? (\r\n                                        <div className=\"text-center py-8 border-2 border-dashed dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-[#1a1c23]\">\r\n                                            <Radio size={32} className=\"mx-auto mb-3 text-gray-400\" />\r\n                                            <p className=\"text-gray-500 mb-3\">{t('noRoomsConfigured')}</p>\r\n                                            <button \r\n                                                onClick={() => setActiveTab('studio-ops')}\r\n                                                className=\"text-purple-600 font-bold hover:underline\"\r\n                                            >\r\n                                                {t('addFirstRoom')}\r\n                                            </button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                            {studioRooms.map((room, idx) => (\r\n                                                <motion.div \r\n                                                    key={idx}\r\n                                                    whileHover={{ scale: 1.02 }}\r\n                                                    className=\"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#1a1c23] dark:to-[#23262f] p-4 rounded-xl border dark:border-gray-700/50\"\r\n                                                >\r\n                                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                                        <div className=\"font-bold dark:text-white\">{room.name}</div>\r\n                                                        <span className={`text-xs px-2.5 py-1 rounded-full font-bold flex items-center gap-1 ${\r\n                                                            room.active \r\n                                                                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' \r\n                                                                : 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400'\r\n                                                        }`}>\r\n                                                            {room.active ? <CheckCircle size={10}/> : <AlertTriangle size={10}/>}\r\n                                                            {room.active ? 'Active' : 'Maint.'}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400\">\r\n                                                        <span>{room.equipment?.length || 0} items</span>\r\n                                                        <span>â€¢</span>\r\n                                                        <span className=\"font-bold text-green-600 dark:text-green-400\">${room.rate}/hr</span>\r\n                                                    </div>\r\n                                                </motion.div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Recent Messages */}\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.5 }}\r\n                            className=\"bg-white dark:bg-[#1f2128] rounded-[1.25rem] border dark:border-gray-800 overflow-hidden shadow-xl\"\r\n                        >\r\n                            <div className=\"p-5 border-b dark:border-gray-800 flex justify-between items-center bg-gradient-to-r from-emerald-50 to-white dark:from-emerald-900/10 dark:to-[#1f2128]\">\r\n                                <h3 className=\"font-bold dark:text-white flex items-center gap-2\">\r\n                                    <div className=\"p-1.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg\">\r\n                                        <MessageCircle size={16} className=\"text-emerald-600 dark:text-emerald-400\" />\r\n                                    </div>\r\n                                    {t('recentMessages')}\r\n                                </h3>\r\n                                <button \r\n                                    onClick={() => setActiveTab('messages')} \r\n                                    className=\"text-sm text-emerald-600 dark:text-emerald-400 hover:underline font-medium\"\r\n                                >\r\n                                    {t('viewAll')}\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"p-4 space-y-2\">\r\n                                {recentConvos.length === 0 ? (\r\n                                    <div className=\"text-center text-gray-400 py-8\">\r\n                                        <MessageCircle size={32} className=\"mx-auto mb-3 opacity-50\" />\r\n                                        <p className=\"font-medium\">{t('noMessages')}</p>\r\n                                        <p className=\"text-sm text-gray-400\">{t('startConversation')}!</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    recentConvos.map((c, i) => (\r\n                                        <motion.div \r\n                                            key={c.uid + i}\r\n                                            whileHover={{ x: 4, backgroundColor: 'rgba(16, 185, 129, 0.05)' }}\r\n                                            onClick={() => setActiveTab('messages')}\r\n                                            className=\"flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all\"\r\n                                        >\r\n                                            <div className=\"relative\">\r\n                                                {c.photo ? (\r\n                                                    <img src={c.photo} className=\"h-10 w-10 rounded-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center text-white font-bold\">\r\n                                                        {c.name?.charAt(0) || '?'}\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white dark:border-[#1f2128] rounded-full\" />\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <div className=\"flex justify-between items-center mb-0.5\">\r\n                                                    <span className=\"font-semibold dark:text-white truncate\">{c.name || t('unknownUser')}</span>\r\n                                                    <span className=\"text-[10px] text-gray-400 shrink-0 ml-2\">\r\n                                                        {new Date(c.timestamp).toLocaleDateString()}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\r\n                                                    {c.isMe && <span className=\"text-gray-400\">{t('you')}: </span>}\r\n                                                    {c.lastMessage}\r\n                                                </p>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                    \r\n                    {/* Right Column: Actions & Discovery */}\r\n                    <div className=\"space-y-6\">\r\n                        \r\n                        {/* Quick Actions */}\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.3 }}\r\n                            className=\"bg-white dark:bg-[#1f2128] rounded-[1.25rem] border dark:border-gray-800 p-5 shadow-xl\"\r\n                        >\r\n                            <h3 className=\"font-bold mb-4 dark:text-white flex items-center gap-2\">\r\n                                <Flame size={18} className=\"text-orange-500\" />\r\n                                {t('quickActions')}\r\n                            </h3>\r\n                            <div className=\"space-y-3\">\r\n                                {/* Professional role-specific actions */}\r\n                                {userData?.accountTypes?.some(r => ['Talent', 'Producer', 'Engineer', 'Composer'].includes(r)) && (\r\n                                    <>\r\n                                        <QuickActionButton\r\n                                            icon={<Zap size={18} className=\"text-yellow-600\" />}\r\n                                            label=\"Browse Open Gigs\"\r\n                                            description=\"Find work opportunities near you\"\r\n                                            onClick={() => setActiveTab('bookings')}\r\n                                            color=\"bg-yellow-100 dark:bg-yellow-900/30\"\r\n                                        />\r\n                                        <QuickActionButton\r\n                                            icon={<Mic2 size={18} className=\"text-pink-600\" />}\r\n                                            label=\"Update Availability\"\r\n                                            description=\"Let clients know you're open for work\"\r\n                                            onClick={() => setActiveTab('profile')}\r\n                                            color=\"bg-pink-100 dark:bg-pink-900/30\"\r\n                                        />\r\n                                    </>\r\n                                )}\r\n                                \r\n                                {/* Studio-specific actions */}\r\n                                {userData?.accountTypes?.includes('Studio') && (\r\n                                    <QuickActionButton\r\n                                        icon={<Calendar size={18} className=\"text-indigo-600\" />}\r\n                                        label=\"Manage Bookings\"\r\n                                        description=\"View and manage studio sessions\"\r\n                                        onClick={() => setActiveTab('bookings')}\r\n                                        color=\"bg-indigo-100 dark:bg-indigo-900/30\"\r\n                                    />\r\n                                )}\r\n                                \r\n                                {/* Label/Agent-specific actions */}\r\n                                {userData?.accountTypes?.some(r => ['Label', 'Agent'].includes(r)) && (\r\n                                    <QuickActionButton\r\n                                        icon={<Users size={18} className=\"text-teal-600\" />}\r\n                                        label=\"Manage Roster\"\r\n                                        description=\"View and manage your artists\"\r\n                                        onClick={() => setActiveTab('business')}\r\n                                        color=\"bg-teal-100 dark:bg-teal-900/30\"\r\n                                    />\r\n                                )}\r\n                                \r\n                                <QuickActionButton\r\n                                    icon={<Edit2 size={18} className=\"text-blue-600\" />}\r\n                                    label=\"Create Post\"\r\n                                    description=\"Share with your network\"\r\n                                    onClick={() => setActiveTab('feed')}\r\n                                    color=\"bg-blue-100 dark:bg-blue-900/30\"\r\n                                />\r\n                                \r\n                                {/* Find talent for non-professional roles */}\r\n                                {!userData?.accountTypes?.some(r => ['Talent', 'Producer', 'Engineer', 'Composer', 'Studio'].includes(r)) && (\r\n                                    <QuickActionButton\r\n                                        icon={<Search size={18} className=\"text-purple-600\" />}\r\n                                        label=\"Find Talent\"\r\n                                        description=\"Discover collaborators\"\r\n                                        onClick={() => setActiveTab('bookings')}\r\n                                        color=\"bg-purple-100 dark:bg-purple-900/30\"\r\n                                    />\r\n                                )}\r\n                                \r\n                                <QuickActionButton\r\n                                    icon={<ShoppingBag size={18} className=\"text-amber-600\" />}\r\n                                    label=\"Marketplace\"\r\n                                    description=\"Buy & sell gear\"\r\n                                    onClick={() => setActiveTab('marketplace')}\r\n                                    color=\"bg-amber-100 dark:bg-amber-900/30\"\r\n                                />\r\n                            </div>\r\n                        </motion.div>\r\n\r\n                        {/* Trending Promo Card */}\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.4 }}\r\n                            className=\"relative rounded-[1.25rem] overflow-hidden shadow-xl\"\r\n                        >\r\n                            {/* Animated gradient background */}\r\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-violet-600 via-purple-600 to-fuchsia-600\" />\r\n                            <div className=\"absolute inset-0\">\r\n                                <div className=\"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl animate-pulse\" />\r\n                                <div className=\"absolute bottom-0 left-0 w-32 h-32 bg-pink-500/20 rounded-full blur-2xl animate-pulse\" style={{ animationDelay: '1s' }} />\r\n                            </div>\r\n                            \r\n                            <div className=\"relative z-10 p-6\">\r\n                                <div className=\"flex items-center gap-2 mb-4\">\r\n                                    <div className=\"bg-white/20 backdrop-blur-sm p-2 rounded-lg\">\r\n                                        <Zap size={18} className=\"text-yellow-300\" fill=\"currentColor\" />\r\n                                    </div>\r\n                                    <span className=\"text-xs font-bold text-yellow-300 uppercase tracking-wider\">Trending on SeshFx</span>\r\n                                </div>\r\n                                \r\n                                {trendingItem ? (\r\n                                    <>\r\n                                        <h4 className=\"font-black text-xl text-white mb-1 truncate\">{trendingItem.title}</h4>\r\n                                        <p className=\"text-white/60 text-sm mb-4\">by {trendingItem.author} â€¢ {trendingItem.price} Tokens</p>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <h4 className=\"font-black text-xl text-white mb-1\">Discover New Sounds</h4>\r\n                                        <p className=\"text-white/60 text-sm mb-4\">Fresh beats & presets daily</p>\r\n                                    </>\r\n                                )}\r\n                                \r\n                                <motion.button \r\n                                    whileHover={{ scale: 1.02 }}\r\n                                    whileTap={{ scale: 0.98 }}\r\n                                    onClick={() => setActiveTab('seshfx')} \r\n                                    className=\"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all\"\r\n                                >\r\n                                    <Play size={16} fill=\"currentColor\" />\r\n                                    Visit Store\r\n                                </motion.button>\r\n                            </div>\r\n                        </motion.div>\r\n                        \r\n                        {/* Profile Completion */}\r\n                        <motion.div \r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.5 }}\r\n                            className=\"bg-white dark:bg-[#1f2128] rounded-[1.25rem] border dark:border-gray-800 p-5 shadow-xl\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h3 className=\"font-bold dark:text-white flex items-center gap-2\">\r\n                                    <Crown size={18} className=\"text-amber-500\" />\r\n                                    Profile Health\r\n                                </h3>\r\n                                <span className={`text-sm font-bold ${avgCompletion >= 80 ? 'text-green-500' : avgCompletion >= 50 ? 'text-amber-500' : 'text-red-500'}`}>\r\n                                    {avgCompletion}%\r\n                                </span>\r\n                            </div>\r\n                            \r\n                            {/* Overall progress ring */}\r\n                            <div className=\"flex items-center gap-4 mb-5 p-4 bg-gray-50 dark:bg-[#1a1c23] rounded-xl\">\r\n                                <div className=\"relative w-16 h-16\">\r\n                                    <svg className=\"w-16 h-16 transform -rotate-90\">\r\n                                        <circle\r\n                                            cx=\"32\"\r\n                                            cy=\"32\"\r\n                                            r=\"28\"\r\n                                            stroke=\"currentColor\"\r\n                                            strokeWidth=\"6\"\r\n                                            fill=\"none\"\r\n                                            className=\"text-gray-200 dark:text-gray-700\"\r\n                                        />\r\n                                        <circle\r\n                                            cx=\"32\"\r\n                                            cy=\"32\"\r\n                                            r=\"28\"\r\n                                            stroke=\"currentColor\"\r\n                                            strokeWidth=\"6\"\r\n                                            fill=\"none\"\r\n                                            strokeDasharray={`${avgCompletion * 1.76} 176`}\r\n                                            className={avgCompletion >= 80 ? 'text-green-500' : avgCompletion >= 50 ? 'text-amber-500' : 'text-red-500'}\r\n                                            strokeLinecap=\"round\"\r\n                                        />\r\n                                    </svg>\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                        <Star size={20} className={avgCompletion >= 80 ? 'text-green-500' : avgCompletion >= 50 ? 'text-amber-500' : 'text-red-500'} fill=\"currentColor\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"font-bold dark:text-white\">\r\n                                        {avgCompletion >= 80 ? 'Looking Great!' : avgCompletion >= 50 ? 'Almost There!' : 'Needs Work'}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-500\">\r\n                                        {avgCompletion < 100 ? 'Complete your profile to boost visibility' : 'Your profile is fully complete'}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"space-y-3\">\r\n                            {profileSchemas && (userData?.accountTypes || []).map(role => {\r\n                                    const data = subProfiles?.[role] || {};\r\n                                    const schema = profileSchemas?.[role] || [];  \r\n                                    if (schema.length === 0) return null;\r\n\r\n                                    const total = schema.filter(f => !f.isToggle && f.type !== 'list').length || 1;\r\n                                    const filled = schema.filter(f => !f.isToggle && f.type !== 'list' && data[f.key] && data[f.key].length).length;\r\n                                    const pct = Math.round((filled/total)*100);\r\n                                    \r\n                                    return (\r\n                                        <motion.div \r\n                                            key={role}\r\n                                            whileHover={{ scale: 1.01 }}\r\n                                            onClick={() => setActiveTab('profile')}\r\n                                            className=\"p-3 rounded-xl bg-gray-50 dark:bg-[#1a1c23] cursor-pointer hover:shadow-md transition-all\"\r\n                                        >\r\n                                            <div className=\"flex justify-between items-center mb-2\">\r\n                                                <span className=\"text-sm font-medium dark:text-gray-300\">{role}</span>\r\n                                                <span className={`text-xs font-bold ${pct >= 80 ? 'text-green-500' : pct >= 50 ? 'text-amber-500' : 'text-red-500'}`}>\r\n                                                    {pct}%\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n                                                <motion.div \r\n                                                    initial={{ width: 0 }}\r\n                                                    animate={{ width: `${pct}%` }}\r\n                                                    transition={{ duration: 1, delay: 0.5 }}\r\n                                                    className={`h-full rounded-full ${pct >= 80 ? 'bg-gradient-to-r from-green-400 to-emerald-500' : pct >= 50 ? 'bg-gradient-to-r from-amber-400 to-orange-500' : 'bg-gradient-to-r from-red-400 to-rose-500'}`}\r\n                                                />\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"file":"assets/Dashboard-BzGk7Z4y.js"}