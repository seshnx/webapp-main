import{r,j as d,L as S,cQ as v,cl as E,a9 as F}from"./vendor-Dl7DtIXW.js";import{d as _,g as j,r as $,t as L,c as P,v as T,w as D}from"./index-BNJB-XQZ.js";import{m as k,A as N}from"./vendor-framer-CUELlS5e.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new e.Error().stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="b8eee0a9-9c27-41ba-95bb-6c46295504b7",e._sentryDebugIdIdentifier="sentry-dbid-b8eee0a9-9c27-41ba-95bb-6c46295504b7")})()}catch{}function M(e){const[l,c]=r.useState([]),[a,n]=r.useState([]),[h,g]=r.useState({followersCount:0,followingCount:0}),[b,w]=r.useState(!0),u=async o=>{if(!o||o.length===0)return[];try{return(await P(o)).map(t=>({odId:t.user_id||t.id,userId:t.user_id||t.id,displayName:t.display_name||`${t.first_name||""} ${t.last_name||""}`.trim(),photoURL:t.avatar_url||t.photo_url,role:t.active_role||t.role}))}catch(s){return console.error("Error fetching profiles:",s),[]}},i=r.useCallback(async()=>{if(e)try{const o=await _(e),s=await u(o);c(s);const t=await j(e),C=await u(t);n(C),g({followingCount:o.length,followersCount:t.length}),w(!1)}catch(o){console.error("Error loading follow data:",o),w(!1)}},[e]);r.useEffect(()=>{if(i(),!e)return;const o=setInterval(()=>{i()},3e4);return()=>{clearInterval(o)}},[e,i]);const y=r.useCallback(o=>l.some(s=>s.odId===o),[l]),m=r.useCallback(async o=>{if(!(!e||!o||e===o))try{return await $(e,o),i(),{success:!0}}catch(s){return console.error("Follow error:",s),{success:!1,error:s}}},[e,i]),f=r.useCallback(async o=>{if(!(!e||!o))try{return await L(e,o),i(),{success:!0}}catch(s){return console.error("Unfollow error:",s),{success:!1,error:s}}},[e,i]),p=r.useCallback(async o=>y(o)?f(o):m(o),[y,m,f]),x=r.useCallback(()=>l.map(o=>o.odId),[l]);return{following:l,followers:a,stats:h,loading:b,isFollowing:y,followUser:m,unfollowUser:f,toggleFollow:p,getFollowingIds:x}}function z(e){const[l,c]=r.useState({followersCount:0,followingCount:0}),[a,n]=r.useState(!0);return r.useEffect(()=>{if(!e){n(!1);return}(async()=>{try{const[g,b]=await Promise.all([T(e),D(e)]);c({followersCount:g,followingCount:b}),n(!1)}catch(g){console.error("Error fetching social stats:",g),n(!1)}})()},[e]),{stats:l,loading:a}}function B({isFollowing:e,onToggle:l,size:c="md",variant:a="default",disabled:n=!1,showIcon:h=!0,className:g=""}){const[b,w]=r.useState(!1),[u,i]=r.useState(!1),y=async t=>{if(t.stopPropagation(),!(n||b)){w(!0);try{await l()}catch(C){console.error("Follow toggle error:",C)}w(!1)}},m={sm:"px-3 py-1 text-xs",md:"px-4 py-1.5 text-sm",lg:"px-6 py-2 text-base"},f={sm:12,md:14,lg:16},p=()=>e?a==="outline"||a==="minimal"?u?"border-red-300 text-red-500 hover:bg-red-50 dark:border-red-800 dark:hover:bg-red-900/20":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300":u?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200":a==="outline"?"border-brand-blue text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":a==="minimal"?"text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20":"bg-brand-blue text-white hover:bg-blue-600",x=`
        font-semibold rounded-full transition-all duration-200 
        flex items-center justify-center gap-1.5
        disabled:opacity-50 disabled:cursor-not-allowed
        ${a==="outline"?"border-2 bg-transparent":""}
        ${a==="minimal"?"bg-transparent":""}
        ${m[c]}
        ${p()}
        ${g}
    `,o=()=>b?d.jsx(S,{className:"animate-spin",size:f[c]}):e?u?d.jsx(v,{size:f[c]}):d.jsx(E,{size:f[c]}):d.jsx(F,{size:f[c]}),s=()=>e?u?"Unfollow":"Following":"Follow";return d.jsx(k.button,{whileHover:{scale:n?1:1.02},whileTap:{scale:n?1:.98},className:x,onClick:y,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),disabled:n||b,children:d.jsx(N,{mode:"wait",children:d.jsxs(k.span,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"flex items-center gap-1.5",children:[h&&o(),d.jsx("span",{children:s()})]},`${e}-${u}`)})})}export{B as F,z as a,M as u};
