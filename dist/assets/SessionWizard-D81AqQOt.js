import{r as h,j as e,c0 as S,i as M,a6 as C,h as L,L as I,a1 as R}from"./vendor-Dl7DtIXW.js";import{s as j}from"./chat-BYF7Vx2D.js";import{L as z}from"./LocationPicker-DrNKDyta.js";import{S as _}from"./StudioMap-BTafTf2U.js";import"./vendor-framer-CUELlS5e.js";import"./edu-BMUxkX2v.js";import"./config-DGZTEYpI.js";import"./vendor-maps-C5QNFLlQ.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new s.Error().stack;i&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[i]="4b8b7824-00a6-416e-9eb7-b7b981a428b6",s._sentryDebugIdIdentifier="sentry-dbid-4b8b7824-00a6-416e-9eb7-b7b981a428b6")})()}catch{}function N(s,i,n,b){const d=(n-s)*(Math.PI/180),x=(b-i)*(Math.PI/180),c=Math.sin(d/2)*Math.sin(d/2)+Math.cos(s*(Math.PI/180))*Math.cos(n*(Math.PI/180))*Math.sin(x/2)*Math.sin(x/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))*.621371}function B({userData:s,sessionParams:i,setSessionParams:n,onNext:b}){var p,f;const[o,d]=h.useState(1),[x,c]=h.useState(!1),[u,g]=h.useState([]),a=i||{date:"",time:"",radius:25,urgency:"Normal",location:null},v=t=>{t.preventDefault(),d(2),w()},w=async()=>{if(j){c(!0);try{const{data:t,error:r}=await j.from("profiles").select("id, display_name, location, account_types, city, state").contains("account_types",["Studio"]);if(r)throw r;if(!a.location){g([]);return}const k=(t||[]).filter(l=>!l.location||!a.location?!1:N(a.location.lat,a.location.lng,l.location.lat,l.location.lng)<=(a.radius||25)).map(l=>({...l,distance:N(a.location.lat,a.location.lng,l.location.lat,l.location.lng)})).sort((l,y)=>l.distance-y.distance);g(k)}catch(t){console.error("Studio fetch error:",t)}c(!1)}},m=t=>{n(r=>({...r||a,venue:t})),b()};return e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] rounded-2xl border dark:border-gray-700 shadow-sm overflow-hidden min-h-[600px]",children:[e.jsxs("div",{className:"p-6 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]",children:[e.jsxs("h2",{className:"text-xl font-extrabold dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"bg-brand-blue text-white w-8 h-8 rounded-full flex items-center justify-center text-sm",children:o}),o===1?"Session Logistics":"Select Studio"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-10",children:o===1?"Define the when and where.":`Found ${u.length} studios within range.`})]}),o===1&&e.jsxs("form",{onSubmit:v,className:"p-8 space-y-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(S,{size:14,className:"inline mr-1"})," Date"]}),e.jsx("input",{type:"date",required:!0,className:"w-full p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white outline-none focus:ring-2 focus:ring-brand-blue",value:a.date||"",onChange:t=>n(r=>({...r||a,date:t.target.value}))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(M,{size:14,className:"inline mr-1"})," Start Time"]}),e.jsx("input",{type:"time",required:!0,className:"w-full p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white outline-none focus:ring-2 focus:ring-brand-blue",value:a.time||"",onChange:t=>n(r=>({...r||a,time:t.target.value}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{initialZip:s==null?void 0:s.zip,label:"Center Location",onLocationChange:t=>n(r=>({...r||a,location:t}))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Max Distance"}),e.jsxs("span",{className:"text-xs font-bold text-brand-blue",children:[a.radius||25," miles"]})]}),e.jsx("input",{type:"range",min:"5",max:"100",step:"5",value:a.radius||25,onChange:t=>n(r=>({...r||a,radius:parseInt(t.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-blue"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:[e.jsx(C,{size:14,className:"inline mr-1"})," Urgency"]}),e.jsx("div",{className:"flex gap-2",children:["Low","Normal","High"].map(t=>e.jsx("button",{type:"button",onClick:()=>n(r=>({...r||a,urgency:t})),className:`flex-1 py-2 rounded-lg text-sm font-bold border transition ${(a.urgency||"Normal")===t?"bg-brand-blue text-white border-brand-blue":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t},t))})]})]}),e.jsx("div",{className:"pt-6",children:e.jsxs("button",{type:"submit",className:"w-full bg-brand-blue text-white py-4 rounded-xl font-bold shadow-lg hover:bg-blue-600 transition flex justify-center items-center gap-2",children:["Find Studios ",e.jsx(L,{size:20})]})})]}),o===2&&e.jsx("div",{className:"flex flex-col h-[600px]",children:x?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx(I,{className:"animate-spin text-brand-blue mb-4",size:40}),e.jsx("p",{className:"text-gray-500",children:"Scouting locations..."})]}):e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-full md:w-1/2 overflow-y-auto p-4 space-y-3",children:[e.jsx("button",{onClick:()=>d(1),className:"text-xs text-gray-500 hover:text-brand-blue mb-2 flex items-center gap-1",children:"â† Change Filters"}),e.jsxs("div",{onClick:()=>m({id:"remote",name:"Remote / TBD",address:"No physical location set"}),className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer text-center",children:[e.jsx("h4",{className:"font-bold text-gray-600 dark:text-gray-300",children:"No Studio Needed / Remote"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Skip venue selection"})]}),u.map(t=>e.jsxs("div",{onClick:()=>m(t),className:"bg-white dark:bg-[#1f2128] p-4 rounded-xl border dark:border-gray-700 hover:border-brand-blue dark:hover:border-blue-500 cursor-pointer transition shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold dark:text-white group-hover:text-brand-blue",children:t.name||"Studio"}),e.jsxs("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-gray-600 dark:text-gray-300",children:["$",t.rate,"/hr"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[e.jsx(R,{size:10})," ",t.distance.toFixed(1)," miles away"]}),e.jsx("div",{className:"flex gap-1 mt-2",children:(t.equipmentList||[]).slice(0,3).map(r=>e.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/20 text-blue-600 px-1.5 py-0.5 rounded",children:r},r))})]},t.id))]}),e.jsx("div",{className:"hidden md:block w-1/2 h-full border-l dark:border-gray-700 relative",children:e.jsx(_,{locations:u,center:[(p=a.location)==null?void 0:p.lat,(f=a.location)==null?void 0:f.lng],height:"100%",drawRadius:!0,radiusMiles:a.radius||25})})]})})]})}export{B as default};
