{"version":3,"file":"useVercelUpload-OMd9iZ6b.js","sources":["../../src/config/vercel-blob.js","../../src/hooks/useVercelUpload.js"],"sourcesContent":["/**\r\n * Vercel Blob Storage Configuration\r\n *\r\n * This module configures Vercel Blob for file storage, replacing AWS S3.\r\n * Vercel Blob is a simple, fast object storage service optimized for Vercel deployments.\r\n *\r\n * Environment Variables Required:\r\n * - BLOB_READ_WRITE_TOKEN: Vercel Blob token (automatically set in Vercel deployments)\r\n *\r\n * Vercel Dashboard: https://vercel.com/dashboard\r\n * Documentation: https://vercel.com/docs/storage/vercel-blob\r\n *\r\n * @example\r\n * import { uploadFile, deleteFile, getFileUrl } from '@/config/vercel-blob';\r\n *\r\n * // Upload a file\r\n * const blob = await uploadFile(file, 'profile-photos');\r\n *\r\n * // Delete a file\r\n * await deleteFile(blob.url);\r\n *\r\n * // Get public URL\r\n * const url = getFileUrl(blob);\r\n */\r\n\r\nimport { put, del, list, head } from '@vercel/blob';\r\n\r\n// =====================================================\r\n// BLOB STORAGE CONFIGURATION\r\n// =====================================================\r\n\r\n/**\r\n * Vercel Blob Token\r\n *\r\n * In Vercel deployments, this is automatically set.\r\n * For local development, you need to set BLOB_READ_WRITE_TOKEN in .env.local\r\n */\r\nconst blobToken = import.meta.env.BLOB_READ_WRITE_TOKEN;\r\n\r\nif (!blobToken && import.meta.env.DEV) {\r\n  console.warn(\r\n    '⚠️ Vercel Blob: BLOB_READ_WRITE_TOKEN is not set. ' +\r\n    'File uploads will not work in development. ' +\r\n    'Install Vercel CLI and run: vercel link'\r\n  );\r\n}\r\n\r\n/**\r\n * Check if Vercel Blob is properly configured\r\n *\r\n * @returns {boolean} True if Blob token is present\r\n */\r\nexport function isBlobConfigured() {\r\n  return !!blobToken;\r\n}\r\n\r\n// =====================================================\r\n// STORAGE FOLDERS (Virtual Paths)\r\n// =====================================================\r\n\r\n/**\r\n * Storage folders for organizing files\r\n * These are used as prefixes in blob URLs\r\n */\r\nexport const STORAGE_FOLDERS = {\r\n  PROFILE_PHOTOS: 'profile-photos',\r\n  POST_MEDIA: 'post-media',\r\n  DOCUMENTS: 'documents',\r\n  STUDIO_IMAGES: 'studio-images',\r\n  GEAR_IMAGES: 'gear-images',\r\n  ATTACHMENTS: 'attachments',\r\n};\r\n\r\n/**\r\n * Get the storage folder for a specific media type\r\n *\r\n * @param {string} mediaType - Type of media (post, profile, document, etc.)\r\n * @returns {string} Storage folder path\r\n *\r\n * @example\r\n * getFolderForMediaType('profile'); // 'profile-photos'\r\n * getFolderForMediaType('post'); // 'post-media'\r\n */\r\nexport function getFolderForMediaType(mediaType) {\r\n  const folderMap = {\r\n    profile: STORAGE_FOLDERS.PROFILE_PHOTOS,\r\n    avatar: STORAGE_FOLDERS.PROFILE_PHOTOS,\r\n    post: STORAGE_FOLDERS.POST_MEDIA,\r\n    post_media: STORAGE_FOLDERS.POST_MEDIA,\r\n    document: STORAGE_FOLDERS.DOCUMENTS,\r\n    doc: STORAGE_FOLDERS.DOCUMENTS,\r\n    studio: STORAGE_FOLDERS.STUDIO_IMAGES,\r\n    gear: STORAGE_FOLDERS.GEAR_IMAGES,\r\n    attachment: STORAGE_FOLDERS.ATTACHMENTS,\r\n  };\r\n\r\n  return folderMap[mediaType] || STORAGE_FOLDERS.POST_MEDIA;\r\n}\r\n\r\n// =====================================================\r\n// FILE UPLOAD OPERATIONS\r\n// =====================================================\r\n\r\n/**\r\n * Upload a file to Vercel Blob\r\n *\r\n * @param {File|Blob} file - File to upload\r\n * @param {string} folder - Storage folder (e.g., 'profile-photos')\r\n * @param {Object} options - Upload options\r\n * @returns {Promise<Object>} Blob object with URL, metadata\r\n *\r\n * @example\r\n * // Upload a profile photo\r\n * const blob = await uploadFile(file, 'profile-photos');\r\n * console.log(blob.url); // https://blob.../profile-photos/user123.jpg\r\n *\r\n * // Upload with custom filename\r\n * const blob = await uploadFile(file, 'post-media', {\r\n *   addRandomSuffix: false,\r\n *   customFileName: 'my-custom-name'\r\n * });\r\n */\r\nexport async function uploadFile(file, folder = STORAGE_FOLDERS.POST_MEDIA, options = {}) {\r\n  if (!blobToken) {\r\n    throw new Error('Vercel Blob is not configured. Set BLOB_READ_WRITE_TOKEN environment variable.');\r\n  }\r\n\r\n  try {\r\n    // Generate unique filename\r\n    const timestamp = Date.now();\r\n    const randomString = Math.random().toString(36).substring(2, 8);\r\n    const extension = file.name?.split('.').pop() || 'jpg';\r\n    const filename = options.customFileName || `${folder}-${timestamp}-${randomString}.${extension}`;\r\n\r\n    // Full path with folder\r\n    const key = `${folder}/${filename}`;\r\n\r\n    // Upload to Vercel Blob\r\n    const blob = await put(key, file, {\r\n      access: 'public',\r\n      token: blobToken,\r\n      addRandomSuffix: options.addRandomSuffix !== false, // Default: true\r\n      ...options,\r\n    });\r\n\r\n    return {\r\n      url: blob.url,\r\n      downloadUrl: blob.downloadUrl,\r\n      pathname: blob.pathname,\r\n      size: blob.size,\r\n      uploadedAt: blob.uploadedAt,\r\n      contentType: blob.contentType,\r\n    };\r\n  } catch (error) {\r\n    console.error('Vercel Blob upload error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Upload multiple files\r\n *\r\n * @param {File[]} files - Array of files to upload\r\n * @param {string} folder - Storage folder\r\n * @param {Object} options - Upload options\r\n * @returns {Promise<Object[]>} Array of blob objects\r\n *\r\n * @example\r\n * const blobs = await uploadMultipleFiles(files, 'post-media');\r\n * console.log(blobs.map(b => b.url));\r\n */\r\nexport async function uploadMultipleFiles(files, folder = STORAGE_FOLDERS.POST_MEDIA, options = {}) {\r\n  const uploadPromises = files.map(file => uploadFile(file, folder, options));\r\n  return Promise.all(uploadPromises);\r\n}\r\n\r\n/**\r\n * Delete a file from Vercel Blob\r\n *\r\n * @param {string} url - Blob URL to delete\r\n * @returns {Promise<void>}\r\n *\r\n * @example\r\n * await deleteFile('https://blob.../profile-photos/user123.jpg');\r\n */\r\nexport async function deleteFile(url) {\r\n  if (!blobToken) {\r\n    throw new Error('Vercel Blob is not configured.');\r\n  }\r\n\r\n  try {\r\n    await del(url, { token: blobToken });\r\n  } catch (error) {\r\n    console.error('Vercel Blob delete error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete multiple files\r\n *\r\n * @param {string[]} urls - Array of blob URLs to delete\r\n * @returns {Promise<void>}\r\n *\r\n * @example\r\n * await deleteMultipleFiles([\r\n *   'https://blob.../file1.jpg',\r\n *   'https://blob.../file2.jpg'\r\n * ]);\r\n */\r\nexport async function deleteMultipleFiles(urls) {\r\n  if (!blobToken) {\r\n    throw new Error('Vercel Blob is not configured.');\r\n  }\r\n\r\n  try {\r\n    await del(urls, { token: blobToken });\r\n  } catch (error) {\r\n    console.error('Vercel Blob delete multiple error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// =====================================================\r\n// FILE RETRIEVAL OPERATIONS\r\n// =====================================================\r\n\r\n/**\r\n * Get file metadata without downloading\r\n *\r\n * @param {string} url - Blob URL\r\n * @returns {Promise<Object>} File metadata\r\n *\r\n * @example\r\n * const metadata = await getFileMetadata('https://blob.../file.jpg');\r\n * console.log(metadata.size, metadata.contentType);\r\n */\r\nexport async function getFileMetadata(url) {\r\n  if (!blobToken) {\r\n    throw new Error('Vercel Blob is not configured.');\r\n  }\r\n\r\n  try {\r\n    const metadata = await head(url, { token: blobToken });\r\n    return metadata;\r\n  } catch (error) {\r\n    console.error('Vercel Blob metadata error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * List all files in a folder\r\n *\r\n * @param {string} folder - Folder to list (e.g., 'profile-photos')\r\n * @returns {Promise<Object[]>} Array of blob objects\r\n *\r\n * @example\r\n * const files = await listFiles('profile-photos');\r\n * console.log(files.map(f => f.url));\r\n */\r\nexport async function listFiles(folder = '') {\r\n  if (!blobToken) {\r\n    throw new Error('Vercel Blob is not configured.');\r\n  }\r\n\r\n  try {\r\n    const result = await list({ prefix: folder, token: blobToken });\r\n    return result.blobs;\r\n  } catch (error) {\r\n    console.error('Vercel Blob list error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Get public URL for a blob\r\n *\r\n * @param {Object|string} blob - Blob object or URL string\r\n * @returns {string} Public URL\r\n *\r\n * @example\r\n * const url = getFileUrl(blob);\r\n * // or\r\n * const url = getFileUrl('https://blob.../file.jpg');\r\n */\r\nexport function getFileUrl(blob) {\r\n  if (typeof blob === 'string') {\r\n    return blob;\r\n  }\r\n  return blob?.url || null;\r\n}\r\n\r\n// =====================================================\r\n// UTILITY FUNCTIONS\r\n// =====================================================\r\n\r\n/**\r\n * Check if a file is an image\r\n *\r\n * @param {File} file - File to check\r\n * @returns {boolean} True if file is an image\r\n *\r\n * @example\r\n * if (isImageFile(file)) {\r\n *   // Handle image upload\r\n * }\r\n */\r\nexport function isImageFile(file) {\r\n  return file.type?.startsWith('image/') || false;\r\n}\r\n\r\n/**\r\n * Check if a file is a video\r\n *\r\n * @param {File} file - File to check\r\n * @returns {boolean} True if file is a video\r\n *\r\n * @example\r\n * if (isVideoFile(file)) {\r\n *   // Handle video upload\r\n * }\r\n */\r\nexport function isVideoFile(file) {\r\n  return file.type?.startsWith('video/') || false;\r\n}\r\n\r\n/**\r\n * Validate file size\r\n *\r\n * @param {File} file - File to validate\r\n * @param {number} maxSizeMB - Maximum size in megabytes\r\n * @returns {boolean} True if file is within size limit\r\n *\r\n * @example\r\n * if (!validateFileSize(file, 5)) {\r\n *   alert('File is too large. Maximum size is 5MB.');\r\n * }\r\n */\r\nexport function validateFileSize(file, maxSizeMB = 5) {\r\n  const maxSizeBytes = maxSizeMB * 1024 * 1024;\r\n  return file.size <= maxSizeBytes;\r\n}\r\n\r\n/**\r\n * Format file size for display\r\n *\r\n * @param {number} bytes - File size in bytes\r\n * @returns {string} Formatted size (e.g., \"2.5 MB\")\r\n *\r\n * @example\r\n * console.log(formatFileSize(2621440)); // \"2.5 MB\"\r\n */\r\nexport function formatFileSize(bytes) {\r\n  if (bytes === 0) return '0 Bytes';\r\n\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\r\n}\r\n\r\n// =====================================================\r\n// REACT HOOK EXAMPLE (for reference)\r\n// =====================================================\r\n\r\n/**\r\n * Example React hook for file uploads\r\n *\r\n * This is a reference implementation. Use it in your components:\r\n *\r\n * @example\r\n * function ProfilePhotoUpload() {\r\n *   const [uploading, setUploading] = useState(false);\r\n *   const [photoUrl, setPhotoUrl] = useState(null);\r\n *\r\n *   const handleFileChange = async (e) => {\r\n *     const file = e.target.files[0];\r\n *     if (!file) return;\r\n *\r\n *     if (!isImageFile(file)) {\r\n *       toast.error('Please upload an image file');\r\n *       return;\r\n *     }\r\n *\r\n *     if (!validateFileSize(file, 5)) {\r\n *       toast.error('File size must be less than 5MB');\r\n *       return;\r\n *     }\r\n *\r\n *     setUploading(true);\r\n *     try {\r\n *       const blob = await uploadFile(file, STORAGE_FOLDERS.PROFILE_PHOTOS);\r\n *       setPhotoUrl(blob.url);\r\n *       toast.success('Photo uploaded successfully');\r\n *     } catch (error) {\r\n *       toast.error('Failed to upload photo');\r\n *       console.error(error);\r\n *     } finally {\r\n *       setUploading(false);\r\n *     }\r\n *   };\r\n *\r\n *   return (\r\n *     <input\r\n *       type=\"file\"\r\n *       onChange={handleFileChange}\r\n *       disabled={uploading}\r\n *       accept=\"image/*\"\r\n *     />\r\n *   );\r\n * }\r\n */\r\n\r\n/**\r\n * Development Notice\r\n *\r\n * For local development with Vercel Blob:\r\n * 1. Install Vercel CLI: npm i -g vercel\r\n * 2. Link your project: vercel link\r\n * 3. Pull environment variables: vercel env pull .env.local\r\n *\r\n * This will set BLOB_READ_WRITE_TOKEN in your local environment.\r\n *\r\n * For production deployment on Vercel, the token is automatically configured.\r\n */\r\n","/**\r\n * Vercel Blob Upload Hook\r\n *\r\n * This hook provides a drop-in replacement for useMediaUpload,\r\n * using Vercel Blob instead of Supabase Storage.\r\n *\r\n * @example\r\n * import { useVercelUpload } from '@/hooks/useVercelUpload';\r\n *\r\n * function MediaUpload() {\r\n *   const { uploadMedia, uploading, error } = useVercelUpload();\r\n *\r\n *   const handleUpload = async (file) => {\r\n *     const result = await uploadMedia(file, 'post-media');\r\n *     if (result) {\r\n *       console.log('Uploaded:', result.url);\r\n *     }\r\n *   };\r\n *\r\n *   return <input type=\"file\" onChange={(e) => handleUpload(e.target.files[0])} />;\r\n * }\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { uploadFile, STORAGE_FOLDERS, isImageFile, isVideoFile, validateFileSize } from '../config/vercel-blob';\r\n\r\n/**\r\n * Vercel Blob Upload Hook\r\n *\r\n * Drop-in replacement for useMediaUpload that uses Vercel Blob instead of Supabase Storage.\r\n *\r\n * @returns {object} Upload functions and state\r\n */\r\nexport const useVercelUpload = () => {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  /**\r\n   * Uploads media file to Vercel Blob Storage.\r\n   *\r\n   * @param {File} file - The file to upload\r\n   * @param {string} uploadPath - The folder/path for storage (e.g., 'posts/user123', 'profile-photos')\r\n   * @param {object} options - Additional upload options\r\n   * @returns {Promise<object|null>} Object containing media URL and metadata\r\n   *\r\n   * @example\r\n   * const result = await uploadMedia(file, 'post-media');\r\n   * console.log(result.url); // https://blob.../post-media/file.jpg\r\n   */\r\n  const uploadMedia = async (file, uploadPath = 'general', options = {}) => {\r\n    if (!file) return null;\r\n\r\n    // Validate file size (default 10MB max)\r\n    const maxSizeMB = options.maxSizeMB || 10;\r\n    if (!validateFileSize(file, maxSizeMB)) {\r\n      const errorMsg = `File size exceeds ${maxSizeMB}MB limit`;\r\n      setError(errorMsg);\r\n      console.error(errorMsg);\r\n      return null;\r\n    }\r\n\r\n    // Validate file type if specified\r\n    if (options.allowedTypes && !options.allowedTypes.includes(file.type)) {\r\n      const errorMsg = `File type not allowed. Allowed types: ${options.allowedTypes.join(', ')}`;\r\n      setError(errorMsg);\r\n      console.error(errorMsg);\r\n      return null;\r\n    }\r\n\r\n    setUploading(true);\r\n    setError(null);\r\n    setProgress(0);\r\n\r\n    try {\r\n      // Determine media type\r\n      let mediaType = 'file';\r\n      if (file.type.startsWith('video/')) {\r\n        mediaType = 'video';\r\n      } else if (file.type.startsWith('audio/')) {\r\n        mediaType = 'audio';\r\n      } else if (file.type.startsWith('image/')) {\r\n        mediaType = 'image';\r\n      }\r\n\r\n      // Sanitize filename\r\n      const timestamp = Date.now();\r\n      const sanitizedName = file.name.replace(/[^a-zA-Z0-9._-]/g, '_');\r\n\r\n      // Add random suffix for uniqueness\r\n      const randomSuffix = Math.random().toString(36).substring(2, 8);\r\n      const customFileName = `${timestamp}_${randomSuffix}_${sanitizedName}`;\r\n\r\n      // Upload to Vercel Blob\r\n      setProgress(20); // Uploading started\r\n\r\n      const blob = await uploadFile(file, uploadPath, {\r\n        customFileName,\r\n        addRandomSuffix: false, // We already added our own suffix\r\n        ...options,\r\n      });\r\n\r\n      setProgress(100); // Upload complete\r\n\r\n      const result = {\r\n        url: blob.url,\r\n        previewUrl: blob.url, // Same as URL for Vercel Blob\r\n        storageRef: blob.pathname, // Path in blob storage\r\n        type: mediaType,\r\n        name: file.name,\r\n        size: file.size,\r\n        mimeType: file.type,\r\n        contentType: blob.contentType,\r\n        uploadedAt: blob.uploadedAt,\r\n        downloadUrl: blob.downloadUrl,\r\n      };\r\n\r\n      setUploading(false);\r\n      setProgress(0);\r\n\r\n      return result;\r\n    } catch (err) {\r\n      console.error('Upload failed:', err);\r\n      setError(err.message || 'An unknown error occurred during upload.');\r\n      setUploading(false);\r\n      setProgress(0);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Upload multiple files\r\n   *\r\n   * @param {FileList|File[]} files - Files to upload\r\n   * @param {string} uploadPath - The folder/path for storage\r\n   * @param {object} options - Additional upload options\r\n   * @returns {Promise<object[]>} Array of upload results\r\n   *\r\n   * @example\r\n   * const results = await uploadMultiple(fileList, 'post-media');\r\n   * console.log(`Uploaded ${results.length} files`);\r\n   */\r\n  const uploadMultiple = async (files, uploadPath = 'general', options = {}) => {\r\n    if (!files || files.length === 0) return [];\r\n\r\n    setUploading(true);\r\n    setError(null);\r\n    setProgress(0);\r\n\r\n    try {\r\n      const fileArray = Array.from(files);\r\n      const results = [];\r\n      const totalFiles = fileArray.length;\r\n\r\n      for (let i = 0; i < fileArray.length; i++) {\r\n        setProgress(Math.round(((i + 1) / totalFiles) * 100));\r\n        const result = await uploadMedia(fileArray[i], uploadPath, options);\r\n        if (result) {\r\n          results.push(result);\r\n        }\r\n      }\r\n\r\n      setProgress(100);\r\n      setUploading(false);\r\n      return results;\r\n    } catch (err) {\r\n      console.error('Batch upload failed:', err);\r\n      setError(err.message || 'Batch upload failed');\r\n      setUploading(false);\r\n      setProgress(0);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  return {\r\n    uploadMedia,\r\n    uploadMultiple,\r\n    uploading,\r\n    error,\r\n    progress,\r\n\r\n    // Helper methods\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n    clearError: () => setError(null),\r\n  };\r\n};\r\n\r\n/**\r\n * Image-specific upload hook\r\n *\r\n * Convenience hook for uploading images with built-in validation.\r\n *\r\n * @example\r\n * function ProfilePhotoUpload() {\r\n *   const { uploadImage, uploading, error } = useVercelImageUpload();\r\n *\r\n *   const handleUpload = async (file) => {\r\n *     const result = await uploadImage(file, 'profile-photos');\r\n *     if (result) {\r\n *       console.log('Photo uploaded:', result.url);\r\n *     }\r\n *   };\r\n *\r\n *   return <input type=\"file\" accept=\"image/*\" onChange={...} />;\r\n * }\r\n */\r\nexport const useVercelImageUpload = (options = {}) => {\r\n  const { uploadMedia, uploading, error } = useVercelUpload();\r\n\r\n  /**\r\n   * Upload an image file\r\n   *\r\n   * @param {File} file - Image file to upload\r\n   * @param {string} folder - Storage folder (default: 'profile-photos')\r\n   * @returns {Promise<object|null>} Upload result\r\n   */\r\n  const uploadImage = async (file, folder = STORAGE_FOLDERS.PROFILE_PHOTOS) => {\r\n    if (!file) return null;\r\n\r\n    // Validate it's an image\r\n    if (!isImageFile(file)) {\r\n      console.error('File is not an image');\r\n      return null;\r\n    }\r\n\r\n    // Default image options\r\n    const imageOptions = {\r\n      maxSizeMB: 5, // 5MB default for images\r\n      allowedTypes: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],\r\n      ...options,\r\n    };\r\n\r\n    return await uploadMedia(file, folder, imageOptions);\r\n  };\r\n\r\n  return {\r\n    uploadImage,\r\n    uploading,\r\n    error,\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n  };\r\n};\r\n\r\n/**\r\n * Video-specific upload hook\r\n *\r\n * Convenience hook for uploading videos with built-in validation.\r\n *\r\n * @example\r\n * function VideoUpload() {\r\n *   const { uploadVideo, uploading, error } = useVercelVideoUpload();\r\n *\r\n *   const handleUpload = async (file) => {\r\n *     const result = await uploadVideo(file, 'post-media');\r\n *     if (result) {\r\n *       console.log('Video uploaded:', result.url);\r\n *     }\r\n *   };\r\n *\r\n *   return <input type=\"file\" accept=\"video/*\" onChange={...} />;\r\n * }\r\n */\r\nexport const useVercelVideoUpload = (options = {}) => {\r\n  const { uploadMedia, uploading, error } = useVercelUpload();\r\n\r\n  /**\r\n   * Upload a video file\r\n   *\r\n   * @param {File} file - Video file to upload\r\n   * @param {string} folder - Storage folder (default: 'post-media')\r\n   * @returns {Promise<object|null>} Upload result\r\n   */\r\n  const uploadVideo = async (file, folder = STORAGE_FOLDERS.POST_MEDIA) => {\r\n    if (!file) return null;\r\n\r\n    // Validate it's a video\r\n    if (!isVideoFile(file)) {\r\n      console.error('File is not a video');\r\n      return null;\r\n    }\r\n\r\n    // Default video options\r\n    const videoOptions = {\r\n      maxSizeMB: 50, // 50MB default for videos\r\n      allowedTypes: ['video/mp4', 'video/webm', 'video/quicktime'],\r\n      ...options,\r\n    };\r\n\r\n    return await uploadMedia(file, folder, videoOptions);\r\n  };\r\n\r\n  return {\r\n    uploadVideo,\r\n    uploading,\r\n    error,\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n  };\r\n};\r\n\r\n/**\r\n * Document-specific upload hook\r\n *\r\n * Convenience hook for uploading documents with built-in validation.\r\n *\r\n * @example\r\n * function DocumentUpload() {\r\n *   const { uploadDocument, uploading, error } = useVercelDocumentUpload();\r\n *\r\n *   const handleUpload = async (file) => {\r\n *     const result = await uploadDocument(file, 'documents');\r\n *     if (result) {\r\n *       console.log('Document uploaded:', result.url);\r\n *     }\r\n *   };\r\n *\r\n *   return <input type=\"file\" accept=\".pdf,.doc,.docx\" onChange={...} />;\r\n * }\r\n */\r\nexport const useVercelDocumentUpload = (options = {}) => {\r\n  const { uploadMedia, uploading, error } = useVercelUpload();\r\n\r\n  /**\r\n   * Upload a document file\r\n   *\r\n   * @param {File} file - Document file to upload\r\n   * @param {string} folder - Storage folder (default: 'documents')\r\n   * @returns {Promise<object|null>} Upload result\r\n   */\r\n  const uploadDocument = async (file, folder = STORAGE_FOLDERS.DOCUMENTS) => {\r\n    if (!file) return null;\r\n\r\n    // Default document options\r\n    const documentOptions = {\r\n      maxSizeMB: 10, // 10MB default for documents\r\n      allowedTypes: [\r\n        'application/pdf',\r\n        'application/msword',\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n        'text/plain',\r\n      ],\r\n      ...options,\r\n    };\r\n\r\n    return await uploadMedia(file, folder, documentOptions);\r\n  };\r\n\r\n  return {\r\n    uploadDocument,\r\n    uploading,\r\n    error,\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n  };\r\n};\r\n\r\n/**\r\n * Batch upload hook for multiple files\r\n *\r\n * Optimized for uploading multiple files at once.\r\n *\r\n * @example\r\n * function MultiFileUpload() {\r\n *   const { uploadBatch, uploading, progress } = useVercelBatchUpload();\r\n *\r\n *   const handleUpload = async (files) => {\r\n *     const results = await uploadBatch(files, 'post-media');\r\n *     console.log(`Uploaded ${results.length} files`);\r\n *   };\r\n *\r\n *   return <input type=\"file\" multiple onChange={...} />;\r\n * }\r\n */\r\nexport const useVercelBatchUpload = () => {\r\n  const { uploadMultiple, uploading, error, progress } = useVercelUpload();\r\n\r\n  /**\r\n   * Upload multiple files\r\n   *\r\n   * @param {FileList|File[]} files - Files to upload\r\n   * @param {string} folder - Storage folder\r\n   * @param {object} options - Upload options\r\n   * @returns {Promise<object[]>} Array of upload results\r\n   */\r\n  const uploadBatch = async (files, folder = STORAGE_FOLDERS.POST_MEDIA, options = {}) => {\r\n    return await uploadMultiple(files, folder, options);\r\n  };\r\n\r\n  return {\r\n    uploadBatch,\r\n    uploading,\r\n    error,\r\n    progress,\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n  };\r\n};\r\n\r\n/**\r\n * Hook with upload preview capability\r\n *\r\n * Shows preview of images before upload completes.\r\n *\r\n * @example\r\n * function ImageUploadWithPreview() {\r\n *   const { uploadWithPreview, preview, uploading } = useVercelUploadWithPreview();\r\n *\r\n *   return (\r\n *     <div>\r\n *       {preview && <img src={preview} alt=\"Preview\" />}\r\n *       <input\r\n *         type=\"file\"\r\n *         accept=\"image/*\"\r\n *         onChange={(e) => uploadWithPreview(e.target.files[0])}\r\n *         disabled={uploading}\r\n *       />\r\n *     </div>\r\n *   );\r\n * }\r\n */\r\nexport const useVercelUploadWithPreview = () => {\r\n  const [preview, setPreview] = useState(null);\r\n  const { uploadMedia, uploading, error } = useVercelUpload();\r\n\r\n  /**\r\n   * Upload file with local preview\r\n   *\r\n   * @param {File} file - File to upload\r\n   * @param {string} folder - Storage folder\r\n   * @returns {Promise<object|null>} Upload result\r\n   */\r\n  const uploadWithPreview = async (file, folder = STORAGE_FOLDERS.POST_MEDIA) => {\r\n    if (!file) return null;\r\n\r\n    // Create local preview for images\r\n    if (isImageFile(file)) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n\r\n    // Upload the file\r\n    const result = await uploadMedia(file, folder);\r\n\r\n    // Update preview with uploaded URL\r\n    if (result) {\r\n      setPreview(result.url);\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Clear the preview\r\n   */\r\n  const clearPreview = () => {\r\n    setPreview(null);\r\n  };\r\n\r\n  return {\r\n    uploadWithPreview,\r\n    preview,\r\n    uploading,\r\n    error,\r\n    clearPreview,\r\n    isUploading: uploading,\r\n    hasError: !!error,\r\n  };\r\n};\r\n\r\nexport default useVercelUpload;\r\n"],"names":["STORAGE_FOLDERS","uploadFile","file","folder","options","isImageFile","_a","validateFileSize","maxSizeMB","maxSizeBytes","useVercelUpload","uploading","setUploading","useState","error","setError","progress","setProgress","uploadMedia","uploadPath","errorMsg","mediaType","timestamp","sanitizedName","randomSuffix","customFileName","blob","result","err","files","fileArray","results","totalFiles","i","useVercelImageUpload","imageOptions"],"mappings":"6iBAgEO,MAAMA,EAAkB,CAC7B,eAAgB,iBAChB,WAAY,YAKd,EAmDA,eAAsBC,EAAWC,EAAMC,EAASH,EAAgB,WAAYI,EAAU,GAAI,CAEtF,MAAM,IAAI,MAAM,gFAAgF,CAiCpG,CAuJO,SAASC,EAAYH,EAAM,OAChC,QAAOI,EAAAJ,EAAK,OAAL,YAAAI,EAAW,WAAW,YAAa,EAC5C,CA6BO,SAASC,EAAiBL,EAAMM,EAAY,EAAG,CACpD,MAAMC,EAAeD,EAAY,KAAO,KACxC,OAAON,EAAK,MAAQO,CACtB,CCrTY,MAACC,EAAkB,IAAM,CACnC,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,EAAK,EAC1C,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,IAAI,EACjC,CAACG,EAAUC,CAAW,EAAIJ,EAAAA,SAAS,CAAC,EAcpCK,EAAc,MAAOhB,EAAMiB,EAAa,UAAWf,EAAU,KAAO,CACxE,GAAI,CAACF,EAAM,OAAO,KAGlB,MAAMM,EAAYJ,EAAQ,WAAa,GACvC,GAAI,CAACG,EAAiBL,EAAMM,CAAS,EAAG,CACtC,MAAMY,EAAW,qBAAqBZ,CAAS,WAC/C,OAAAO,EAASK,CAAQ,EACjB,QAAQ,MAAMA,CAAQ,EACf,IACT,CAGA,GAAIhB,EAAQ,cAAgB,CAACA,EAAQ,aAAa,SAASF,EAAK,IAAI,EAAG,CACrE,MAAMkB,EAAW,yCAAyChB,EAAQ,aAAa,KAAK,IAAI,CAAC,GACzF,OAAAW,EAASK,CAAQ,EACjB,QAAQ,MAAMA,CAAQ,EACf,IACT,CAEAR,EAAa,EAAI,EACjBG,EAAS,IAAI,EACbE,EAAY,CAAC,EAEb,GAAI,CAEF,IAAII,EAAY,OACZnB,EAAK,KAAK,WAAW,QAAQ,EAC/BmB,EAAY,QACHnB,EAAK,KAAK,WAAW,QAAQ,EACtCmB,EAAY,QACHnB,EAAK,KAAK,WAAW,QAAQ,IACtCmB,EAAY,SAId,MAAMC,EAAY,KAAK,MACjBC,EAAgBrB,EAAK,KAAK,QAAQ,mBAAoB,GAAG,EAGzDsB,EAAe,KAAK,SAAS,SAAS,EAAE,EAAE,UAAU,EAAG,CAAC,EACxDC,EAAiB,GAAGH,CAAS,IAAIE,CAAY,IAAID,CAAa,GAGpEN,EAAY,EAAE,EAEd,MAAMS,EAAO,MAAMzB,EAAWC,EAAMiB,EAAY,CAC9C,eAAAM,EACA,gBAAiB,GACjB,GAAGrB,CACX,CAAO,EAEDa,EAAY,GAAG,EAEf,MAAMU,EAAS,CACb,IAAKD,EAAK,IACV,WAAYA,EAAK,IACjB,WAAYA,EAAK,SACjB,KAAML,EACN,KAAMnB,EAAK,KACX,KAAMA,EAAK,KACX,SAAUA,EAAK,KACf,YAAawB,EAAK,YAClB,WAAYA,EAAK,WACjB,YAAaA,EAAK,WAC1B,EAEM,OAAAd,EAAa,EAAK,EAClBK,EAAY,CAAC,EAENU,CACT,OAASC,EAAK,CACZ,eAAQ,MAAM,iBAAkBA,CAAG,EACnCb,EAASa,EAAI,SAAW,0CAA0C,EAClEhB,EAAa,EAAK,EAClBK,EAAY,CAAC,EACN,IACT,CACF,EA8CA,MAAO,CACL,YAAAC,EACA,eAlCqB,MAAOW,EAAOV,EAAa,UAAWf,EAAU,KAAO,CAC5E,GAAI,CAACyB,GAASA,EAAM,SAAW,EAAG,MAAO,CAAA,EAEzCjB,EAAa,EAAI,EACjBG,EAAS,IAAI,EACbE,EAAY,CAAC,EAEb,GAAI,CACF,MAAMa,EAAY,MAAM,KAAKD,CAAK,EAC5BE,EAAU,CAAA,EACVC,EAAaF,EAAU,OAE7B,QAASG,EAAI,EAAGA,EAAIH,EAAU,OAAQG,IAAK,CACzChB,EAAY,KAAK,OAAQgB,EAAI,GAAKD,EAAc,GAAG,CAAC,EACpD,MAAML,EAAS,MAAMT,EAAYY,EAAUG,CAAC,EAAGd,EAAYf,CAAO,EAC9DuB,GACFI,EAAQ,KAAKJ,CAAM,CAEvB,CAEA,OAAAV,EAAY,GAAG,EACfL,EAAa,EAAK,EACXmB,CACT,OAASH,EAAK,CACZ,eAAQ,MAAM,uBAAwBA,CAAG,EACzCb,EAASa,EAAI,SAAW,qBAAqB,EAC7ChB,EAAa,EAAK,EAClBK,EAAY,CAAC,EACN,EACT,CACF,EAKE,UAAAN,EACA,MAAAG,EACA,SAAAE,EAGA,YAAaL,EACb,SAAU,CAAC,CAACG,EACZ,WAAY,IAAMC,EAAS,IAAI,CACnC,CACA,EAqBamB,EAAuB,CAAC9B,EAAU,KAAO,CACpD,KAAM,CAAE,YAAAc,EAAa,UAAAP,EAAW,MAAAG,CAAK,EAAKJ,EAAe,EA4BzD,MAAO,CACL,YApBkB,MAAOR,EAAMC,EAASH,EAAgB,iBAAmB,CAC3E,GAAI,CAACE,EAAM,OAAO,KAGlB,GAAI,CAACG,EAAYH,CAAI,EACnB,eAAQ,MAAM,sBAAsB,EAC7B,KAIT,MAAMiC,EAAe,CACnB,UAAW,EACX,aAAc,CAAC,aAAc,YAAa,YAAa,YAAY,EACnE,GAAG/B,CACT,EAEI,OAAO,MAAMc,EAAYhB,EAAMC,EAAQgC,CAAY,CACrD,EAIE,UAAAxB,EACA,MAAAG,EACA,YAAaH,EACb,SAAU,CAAC,CAACG,CAChB,CACA"}