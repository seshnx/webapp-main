{"version":3,"file":"SocialFeed-DWSmGFvp.js","sources":["../../src/components/social/CommentSection.jsx","../../src/components/social/PostCard.jsx","../../src/components/social/CreatePostWidget.jsx","../../src/components/social/discover/DiscoverSection.jsx","../../src/components/social/discover/DiscoverCard.jsx","../../src/hooks/useDiscover.js","../../src/components/social/discover/SoundsDiscover.jsx","../../src/components/social/discover/ArtistsDiscover.jsx","../../src/components/social/discover/ProducersDiscover.jsx","../../src/components/social/discover/StudiosDiscover.jsx","../../src/components/social/discover/SchoolsDiscover.jsx","../../src/components/social/Discover.jsx","../../src/components/SocialFeed.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Send, Trash2, CornerDownRight } from 'lucide-react';\r\nimport { getComments, createComment, deleteComment, updatePostCommentCount } from '../../config/neonQueries';\r\nimport { createNotification } from '../../hooks/useNotifications';\r\nimport UserAvatar from '../shared/UserAvatar';\r\n\r\nexport default function CommentSection({ post, currentUser, currentUserData, blockedUsers, onCountChange }) {\r\n    const [comments, setComments] = useState([]);\r\n    const [text, setText] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!post.id) return;\r\n\r\n        // Initial fetch\r\n        loadComments();\r\n\r\n        // Set up polling to replace real-time subscription (every 30 seconds)\r\n        const interval = setInterval(loadComments, 30000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n        };\r\n    }, [post.id, blockedUsers]);\r\n\r\n    const loadComments = async () => {\r\n        try {\r\n            const data = await getComments(post.id);\r\n\r\n            if (data) {\r\n                // Client-side block filtering\r\n                const filtered = data.filter(c => !blockedUsers?.includes(c.user_id));\r\n                setComments(filtered);\r\n                onCountChange(filtered.length);\r\n            }\r\n        } catch (error) {\r\n            console.error('Comments fetch error:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const userId = currentUser?.id || currentUser?.uid;\r\n        if (!text.trim() || !userId) return;\r\n        setLoading(true);\r\n\r\n        const displayName = currentUserData?.effectiveDisplayName ||\r\n            currentUserData?.firstName ||\r\n            currentUser?.displayName ||\r\n            'User';\r\n\r\n        try {\r\n            // Ensure content is not empty (required by schema)\r\n            const commentContent = text.trim();\r\n            if (!commentContent) {\r\n                alert('Please enter a comment');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Create comment using Neon\r\n            await createComment({\r\n                post_id: post.id,\r\n                user_id: userId,\r\n                content: commentContent,\r\n            });\r\n\r\n            // Update post comment count\r\n            await updatePostCommentCount(post.id, 1);\r\n\r\n            // Reload comments to show the new one\r\n            await loadComments();\r\n\r\n            // Send notification to post author (if not commenting on own post)\r\n            if (post.userId !== userId) {\r\n                createNotification({\r\n                    targetUserId: post.userId,\r\n                    type: 'comment',\r\n                    fromUserId: userId,\r\n                    fromUserName: displayName,\r\n                    fromUserPhoto: currentUserData?.photoURL,\r\n                    postId: post.id,\r\n                    postPreview: post.text?.substring(0, 50),\r\n                    message: 'commented on your post'\r\n                });\r\n            }\r\n\r\n            setText('');\r\n            setLoading(false);\r\n        } catch (e) {\r\n            console.error('Comment submission error:', e);\r\n            alert(`Failed to post comment: ${e.message || 'Unknown error'}`);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (commentId) => {\r\n        if (!window.confirm(\"Delete comment?\")) return;\r\n        try {\r\n            await deleteComment(commentId);\r\n            await updatePostCommentCount(post.id, -1);\r\n            await loadComments();\r\n        } catch (e) {\r\n            console.error('Delete comment error:', e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-gray-50 dark:bg-[#1f2128] border-t dark:border-gray-700 p-4 animate-in slide-in-from-top-2\">\r\n            {/* Comments List */}\r\n            <div className=\"space-y-4 mb-4 max-h-80 overflow-y-auto custom-scrollbar pr-2\">\r\n                {comments.length === 0 && (\r\n                    <div className=\"text-center text-gray-400 text-xs py-2\">\r\n                        No comments yet. Be the first!\r\n                    </div>\r\n                )}\r\n                {comments.map(comment => (\r\n                    <div key={comment.id} className=\"group flex gap-3 text-sm\">\r\n                        <UserAvatar \r\n                            src={comment.userPhoto}\r\n                            name={comment.displayName}\r\n                            size=\"xs\"\r\n                            className=\"shrink-0\"\r\n                        />\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"bg-white dark:bg-dark-card border dark:border-gray-700 p-3 rounded-2xl rounded-tl-none inline-block max-w-full\">\r\n                                <div className=\"flex justify-between items-baseline gap-2 mb-1\">\r\n                                    <span className=\"font-bold dark:text-white text-xs truncate\">\r\n                                        {comment.displayName}\r\n                                    </span>\r\n                                    <span className=\"text-[10px] text-gray-400 shrink-0\">\r\n                                        {comment.timestamp \r\n                                            ? new Date(comment.timestamp).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) \r\n                                            : 'Just now'}\r\n                                    </span>\r\n                                </div>\r\n                                <p className=\"text-gray-700 dark:text-gray-300 break-words\">{comment.text}</p>\r\n                            </div>\r\n                            <div className=\"flex gap-3 mt-1 ml-2\">\r\n                                <button className=\"text-[10px] font-bold text-gray-500 hover:text-brand-blue transition\">\r\n                                    Reply\r\n                                </button>\r\n                                {comment.userId === currentUser?.uid && (\r\n                                    <button \r\n                                        onClick={() => handleDelete(comment.id)} \r\n                                        className=\"text-[10px] font-bold text-gray-400 hover:text-red-500 transition\"\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Comment Input */}\r\n            <form onSubmit={handleSubmit} className=\"flex gap-2\">\r\n                <UserAvatar \r\n                    src={currentUserData?.photoURL}\r\n                    name={currentUserData?.firstName || 'You'}\r\n                    size=\"xs\"\r\n                    className=\"shrink-0 hidden sm:block\"\r\n                />\r\n                <input \r\n                    className=\"flex-1 bg-white dark:bg-dark-card border dark:border-gray-600 rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-brand-blue outline-none dark:text-white transition\"\r\n                    placeholder=\"Write a comment...\"\r\n                    value={text}\r\n                    onChange={e => setText(e.target.value)}\r\n                />\r\n                <button \r\n                    type=\"submit\" \r\n                    disabled={!text.trim() || loading} \r\n                    className=\"bg-brand-blue text-white p-2 rounded-full hover:bg-blue-600 disabled:opacity-50 transition shadow-sm\"\r\n                >\r\n                    <Send size={16} className={loading ? 'animate-pulse' : ''}/>\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { MessageCircle, Share2, MoreHorizontal, User, Bookmark, Smile, UserPlus, Link2, Flag, Trash2, Check } from 'lucide-react';\r\nimport { updatePost, deletePost, checkIsSaved, savePost, unsavePost, updatePostSaveCount } from '../../config/neonQueries';\r\nimport StarFieldVisualizer from '../shared/StarFieldVisualizer';\r\nimport CommentSection from './CommentSection';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { createNotification } from '../../hooks/useNotifications';\r\nimport FollowButton, { FollowButtonCompact } from './FollowButton';\r\nimport toast from 'react-hot-toast';\r\nimport UserAvatar from '../shared/UserAvatar';\r\n\r\nconst REACTION_SET = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ”¥'];\r\n\r\nconst renderText = (text) => {\r\n    if (!text) return null;\r\n    return text.split(/(\\s+)/).map((part, i) => {\r\n        if (part.match(/^#\\w+/)) return <span key={i} className=\"text-brand-blue font-bold cursor-pointer hover:underline\">{part}</span>;\r\n        if (part.match(/^@\\w+/)) return <span key={i} className=\"text-purple-600 font-bold cursor-pointer hover:underline\">{part}</span>;\r\n        return part;\r\n    });\r\n};\r\n\r\nconst cardVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    show: { opacity: 1, y: 0, transition: { type: \"spring\", stiffness: 300, damping: 24 } },\r\n    exit: { opacity: 0, scale: 0.95, transition: { duration: 0.2 } }\r\n};\r\n\r\nexport default function PostCard({\r\n    post,\r\n    currentUser,\r\n    currentUserData,\r\n    openPublicProfile,\r\n    onReport,\r\n    onDelete,\r\n    isFollowingAuthor,\r\n    onToggleFollow,\r\n    autoPlayVideos = false\r\n}) {\r\n    const [showComments, setShowComments] = useState(false);\r\n    const [commentCount, setCommentCount] = useState(post.commentCount || 0);\r\n    const [isSaved, setIsSaved] = useState(false);\r\n    const [showReactionMenu, setShowReactionMenu] = useState(false);\r\n    const [showMoreMenu, setShowMoreMenu] = useState(false);\r\n    const [linkCopied, setLinkCopied] = useState(false);\r\n    const [savingPost, setSavingPost] = useState(false);\r\n    const menuRef = useRef(null);\r\n    const moreMenuRef = useRef(null);\r\n\r\n    const userId = currentUser?.id || currentUser?.uid;\r\n    const isOwnPost = post.userId === userId;\r\n    const myReaction = post.reactions?.[userId];\r\n    const reactionCounts = post.reactions ? Object.values(post.reactions).reduce((acc, emoji) => {\r\n        acc[emoji] = (acc[emoji] || 0) + 1;\r\n        return acc;\r\n    }, {}) : {};\r\n    const totalReactions = Object.values(reactionCounts).reduce((a, b) => a + b, 0);\r\n\r\n    // Check if post is saved on mount\r\n    useEffect(() => {\r\n        if (!userId) return;\r\n\r\n        const checkSaved = async () => {\r\n            try {\r\n                const isSaved = await checkIsSaved(userId, post.id);\r\n                setIsSaved(isSaved);\r\n            } catch (e) {\r\n                console.error('Error checking saved status:', e);\r\n                setIsSaved(false); // Default to false on error\r\n            }\r\n        };\r\n        checkSaved();\r\n    }, [userId, post.id]);\r\n\r\n    // Close menus on outside click\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n                setShowReactionMenu(false);\r\n            }\r\n            if (moreMenuRef.current && !moreMenuRef.current.contains(event.target)) {\r\n                setShowMoreMenu(false);\r\n            }\r\n        };\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    const handleReaction = async (emoji) => {\r\n        setShowReactionMenu(false);\r\n        if (!userId) return;\r\n\r\n        try {\r\n            const wasReacted = !!myReaction;\r\n            const currentReactions = post.reactions || {};\r\n\r\n            if (myReaction === emoji) {\r\n                // Remove reaction\r\n                const newReactions = { ...currentReactions };\r\n                delete newReactions[userId];\r\n\r\n                await updatePost(post.id, {\r\n                    reactions: newReactions,\r\n                    reaction_count: Math.max((post.reactionCount || 0) - 1, 0)\r\n                });\r\n            } else {\r\n                // Add/change reaction\r\n                const newReactions = { ...currentReactions, [userId]: emoji };\r\n                const increment = !myReaction ? 1 : 0;\r\n\r\n                await updatePost(post.id, {\r\n                    reactions: newReactions,\r\n                    reaction_count: (post.reactionCount || 0) + increment\r\n                });\r\n\r\n                // Send notification (only for new reactions, not changes)\r\n                if (!wasReacted && !isOwnPost) {\r\n                    createNotification({\r\n                        targetUserId: post.userId,\r\n                        type: 'like',\r\n                        fromUserId: userId,\r\n                        fromUserName: currentUserData?.effectiveDisplayName || currentUserData?.firstName || 'Someone',\r\n                        fromUserPhoto: currentUserData?.photoURL,\r\n                        postId: post.id,\r\n                        postPreview: post.text?.substring(0, 50),\r\n                        message: `reacted ${emoji} to your post`\r\n                    });\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Reaction failed\", e);\r\n            toast.error(\"Couldn't add reaction\");\r\n        }\r\n    };\r\n\r\n    const handleSavePost = async () => {\r\n        if (!userId || savingPost) return;\r\n        setSavingPost(true);\r\n\r\n        try {\r\n            if (isSaved) {\r\n                // Unsave\r\n                await unsavePost(userId, post.id);\r\n                await updatePostSaveCount(post.id, -1);\r\n\r\n                setIsSaved(false);\r\n                toast.success('Removed from saved');\r\n            } else {\r\n                // Save\r\n                await savePost(userId, post.id, {\r\n                    author_id: post.userId,\r\n                    author_name: post.displayName,\r\n                    preview: post.text?.substring(0, 100) || 'Media post',\r\n                    has_media: !!(post.attachments?.length || post.imageUrl || post.audioUrl)\r\n                });\r\n                await updatePostSaveCount(post.id, 1);\r\n\r\n                setIsSaved(true);\r\n                toast.success('Post saved!');\r\n\r\n                // Optionally notify author (some platforms do this)\r\n                // Uncomment if desired:\r\n                // if (!isOwnPost) {\r\n                //     createNotification({\r\n                //         targetUserId: post.userId,\r\n                //         type: 'save',\r\n                //         fromUserId: userId,\r\n                //         fromUserName: currentUserData?.effectiveDisplayName || 'Someone',\r\n                //         fromUserPhoto: currentUserData?.photoURL,\r\n                //         postId: post.id,\r\n                //         message: 'saved your post'\r\n                //     });\r\n                // }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Save failed\", e);\r\n            toast.error(\"Couldn't save post\");\r\n        }\r\n        setSavingPost(false);\r\n    };\r\n\r\n    const handleShare = async () => {\r\n        const shareUrl = `${window.location.origin}/post/${post.id}`;\r\n\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({\r\n                    title: `Post by ${post.displayName}`,\r\n                    text: post.text?.substring(0, 100) || 'Check out this post',\r\n                    url: shareUrl\r\n                });\r\n            } catch (e) {\r\n                if (e.name !== 'AbortError') {\r\n                    copyLink(shareUrl);\r\n                }\r\n            }\r\n        } else {\r\n            copyLink(shareUrl);\r\n        }\r\n    };\r\n\r\n    const copyLink = (url) => {\r\n        navigator.clipboard.writeText(url);\r\n        setLinkCopied(true);\r\n        toast.success('Link copied to clipboard!');\r\n        setTimeout(() => setLinkCopied(false), 2000);\r\n    };\r\n\r\n    const handleDeletePost = async () => {\r\n        if (!isOwnPost) return;\r\n        if (!window.confirm('Are you sure you want to delete this post?')) return;\r\n\r\n        try {\r\n            const success = await deletePost(post.id);\r\n\r\n            if (!success) {\r\n                toast.error(\"Couldn't delete post - permission denied\");\r\n                return;\r\n            }\r\n\r\n            toast.success('Post deleted');\r\n            // Notify parent to remove post from UI\r\n            if (onDelete) onDelete(post.id);\r\n        } catch (e) {\r\n            console.error('Delete failed:', e);\r\n            toast.error(\"Couldn't delete post\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            variants={cardVariants}\r\n            initial=\"hidden\"\r\n            animate=\"show\"\r\n            exit=\"exit\"\r\n            layout\r\n            className=\"bg-white dark:bg-dark-card border dark:border-gray-700 rounded-xl overflow-visible shadow-sm mb-4 relative\"\r\n        >\r\n            {/* Header */}\r\n            <div className=\"p-4 flex justify-between items-start\">\r\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                    <div\r\n                        className=\"cursor-pointer shrink-0\"\r\n                        onClick={() => post.userId && openPublicProfile(post.userId)}\r\n                        role=\"button\"\r\n                        tabIndex={0}\r\n                        aria-label={`View ${post.displayName || 'user'}'s profile`}\r\n                    >\r\n                        <UserAvatar\r\n                            src={post.authorPhoto}\r\n                            name={post.displayName}\r\n                            size=\"md\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"min-w-0 flex-1\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <h4\r\n                                className=\"font-bold dark:text-white text-sm hover:underline decoration-brand-blue cursor-pointer truncate\"\r\n                                onClick={() => post.userId && openPublicProfile(post.userId)}\r\n                            >\r\n                                {post.displayName || 'Unknown User'}\r\n                            </h4>\r\n                            {/* Follow button in header for non-own posts */}\r\n                            {!isOwnPost && onToggleFollow && !isFollowingAuthor && (\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); onToggleFollow(); }}\r\n                                    className=\"text-xs font-bold text-brand-blue hover:text-blue-700 transition shrink-0\"\r\n                                >\r\n                                    â€¢ Follow\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 flex items-center gap-1\">\r\n                            <span className=\"truncate\">{post.role}</span>\r\n                            <span>â€¢</span>\r\n                            <span className=\"shrink-0\">\r\n                                {post.timestamp || post.created_at\r\n                                    ? new Date(post.timestamp || post.created_at).toLocaleDateString()\r\n                                    : 'Just now'\r\n                                }\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* More menu */}\r\n                <div className=\"relative\" ref={moreMenuRef}>\r\n                    <button\r\n                        className=\"text-gray-400 hover:text-gray-600 dark:hover:text-white transition p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n                        onClick={() => setShowMoreMenu(!showMoreMenu)}\r\n                    >\r\n                        <MoreHorizontal size={20} />\r\n                    </button>\r\n\r\n                    <AnimatePresence>\r\n                        {showMoreMenu && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                                animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                                exit={{ opacity: 0, scale: 0.95, y: -5 }}\r\n                                className=\"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border dark:border-gray-700 overflow-hidden z-50\"\r\n                            >\r\n                                <button\r\n                                    onClick={() => { copyLink(`${window.location.origin}/post/${post.id}`); setShowMoreMenu(false); }}\r\n                                    className=\"w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition\"\r\n                                >\r\n                                    <Link2 size={16} className=\"text-gray-400\" />\r\n                                    <span className=\"dark:text-gray-200\">Copy link</span>\r\n                                </button>\r\n\r\n                                {!isOwnPost && (\r\n                                    <>\r\n                                        {onToggleFollow && (\r\n                                            <button\r\n                                                onClick={() => { onToggleFollow(); setShowMoreMenu(false); }}\r\n                                                className=\"w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition\"\r\n                                            >\r\n                                                <UserPlus size={16} className=\"text-gray-400\" />\r\n                                                <span className=\"dark:text-gray-200\">\r\n                                                    {isFollowingAuthor ? 'Unfollow' : 'Follow'} {post.displayName?.split(' ')[0]}\r\n                                                </span>\r\n                                            </button>\r\n                                        )}\r\n                                        <button\r\n                                            onClick={() => { onReport(); setShowMoreMenu(false); }}\r\n                                            className=\"w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition text-red-500\"\r\n                                        >\r\n                                            <Flag size={16} />\r\n                                            <span>Report post</span>\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n\r\n                                {isOwnPost && (\r\n                                    <button\r\n                                        onClick={() => { handleDeletePost(); setShowMoreMenu(false); }}\r\n                                        className=\"w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition text-red-500\"\r\n                                    >\r\n                                        <Trash2 size={16} />\r\n                                        <span>Delete post</span>\r\n                                    </button>\r\n                                )}\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Body */}\r\n            <div className=\"px-4 pb-2\">\r\n                {post.text && (\r\n                    <p className=\"text-gray-800 dark:text-gray-200 whitespace-pre-wrap text-sm leading-relaxed mb-3\">\r\n                        {renderText(post.text)}\r\n                    </p>\r\n                )}\r\n\r\n                {/* Attachments */}\r\n                {post.attachments && post.attachments.length > 0 && (\r\n                    <div className={`grid gap-2 mb-3 ${post.attachments.length > 1 ? 'grid-cols-2' : 'grid-cols-1'}`}>\r\n                        {post.attachments.map((att, i) => (\r\n                            <div key={i} className=\"rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 relative\">\r\n                                {att.type === 'image' && <img src={att.url} className=\"w-full h-auto object-contain rounded-lg\" alt=\"content\" style={{ maxHeight: '600px' }} />}\r\n                                {att.type === 'video' && (\r\n                                    <video\r\n                                        src={att.url}\r\n                                        controls\r\n                                        className=\"w-full h-auto object-contain bg-black rounded-lg\"\r\n                                        style={{ maxHeight: '600px' }}\r\n                                        autoPlay={autoPlayVideos}\r\n                                        playsInline\r\n                                        muted={autoPlayVideos}\r\n                                        preload=\"metadata\"\r\n                                    />\r\n                                )}\r\n                                {att.type === 'audio' && (\r\n                                    <div className=\"w-full\">\r\n                                        <StarFieldVisualizer audioUrl={att.url} fileName={att.name || 'Audio Track'} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Fallbacks for legacy posts */}\r\n                {post.audioUrl && !post.attachments && (\r\n                    <div className=\"rounded-lg overflow-hidden bg-transparent mb-3\">\r\n                        <StarFieldVisualizer audioUrl={post.audioUrl} fileName={post.audioName || 'Track'} />\r\n                    </div>\r\n                )}\r\n                {post.imageUrl && !post.attachments && (\r\n                    <div className=\"rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 mb-3\">\r\n                        <img src={post.imageUrl} className=\"w-full h-auto object-contain rounded-lg\" alt=\"legacy content\" style={{ maxHeight: '600px' }} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Engagement Stats */}\r\n            {(totalReactions > 0 || post.saveCount > 0) && (\r\n                <div className=\"px-4 py-2 flex items-center justify-between\">\r\n                    <div className=\"flex gap-1\">\r\n                        {Object.entries(reactionCounts).map(([emoji, count]) => (\r\n                            <motion.div\r\n                                key={emoji}\r\n                                initial={{ scale: 0 }} animate={{ scale: 1 }}\r\n                                className={`text-xs px-2 py-1 rounded-full border flex items-center gap-1 ${myReaction === emoji ? 'bg-blue-50 border-blue-200 dark:bg-blue-900/30 dark:border-blue-800' : 'bg-gray-50 border-gray-100 dark:bg-gray-800 dark:border-gray-700'} dark:text-gray-300`}\r\n                            >\r\n                                <span>{emoji}</span>\r\n                                <span className=\"font-bold\">{count}</span>\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                    {post.saveCount > 0 && (\r\n                        <span className=\"text-xs text-gray-400\">\r\n                            {post.saveCount} save{post.saveCount !== 1 ? 's' : ''}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"px-4 py-3 border-t dark:border-gray-700 flex items-center justify-between relative\">\r\n                <div className=\"flex gap-2 sm:gap-4\">\r\n                    {/* Reaction Button */}\r\n                    <div className=\"relative\">\r\n                        <motion.button\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={() => setShowReactionMenu(!showReactionMenu)}\r\n                            className={`flex items-center gap-1.5 sm:gap-2 text-sm font-medium transition px-2 py-1 rounded-lg ${myReaction ? 'text-blue-600 bg-blue-50 dark:bg-blue-900/20' : 'text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800'}`}\r\n                        >\r\n                            {myReaction ? <span className=\"text-lg\">{myReaction}</span> : <Smile size={18} />}\r\n                            <span className=\"hidden sm:inline\">{myReaction ? 'Reacted' : 'React'}</span>\r\n                        </motion.button>\r\n\r\n                        <AnimatePresence>\r\n                            {showReactionMenu && (\r\n                                <motion.div\r\n                                    ref={menuRef}\r\n                                    initial={{ opacity: 0, scale: 0.8, y: 10 }}\r\n                                    animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                                    exit={{ opacity: 0, scale: 0.8, y: 10 }}\r\n                                    className=\"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 shadow-xl rounded-full p-2 flex gap-1 sm:gap-2 z-50 border dark:border-gray-600 origin-bottom-left\"\r\n                                >\r\n                                    {REACTION_SET.map(emoji => (\r\n                                        <motion.button\r\n                                            key={emoji}\r\n                                            whileHover={{ scale: 1.2 }}\r\n                                            whileTap={{ scale: 0.9 }}\r\n                                            onClick={(e) => { e.stopPropagation(); handleReaction(emoji); }}\r\n                                            className={`text-xl p-1 sm:p-1.5 rounded-full ${myReaction === emoji ? 'bg-blue-100 dark:bg-blue-900' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}`}\r\n                                        >\r\n                                            {emoji}\r\n                                        </motion.button>\r\n                                    ))}\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Comment Button */}\r\n                    <motion.button\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={() => setShowComments(!showComments)}\r\n                        className=\"flex items-center gap-1.5 sm:gap-2 text-sm font-medium text-gray-500 hover:text-brand-blue transition px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n                    >\r\n                        <MessageCircle size={18} />\r\n                        <span className=\"hidden sm:inline\">{commentCount > 0 ? commentCount : 'Comment'}</span>\r\n                        {commentCount > 0 && <span className=\"sm:hidden\">{commentCount}</span>}\r\n                    </motion.button>\r\n\r\n                    {/* Share Button */}\r\n                    <motion.button\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={handleShare}\r\n                        className={`flex items-center gap-1.5 sm:gap-2 text-sm font-medium transition px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 ${linkCopied ? 'text-green-500' : 'text-gray-500 hover:text-green-500'}`}\r\n                    >\r\n                        {linkCopied ? <Check size={18} /> : <Share2 size={18} />}\r\n                        <span className=\"hidden sm:inline\">{linkCopied ? 'Copied!' : 'Share'}</span>\r\n                    </motion.button>\r\n                </div>\r\n\r\n                {/* Save Button */}\r\n                <motion.button\r\n                    whileTap={{ scale: 0.8 }}\r\n                    onClick={handleSavePost}\r\n                    disabled={savingPost}\r\n                    className={`${isSaved ? 'text-brand-blue' : 'text-gray-400 hover:text-gray-600 dark:hover:text-gray-300'} transition p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full disabled:opacity-50`}\r\n                    title={isSaved ? 'Remove from saved' : 'Save post'}\r\n                >\r\n                    <Bookmark size={18} fill={isSaved ? \"currentColor\" : \"none\"} />\r\n                </motion.button>\r\n            </div>\r\n\r\n            {/* Comments Section */}\r\n            <AnimatePresence>\r\n                {showComments && (\r\n                    <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        className=\"overflow-hidden\"\r\n                    >\r\n                        <CommentSection\r\n                            post={post}\r\n                            currentUser={currentUser}\r\n                            currentUserData={currentUserData}\r\n                            blockedUsers={[]}\r\n                            onCountChange={setCommentCount}\r\n                        />\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Send, Image as ImageIcon, Music, Video, X, Sliders, Paperclip, Loader2 } from 'lucide-react';\r\nimport { useVercelUpload } from '../../hooks/useVercelUpload';\r\nimport { POPULAR_PLUGINS_LIST } from '../../config/constants';\r\nimport { MultiSelect } from '../shared/Inputs';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport default function CreatePostWidget({ user, userData, subProfiles = {}, onPost }) {\r\n    const [text, setText] = useState('');\r\n    const [media, setMedia] = useState([]); // Array of {file, type, previewUrl}\r\n    const [seshFxOpen, setSeshFxOpen] = useState(false);\r\n    const [pluginsUsed, setPluginsUsed] = useState([]);\r\n    const [presetFile, setPresetFile] = useState(null);\r\n    const [isPosting, setIsPosting] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState({ current: 0, total: 0, percent: 0 });\r\n\r\n    // Get active profile info\r\n    const activeRole = userData?.activeProfileRole || userData?.accountTypes?.[0] || 'Fan';\r\n    const activeProfile = subProfiles?.[activeRole] || {};\r\n    const getDisplayRole = (role) => {\r\n        if (!role || role === 'User' || role === 'Fan') return role || 'User';\r\n        if (role === 'Talent') {\r\n            const talentSub = subProfiles?.['Talent'];\r\n            const subRole = talentSub?.profile_data?.talentSubRole || talentSub?.talentSubRole;\r\n            if (subRole && subRole !== '') return subRole;\r\n        }\r\n        return role;\r\n    };\r\n    const displayRole = getDisplayRole(activeRole);\r\n\r\n    const { uploadMedia } = useVercelUpload('post-media');\r\n\r\n    const handleFileSelect = (e, type) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            const file = e.target.files[0];\r\n            // Create preview URL\r\n            const previewUrl = URL.createObjectURL(file);\r\n            setMedia([...media, { file, type, previewUrl }]);\r\n        }\r\n    };\r\n\r\n    const removeMedia = (index) => {\r\n        setMedia(media.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!text.trim() && media.length === 0) return;\r\n        setIsPosting(true);\r\n\r\n        try {\r\n            // Calculate total uploads needed\r\n            const totalUploads = media.length + (presetFile ? 1 : 0);\r\n            let completedUploads = 0;\r\n\r\n            // Update progress helper\r\n            const updateProgress = () => {\r\n                completedUploads++;\r\n                setUploadProgress({\r\n                    current: completedUploads,\r\n                    total: totalUploads,\r\n                    percent: Math.round((completedUploads / totalUploads) * 100)\r\n                });\r\n            };\r\n\r\n            // Reset progress\r\n            setUploadProgress({ current: 0, total: totalUploads, percent: 0 });\r\n\r\n            // Upload all media assets one by one to track progress\r\n            const uploadedMedia = [];\r\n            for (const m of media) {\r\n                // Vercel Blob automatically handles storage organization\r\n                const result = await uploadMedia(m.file);\r\n\r\n                // CRITICAL FIX: Ensure we enforce the type selected by the user (m.type)\r\n                if (result) {\r\n                    uploadedMedia.push({\r\n                        url: result.url, // Vercel Blob returns { url } object\r\n                        type: m.type // Override with explicit type (audio, video, image)\r\n                    });\r\n                }\r\n                updateProgress();\r\n            }\r\n\r\n            let presetUrl = null;\r\n            if (presetFile) {\r\n                const res = await uploadMedia(presetFile);\r\n                presetUrl = res?.url;\r\n                updateProgress();\r\n            }\r\n\r\n            const postPayload = {\r\n                text,\r\n                attachments: uploadedMedia.filter(m => m !== null), // Clean failed uploads\r\n                seshFx: (seshFxOpen && (pluginsUsed.length > 0 || presetUrl)) ? {\r\n                    plugins: pluginsUsed,\r\n                    presetUrl,\r\n                    presetName: presetFile ? presetFile.name : null\r\n                } : null\r\n            };\r\n\r\n            await onPost(postPayload);\r\n\r\n            // Reset Form\r\n            setText('');\r\n            setMedia([]);\r\n            setSeshFxOpen(false);\r\n            setPluginsUsed([]);\r\n            setPresetFile(null);\r\n            setUploadProgress({ current: 0, total: 0, percent: 0 });\r\n        } catch (error) {\r\n            console.error(\"Error creating post:\", error);\r\n            alert(\"Failed to create post. Please try again.\");\r\n        } finally {\r\n            setIsPosting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-dark-card p-4 rounded-xl border dark:border-gray-700 shadow-sm mb-6\">\r\n            {/* Upload Progress Overlay */}\r\n            <AnimatePresence>\r\n                {isPosting && uploadProgress.total > 0 && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, height: 0 }}\r\n                        animate={{ opacity: 1, height: 'auto' }}\r\n                        exit={{ opacity: 0, height: 0 }}\r\n                        className=\"mb-4 overflow-hidden\"\r\n                    >\r\n                        <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-blue-100 dark:border-blue-800/50\">\r\n                            <div className=\"flex items-center gap-3 mb-3\">\r\n                                <div className=\"relative\">\r\n                                    <Loader2 className=\"animate-spin text-brand-blue\" size={24} />\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-gray-900 dark:text-white\">\r\n                                        Getting Post Ready...\r\n                                    </h4>\r\n                                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                                        Uploading {uploadProgress.current} of {uploadProgress.total} files\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Progress Bar */}\r\n                            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden\">\r\n                                <motion.div\r\n                                    className=\"h-full bg-gradient-to-r from-brand-blue to-purple-500 rounded-full\"\r\n                                    initial={{ width: 0 }}\r\n                                    animate={{ width: `${uploadProgress.percent}%` }}\r\n                                    transition={{ duration: 0.3, ease: 'easeOut' }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Percentage */}\r\n                            <div className=\"flex justify-end mt-1\">\r\n                                <span className=\"text-xs font-semibold text-brand-blue\">\r\n                                    {uploadProgress.percent}%\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <div className=\"relative\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden shrink-0\">\r\n                        {activeProfile?.photo_url || userData?.photoURL ? (\r\n                            <img src={activeProfile?.photo_url || userData?.photoURL} className=\"h-full w-full object-cover\" />\r\n                        ) : (\r\n                            <div className=\"h-full w-full bg-brand-blue\"></div>\r\n                        )}\r\n                    </div>\r\n                    {/* Profile Badge */}\r\n                    {activeRole && activeRole !== 'Fan' && (\r\n                        <div className=\"absolute -bottom-1 -right-1 bg-brand-blue text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border-2 border-white dark:border-[#2c2e36]\">\r\n                            {displayRole}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <textarea\r\n                        className=\"w-full bg-transparent outline-none text-gray-900 dark:text-white placeholder-gray-500 min-h-[80px] resize-none\"\r\n                        placeholder=\"What's creating sound today? (#tags @mentions)\"\r\n                        value={text}\r\n                        onChange={e => setText(e.target.value)}\r\n                        disabled={isPosting}\r\n                    />\r\n\r\n                    {/* Media Previews Grid */}\r\n                    {media.length > 0 && (\r\n                        <div className=\"grid grid-cols-2 gap-2 mb-3\">\r\n                            {media.map((m, i) => (\r\n                                <div key={i} className=\"relative rounded-lg overflow-hidden bg-black/5 border dark:border-gray-600 aspect-video group flex items-center justify-center\">\r\n                                    {m.type === 'image' && <img src={m.previewUrl} className=\"h-full w-full object-cover\" />}\r\n                                    {m.type === 'video' && <video src={m.previewUrl} className=\"h-full w-full object-cover\" />}\r\n                                    {m.type === 'audio' && (\r\n                                        <div className=\"flex flex-col items-center justify-center text-brand-blue bg-gray-100 dark:bg-gray-800 w-full h-full\">\r\n                                            <Music size={32} />\r\n                                            <span className=\"text-xs text-gray-500 mt-2 truncate max-w-[90%] px-2\">{m.file.name}</span>\r\n                                        </div>\r\n                                    )}\r\n                                    {!isPosting && (\r\n                                        <button onClick={() => removeMedia(i)} className=\"absolute top-1 right-1 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition hover:bg-red-500\"><X size={12} /></button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* SeshFx Drawer */}\r\n                    {seshFxOpen && (\r\n                        <div className=\"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg mb-3 border border-blue-100 dark:border-blue-800/50 animate-in slide-in-from-top-2\">\r\n                            <div className=\"flex justify-between items-center mb-2\">\r\n                                <span className=\"text-xs font-bold text-brand-blue uppercase\">SeshFx Data</span>\r\n                                <button onClick={() => setSeshFxOpen(false)}><X size={14} className=\"text-gray-400 hover:text-brand-blue\" /></button>\r\n                            </div>\r\n                            <MultiSelect label=\"\" options={POPULAR_PLUGINS_LIST} initialValues={pluginsUsed} onChange={(_, val) => setPluginsUsed(val)} />\r\n                            <div className=\"mt-2 flex items-center gap-2\">\r\n                                <Paperclip size={14} className=\"text-gray-400\" />\r\n                                <input type=\"file\" className=\"text-xs text-gray-500 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-xs file:bg-white dark:file:bg-gray-700 dark:file:text-white\" onChange={e => setPresetFile(e.target.files[0])} />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-between items-center pt-2 border-t dark:border-gray-700\">\r\n                        <div className=\"flex gap-1\">\r\n                            <label className={`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-brand-blue cursor-pointer transition ${isPosting ? 'opacity-50 pointer-events-none' : ''}`} title=\"Add Image\">\r\n                                <ImageIcon size={20} />\r\n                                <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={e => handleFileSelect(e, 'image')} disabled={isPosting} />\r\n                            </label>\r\n                            <label className={`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-green-500 cursor-pointer transition ${isPosting ? 'opacity-50 pointer-events-none' : ''}`} title=\"Add Video\">\r\n                                <Video size={20} />\r\n                                <input type=\"file\" className=\"hidden\" accept=\"video/*\" onChange={e => handleFileSelect(e, 'video')} disabled={isPosting} />\r\n                            </label>\r\n                            <label className={`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full text-purple-500 cursor-pointer transition ${isPosting ? 'opacity-50 pointer-events-none' : ''}`} title=\"Add Audio Track\">\r\n                                <Music size={20} />\r\n                                <input type=\"file\" className=\"hidden\" accept=\"audio/*\" onChange={e => handleFileSelect(e, 'audio')} disabled={isPosting} />\r\n                            </label>\r\n                            <button onClick={() => setSeshFxOpen(!seshFxOpen)} disabled={isPosting} className={`p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition ${seshFxOpen ? 'bg-blue-50 dark:bg-blue-900/20 text-brand-blue' : 'text-gray-400'} ${isPosting ? 'opacity-50' : ''}`} title=\"Add Plugin Data\">\r\n                                <Sliders size={20} />\r\n                            </button>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={isPosting || (!text && media.length === 0)}\r\n                            className=\"bg-brand-blue text-white px-5 py-1.5 rounded-full font-bold text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition\"\r\n                        >\r\n                            {isPosting ? <Loader2 className=\"animate-spin\" size={16} /> : <><span>Post</span> <Send size={14} /></>}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// src/components/social/discover/DiscoverSection.jsx\r\n\r\nimport React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\nexport default function DiscoverSection({ \r\n    title, \r\n    description, \r\n    items, \r\n    loading, \r\n    emptyMessage,\r\n    onSeeMore,\r\n    renderItem,\r\n    gridCols = \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\"\r\n}) {\r\n    if (loading) {\r\n        return (\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold dark:text-white mb-1\">{title}</h3>\r\n                    {description && (\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{description}</p>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex justify-center py-12\">\r\n                    <Loader2 className=\"animate-spin text-indigo-600\" size={32} />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!items || items.length === 0) {\r\n        return (\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold dark:text-white mb-1\">{title}</h3>\r\n                    {description && (\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{description}</p>\r\n                    )}\r\n                </div>\r\n                <div className=\"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700\">\r\n                    <p className=\"text-gray-500 dark:text-gray-400\">\r\n                        {emptyMessage || 'No items found.'}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold dark:text-white mb-1\">{title}</h3>\r\n                    {description && (\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{description}</p>\r\n                    )}\r\n                </div>\r\n                {onSeeMore && (\r\n                    <button\r\n                        onClick={onSeeMore}\r\n                        className=\"text-sm text-indigo-600 dark:text-indigo-400 font-semibold hover:underline\"\r\n                    >\r\n                        See More â†’\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            <div className={`grid ${gridCols} gap-4`}>\r\n                {items.map((item, idx) => (\r\n                    <motion.div\r\n                        key={item.id || idx}\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: idx * 0.05 }}\r\n                    >\r\n                        {renderItem ? renderItem(item, idx) : (\r\n                            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4\">\r\n                                {JSON.stringify(item)}\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/discover/DiscoverCard.jsx\r\n\r\nimport React from 'react';\r\nimport { User, Play, MapPin, Award, School, Music, Building2 } from 'lucide-react';\r\nimport UserAvatar from '../../shared/UserAvatar';\r\nimport FollowButton from '../FollowButton';\r\n\r\nexport default function DiscoverCard({ \r\n    item, \r\n    type, \r\n    onFollow, \r\n    onViewProfile, \r\n    onPlay,\r\n    isFollowing,\r\n    currentUser \r\n}) {\r\n    const getIcon = () => {\r\n        switch (type) {\r\n            case 'artist':\r\n            case 'producer':\r\n                return <User size={20} />;\r\n            case 'studio':\r\n                return <Building2 size={20} />;\r\n            case 'school':\r\n                return <School size={20} />;\r\n            case 'sound':\r\n                return <Music size={20} />;\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    const getTitle = () => {\r\n        if (type === 'sound') {\r\n            return item.text || 'Audio Post';\r\n        }\r\n        return item.displayName || item.name || item.title || 'Unknown';\r\n    };\r\n\r\n    const getSubtitle = () => {\r\n        if (type === 'sound') {\r\n            return item.displayName || 'Unknown Artist';\r\n        }\r\n        if (type === 'artist' || type === 'producer') {\r\n            return item.role || item.activeProfileRole || 'User';\r\n        }\r\n        if (type === 'studio') {\r\n            return item.address || item.city || 'Location not specified';\r\n        }\r\n        if (type === 'school') {\r\n            return item.address || 'Location not specified';\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all\">\r\n            <div className=\"flex items-start gap-3\">\r\n                {/* Avatar/Image */}\r\n                <div className=\"shrink-0\">\r\n                    {type === 'sound' ? (\r\n                        <div className=\"w-12 h-12 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center\">\r\n                            <Music size={24} className=\"text-indigo-600 dark:text-indigo-400\" />\r\n                        </div>\r\n                    ) : (\r\n                        <UserAvatar\r\n                            src={item.photoURL || item.logoURL}\r\n                            name={getTitle()}\r\n                            size=\"md\"\r\n                        />\r\n                    )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-2\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <h3 \r\n                                className=\"font-bold dark:text-white truncate cursor-pointer hover:text-indigo-600 dark:hover:text-indigo-400 transition\"\r\n                                onClick={onViewProfile}\r\n                            >\r\n                                {getTitle()}\r\n                            </h3>\r\n                            {getSubtitle() && (\r\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate mt-0.5\">\r\n                                    {getSubtitle()}\r\n                                </p>\r\n                            )}\r\n                            \r\n                            {/* Additional info */}\r\n                            {type === 'studio' && item.amenities && (\r\n                                <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n                                    {item.amenities.slice(0, 2).join(', ')}\r\n                                </p>\r\n                            )}\r\n                            \r\n                            {type === 'school' && item.programs && (\r\n                                <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\r\n                                    {item.programs.length} program{item.programs.length !== 1 ? 's' : ''}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Actions */}\r\n                        <div className=\"flex items-center gap-2 shrink-0\">\r\n                            {type === 'sound' && onPlay && (\r\n                                <button\r\n                                    onClick={onPlay}\r\n                                    className=\"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition\"\r\n                                    title=\"Play\"\r\n                                >\r\n                                    <Play size={16} fill=\"currentColor\" />\r\n                                </button>\r\n                            )}\r\n                            \r\n                            {(type === 'artist' || type === 'producer') && onFollow && (\r\n                                <FollowButton\r\n                                    isFollowing={isFollowing}\r\n                                    onToggle={onFollow}\r\n                                    size=\"sm\"\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Stats */}\r\n                    {(item.followerCount || item.enrollmentCount) && (\r\n                        <div className=\"flex items-center gap-3 mt-2 text-xs text-gray-500 dark:text-gray-400\">\r\n                            {item.followerCount !== undefined && (\r\n                                <span>{item.followerCount} followers</span>\r\n                            )}\r\n                            {item.enrollmentCount !== undefined && (\r\n                                <span>{item.enrollmentCount} enrolled</span>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/hooks/useDiscover.js\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getFollowing } from '../config/neonQueries';\r\n\r\n/**\r\n * Hook for discovering content and users\r\n * TODO: Migrate full discovery functionality to Neon\r\n * Currently provides basic following functionality\r\n */\r\nexport function useDiscover(user, userData) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [sounds, setSounds] = useState([]);\r\n    const [artists, setArtists] = useState([]);\r\n    const [producers, setProducers] = useState([]);\r\n    const [studios, setStudios] = useState([]);\r\n    const [schools, setSchools] = useState([]);\r\n    const [following, setFollowing] = useState([]);\r\n\r\n    // Load following list\r\n    useEffect(() => {\r\n        const userId = user?.id || user?.uid;\r\n        if (!userId) return;\r\n\r\n        const loadFollowing = async () => {\r\n            try {\r\n                const followingIds = await getFollowing(userId);\r\n                setFollowing(followingIds || []);\r\n            } catch (error) {\r\n                console.error('Error loading following:', error);\r\n            }\r\n        };\r\n\r\n        loadFollowing();\r\n    }, [user?.id, user?.uid]);\r\n\r\n    // TODO: Implement full discovery features with Neon queries\r\n    // - Load sounds/posts with audio\r\n    // - Load artists by role\r\n    // - Load producers and studios\r\n    // - Load schools\r\n    // For now, return empty arrays to prevent app crashes\r\n\r\n    return {\r\n        loading,\r\n        sounds,\r\n        artists,\r\n        producers,\r\n        studios,\r\n        schools,\r\n        following,\r\n        // Placeholder functions\r\n        refresh: () => {},\r\n        filterBy: () => {}\r\n    };\r\n}\r\n","// src/components/social/discover/SoundsDiscover.jsx\r\n\r\nimport React from 'react';\r\nimport DiscoverSection from './DiscoverSection';\r\nimport DiscoverCard from './DiscoverCard';\r\nimport { useDiscover } from '../../../hooks/useDiscover';\r\n\r\nexport default function SoundsDiscover({ user, userData, openPublicProfile, onFollow }) {\r\n    const { loading, recommendations } = useDiscover(user, userData);\r\n\r\n    const sounds = recommendations?.sounds || {};\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <DiscoverSection\r\n                title=\"Trending Sounds\"\r\n                description=\"Most popular audio content right now\"\r\n                items={sounds.trending || []}\r\n                loading={loading}\r\n                emptyMessage=\"No trending sounds found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"sound\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId)}\r\n                        onPlay={() => {\r\n                            // Handle play - would integrate with audio player\r\n                            console.log('Play sound:', item.id);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <DiscoverSection\r\n                title=\"New Releases\"\r\n                description=\"Recently posted audio content\"\r\n                items={sounds.recent || []}\r\n                loading={loading}\r\n                emptyMessage=\"No new sounds found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"sound\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId)}\r\n                        onPlay={() => {\r\n                            console.log('Play sound:', item.id);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            {sounds.personalized && sounds.personalized.length > 0 && (\r\n                <DiscoverSection\r\n                    title=\"Recommended for You\"\r\n                    description=\"Based on your activity\"\r\n                    items={sounds.personalized || []}\r\n                    loading={loading}\r\n                    emptyMessage=\"No recommendations yet.\"\r\n                    renderItem={(item) => (\r\n                        <DiscoverCard\r\n                            item={item}\r\n                            type=\"sound\"\r\n                            onViewProfile={() => openPublicProfile?.(item.userId)}\r\n                            onPlay={() => {\r\n                                console.log('Play sound:', item.id);\r\n                            }}\r\n                        />\r\n                    )}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/discover/ArtistsDiscover.jsx\r\n\r\nimport React from 'react';\r\nimport DiscoverSection from './DiscoverSection';\r\nimport DiscoverCard from './DiscoverCard';\r\nimport { useDiscover } from '../../../hooks/useDiscover';\r\nimport { useFollowSystem } from '../../../hooks/useFollowSystem';\r\n\r\nexport default function ArtistsDiscover({ user, userData, openPublicProfile }) {\r\n    const { loading, recommendations } = useDiscover(user, userData);\r\n    const { isFollowing, toggleFollow } = useFollowSystem(user?.uid, userData);\r\n\r\n    const artists = recommendations?.artists || {};\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <DiscoverSection\r\n                title=\"Trending Artists\"\r\n                description=\"Most popular artists right now\"\r\n                items={artists.trending || []}\r\n                loading={loading}\r\n                emptyMessage=\"No trending artists found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"artist\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                        onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                        isFollowing={isFollowing(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <DiscoverSection\r\n                title=\"New Artists\"\r\n                description=\"Recently joined artists\"\r\n                items={artists.recent || []}\r\n                loading={loading}\r\n                emptyMessage=\"No new artists found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"artist\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                        onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                        isFollowing={isFollowing(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            {artists.personalized && artists.personalized.length > 0 && (\r\n                <DiscoverSection\r\n                    title=\"Recommended for You\"\r\n                    description=\"Based on artists you follow\"\r\n                    items={artists.personalized || []}\r\n                    loading={loading}\r\n                    emptyMessage=\"No recommendations yet.\"\r\n                    renderItem={(item) => (\r\n                        <DiscoverCard\r\n                            item={item}\r\n                            type=\"artist\"\r\n                            onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                            onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                            isFollowing={isFollowing(item.userId || item.id)}\r\n                        />\r\n                    )}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/discover/ProducersDiscover.jsx\r\n\r\nimport React from 'react';\r\nimport DiscoverSection from './DiscoverSection';\r\nimport DiscoverCard from './DiscoverCard';\r\nimport { useDiscover } from '../../../hooks/useDiscover';\r\nimport { useFollowSystem } from '../../../hooks/useFollowSystem';\r\n\r\nexport default function ProducersDiscover({ user, userData, openPublicProfile }) {\r\n    const { loading, recommendations } = useDiscover(user, userData);\r\n    const { isFollowing, toggleFollow } = useFollowSystem(user?.uid, userData);\r\n\r\n    const producers = recommendations?.producers || {};\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <DiscoverSection\r\n                title=\"Trending Producers\"\r\n                description=\"Most popular producers right now\"\r\n                items={producers.trending || []}\r\n                loading={loading}\r\n                emptyMessage=\"No trending producers found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"producer\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                        onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                        isFollowing={isFollowing(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <DiscoverSection\r\n                title=\"New Producers\"\r\n                description=\"Recently joined producers\"\r\n                items={producers.recent || []}\r\n                loading={loading}\r\n                emptyMessage=\"No new producers found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"producer\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                        onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                        isFollowing={isFollowing(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            {producers.personalized && producers.personalized.length > 0 && (\r\n                <DiscoverSection\r\n                    title=\"Recommended for You\"\r\n                    description=\"Based on producers you follow\"\r\n                    items={producers.personalized || []}\r\n                    loading={loading}\r\n                    emptyMessage=\"No recommendations yet.\"\r\n                    renderItem={(item) => (\r\n                        <DiscoverCard\r\n                            item={item}\r\n                            type=\"producer\"\r\n                            onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                            onFollow={() => toggleFollow(item.userId || item.id, item)}\r\n                            isFollowing={isFollowing(item.userId || item.id)}\r\n                        />\r\n                    )}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/discover/StudiosDiscover.jsx\r\n\r\nimport React from 'react';\r\nimport DiscoverSection from './DiscoverSection';\r\nimport DiscoverCard from './DiscoverCard';\r\nimport { useDiscover } from '../../../hooks/useDiscover';\r\n\r\nexport default function StudiosDiscover({ user, userData, openPublicProfile }) {\r\n    const { loading, recommendations } = useDiscover(user, userData);\r\n\r\n    const studios = recommendations?.studios || {};\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <DiscoverSection\r\n                title=\"Trending Studios\"\r\n                description=\"Most popular studios right now\"\r\n                items={studios.trending || []}\r\n                loading={loading}\r\n                emptyMessage=\"No trending studios found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"studio\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <DiscoverSection\r\n                title=\"New Studios\"\r\n                description=\"Recently added studios\"\r\n                items={studios.recent || []}\r\n                loading={loading}\r\n                emptyMessage=\"No new studios found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"studio\"\r\n                        onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            {studios.personalized && studios.personalized.length > 0 && (\r\n                <DiscoverSection\r\n                    title=\"Recommended for You\"\r\n                    description=\"Based on your location and interests\"\r\n                    items={studios.personalized || []}\r\n                    loading={loading}\r\n                    emptyMessage=\"No recommendations yet.\"\r\n                    renderItem={(item) => (\r\n                        <DiscoverCard\r\n                            item={item}\r\n                            type=\"studio\"\r\n                            onViewProfile={() => openPublicProfile?.(item.userId || item.id)}\r\n                        />\r\n                    )}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/discover/SchoolsDiscover.jsx\r\n\r\nimport React from 'react';\r\nimport DiscoverSection from './DiscoverSection';\r\nimport DiscoverCard from './DiscoverCard';\r\nimport { useDiscover } from '../../../hooks/useDiscover';\r\n\r\nexport default function SchoolsDiscover({ user, userData }) {\r\n    const { loading, recommendations } = useDiscover(user, userData);\r\n\r\n    const schools = recommendations?.schools || {};\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <DiscoverSection\r\n                title=\"Featured Schools\"\r\n                description=\"Top music education programs\"\r\n                items={schools.trending || []}\r\n                loading={loading}\r\n                emptyMessage=\"No featured schools found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"school\"\r\n                        onViewProfile={() => {\r\n                            // Navigate to school or show details\r\n                            console.log('View school:', item.id);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            <DiscoverSection\r\n                title=\"New Schools\"\r\n                description=\"Recently added schools\"\r\n                items={schools.recent || []}\r\n                loading={loading}\r\n                emptyMessage=\"No new schools found.\"\r\n                renderItem={(item) => (\r\n                    <DiscoverCard\r\n                        item={item}\r\n                        type=\"school\"\r\n                        onViewProfile={() => {\r\n                            console.log('View school:', item.id);\r\n                        }}\r\n                    />\r\n                )}\r\n            />\r\n\r\n            {schools.personalized && schools.personalized.length > 0 && (\r\n                <DiscoverSection\r\n                    title=\"Recommended for You\"\r\n                    description=\"Based on your location and interests\"\r\n                    items={schools.personalized || []}\r\n                    loading={loading}\r\n                    emptyMessage=\"No recommendations yet.\"\r\n                    renderItem={(item) => (\r\n                        <DiscoverCard\r\n                            item={item}\r\n                            type=\"school\"\r\n                            onViewProfile={() => {\r\n                                console.log('View school:', item.id);\r\n                            }}\r\n                        />\r\n                    )}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","// src/components/social/Discover.jsx\r\n\r\nimport React, { useState } from 'react';\r\nimport { Music, User, Headphones, Building2, School } from 'lucide-react';\r\nimport SoundsDiscover from './discover/SoundsDiscover';\r\nimport ArtistsDiscover from './discover/ArtistsDiscover';\r\nimport ProducersDiscover from './discover/ProducersDiscover';\r\nimport StudiosDiscover from './discover/StudiosDiscover';\r\nimport SchoolsDiscover from './discover/SchoolsDiscover';\r\n\r\nconst DISCOVER_TABS = [\r\n    { id: 'sounds', label: 'Sounds', icon: Music },\r\n    { id: 'artists', label: 'Artists', icon: User },\r\n    { id: 'producers', label: 'Producers', icon: Headphones },\r\n    { id: 'studios', label: 'Studios', icon: Building2 },\r\n    { id: 'schools', label: 'Schools', icon: School },\r\n];\r\n\r\nexport default function Discover({ user, userData, openPublicProfile }) {\r\n    const [activeTab, setActiveTab] = useState('sounds');\r\n\r\n    const renderContent = () => {\r\n        switch (activeTab) {\r\n            case 'sounds':\r\n                return (\r\n                    <SoundsDiscover \r\n                        user={user} \r\n                        userData={userData} \r\n                        openPublicProfile={openPublicProfile}\r\n                    />\r\n                );\r\n            case 'artists':\r\n                return (\r\n                    <ArtistsDiscover \r\n                        user={user} \r\n                        userData={userData} \r\n                        openPublicProfile={openPublicProfile}\r\n                    />\r\n                );\r\n            case 'producers':\r\n                return (\r\n                    <ProducersDiscover \r\n                        user={user} \r\n                        userData={userData} \r\n                        openPublicProfile={openPublicProfile}\r\n                    />\r\n                );\r\n            case 'studios':\r\n                return (\r\n                    <StudiosDiscover \r\n                        user={user} \r\n                        userData={userData} \r\n                        openPublicProfile={openPublicProfile}\r\n                    />\r\n                );\r\n            case 'schools':\r\n                return (\r\n                    <SchoolsDiscover \r\n                        user={user} \r\n                        userData={userData}\r\n                    />\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto pb-20\">\r\n            {/* Tab Navigation */}\r\n            <div className=\"flex items-center gap-2 mb-6 bg-white dark:bg-dark-card p-1.5 rounded-xl border dark:border-gray-700 shadow-sm overflow-x-auto\">\r\n                {DISCOVER_TABS.map(tab => {\r\n                    const Icon = tab.icon;\r\n                    return (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id)}\r\n                            className={`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${\r\n                                activeTab === tab.id\r\n                                    ? 'bg-brand-blue text-white shadow-md'\r\n                                    : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                            }`}\r\n                        >\r\n                            <Icon size={16} />\r\n                            <span>{tab.label}</span>\r\n                        </button>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"mt-6\">\r\n                {renderContent()}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Loader2, RefreshCw, Users, Compass, UserPlus, Search } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { getPosts, createPost, getProfilesByIds, ensureUserInDatabase } from '../config/neonQueries';\r\n\r\nimport PostCard from './social/PostCard';\r\nimport CreatePostWidget from './social/CreatePostWidget';\r\nimport ReportModal from './ReportModal';\r\nimport Discover from './social/Discover';\r\nimport { useFollowSystem } from '../hooks/useFollowSystem';\r\nimport FollowButton from './social/FollowButton';\r\nimport UserAvatar from './shared/UserAvatar';\r\nimport { useLanguage } from '../contexts/LanguageContext';\r\n\r\n// Feed mode tabs\r\nconst FEED_MODES = {\r\n    FOR_YOU: 'for_you',\r\n    FOLLOWING: 'following',\r\n    DISCOVER: 'discover'\r\n};\r\n\r\nexport default function SocialFeed({ user, userData, subProfiles = {}, openPublicProfile }) {\r\n    const [posts, setPosts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [reportTarget, setReportTarget] = useState(null);\r\n    const [feedMode, setFeedMode] = useState(FEED_MODES.FOR_YOU);\r\n    const [suggestedUsers, setSuggestedUsers] = useState([]);\r\n    const [loadingSuggestions, setLoadingSuggestions] = useState(false);\r\n    const [hasNewPosts, setHasNewPosts] = useState(false);\r\n\r\n    // Get feed algorithm from settings\r\n    const { t } = useLanguage();\r\n    const feedAlgorithm = userData?.settings?.social?.feedAlgorithm || 'recommended';\r\n    const autoPlayVideos = userData?.settings?.social?.autoPlayVideos !== false;\r\n    const showSuggestedAccounts = userData?.settings?.social?.showSuggestedAccounts !== false;\r\n\r\n    // Use the follow system hook\r\n    const userId = user?.id || user?.uid;\r\n    const {\r\n        following,\r\n        stats,\r\n        loading: followLoading,\r\n        isFollowing,\r\n        toggleFollow,\r\n        getFollowingIds\r\n    } = useFollowSystem(userId, userData);\r\n\r\n    // Memoize following IDs for feed filtering\r\n    const followingIds = useMemo(() => getFollowingIds(), [following]);\r\n\r\n    // Load suggested users when on Following tab with no follows\r\n    useEffect(() => {\r\n        const userId = user?.id || user?.uid;\r\n        if (feedMode === FEED_MODES.FOLLOWING && followingIds.length === 0 && userId) {\r\n            loadSuggestedUsers();\r\n        }\r\n    }, [feedMode, followingIds.length, user?.id, user?.uid]);\r\n\r\n    const loadSuggestedUsers = async () => {\r\n        setLoadingSuggestions(true);\r\n        try {\r\n            if (!user?.id && !user?.uid) return;\r\n\r\n            const userId = user.id || user.uid;\r\n\r\n            // Get recent posts as suggestions (excluding current user)\r\n            const posts = await getPosts({ limit: 20 });\r\n\r\n            // Filter out current user's posts\r\n            const otherUsersPosts = posts.filter(p => p.user_id !== userId);\r\n\r\n            // Extract unique user IDs from posts\r\n            const uniqueUserIds = [...new Set(otherUsersPosts.map(p => p.user_id))];\r\n\r\n            // Fetch profiles for these users\r\n            let profilePhotos = {};\r\n            if (uniqueUserIds.length > 0) {\r\n                const profiles = await getProfilesByIds(uniqueUserIds);\r\n                profiles.forEach(p => {\r\n                    profilePhotos[p.user_id] = p.avatar_url || p.photo_url;\r\n                });\r\n            }\r\n\r\n            // Build unique users map with fresh photos\r\n            const usersMap = new Map();\r\n            otherUsersPosts.forEach(post => {\r\n                if (!usersMap.has(post.user_id)) {\r\n                    usersMap.set(post.user_id, {\r\n                        userId: post.user_id,\r\n                        displayName: post.display_name,\r\n                        photoURL: profilePhotos[post.user_id] || null,\r\n                        role: post.role\r\n                    });\r\n                }\r\n            });\r\n\r\n            setSuggestedUsers(Array.from(usersMap.values()).slice(0, 5));\r\n        } catch (error) {\r\n            console.error('Error loading suggestions:', error);\r\n        }\r\n        setLoadingSuggestions(false);\r\n    };\r\n\r\n    // Skeleton loader for feed\r\n    const renderSkeleton = () => {\r\n        const skeletonItems = Array.from({ length: 3 });\r\n        return (\r\n            <div className=\"space-y-4 p-fluid\">\r\n                <div className=\"bg-white dark:bg-[#1f2128] rounded-2xl border border-gray-200 dark:border-gray-700 p-4 animate-pulse\">\r\n                    <div className=\"h-10 bg-gray-200 dark:bg-gray-700 rounded-xl w-48 mb-3\"></div>\r\n                    <div className=\"h-14 bg-gray-100 dark:bg-gray-800 rounded-xl w-full mb-2\"></div>\r\n                </div>\r\n                {skeletonItems.map((_, idx) => (\r\n                    <div key={idx} className=\"bg-white dark:bg-[#1f2128] rounded-2xl border border-gray-200 dark:border-gray-700 p-4 animate-pulse space-y-3\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700\"></div>\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"h-3.5 w-32 bg-gray-200 dark:bg-gray-700 rounded-full mb-2\"></div>\r\n                                <div className=\"h-3 w-20 bg-gray-100 dark:bg-gray-800 rounded-full\"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"h-3 w-5/6 bg-gray-100 dark:bg-gray-800 rounded-full\"></div>\r\n                        <div className=\"h-3 w-2/3 bg-gray-100 dark:bg-gray-800 rounded-full\"></div>\r\n                        <div className=\"h-48 bg-gray-100 dark:bg-gray-800 rounded-xl\"></div>\r\n                        <div className=\"flex gap-3\">\r\n                            <div className=\"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded-full\"></div>\r\n                            <div className=\"h-3 w-12 bg-gray-200 dark:bg-gray-700 rounded-full\"></div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Main feed loader\r\n    useEffect(() => {\r\n        setLoading(true);\r\n\r\n        const loadFeed = async () => {\r\n            try {\r\n                // Set limit based on feed mode\r\n                const limitCount = (feedMode === FEED_MODES.FOLLOWING && followingIds.length > 0) ? 50 : 20;\r\n\r\n                // Fetch posts from Neon\r\n                const posts = await getPosts({ limit: limitCount });\r\n\r\n                let newPosts = posts.map(post => ({\r\n                    id: post.id,\r\n                    ...post,\r\n                    userId: post.user_id,\r\n                    displayName: post.display_name ||\r\n                                   post.username ||\r\n                                   (post.first_name && post.last_name ? `${post.first_name} ${post.last_name}` : null) ||\r\n                                   post.first_name ||\r\n                                   post.last_name ||\r\n                                   'Unknown User',\r\n                    authorPhoto: post.photo_url || post.profile_photo_url,\r\n                    username: post.username,\r\n                    text: post.content, // Map 'content' to 'text' for PostCard compatibility\r\n                    attachments: post.media, // Map 'media' to 'attachments' for PostCard compatibility\r\n                    timestamp: post.created_at,\r\n                    commentCount: post.comment_count || 0,\r\n                    reactionCount: post.reaction_count || 0,\r\n                    saveCount: post.save_count || 0\r\n                }));\r\n\r\n                // Apply feed algorithm based on settings (only for \"For You\" feed)\r\n                if (feedMode === FEED_MODES.FOR_YOU) {\r\n                    if (feedAlgorithm === 'following') {\r\n                        // Show only following posts\r\n                        if (followingIds.length > 0) {\r\n                            newPosts = newPosts.filter(p => followingIds.includes(p.userId));\r\n                        } else {\r\n                            newPosts = [];\r\n                        }\r\n                    } else if (feedAlgorithm === 'chronological') {\r\n                        // Already sorted by created_at desc, no changes needed\r\n                    } else {\r\n                        // Recommended algorithm (default) - prioritize posts with more engagement\r\n                        newPosts.sort((a, b) => {\r\n                            const aScore = (a.reactionCount || 0) * 2 + (a.commentCount || 0) * 3 + (a.saveCount || 0);\r\n                            const bScore = (b.reactionCount || 0) * 2 + (b.commentCount || 0) * 3 + (b.saveCount || 0);\r\n                            return bScore - aScore;\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Client-side filtering for Following feed\r\n                if (feedMode === FEED_MODES.FOLLOWING && followingIds.length > 0) {\r\n                    const userId = user?.id || user?.uid;\r\n                    newPosts = newPosts.filter(post =>\r\n                        followingIds.includes(post.userId) || post.userId === userId\r\n                    );\r\n                }\r\n\r\n                setPosts(newPosts);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error(\"Feed error:\", error);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadFeed();\r\n\r\n        // Set up polling to check for new posts (every 30 seconds)\r\n        const pollInterval = setInterval(async () => {\r\n            try {\r\n                const posts = await getPosts({ limit: 10 });\r\n                const currentUserId = user?.id || user?.uid;\r\n\r\n                // Check if there are new posts from other users\r\n                const newPostsFromOthers = posts.some(p => {\r\n                    const isNew = !posts.find(existingPost => existingPost.id === p.id);\r\n                    const isFromOther = p.user_id !== currentUserId;\r\n\r\n                    if (feedMode === FEED_MODES.FOLLOWING && followingIds.length > 0) {\r\n                        return isNew && isFromOther && followingIds.includes(p.user_id);\r\n                    } else if (feedMode === FEED_MODES.FOR_YOU) {\r\n                        return isNew && isFromOther;\r\n                    }\r\n                    return false;\r\n                });\r\n\r\n                if (newPostsFromOthers) {\r\n                    setHasNewPosts(true);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Polling error:\", error);\r\n            }\r\n        }, 30000);\r\n\r\n        return () => {\r\n            clearInterval(pollInterval);\r\n        };\r\n    }, [feedMode, followingIds, feedAlgorithm, user?.id, user?.uid]);\r\n\r\n    const handlePost = async (postPayload) => {\r\n        if (!user) return;\r\n        try {\r\n            const userId = user.id || user.uid;\r\n            const activeRole = userData?.activeProfileRole || userData?.accountTypes?.[0] || 'Fan';\r\n\r\n            // Get active profile data from subProfiles\r\n            const activeProfile = subProfiles?.[activeRole] || {};\r\n            const displayName = activeProfile?.display_name || userData?.effectiveDisplayName || `${userData?.firstName || ''} ${userData?.lastName || ''}`.trim() || null;\r\n            const authorPhoto = activeProfile?.photo_url || userData?.photoURL || user?.imageUrl || null;\r\n\r\n            // Ensure user exists in database (fallback for webhook sync)\r\n            const username = user.username ||\r\n                           user.publicMetadata?.username ||\r\n                           `${user.firstName || ''}${user.lastName ? ' ' + user.lastName : ''}`.trim() ||\r\n                           user.email?.split('@')[0] ||\r\n                           null;\r\n\r\n            await ensureUserInDatabase(userId, {\r\n                id: userId,\r\n                email: user.primaryEmailAddress?.emailAddress || user.email || user.emailAddresses?.[0]?.emailAddress,\r\n                first_name: user.firstName || null,\r\n                last_name: user.lastName || null,\r\n                username: username,\r\n                profile_photo_url: user.imageUrl || user.profileImageUrl || null,\r\n                account_types: user.publicMetadata?.account_types || ['Fan'],\r\n                active_role: user.publicMetadata?.active_role || 'Fan'\r\n            });\r\n\r\n            // Process attachments from postPayload\r\n            const attachments = postPayload.attachments || [];\r\n\r\n            // Convert attachments to media format\r\n            const media = attachments.map(a => ({\r\n                type: a.type,\r\n                url: a.url,\r\n                thumbnail: a.thumbnail || null,\r\n                name: a.name || null,\r\n                isGif: a.isGif || false\r\n            }));\r\n\r\n            // Extract mentions and hashtags from text\r\n            const mentions = (postPayload.text?.match(/@(\\w+)/g) || []).map(m => m.substring(1));\r\n            const hashtags = (postPayload.text?.match(/#(\\w+)/g) || []).map(h => h.substring(1));\r\n\r\n            await createPost({\r\n                user_id: userId,\r\n                content: postPayload.text || null,\r\n                media: media,\r\n                mentions: mentions,\r\n                hashtags: hashtags,\r\n                visibility: 'public',\r\n                display_name: displayName,\r\n                author_photo: authorPhoto,\r\n                posted_as_role: activeRole\r\n            });\r\n        } catch (e) {\r\n            console.error(\"Failed to post:\", e);\r\n            alert(\"Could not post update. Please try again.\");\r\n        }\r\n    };\r\n\r\n    const containerVariants = {\r\n        hidden: { opacity: 0 },\r\n        show: {\r\n            opacity: 1,\r\n            transition: { staggerChildren: 0.08 }\r\n        }\r\n    };\r\n\r\n    // Suggested user card component\r\n    const SuggestedUserCard = ({ suggestedUser }) => (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"flex items-center justify-between p-3 bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 hover:border-brand-blue/30 transition-all\"\r\n        >\r\n            <div\r\n                className=\"flex items-center gap-3 cursor-pointer flex-1 min-w-0\"\r\n                onClick={() => openPublicProfile?.(suggestedUser.userId)}\r\n            >\r\n                <UserAvatar\r\n                    src={suggestedUser.photoURL}\r\n                    name={suggestedUser.displayName}\r\n                    size=\"md\"\r\n                />\r\n                <div className=\"min-w-0\">\r\n                    <h4 className=\"font-bold text-sm dark:text-white truncate hover:text-brand-blue transition\">\r\n                        {suggestedUser.displayName}\r\n                    </h4>\r\n                    <p className=\"text-xs text-gray-500 truncate\">{suggestedUser.role}</p>\r\n                </div>\r\n            </div>\r\n            <FollowButton\r\n                isFollowing={isFollowing(suggestedUser.userId)}\r\n                onToggle={() => toggleFollow(suggestedUser.userId, suggestedUser)}\r\n                size=\"sm\"\r\n                variant=\"default\"\r\n            />\r\n        </motion.div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto pb-20\">\r\n            {/* Create Post Widget */}\r\n            <CreatePostWidget\r\n                user={user}\r\n                userData={userData}\r\n                subProfiles={subProfiles}\r\n                onPost={handlePost}\r\n            />\r\n\r\n            {/* Feed Mode Toggle */}\r\n            <div className=\"flex items-center gap-2 mb-4 bg-white dark:bg-dark-card p-1.5 rounded-xl border dark:border-gray-700 shadow-sm\">\r\n                <button\r\n                    onClick={() => setFeedMode(FEED_MODES.FOR_YOU)}\r\n                    className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${feedMode === FEED_MODES.FOR_YOU\r\n                        ? 'bg-brand-blue text-white shadow-md'\r\n                        : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                        }`}\r\n                >\r\n                    <Compass size={16} />\r\n                    <span>{t('forYou')}</span>\r\n                </button>\r\n                <button\r\n                    onClick={() => setFeedMode(FEED_MODES.FOLLOWING)}\r\n                    className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${feedMode === FEED_MODES.FOLLOWING\r\n                        ? 'bg-brand-blue text-white shadow-md'\r\n                        : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                        }`}\r\n                >\r\n                    <Users size={16} />\r\n                    <span>{t('following')}</span>\r\n                    {stats.followingCount > 0 && (\r\n                        <span className={`text-xs px-1.5 py-0.5 rounded-full ${feedMode === FEED_MODES.FOLLOWING\r\n                            ? 'bg-white/20'\r\n                            : 'bg-gray-200 dark:bg-gray-700'\r\n                            }`}>\r\n                            {stats.followingCount}\r\n                        </span>\r\n                    )}\r\n                </button>\r\n                <button\r\n                    onClick={() => setFeedMode(FEED_MODES.DISCOVER)}\r\n                    className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${feedMode === FEED_MODES.DISCOVER\r\n                        ? 'bg-brand-blue text-white shadow-md'\r\n                        : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800'\r\n                        }`}\r\n                >\r\n                    <Search size={16} />\r\n                    <span>{t('discover')}</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* New Posts Banner */}\r\n            <AnimatePresence>\r\n                {hasNewPosts && feedMode !== FEED_MODES.DISCOVER && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: -20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -20 }}\r\n                        className=\"mb-4\"\r\n                    >\r\n                        <button\r\n                            onClick={() => window.location.reload()}\r\n                            className=\"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-brand-blue to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all\"\r\n                        >\r\n                            <RefreshCw size={18} />\r\n                            <span>There Are New Posts.</span>\r\n                            <span className=\"underline underline-offset-2\">Refresh?</span>\r\n                        </button>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Feed Content */}\r\n            {feedMode === FEED_MODES.DISCOVER ? (\r\n                <Discover\r\n                    user={user}\r\n                    userData={userData}\r\n                    openPublicProfile={openPublicProfile}\r\n                />\r\n            ) : loading || followLoading ? (\r\n                renderSkeleton()\r\n            ) : (\r\n                <>\r\n                    {/* Following tab empty state with suggestions */}\r\n                    {feedMode === FEED_MODES.FOLLOWING && followingIds.length === 0 && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-2xl p-6 mb-6 border border-blue-100 dark:border-blue-800/30\"\r\n                        >\r\n                            <div className=\"text-center mb-6\">\r\n                                <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-brand-blue/10 flex items-center justify-center\">\r\n                                    <UserPlus size={28} className=\"text-brand-blue\" />\r\n                                </div>\r\n                                <h3 className=\"text-lg font-bold dark:text-white mb-2\">\r\n                                    Start following creators\r\n                                </h3>\r\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400 max-w-sm mx-auto\">\r\n                                    Follow artists, engineers, and studios to see their posts in your Following feed.\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Suggested users - only show if setting is enabled */}\r\n                            {showSuggestedAccounts && (\r\n                                <>\r\n                                    {loadingSuggestions ? (\r\n                                        <div className=\"space-y-2\">\r\n                                            <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3\">\r\n                                                Suggested for you\r\n                                            </h4>\r\n                                            {[1, 2, 3].map(i => (\r\n                                                <div key={i} className=\"flex items-center justify-between p-3 bg-white dark:bg-dark-card rounded-xl border dark:border-gray-700 animate-pulse\">\r\n                                                    <div className=\"flex items-center gap-3 flex-1\">\r\n                                                        <div className=\"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700\" />\r\n                                                        <div className=\"flex-1 space-y-2\">\r\n                                                            <div className=\"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded\" />\r\n                                                            <div className=\"h-3 w-16 bg-gray-200 dark:bg-gray-700 rounded\" />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded-lg\" />\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    ) : suggestedUsers.length > 0 && (\r\n                                        <div className=\"space-y-2\">\r\n                                            <h4 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3\">\r\n                                                Suggested for you\r\n                                            </h4>\r\n                                            {suggestedUsers.map(suggestedUser => (\r\n                                                <SuggestedUserCard\r\n                                                    key={suggestedUser.userId}\r\n                                                    suggestedUser={suggestedUser}\r\n                                                />\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* Posts */}\r\n                    <motion.div\r\n                        variants={containerVariants}\r\n                        initial=\"hidden\"\r\n                        animate=\"show\"\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        <AnimatePresence mode='popLayout'>\r\n                            {posts.map(post => (\r\n                                <PostCard\r\n                                    key={post.id}\r\n                                    post={post}\r\n                                    currentUser={user}\r\n                                    currentUserData={userData}\r\n                                    openPublicProfile={openPublicProfile || (() => { })}\r\n                                    onReport={() => setReportTarget(post)}\r\n                                    onDelete={(postId) => setPosts(prev => prev.filter(p => p.id !== postId))}\r\n                                    isFollowingAuthor={isFollowing(post.userId)}\r\n                                    onToggleFollow={() => toggleFollow(post.userId, {\r\n                                        displayName: post.displayName,\r\n                                        photoURL: post.authorPhoto,\r\n                                        role: post.role\r\n                                    })}\r\n                                    autoPlayVideos={autoPlayVideos}\r\n                                />\r\n                            ))}\r\n                        </AnimatePresence>\r\n\r\n                        {posts.length === 0 && feedMode === FEED_MODES.FOR_YOU && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"text-center py-10 text-gray-500\"\r\n                            >\r\n                                <RefreshCw className=\"mx-auto mb-2 opacity-50\" size={32} />\r\n                                <p>{t('noPosts')}. {t('beFirst')}</p>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {posts.length === 0 && feedMode === FEED_MODES.FOLLOWING && followingIds.length > 0 && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"text-center py-10 text-gray-500\"\r\n                            >\r\n                                <Users className=\"mx-auto mb-2 opacity-50\" size={32} />\r\n                                <p>{t('noPostsFollowing')}.</p>\r\n                                <button\r\n                                    onClick={() => setFeedMode(FEED_MODES.FOR_YOU)}\r\n                                    className=\"mt-3 text-brand-blue hover:underline text-sm font-medium\"\r\n                                >\r\n                                    {t('browseForYou')}\r\n                                </button>\r\n                            </motion.div>\r\n                        )}\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n\r\n            {/* Report Modal */}\r\n            {reportTarget && (\r\n                <ReportModal\r\n                    user={user}\r\n                    target={{\r\n                        id: reportTarget.id,\r\n                        type: 'Post',\r\n                        summary: reportTarget.text ? reportTarget.text.substring(0, 50) : 'Media Post'\r\n                    }}\r\n                    onClose={() => setReportTarget(null)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["CommentSection","post","currentUser","currentUserData","blockedUsers","onCountChange","comments","setComments","useState","text","setText","loading","setLoading","useEffect","loadComments","interval","data","getComments","filtered","c","error","handleSubmit","e","userId","displayName","commentContent","createComment","updatePostCommentCount","createNotification","_a","handleDelete","commentId","deleteComment","jsxs","jsx","comment","UserAvatar","Send","REACTION_SET","renderText","part","i","cardVariants","PostCard","openPublicProfile","onReport","onDelete","isFollowingAuthor","onToggleFollow","autoPlayVideos","showComments","setShowComments","commentCount","setCommentCount","isSaved","setIsSaved","showReactionMenu","setShowReactionMenu","showMoreMenu","setShowMoreMenu","linkCopied","setLinkCopied","savingPost","setSavingPost","menuRef","useRef","moreMenuRef","isOwnPost","myReaction","reactionCounts","acc","emoji","totalReactions","a","b","checkIsSaved","handleClickOutside","event","handleReaction","wasReacted","currentReactions","newReactions","updatePost","increment","toast","handleSavePost","unsavePost","updatePostSaveCount","savePost","_b","handleShare","shareUrl","copyLink","url","handleDeletePost","deletePost","motion","MoreHorizontal","AnimatePresence","Link2","Fragment","UserPlus","Flag","Trash2","att","StarFieldVisualizer","count","Smile","MessageCircle","Check","Share2","Bookmark","CreatePostWidget","user","userData","subProfiles","onPost","media","setMedia","seshFxOpen","setSeshFxOpen","pluginsUsed","setPluginsUsed","presetFile","setPresetFile","isPosting","setIsPosting","uploadProgress","setUploadProgress","activeRole","activeProfile","displayRole","role","talentSub","subRole","uploadMedia","useVercelUpload","handleFileSelect","type","file","previewUrl","removeMedia","index","_","totalUploads","completedUploads","updateProgress","uploadedMedia","m","result","presetUrl","res","postPayload","Loader2","Music","X","MultiSelect","POPULAR_PLUGINS_LIST","val","Paperclip","ImageIcon","Video","Sliders","DiscoverSection","title","description","items","emptyMessage","onSeeMore","renderItem","gridCols","item","idx","DiscoverCard","onFollow","onViewProfile","onPlay","isFollowing","getTitle","getSubtitle","Play","FollowButton","useDiscover","sounds","setSounds","artists","setArtists","producers","setProducers","studios","setStudios","schools","setSchools","following","setFollowing","followingIds","getFollowing","SoundsDiscover","recommendations","ArtistsDiscover","toggleFollow","useFollowSystem","ProducersDiscover","StudiosDiscover","SchoolsDiscover","DISCOVER_TABS","User","Headphones","Building2","School","Discover","activeTab","setActiveTab","renderContent","tab","Icon","FEED_MODES","SocialFeed","posts","setPosts","reportTarget","setReportTarget","feedMode","setFeedMode","suggestedUsers","setSuggestedUsers","loadingSuggestions","setLoadingSuggestions","hasNewPosts","setHasNewPosts","t","useLanguage","feedAlgorithm","_d","_c","showSuggestedAccounts","_f","_e","stats","followLoading","getFollowingIds","useMemo","loadSuggestedUsers","otherUsersPosts","getPosts","p","uniqueUserIds","profilePhotos","getProfilesByIds","usersMap","renderSkeleton","skeletonItems","limitCount","newPosts","aScore","pollInterval","currentUserId","isNew","existingPost","isFromOther","handlePost","authorPhoto","username","ensureUserInDatabase","_g","_h","mentions","_i","hashtags","_j","h","createPost","containerVariants","SuggestedUserCard","suggestedUser","Compass","Users","Search","RefreshCw","postId","prev","ReportModal"],"mappings":"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"}