{"version":3,"mappings":"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","names":["AuthWizardBackground","onImagesLoaded","images","setImages","useState","currentImageIndex","setCurrentImageIndex","imagesReady","setImagesReady","panDirection","setPanDirection","intervalRef","useRef","useEffect","directions","randomDirection","displayDuration","prev","img","currentImage","zoomLevel","maxPanPercent","getTransform","x","y","translateX","translateY","startTransform","endTransform","animationName","jsxs","Fragment","jsx","LegalDocs","lazy","__vitePreload","HIDDEN_ROLES","publicRoles","ACCOUNT_TYPES","role","RecenterAutomatically","lat","lng","map","useMap","ZipUserMap","zip","mapState","setMapState","timer","location","fetchZipLocation","MapContainer","TileLayer","Circle","AuthWizard","darkMode","toggleTheme","user","onSuccess","isNewUser","mode","setMode","step","setStep","isLoading","setIsLoading","error","setError","resetSent","setResetSent","backgroundImagesLoaded","setBackgroundImagesLoaded","locating","setLocating","showLegalOverlay","setShowLegalOverlay","contentRef","cardHeight","setCardHeight","form","setForm","passwordValidations","setPasswordValidations","names","_a","_b","p","isPasswordValid","resizeObserver","h","handleLogin","loginError","supabase","err","handleGoogleLogin","handleSignup","userId","data","upError","finalRoles","displayName","profileError","s","handleForgotPassword","handleUseLocation","pos","Requirement","met","text","Check","Sun","Moon","LogoWhite","LogoLight","AlertCircle","e","Loader2","MapPin","Crosshair","newRoles","r","TALENT_SUBROLES","subRole","X","Suspense"],"ignoreList":[],"sources":["../../src/components/AuthWizardBackground.jsx","../../src/components/AuthWizard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nexport default function AuthWizardBackground({ onImagesLoaded }) {\r\n  const [images, setImages] = useState([]);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [imagesReady, setImagesReady] = useState(false);\r\n  const [panDirection, setPanDirection] = useState({ x: 0, y: 0, startX: 0, startY: 0 });\r\n  const intervalRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Static curated images to replace Firestore dependency\r\n    const staticImages = [\r\n      { id: '1', url: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=1920&q=80', order: 0 },\r\n      { id: '2', url: 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=1920&q=80', order: 1 },\r\n      { id: '3', url: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=1920&q=80', order: 2 },\r\n      { id: '4', url: 'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1920&q=80', order: 3 },\r\n    ];\r\n    setImages(staticImages);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (images.length === 0) return;\r\n    const directions = [\r\n      { startX: 0, startY: 0, endX: 100, endY: 0 }, // Left to Right\r\n      { startX: 100, startY: 0, endX: 0, endY: 0 }, // Right to Left\r\n      { startX: 0, startY: 0, endX: 0, endY: 100 }, // Top to Bottom\r\n      { startX: 0, startY: 100, endX: 0, endY: 0 }, // Bottom to Top\r\n    ];\r\n    const randomDirection = directions[Math.floor(Math.random() * directions.length)];\r\n    setPanDirection(randomDirection);\r\n  }, [currentImageIndex, images.length]);\r\n\r\n  useEffect(() => {\r\n    if (images.length === 0) return;\r\n    const displayDuration = 30000;\r\n    intervalRef.current = setInterval(() => {\r\n      setCurrentImageIndex((prev) => (prev + 1) % images.length);\r\n    }, displayDuration);\r\n    return () => clearInterval(intervalRef.current);\r\n  }, [images.length]);\r\n\r\n  useEffect(() => {\r\n    if (images.length > 0 && !imagesReady) {\r\n      const img = new Image();\r\n      img.onload = () => { setImagesReady(true); if (onImagesLoaded) onImagesLoaded(true); };\r\n      img.onerror = () => { setImagesReady(true); if (onImagesLoaded) onImagesLoaded(true); };\r\n      img.src = images[0].url;\r\n    }\r\n  }, [images, imagesReady, onImagesLoaded]);\r\n\r\n  if (images.length === 0) return null;\r\n\r\n  const currentImage = images[currentImageIndex];\r\n  const zoomLevel = 1.8;\r\n  const maxPanPercent = 30;\r\n  \r\n  const getTransform = (x, y) => {\r\n    const translateX = x === 0 ? '0%' : x === 100 ? `-${maxPanPercent}%` : `-${maxPanPercent / 2}%`;\r\n    const translateY = y === 0 ? '0%' : y === 100 ? `-${maxPanPercent}%` : `-${maxPanPercent / 2}%`;\r\n    return `scale(${zoomLevel}) translate(${translateX}, ${translateY})`;\r\n  };\r\n\r\n  const startTransform = getTransform(panDirection.startX, panDirection.startY);\r\n  const endTransform = getTransform(panDirection.endX, panDirection.endY);\r\n  const animationName = `pan-${panDirection.startX}-${panDirection.startY}-${panDirection.endX}-${panDirection.endY}`;\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        @keyframes ${animationName} {\r\n          0% { transform: ${startTransform}; }\r\n          100% { transform: ${endTransform}; }\r\n        }\r\n      `}</style>\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\" style={{ zIndex: -1 }}>\r\n        <div key={currentImage.id} className=\"absolute inset-0\">\r\n          <div\r\n            className=\"absolute inset-0\"\r\n            style={{\r\n              backgroundImage: `url(${currentImage.url})`,\r\n              backgroundSize: 'cover',\r\n              backgroundPosition: 'center',\r\n              animation: `${animationName} 30s linear forwards`,\r\n              willChange: 'transform',\r\n            }}\r\n          />\r\n          <div className=\"absolute inset-0 bg-black/40\" />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef, lazy, Suspense } from 'react';\r\nimport { supabase } from '../config/supabase';\r\nimport { Loader2, AlertCircle, Check, Sun, Moon, MapPin, Crosshair, X } from 'lucide-react';\r\nimport { MapContainer, TileLayer, Circle, useMap } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { ACCOUNT_TYPES, TALENT_SUBROLES } from '../config/constants';\r\nimport { fetchZipLocation } from '../utils/geocode';\r\nimport AuthWizardBackground from './AuthWizardBackground';\r\n\r\n// Lazy load LegalDocs to match MainLayout's dynamic import pattern\r\n// This prevents mixed static/dynamic import bundling issues\r\nconst LegalDocs = lazy(() => import('./LegalDocs'));\r\n\r\n// Assets\r\nimport LogoLight from '../assets/SeshNx-PNG cCropped.png';\r\nimport LogoWhite from '../assets/SeshNx-PNG cCropped white text.png';\r\n\r\nconst HIDDEN_ROLES = ['Student', 'EDUStaff', 'Intern', 'EDUAdmin', 'GAdmin'];\r\nconst publicRoles = ACCOUNT_TYPES.filter(role => !HIDDEN_ROLES.includes(role));\r\n\r\n// Map Components\r\nfunction RecenterAutomatically({ lat, lng }) {\r\n  const map = useMap();\r\n  useEffect(() => { map.setView([lat, lng], 11); }, [lat, lng, map]);\r\n  return null;\r\n}\r\n\r\nfunction ZipUserMap({ zip }) {\r\n  const [mapState, setMapState] = useState({\r\n    center: [34.0522, -118.2437],\r\n    locationName: '',\r\n    isValid: false,\r\n    loading: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!zip || zip.length < 5) return;\r\n    const loadData = async () => {\r\n      setMapState(prev => ({ ...prev, loading: true }));\r\n      try {\r\n        const location = await fetchZipLocation(zip);\r\n        if (location) {\r\n          setMapState({\r\n            center: [location.lat, location.lng],\r\n            locationName: location.cityState,\r\n            isValid: true,\r\n            loading: false\r\n          });\r\n        } else {\r\n          setMapState(prev => ({ ...prev, loading: false }));\r\n        }\r\n      } catch (e) {\r\n        setMapState(prev => ({ ...prev, loading: false }));\r\n      }\r\n    };\r\n    const timer = setTimeout(loadData, 800);\r\n    return () => clearTimeout(timer);\r\n  }, [zip]);\r\n\r\n  return (\r\n    <div className=\"w-full h-36 rounded-xl overflow-hidden relative border dark:border-gray-600 shadow-inner bg-gray-100 dark:bg-[#1f2128]\">\r\n      <MapContainer center={mapState.center} zoom={11} scrollWheelZoom={false} zoomControl={false} className=\"h-full w-full\" style={{ background: 'transparent' }}>\r\n        <TileLayer url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\" attribution='&copy; CARTO' />\r\n        <RecenterAutomatically lat={mapState.center[0]} lng={mapState.center[1]} />\r\n        {mapState.isValid && (\r\n          <Circle center={mapState.center} radius={4000} pathOptions={{ color: '#0066ff', fillColor: '#0066ff', fillOpacity: 0.15, stroke: false }} />\r\n        )}\r\n      </MapContainer>\r\n      {mapState.isValid && (\r\n        <div className=\"absolute bottom-3 right-3 bg-white/95 dark:bg-black/85 backdrop-blur-md p-2 rounded-lg shadow-lg z-[400] text-xs font-bold border dark:border-gray-700 dark:text-white\">\r\n          {mapState.locationName}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function AuthWizard({ darkMode, toggleTheme, user, onSuccess, isNewUser }) {\r\n  const [mode, setMode] = useState('login'); \r\n  const [step, setStep] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [resetSent, setResetSent] = useState(false);\r\n  const [backgroundImagesLoaded, setBackgroundImagesLoaded] = useState(false);\r\n  const [locating, setLocating] = useState(false);\r\n  const [showLegalOverlay, setShowLegalOverlay] = useState(false);\r\n  const contentRef = useRef(null);\r\n  const [cardHeight, setCardHeight] = useState('auto');\r\n\r\n  const [form, setForm] = useState({\r\n    email: '',\r\n    password: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    zip: '',\r\n    roles: [],\r\n    talentSubRole: ''\r\n  });\r\n\r\n  const [passwordValidations, setPasswordValidations] = useState({\r\n    hasUpper: false,\r\n    hasLower: false,\r\n    hasNumber: false,\r\n    isLength: false\r\n  });\r\n\r\n  // Initialization Logic\r\n  useEffect(() => {\r\n    if (isNewUser && user && user.id) {\r\n      setMode('onboarding');\r\n      setStep(1);\r\n      const fullName = user?.user_metadata?.full_name || user?.user_metadata?.name || '';\r\n      const names = fullName.split(' ');\r\n      setForm(prev => ({\r\n        ...prev,\r\n        email: user?.email || '',\r\n        firstName: names[0] || '',\r\n        lastName: names.slice(1).join(' ') || ''\r\n      }));\r\n    } else if (!user || !user.id) {\r\n      setMode('login');\r\n      setStep(1);\r\n    }\r\n  }, [user, isNewUser]);\r\n\r\n  useEffect(() => {\r\n    const p = form.password;\r\n    setPasswordValidations({\r\n      hasUpper: /[A-Z]/.test(p),\r\n      hasLower: /[a-z]/.test(p),\r\n      hasNumber: /[0-9]/.test(p),\r\n      isLength: p.length >= 6\r\n    });\r\n  }, [form.password]);\r\n\r\n  const isPasswordValid = Object.values(passwordValidations).every(Boolean);\r\n\r\n  useEffect(() => {\r\n    if (!contentRef.current) return;\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      if (contentRef.current) {\r\n        const h = contentRef.current.scrollHeight + 80;\r\n        if (h > 200) setCardHeight(`${h}px`);\r\n      }\r\n    });\r\n    resizeObserver.observe(contentRef.current);\r\n    return () => resizeObserver.disconnect();\r\n  }, [step, mode, error, resetSent, form.zip, form.roles]);\r\n\r\n  useEffect(() => { setError(''); }, [step]);\r\n\r\n  // === HANDLERS ===\r\n\r\n  const handleLogin = async () => {\r\n    if (!form.email || !form.password) {\r\n      setError(\"Please fill in all fields.\");\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const { error: loginError } = await supabase.auth.signInWithPassword({\r\n        email: form.email.trim(),\r\n        password: form.password\r\n      });\r\n\r\n      if (loginError) {\r\n        if (loginError.message?.includes('Invalid login credentials')) {\r\n          setError(\"Invalid email or password.\");\r\n        } else {\r\n          setError(loginError.message);\r\n        }\r\n        setIsLoading(false); // Stop spinning on error\r\n      } else {\r\n        // Success! Keep spinning briefly while redirect happens\r\n        console.log(\"Login success, redirecting...\");\r\n        // Safety timeout in case App.jsx doesn't catch it immediately\r\n        setTimeout(() => {\r\n            if (window.location.pathname === '/login') {\r\n                 window.location.href = '/'; \r\n            }\r\n        }, 1500);\r\n      }\r\n    } catch (err) {\r\n      console.error('Login exception:', err);\r\n      setError(\"Connection error. Please try again.\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    setIsLoading(true);\r\n    setError('');\r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          queryParams: { access_type: 'offline', prompt: 'consent' },\r\n          redirectTo: `${window.location.origin}?intent=signup`\r\n        }\r\n      });\r\n      if (error) throw error;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Failed to initialize Google login.\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSignup = async () => {\r\n    if (mode === 'signup' && !isPasswordValid) return setError(\"Password too weak.\");\r\n    if (form.roles.length === 0) return setError(\"Please select a role.\");\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      let userId = user?.id;\r\n\r\n      // 1. Create Auth User (if not already exists from OAuth)\r\n      if (!userId) {\r\n        const { data, error: upError } = await supabase.auth.signUp({\r\n          email: form.email.trim(),\r\n          password: form.password,\r\n          options: {\r\n            data: { first_name: form.firstName, last_name: form.lastName }\r\n          }\r\n        });\r\n\r\n        if (upError) {\r\n          setIsLoading(false);\r\n          return setError(upError.message);\r\n        }\r\n\r\n        if (data?.user && !data.session) {\r\n          setIsLoading(false);\r\n          setMode('login');\r\n          alert('Check your email to confirm your account!');\r\n          return;\r\n        }\r\n        userId = data.user.id;\r\n      }\r\n\r\n      // 2. Create Profile\r\n      const finalRoles = form.roles.length > 0 ? form.roles : ['Fan'];\r\n      const displayName = `${form.firstName} ${form.lastName}`;\r\n\r\n      const { error: profileError } = await supabase\r\n        .from('profiles')\r\n        .upsert({\r\n            id: userId,\r\n            email: form.email.trim(),\r\n            first_name: form.firstName,\r\n            last_name: form.lastName,\r\n            zip_code: form.zip,\r\n            account_types: finalRoles,\r\n            active_role: finalRoles[0],\r\n            preferred_role: finalRoles[0], // Fallback role when user has multiple roles\r\n            effective_display_name: displayName,\r\n            search_terms: [form.firstName, form.lastName, displayName].map(s => s?.toLowerCase()).filter(Boolean),\r\n            updated_at: new Date().toISOString()\r\n        }, { onConflict: 'id' });\r\n\r\n      if (profileError) {\r\n          console.error(\"Profile creation error:\", profileError);\r\n          // Don't block signup on profile error, try to proceed\r\n      }\r\n\r\n      // 3. Initialize Wallet\r\n      await supabase.from('wallets').upsert({ user_id: userId, balance: 0 }, { onConflict: 'user_id' });\r\n\r\n      // 4. Success\r\n      if (onSuccess) onSuccess();\r\n      window.location.href = '/';\r\n\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Signup failed. Please try again.\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForgotPassword = async () => {\r\n    if (!form.email) return setError(\"Enter your email.\");\r\n    setIsLoading(true);\r\n    const { error } = await supabase.auth.resetPasswordForEmail(form.email, { redirectTo: window.location.origin });\r\n    setIsLoading(false);\r\n    if (error) setError(error.message);\r\n    else setResetSent(true);\r\n  };\r\n\r\n  // Location Helper\r\n  const handleUseLocation = () => {\r\n    if (!navigator.geolocation) return setError(\"Geolocation not supported.\");\r\n    setLocating(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (pos) => {\r\n        try {\r\n          const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`);\r\n          const data = await res.json();\r\n          if (data.address?.postcode) {\r\n            setForm(prev => ({ ...prev, zip: data.address.postcode.split('-')[0] }));\r\n          } else {\r\n            setError(\"Zip code not found.\");\r\n          }\r\n        } catch (e) { setError(\"Location lookup failed.\"); }\r\n        setLocating(false);\r\n      },\r\n      () => { setError(\"Location permission denied.\"); setLocating(false); }\r\n    );\r\n  };\r\n\r\n  const Requirement = ({ met, text }) => (\r\n    <div className={`flex items-center gap-1.5 text-xs ${met ? 'text-green-600' : 'text-gray-400'}`}>\r\n      {met ? <Check size={12} /> : <div className=\"w-3 h-3 border rounded-full\" />}\r\n      {text}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden\">\r\n      <div style={{ position: 'fixed', inset: 0, zIndex: 0 }}>\r\n        <AuthWizardBackground onImagesLoaded={setBackgroundImagesLoaded} />\r\n      </div>\r\n      <div\r\n        className=\"absolute inset-0 bg-gray-100 dark:bg-black transition-opacity duration-1000\"\r\n        style={{ opacity: backgroundImagesLoaded ? 0 : 1, pointerEvents: 'none' }}\r\n      />\r\n\r\n      <div className=\"absolute top-6 right-6 z-20\">\r\n        <button onClick={toggleTheme} className=\"p-3 rounded-full bg-white/80 dark:bg-black/50 backdrop-blur-md border dark:border-gray-700\">\r\n          {darkMode ? <Sun size={20} /> : <Moon size={20} />}\r\n        </button>\r\n      </div>\r\n\r\n      <div\r\n        className=\"bg-white/95 dark:bg-[#1a1d21]/95 dark:border dark:border-gray-700 rounded-3xl shadow-2xl w-full max-w-md relative overflow-hidden transition-[height] duration-500 z-10 backdrop-blur-md\"\r\n        style={{ height: cardHeight, minHeight: '500px' }}\r\n      >\r\n        <div ref={contentRef} className=\"pt-12 px-8 pb-8\">\r\n          <div className=\"relative w-full h-48 mb-6 flex justify-center shrink-0\">\r\n            <div className={`absolute transition-all duration-500 ${mode === 'signup' || mode === 'onboarding' ? 'top-0 scale-90' : 'top-8 scale-100'}`}>\r\n              <img src={darkMode ? LogoWhite : LogoLight} alt=\"SeshNx\" className=\"w-96 h-40 object-contain drop-shadow-md\" />\r\n            </div>\r\n            <div className=\"absolute bottom-2 w-full text-center\">\r\n                <p className=\"text-sm font-bold text-gray-500 uppercase tracking-wider\">\r\n                    {mode === 'signup' ? \"Create Account\" : mode === 'forgot' ? \"Recovery\" : mode === 'onboarding' ? \"Finalize Setup\" : \"\"}\r\n                </p>\r\n            </div>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 text-red-600 p-3 rounded-xl text-sm flex items-center gap-2 mb-4\">\r\n              <AlertCircle size={16} /> {error}\r\n            </div>\r\n          )}\r\n\r\n          {resetSent && (\r\n            <div className=\"bg-green-50 text-green-600 p-3 rounded-xl text-sm flex items-center gap-2 mb-4\">\r\n              <Check size={16} /> Check your email.\r\n            </div>\r\n          )}\r\n\r\n          {/* LOGIN MODE */}\r\n          {mode === 'login' && (\r\n            <div className=\"space-y-4\">\r\n              <input\r\n                className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                placeholder=\"Email\"\r\n                value={form.email}\r\n                onChange={(e) => setForm(prev => ({ ...prev, email: e.target.value }))}\r\n              />\r\n              <input\r\n                className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                value={form.password}\r\n                onChange={(e) => setForm(prev => ({ ...prev, password: e.target.value }))}\r\n                onKeyDown={(e) => e.key === 'Enter' && handleLogin()}\r\n              />\r\n              <div className=\"flex justify-end\">\r\n                <button onClick={() => setMode('forgot')} className=\"text-xs text-gray-500 hover:text-brand-blue\">\r\n                  Forgot Password?\r\n                </button>\r\n              </div>\r\n              <button\r\n                className=\"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 disabled:opacity-50\"\r\n                onClick={handleLogin}\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading ? <Loader2 className=\"animate-spin mx-auto\" size={20} /> : 'Sign In'}\r\n              </button>\r\n              <button\r\n                onClick={handleGoogleLogin}\r\n                disabled={isLoading}\r\n                className=\"w-full border dark:border-gray-600 py-3.5 rounded-xl font-bold dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800\"\r\n              >\r\n                Continue with Google\r\n              </button>\r\n              <p className=\"text-center text-sm text-gray-500 cursor-pointer hover:text-brand-blue pt-2\" onClick={() => setMode('signup')}>\r\n                New here? Create Account\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* SIGNUP / ONBOARDING MODE */}\r\n          {(mode === 'signup' || mode === 'onboarding') && (\r\n            <div>\r\n              {step === 1 && (\r\n                <div className=\"space-y-4\">\r\n                  {mode === 'signup' ? (\r\n                    <>\r\n                      <input\r\n                        className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                        placeholder=\"Email\"\r\n                        type=\"email\"\r\n                        value={form.email}\r\n                        onChange={(e) => setForm(prev => ({ ...prev, email: e.target.value }))}\r\n                      />\r\n                      <input\r\n                        className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                        type=\"password\"\r\n                        placeholder=\"Create Password\"\r\n                        value={form.password}\r\n                        onChange={(e) => setForm(prev => ({ ...prev, password: e.target.value }))}\r\n                      />\r\n                      <div className=\"grid grid-cols-2 gap-2 pl-1\">\r\n                        <Requirement met={passwordValidations.hasUpper} text=\"Uppercase\" />\r\n                        <Requirement met={passwordValidations.isLength} text=\"6+ Chars\" />\r\n                        <Requirement met={passwordValidations.hasLower} text=\"Lowercase\" />\r\n                        <Requirement met={passwordValidations.hasNumber} text=\"Number\" />\r\n                      </div>\r\n                      <button\r\n                        className=\"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold disabled:opacity-50\"\r\n                        onClick={() => { if (isPasswordValid && form.email) setStep(2); }}\r\n                        disabled={!isPasswordValid || !form.email}\r\n                      >\r\n                        Continue\r\n                      </button>\r\n                      <p className=\"text-center text-sm text-gray-500 cursor-pointer pt-2\" onClick={() => setMode('login')}>\r\n                        Have an account? Log In\r\n                      </p>\r\n                    </>\r\n                  ) : (\r\n                    <div className=\"text-center space-y-4\">\r\n                      <h3 className=\"text-2xl font-bold dark:text-white\">Welcome!</h3>\r\n                      <button className=\"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold\" onClick={() => setStep(2)}>\r\n                        Let's Go\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {step === 2 && (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex gap-3\">\r\n                    <input\r\n                      className=\"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                      placeholder=\"First Name\"\r\n                      value={form.firstName}\r\n                      onChange={(e) => setForm(prev => ({ ...prev, firstName: e.target.value }))}\r\n                    />\r\n                    <input\r\n                      className=\"w-1/2 p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                      placeholder=\"Last Name\"\r\n                      value={form.lastName}\r\n                      onChange={(e) => setForm(prev => ({ ...prev, lastName: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div className=\"relative flex gap-2\">\r\n                    <div className=\"relative flex-1\">\r\n                      <input\r\n                        className=\"w-full p-3.5 pl-10 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                        placeholder=\"Zip Code\"\r\n                        maxLength={5}\r\n                        value={form.zip}\r\n                        onChange={(e) => setForm(prev => ({ ...prev, zip: e.target.value.replace(/\\D/g, '') }))}\r\n                      />\r\n                      <MapPin className=\"absolute left-3 top-3.5 text-gray-400\" size={18} />\r\n                    </div>\r\n                    <button onClick={handleUseLocation} className=\"p-3.5 border dark:border-gray-600 rounded-xl text-brand-blue\" disabled={locating}>\r\n                      {locating ? <Loader2 className=\"animate-spin\" size={18} /> : <Crosshair size={18} />}\r\n                    </button>\r\n                  </div>\r\n                  <ZipUserMap zip={form.zip} />\r\n                  <div className=\"flex justify-between pt-2\">\r\n                    <button className=\"text-gray-500\" onClick={() => setStep(1)}>Back</button>\r\n                    <button\r\n                      className=\"bg-black dark:bg-white dark:text-black text-white px-6 py-2.5 rounded-xl font-bold disabled:opacity-50\"\r\n                      onClick={() => { if (form.firstName && form.zip) setStep(3); }}\r\n                      disabled={!form.firstName || !form.zip}\r\n                    >\r\n                      Next\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {step === 3 && (\r\n                <div className=\"space-y-5\">\r\n                  <div className=\"grid grid-cols-2 gap-2.5\">\r\n                    {publicRoles.map(role => (\r\n                      <div\r\n                        key={role}\r\n                        onClick={() => {\r\n                          const newRoles = form.roles.includes(role) ? form.roles.filter(r => r !== role) : [...form.roles, role];\r\n                          setForm(prev => ({ ...prev, roles: newRoles }));\r\n                        }}\r\n                        className={`p-3 border-2 rounded-xl cursor-pointer text-center font-bold text-sm transition ${\r\n                          form.roles.includes(role)\r\n                            ? 'border-brand-blue bg-blue-50 text-brand-blue dark:bg-blue-900/20 dark:border-blue-500'\r\n                            : 'border-gray-100 dark:border-gray-700 hover:border-gray-300'\r\n                        }`}\r\n                      >\r\n                        {role}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  {form.roles.includes('Talent') && (\r\n                    <select\r\n                      className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                      value={form.talentSubRole}\r\n                      onChange={(e) => setForm(prev => ({ ...prev, talentSubRole: e.target.value }))}\r\n                    >\r\n                      <option value=\"\">Select Talent Type (Optional)</option>\r\n                      {TALENT_SUBROLES.map(subRole => (<option key={subRole} value={subRole}>{subRole}</option>))}\r\n                    </select>\r\n                  )}\r\n                  <button\r\n                    className=\"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold disabled:opacity-50\"\r\n                    onClick={handleSignup}\r\n                    disabled={isLoading || form.roles.length === 0}\r\n                  >\r\n                    {isLoading ? <Loader2 className=\"animate-spin mx-auto\" size={20} /> : \"Complete Setup\"}\r\n                  </button>\r\n                  <button className=\"w-full text-gray-400 text-xs\" onClick={() => setStep(2)}>Back</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {mode === 'forgot' && (\r\n            <div className=\"space-y-4\">\r\n              <input\r\n                className=\"w-full p-3.5 bg-gray-50 dark:bg-[#1f2128] border dark:border-gray-600 rounded-xl dark:text-white\"\r\n                placeholder=\"Email\"\r\n                type=\"email\"\r\n                value={form.email}\r\n                onChange={(e) => setForm(prev => ({ ...prev, email: e.target.value }))}\r\n              />\r\n              <button\r\n                className=\"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold disabled:opacity-50\"\r\n                onClick={handleForgotPassword}\r\n                disabled={isLoading || resetSent}\r\n              >\r\n                {resetSent ? 'Sent!' : isLoading ? <Loader2 className=\"animate-spin mx-auto\" size={20} /> : 'Send Link'}\r\n              </button>\r\n              <button className=\"w-full text-gray-500 text-sm\" onClick={() => setMode('login')}>Back</button>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6 pt-4 border-t dark:border-gray-700 text-center\">\r\n            <button onClick={() => setShowLegalOverlay(true)} className=\"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\">\r\n              Terms of Service â€¢ Privacy Policy\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {showLegalOverlay && (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white dark:bg-[#1a1d21] rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            <div className=\"p-4 border-b dark:border-gray-700 flex justify-between items-center\">\r\n              <h2 className=\"text-xl font-bold dark:text-white\">Legal Documents</h2>\r\n              <button onClick={() => setShowLegalOverlay(false)} className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg\">\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n              <Suspense fallback={<div className=\"flex items-center justify-center p-8\"><Loader2 className=\"animate-spin\" size={24} /></div>}>\r\n                <LegalDocs isEmbedded={true} />\r\n              </Suspense>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"file":"assets/AuthWizard-BsntHktH.js"}