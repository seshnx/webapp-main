import{r as u,j as r,S as N,X as E,L as S}from"./vendor-DTDDt3fP.js";import{u as q}from"./useEquipmentDatabase-vs4GZ1qU.js";const L=()=>{const{data:c,loading:p}=q(),[m,f]=u.useState([]),a=u.useMemo(()=>{if(p||!c)return[];let o=[];try{Object.keys(c).forEach(n=>{const i=c[n];i&&Object.entries(i).forEach(([g,e])=>{if(!e||typeof e!="object")return;const b=e.brand||e.searchTokens&&e.searchTokens[0]||"Unknown",l=e.name||e.searchTokens&&e.searchTokens[1]||"Unknown Item",d=e.searchTokens||[],x=[l,b,...d].join(" ").toLowerCase();o.push({id:g,name:l,brand:b,category:e.category||n,subCategory:e.subCategory||"General",searchString:x,original:e})})})}catch(n){console.warn("Error processing equipment data:",n)}return o},[c,p]);return{searchEquipment:o=>{if(!o||o.trim().length<1){f([]);return}const n=o.toLowerCase().trim().split(/\s+/),i=a.filter(g=>n.every(e=>g.searchString.includes(e))).slice(0,50);f(i)},results:m,loading:p}};function R({onSelect:c,placeholder:p="Search for gear (e.g. U87, SSL)...",className:m="",value:f,onChange:a,multi:y=!1}){const{searchEquipment:o,results:n,loading:i}=L(),[g,e]=u.useState(""),[b,l]=u.useState(!1),d=u.useRef(null),x=f!==void 0?f:g;u.useEffect(()=>{function s(t){d.current&&!d.current.contains(t.target)&&l(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[d]);const k=s=>{const t=s.target.value;a?a(t):e(t);const h=y?t.split(",").pop().trim():t;h.length>=2?(o(h),l(!0)):l(!1)},w=s=>{const t=s.brand!=="Various"&&s.brand!=="Unknown"?`${s.brand} ${s.name}`:s.name;if(y){const h=x.split(",");h.pop();const j=[...h.map(v=>v.trim()).filter(Boolean),t].join(", ")+", ";a?a(j):e(j)}else c&&c({...s,fullName:t}),a?a(t):e(t);l(!1)};return r.jsxs("div",{ref:d,className:`relative ${m}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx(N,{className:"absolute left-3 top-3 text-gray-400",size:16}),r.jsx("input",{className:"w-full pl-9 pr-8 p-3 text-sm border rounded-xl bg-white dark:bg-[#1f2128] dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none transition-all",placeholder:p,value:x,onChange:k,onFocus:s=>k(s)}),x&&r.jsx("button",{type:"button",onClick:()=>{a?a(""):e(""),l(!1)},className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:r.jsx(E,{size:16})})]}),b&&n.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl max-h-60 overflow-y-auto animate-in fade-in slide-in-from-top-2",children:r.jsx("div",{className:"py-1",children:n.map(s=>{var t;return r.jsxs("button",{type:"button",onClick:()=>w(s),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b dark:border-gray-700/50 last:border-0 group",children:[r.jsx("div",{className:"font-bold text-sm dark:text-white group-hover:text-brand-blue transition-colors",children:s.name}),r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1.5 mt-0.5",children:[r.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:s.brand}),r.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600"}),r.jsx("span",{className:"opacity-75",children:(t=s.subCategory)==null?void 0:t.replace(/_/g," ")})]})]},s.id)})})}),b&&i&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-[#2c2e36] border dark:border-gray-600 rounded-xl shadow-xl p-4 text-center text-gray-500 flex items-center justify-center gap-2",children:[r.jsx(S,{className:"animate-spin",size:16})," Searching database..."]})]})}export{R as E};
