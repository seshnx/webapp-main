import{r as i,j as e,C as ot,p as lt,t as _e,c as Te,U as pe,a as he,b as ct,d as dt,u as K,e as de,f as Le,T as Ne,X as H,g as le,P as Ce,A as We,L as ue,h as Ke,S as je,i as Ee,k as ut,l as gt,V as ke,m as Qe,n as mt,o as Ye,q as Ze,s as Je,v as Xe,M as Ie,F as xe,w as ht,I as ft,x as pt,y as xt,z as bt,R as yt,E as wt,B as Ge,D as Pe,G as vt,H as Fe,J as Nt,K as jt,N as kt,O as Ue,Q as De,W as At,Y as qe,Z as Oe,_ as St,$ as Mt,a0 as Ct}from"./vendor-mIyI6DiM.js";import{m as I,A as oe}from"./vendor-framer-_HoVf1_M.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"local"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="a6bb6617-2936-4d28-8b11-ecadd895c2b0",t._sentryDebugIdIdentifier="sentry-dbid-a6bb6617-2936-4d28-8b11-ecadd895c2b0")})()}catch{}const fe={en:{general:"General",security:"Security & Privacy",notifications:"Notifications",messaging:"Messaging",social:"Social & Feed",bookings:"Bookings",marketplace:"Marketplace",content:"Content & Media",accessibility:"Accessibility",performance:"Performance",rolesWorkflow:"Roles & Workflow",activeAccountTypes:"Active Account Types",preferredProfile:"Preferred Profile",activeWorkflowContext:"Active Workflow Context",seeAllUnfiltered:"See All (Unfiltered View)",seeAllDescription:"Show all content types regardless of active workflow",saveWorkflowSettings:"Save Workflow Settings",appearance:"Appearance",light:"Light",dark:"Dark",system:"System",languageLocalization:"Language & Localization",language:"Language",dateFormat:"Date Format",timeFormat:"Time Format",timezone:"Timezone",currency:"Currency",numberFormat:"Number Format",autoDetect:"Auto-detect",easternTime:"Eastern Time",centralTime:"Central Time",mountainTime:"Mountain Time",pacificTime:"Pacific Time",accountSecurity:"Account Security",emailAddress:"Email Address",password:"Password",changeEmail:"Change Email",changePassword:"Change Password",twoFactorAuth:"Two-Factor Authentication (2FA)",twoFactorDescription:"Add an extra layer of security to your account",lastChanged:"Last changed",unknown:"Unknown",privacyVisibility:"Privacy & Visibility",publicProfileVisibility:"Public Profile Visibility",showLocationOnMap:"Show Location on Map",hideProfileCompletely:"Hide Profile Completely",showEmailAddress:"Show Email Address",showPhoneNumber:"Show Phone Number",showOnlineStatus:"Show Online Status",showLastSeen:"Show Last Seen",allowSearchEngines:"Allow Search Engine Indexing",allowTagging:"Allow Tagging",reviewTagsBeforeAppear:"Review Tags Before They Appear",showFollowingList:"Show Following List",showFollowersList:"Show Followers List",contentSafety:"Content & Safety",blockedUsers:"Blocked Users",mutedThreads:"Muted Threads",noActive:"No active",yourData:"Your Data",downloadDataDescription:"Download a copy of your personal data (GDPR/CCPA).",downloadData:"Download Data",dangerZone:"Danger Zone",deleteAccountWarning:"Deleting your account is permanent. This action will remove your profile, posts, and messages.",deleteAccount:"Delete Account",confirmDeletion:"Confirm Deletion",typeDeleteToConfirm:"Type DELETE below to confirm. This cannot be undone.",confirmDelete:"Confirm Delete",cancel:"Cancel",generalNotifications:"General Notifications",emailNotifications:"Email Notifications",pushNotifications:"Push Notifications",marketingUpdates:"Marketing & Updates",soundNotifications:"Sound Notifications",badgeCount:"Badge Count",badgeCountDescription:"Show unread count on app icon",bookingNotifications:"Booking Notifications",newBookingRequests:"New Booking Requests",bookingConfirmations:"Booking Confirmations",bookingReminders:"Booking Reminders",bookingCancellations:"Booking Cancellations",socialNotifications:"Social Notifications",likes:"Likes",comments:"Comments",follows:"Follows",mentions:"Mentions",reposts:"Reposts",marketplaceNotifications:"Marketplace Notifications",newOffers:"New Offers",sales:"Sales",messages:"Messages",systemNotifications:"System Notifications",maintenanceAlerts:"Maintenance Alerts",updates:"Updates",securityAlerts:"Security Alerts",quietHours:"Quiet Hours",enableQuietHours:"Enable Quiet Hours",quietHoursDescription:"Disable notifications during specific times",startTime:"Start Time",endTime:"End Time",readReceipts:"Read Receipts",readReceiptsDescription:"Show when messages are read",typingIndicators:"Typing Indicators",typingIndicatorsDescription:"Show when someone is typing",messageRequests:"Message Requests",messageRequestsDescription:"Require approval for messages from non-contacts",whoCanMessageYou:"Who Can Message You",everyone:"Everyone",followersOnly:"Followers Only",noOne:"No One",autoArchiveOld:"Auto-archive Old Conversations",autoArchiveDescription:"Automatically archive conversations older than 30 days",soundNotificationsMessages:"Sound Notifications for Messages",messagePreview:"Message Preview in Notifications",messagePreviewDescription:"Show message content in notifications",blockedContacts:"Blocked Contacts",feedAlgorithm:"Feed Algorithm",chronological:"Chronological",recommended:"Recommended",followingOnly:"Following Only",autoPlayVideos:"Auto-play Videos in Feed",showSensitiveContentWarning:"Show Sensitive Content Warning",showActivityStatus:"Show Activity Status",showActivityStatusDescription:"Let others see when you're active",showSuggestedAccounts:"Show Suggested Accounts",contentFiltering:"Content Filtering",sensitivityFilter:"Sensitivity Filter",off:"Off",low:"Low",medium:"Medium",high:"High",autoHideReported:"Auto-hide Reported Content",showAgeRestricted:"Show Age-Restricted Content",mutedUsers:"Muted Users",autoAcceptBookings:"Auto-accept Bookings",autoAcceptDescription:"Automatically accept bookings that meet your criteria",defaultBufferTime:"Default Buffer Time",bufferTimeDescription:"Time between sessions",minutes:"minutes",showAvailabilityPublicly:"Show Availability Calendar Publicly",requireDeposit:"Require Deposit for Bookings",autoDeclineExpired:"Auto-decline Expired Booking Requests",defaultSessionDuration:"Default Session Duration",autoListItem:"Auto-list Items",autoListDescription:"Automatically list items for sale",requireApproval:"Require Approval",requireApprovalDescription:"Review items before they go live",defaultShippingMethod:"Default Shipping Method",defaultPaymentTerms:"Default Payment Terms",immediate:"Immediate",net15:"Net 15",net30:"Net 30",autoAcceptOffersAbove:"Auto-accept Offers Above Threshold",autoAcceptThreshold:"Auto-accept Threshold",showSoldItems:"Show Sold Items in Listings",imageQuality:"Image Quality",videoQuality:"Video Quality",high:"High",medium:"Medium",low:"Low (Faster Loading)",autoSaveUploaded:"Auto-save Uploaded Media",autoSaveDescription:"Automatically save uploaded images and videos",compressImages:"Compress Images Before Upload",compressDescription:"Reduce file size for faster uploads",maxUploadSize:"Maximum Upload Size",mb:"MB",fontSize:"Font Size",small:"Small",large:"Large",extraLarge:"Extra Large",reducedMotion:"Reduced Motion",reducedMotionDescription:"Disable animations for better accessibility",highContrast:"High Contrast Mode",highContrastDescription:"Increase contrast for better visibility",screenReaderAnnouncements:"Screen Reader Announcements",screenReaderDescription:"Enable announcements for screen readers",keyboardHints:"Keyboard Navigation Hints",keyboardHintsDescription:"Show hints for keyboard navigation",dataUsage:"Data Usage",wifiOnly:"WiFi Only (for media)",auto:"Auto",never:"Never (save data)",offlineMode:"Offline Mode",offlineModeDescription:"Enable offline functionality",backgroundSync:"Background Sync",backgroundSyncDescription:"Sync data in the background",autoClearOldNotifications:"Auto-clear Old Notifications",clearAfter:"Clear After",days:"days",cacheManagement:"Cache Management",clearCache:"Clear Cache",clearCacheDescription:"Clear cached data to free up storage space",saveAll:"Save All",saving:"Saving...",saved:"Settings saved successfully!",saveFailed:"Failed to save settings.",settingsUpdated:"Settings updated!",dashboard:"Dashboard",socialNx:"SocialNx",messages:"Messages",bookings:"Bookings",marketplace:"Marketplace",techServices:"Tech Services",businessCenter:"Business Center",profile:"Profile",billing:"Billing",settings:"Settings",logout:"Logout",search:"Search",searchPlaceholder:"Search...",notifications:"Notifications",noNotifications:"No notifications",markAllRead:"Mark all as read",clearAll:"Clear all",switchRole:"Switch Role",viewProfile:"View Profile",goodMorning:"Good morning",goodAfternoon:"Good afternoon",goodEvening:"Good evening",goodNight:"Good night",welcomeBack:"Welcome back",quickActions:"Quick Actions",recentActivity:"Recent Activity",upcomingBookings:"Upcoming Bookings",noUpcomingBookings:"No upcoming bookings",viewAll:"View All",seeMore:"See More",newBooking:"New Booking",viewCalendar:"View Calendar",recentMessages:"Recent Messages",noRecentMessages:"No recent messages",startConversation:"Start Conversation",trendingNow:"Trending Now",viewMarketplace:"View Marketplace",stats:"Stats",followers:"Followers",following:"Following",posts:"Posts",forYou:"For You",following:"Following",discover:"Discover",createPost:"Create Post",whatOnMind:"What's on your mind?",post:"Post",like:"Like",comment:"Comment",share:"Share",save:"Save",repost:"Repost",follow:"Follow",unfollow:"Unfollow",noPosts:"No posts yet",beFirst:"Be the first to share something!",noPostsFollowing:"No recent posts from people you follow",browseForYou:"Browse For You feed →",suggestedForYou:"Suggested for you",startFollowing:"Start following creators",followDescription:"Follow artists, engineers, and studios to see their posts in your Following feed.",selectConversation:"Select a conversation to start chatting",typeMessage:"Type a message...",send:"Send",online:"Online",offline:"Offline",typing:"typing...",newMessage:"New Message",noConversations:"No conversations yet",myBookings:"My Bookings",calendar:"Calendar",findTalent:"Find Talent",broadcasts:"Broadcasts",createBroadcast:"Create Broadcast",newSession:"New Session",manageSessions:"Manage your sessions and bookings",upcoming:"Upcoming",past:"Past",pending:"Pending",confirmed:"Confirmed",cancelled:"Cancelled",noBookings:"No bookings found",loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",save:"Save",close:"Close",back:"Back",next:"Next",previous:"Previous",done:"Done",apply:"Apply",reset:"Reset",filter:"Filter",sort:"Sort",refresh:"Refresh",activityFeed:"Activity Feed",allCaughtUp:"All caught up!",noNewNotifications:"No new notifications",viewAllActivity:"View All Activity",studioStatus:"Studio Status",manage:"Manage",noRoomsConfigured:"No rooms configured yet",addFirstRoom:"+ Add Your First Room",new:"New",gearExchange:"Gear Exchange",seshFxStore:"SeshFX Store",searchConversations:"Search conversations...",newGroup:"New Group",groupChat:"Group Chat",directMessage:"Direct Message",addMembers:"Add Members",groupName:"Group Name",createGroup:"Create Group",noMessages:"No messages yet",messageDeleted:"Message deleted",replyingTo:"Replying to",editingMessage:"Editing message",forwardingMessage:"Forwarding message",unknownUser:"Unknown User",dropFiles:"Drop files here",updateMessage:"Update message",noMembersSelected:"No members selected",noUsersFound:"No users found",you:"You",enterGroupName:"Enter group name",active:"Active",inactive:"Inactive",pending:"Pending",completed:"Completed",cancelled:"Cancelled",declined:"Declined",confirmed:"Confirmed"},es:{general:"General",security:"Seguridad y Privacidad",notifications:"Notificaciones",messaging:"Mensajería",social:"Social y Feed",bookings:"Reservas",marketplace:"Mercado",content:"Contenido y Medios",accessibility:"Accesibilidad",performance:"Rendimiento",rolesWorkflow:"Roles y Flujo de Trabajo",activeAccountTypes:"Tipos de Cuenta Activos",preferredProfile:"Perfil Preferido",activeWorkflowContext:"Contexto de Flujo de Trabajo Activo",seeAllUnfiltered:"Ver Todo (Vista Sin Filtros)",seeAllDescription:"Mostrar todos los tipos de contenido independientemente del flujo de trabajo activo",saveWorkflowSettings:"Guardar Configuración de Flujo de Trabajo",appearance:"Apariencia",light:"Claro",dark:"Oscuro",system:"Sistema",languageLocalization:"Idioma y Localización",language:"Idioma",dateFormat:"Formato de Fecha",timeFormat:"Formato de Hora",timezone:"Zona Horaria",currency:"Moneda",numberFormat:"Formato de Número",autoDetect:"Detección Automática",easternTime:"Hora del Este",centralTime:"Hora Central",mountainTime:"Hora de la Montaña",pacificTime:"Hora del Pacífico",accountSecurity:"Seguridad de la Cuenta",emailAddress:"Dirección de Correo",password:"Contraseña",changeEmail:"Cambiar Correo",changePassword:"Cambiar Contraseña",twoFactorAuth:"Autenticación de Dos Factores (2FA)",twoFactorDescription:"Agrega una capa adicional de seguridad a tu cuenta",lastChanged:"Último cambio",unknown:"Desconocido",privacyVisibility:"Privacidad y Visibilidad",publicProfileVisibility:"Visibilidad del Perfil Público",showLocationOnMap:"Mostrar Ubicación en el Mapa",hideProfileCompletely:"Ocultar Perfil Completamente",showEmailAddress:"Mostrar Dirección de Correo",showPhoneNumber:"Mostrar Número de Teléfono",showOnlineStatus:"Mostrar Estado en Línea",showLastSeen:"Mostrar Última Vez",allowSearchEngines:"Permitir Indexación por Motores de Búsqueda",allowTagging:"Permitir Etiquetado",reviewTagsBeforeAppear:"Revisar Etiquetas Antes de Aparecer",showFollowingList:"Mostrar Lista de Seguidos",showFollowersList:"Mostrar Lista de Seguidores",contentSafety:"Contenido y Seguridad",blockedUsers:"Usuarios Bloqueados",mutedThreads:"Hilos Silenciados",noActive:"Sin activos",yourData:"Tus Datos",downloadDataDescription:"Descarga una copia de tus datos personales (GDPR/CCPA).",downloadData:"Descargar Datos",dangerZone:"Zona de Peligro",deleteAccountWarning:"Eliminar tu cuenta es permanente. Esta acción eliminará tu perfil, publicaciones y mensajes.",deleteAccount:"Eliminar Cuenta",confirmDeletion:"Confirmar Eliminación",typeDeleteToConfirm:"Escribe ELIMINAR a continuación para confirmar. Esto no se puede deshacer.",confirmDelete:"Confirmar Eliminación",cancel:"Cancelar",generalNotifications:"Notificaciones Generales",emailNotifications:"Notificaciones por Correo",pushNotifications:"Notificaciones Push",marketingUpdates:"Marketing y Actualizaciones",soundNotifications:"Notificaciones de Sonido",badgeCount:"Contador de Insignias",badgeCountDescription:"Mostrar conteo de no leídos en el icono de la app",bookingNotifications:"Notificaciones de Reservas",newBookingRequests:"Nuevas Solicitudes de Reserva",bookingConfirmations:"Confirmaciones de Reserva",bookingReminders:"Recordatorios de Reserva",bookingCancellations:"Cancelaciones de Reserva",socialNotifications:"Notificaciones Sociales",likes:"Me Gusta",comments:"Comentarios",follows:"Seguimientos",mentions:"Menciones",reposts:"Republicaciones",marketplaceNotifications:"Notificaciones del Mercado",newOffers:"Nuevas Ofertas",sales:"Ventas",messages:"Mensajes",systemNotifications:"Notificaciones del Sistema",maintenanceAlerts:"Alertas de Mantenimiento",updates:"Actualizaciones",securityAlerts:"Alertas de Seguridad",quietHours:"Horas Silenciosas",enableQuietHours:"Habilitar Horas Silenciosas",quietHoursDescription:"Desactivar notificaciones durante horas específicas",startTime:"Hora de Inicio",endTime:"Hora de Fin",readReceipts:"Confirmaciones de Lectura",readReceiptsDescription:"Mostrar cuando los mensajes son leídos",typingIndicators:"Indicadores de Escritura",typingIndicatorsDescription:"Mostrar cuando alguien está escribiendo",messageRequests:"Solicitudes de Mensaje",messageRequestsDescription:"Requerir aprobación para mensajes de no contactos",whoCanMessageYou:"Quién Puede Enviarte Mensajes",everyone:"Todos",followersOnly:"Solo Seguidores",noOne:"Nadie",autoArchiveOld:"Archivar Automáticamente Conversaciones Antiguas",autoArchiveDescription:"Archivar automáticamente conversaciones mayores de 30 días",soundNotificationsMessages:"Notificaciones de Sonido para Mensajes",messagePreview:"Vista Previa de Mensaje en Notificaciones",messagePreviewDescription:"Mostrar contenido del mensaje en notificaciones",blockedContacts:"Contactos Bloqueados",searchConversations:"Buscar conversaciones...",newGroup:"Nuevo Grupo",groupChat:"Chat Grupal",directMessage:"Mensaje Directo",addMembers:"Agregar Miembros",groupName:"Nombre del Grupo",createGroup:"Crear Grupo",noMessages:"Aún no hay mensajes",messageDeleted:"Mensaje eliminado",replyingTo:"Respondiendo a",editingMessage:"Editando mensaje",forwardingMessage:"Reenviando mensaje",unknownUser:"Usuario Desconocido",dropFiles:"Suelta archivos aquí",updateMessage:"Actualizar mensaje",noMembersSelected:"No hay miembros seleccionados",noUsersFound:"No se encontraron usuarios",you:"Tú",enterGroupName:"Ingresa el nombre del grupo",feedAlgorithm:"Algoritmo del Feed",chronological:"Cronológico",recommended:"Recomendado",followingOnly:"Solo Seguidos",autoPlayVideos:"Reproducción Automática de Videos en el Feed",showSensitiveContentWarning:"Mostrar Advertencia de Contenido Sensible",showActivityStatus:"Mostrar Estado de Actividad",showActivityStatusDescription:"Permitir que otros vean cuando estás activo",showSuggestedAccounts:"Mostrar Cuentas Sugeridas",contentFiltering:"Filtrado de Contenido",sensitivityFilter:"Filtro de Sensibilidad",off:"Desactivado",low:"Bajo",medium:"Medio",high:"Alto",autoHideReported:"Ocultar Automáticamente Contenido Reportado",showAgeRestricted:"Mostrar Contenido con Restricción de Edad",mutedUsers:"Usuarios Silenciados",autoAcceptBookings:"Aceptar Automáticamente Reservas",autoAcceptDescription:"Aceptar automáticamente reservas que cumplan tus criterios",defaultBufferTime:"Tiempo de Búfer Predeterminado",bufferTimeDescription:"Tiempo entre sesiones",minutes:"minutos",showAvailabilityPublicly:"Mostrar Calendario de Disponibilidad Públicamente",requireDeposit:"Requerir Depósito para Reservas",autoDeclineExpired:"Rechazar Automáticamente Solicitudes de Reserva Expiradas",defaultSessionDuration:"Duración de Sesión Predeterminada",autoListItem:"Listar Automáticamente Artículos",autoListDescription:"Listar automáticamente artículos para la venta",requireApproval:"Requerir Aprobación",requireApprovalDescription:"Revisar artículos antes de que se publiquen",defaultShippingMethod:"Método de Envío Predeterminado",defaultPaymentTerms:"Términos de Pago Predeterminados",immediate:"Inmediato",net15:"Neto 15",net30:"Neto 30",autoAcceptOffersAbove:"Aceptar Automáticamente Ofertas por Encima del Umbral",autoAcceptThreshold:"Umbral de Aceptación Automática",showSoldItems:"Mostrar Artículos Vendidos en Listados",imageQuality:"Calidad de Imagen",videoQuality:"Calidad de Video",high:"Alta",medium:"Media",low:"Baja (Carga Más Rápida)",autoSaveUploaded:"Guardar Automáticamente Medios Subidos",autoSaveDescription:"Guardar automáticamente imágenes y videos subidos",compressImages:"Comprimir Imágenes Antes de Subir",compressDescription:"Reducir el tamaño del archivo para subidas más rápidas",maxUploadSize:"Tamaño Máximo de Subida",mb:"MB",fontSize:"Tamaño de Fuente",small:"Pequeño",large:"Grande",extraLarge:"Extra Grande",reducedMotion:"Movimiento Reducido",reducedMotionDescription:"Desactivar animaciones para mejor accesibilidad",highContrast:"Modo de Alto Contraste",highContrastDescription:"Aumentar el contraste para mejor visibilidad",screenReaderAnnouncements:"Anuncios de Lector de Pantalla",screenReaderDescription:"Habilitar anuncios para lectores de pantalla",keyboardHints:"Pistas de Navegación por Teclado",keyboardHintsDescription:"Mostrar pistas para navegación por teclado",dataUsage:"Uso de Datos",wifiOnly:"Solo WiFi (para medios)",auto:"Automático",never:"Nunca (ahorrar datos)",offlineMode:"Modo Sin Conexión",offlineModeDescription:"Habilitar funcionalidad sin conexión",backgroundSync:"Sincronización en Segundo Plano",backgroundSyncDescription:"Sincronizar datos en segundo plano",autoClearOldNotifications:"Limpiar Automáticamente Notificaciones Antiguas",clearAfter:"Limpiar Después de",days:"días",cacheManagement:"Gestión de Caché",clearCache:"Limpiar Caché",clearCacheDescription:"Limpiar datos en caché para liberar espacio de almacenamiento",saveAll:"Guardar Todo",saving:"Guardando...",saved:"¡Configuración guardada exitosamente!",saveFailed:"Error al guardar la configuración.",settingsUpdated:"¡Configuración actualizada!",dashboard:"Panel",socialNx:"SocialNx",messages:"Mensajes",bookings:"Reservas",marketplace:"Mercado",techServices:"Servicios Técnicos",businessCenter:"Centro de Negocios",profile:"Perfil",billing:"Facturación",settings:"Configuración",logout:"Cerrar Sesión",search:"Buscar",searchPlaceholder:"Buscar...",notifications:"Notificaciones",noNotifications:"No hay notificaciones",markAllRead:"Marcar todas como leídas",clearAll:"Limpiar todo",switchRole:"Cambiar Rol",viewProfile:"Ver Perfil",goodMorning:"Buenos días",goodAfternoon:"Buenas tardes",goodEvening:"Buenas noches",goodNight:"Buenas noches",welcomeBack:"Bienvenido de nuevo",quickActions:"Acciones Rápidas",recentActivity:"Actividad Reciente",upcomingBookings:"Reservas Próximas",noUpcomingBookings:"No hay reservas próximas",viewAll:"Ver Todo",seeMore:"Ver Más",newBooking:"Nueva Reserva",viewCalendar:"Ver Calendario",recentMessages:"Mensajes Recientes",noRecentMessages:"No hay mensajes recientes",startConversation:"Iniciar Conversación",trendingNow:"Tendencias",viewMarketplace:"Ver Mercado",stats:"Estadísticas",followers:"Seguidores",following:"Siguiendo",posts:"Publicaciones",forYou:"Para Ti",following:"Siguiendo",discover:"Descubrir",createPost:"Crear Publicación",whatOnMind:"¿En qué estás pensando?",post:"Publicar",like:"Me Gusta",comment:"Comentar",share:"Compartir",save:"Guardar",repost:"Republicar",follow:"Seguir",unfollow:"Dejar de Seguir",noPosts:"Aún no hay publicaciones",beFirst:"¡Sé el primero en compartir algo!",noPostsFollowing:"No hay publicaciones recientes de personas que sigues",browseForYou:"Explorar feed Para Ti →",suggestedForYou:"Sugerido para ti",startFollowing:"Comienza a seguir creadores",followDescription:"Sigue artistas, ingenieros y estudios para ver sus publicaciones en tu feed de Siguiendo.",selectConversation:"Selecciona una conversación para comenzar a chatear",typeMessage:"Escribe un mensaje...",send:"Enviar",online:"En Línea",offline:"Desconectado",typing:"escribiendo...",newMessage:"Nuevo Mensaje",noConversations:"Aún no hay conversaciones",myBookings:"Mis Reservas",calendar:"Calendario",findTalent:"Buscar Talento",broadcasts:"Transmisiones",createBroadcast:"Crear Transmisión",newSession:"Nueva Sesión",manageSessions:"Gestiona tus sesiones y reservas",upcoming:"Próximas",past:"Pasadas",pending:"Pendientes",confirmed:"Confirmadas",cancelled:"Canceladas",noBookings:"No se encontraron reservas",loading:"Cargando...",error:"Error",success:"Éxito",cancel:"Cancelar",confirm:"Confirmar",delete:"Eliminar",edit:"Editar",save:"Guardar",close:"Cerrar",back:"Atrás",next:"Siguiente",previous:"Anterior",done:"Hecho",apply:"Aplicar",reset:"Restablecer",filter:"Filtrar",sort:"Ordenar",refresh:"Actualizar"},fr:{general:"Général",security:"Sécurité et Confidentialité",notifications:"Notifications",messaging:"Messagerie",social:"Social et Fil d'Actualité",bookings:"Réservations",marketplace:"Marché",content:"Contenu et Médias",accessibility:"Accessibilité",performance:"Performances",rolesWorkflow:"Rôles et Flux de Travail",activeAccountTypes:"Types de Compte Actifs",preferredProfile:"Profil Préféré",activeWorkflowContext:"Contexte de Flux de Travail Actif",seeAllUnfiltered:"Voir Tout (Vue Non Filtrée)",seeAllDescription:"Afficher tous les types de contenu indépendamment du flux de travail actif",saveWorkflowSettings:"Enregistrer les Paramètres de Flux de Travail",appearance:"Apparence",light:"Clair",dark:"Sombre",system:"Système",languageLocalization:"Langue et Localisation",language:"Langue",dateFormat:"Format de Date",timeFormat:"Format d'Heure",timezone:"Fuseau Horaire",currency:"Devise",numberFormat:"Format de Nombre",autoDetect:"Détection Automatique",easternTime:"Heure de l'Est",centralTime:"Heure du Centre",mountainTime:"Heure des Rocheuses",pacificTime:"Heure du Pacifique",accountSecurity:"Sécurité du Compte",emailAddress:"Adresse E-mail",password:"Mot de Passe",changeEmail:"Changer l'E-mail",changePassword:"Changer le Mot de Passe",twoFactorAuth:"Authentification à Deux Facteurs (2FA)",twoFactorDescription:"Ajoutez une couche supplémentaire de sécurité à votre compte",lastChanged:"Dernière modification",unknown:"Inconnu",privacyVisibility:"Confidentialité et Visibilité",publicProfileVisibility:"Visibilité du Profil Public",showLocationOnMap:"Afficher l'Emplacement sur la Carte",hideProfileCompletely:"Masquer Complètement le Profil",showEmailAddress:"Afficher l'Adresse E-mail",showPhoneNumber:"Afficher le Numéro de Téléphone",showOnlineStatus:"Afficher le Statut en Ligne",showLastSeen:"Afficher la Dernière Connexion",allowSearchEngines:"Autoriser l'Indexation par les Moteurs de Recherche",allowTagging:"Autoriser le Marquage",reviewTagsBeforeAppear:"Réviser les Tags Avant qu'Ils Apparaissent",showFollowingList:"Afficher la Liste des Abonnements",showFollowersList:"Afficher la Liste des Abonnés",contentSafety:"Contenu et Sécurité",blockedUsers:"Utilisateurs Bloqués",mutedThreads:"Fils de Discussion Silencieux",noActive:"Aucun actif",yourData:"Vos Données",downloadDataDescription:"Téléchargez une copie de vos données personnelles (RGPD/CCPA).",downloadData:"Télécharger les Données",dangerZone:"Zone de Danger",deleteAccountWarning:"Supprimer votre compte est permanent. Cette action supprimera votre profil, vos publications et vos messages.",deleteAccount:"Supprimer le Compte",confirmDeletion:"Confirmer la Suppression",typeDeleteToConfirm:"Tapez SUPPRIMER ci-dessous pour confirmer. Cela ne peut pas être annulé.",confirmDelete:"Confirmer la Suppression",cancel:"Annuler",generalNotifications:"Notifications Générales",emailNotifications:"Notifications par E-mail",pushNotifications:"Notifications Push",marketingUpdates:"Marketing et Mises à Jour",soundNotifications:"Notifications Sonores",badgeCount:"Compteur de Badges",badgeCountDescription:"Afficher le nombre de non lus sur l'icône de l'application",bookingNotifications:"Notifications de Réservations",newBookingRequests:"Nouvelles Demandes de Réservation",bookingConfirmations:"Confirmations de Réservation",bookingReminders:"Rappels de Réservation",bookingCancellations:"Annulations de Réservation",socialNotifications:"Notifications Sociales",likes:"J'aime",comments:"Commentaires",follows:"Abonnements",mentions:"Mentions",reposts:"Repartages",marketplaceNotifications:"Notifications du Marché",newOffers:"Nouvelles Offres",sales:"Ventes",messages:"Messages",systemNotifications:"Notifications Système",maintenanceAlerts:"Alertes de Maintenance",updates:"Mises à Jour",securityAlerts:"Alertes de Sécurité",quietHours:"Heures Silencieuses",enableQuietHours:"Activer les Heures Silencieuses",quietHoursDescription:"Désactiver les notifications pendant des heures spécifiques",startTime:"Heure de Début",endTime:"Heure de Fin",readReceipts:"Accusés de Réception",readReceiptsDescription:"Afficher quand les messages sont lus",typingIndicators:"Indicateurs de Frappe",typingIndicatorsDescription:"Afficher quand quelqu'un est en train d'écrire",messageRequests:"Demandes de Message",messageRequestsDescription:"Exiger une approbation pour les messages de non contacts",whoCanMessageYou:"Qui Peut Vous Envoyer des Messages",everyone:"Tout le Monde",followersOnly:"Abonnés Uniquement",noOne:"Personne",autoArchiveOld:"Archiver Automatiquement les Anciennes Conversations",autoArchiveDescription:"Archiver automatiquement les conversations de plus de 30 jours",soundNotificationsMessages:"Notifications Sonores pour les Messages",messagePreview:"Aperçu du Message dans les Notifications",messagePreviewDescription:"Afficher le contenu du message dans les notifications",blockedContacts:"Contacts Bloqués",searchConversations:"Rechercher des conversations...",newGroup:"Nouveau Groupe",groupChat:"Chat de Groupe",directMessage:"Message Direct",addMembers:"Ajouter des Membres",groupName:"Nom du Groupe",createGroup:"Créer un Groupe",noMessages:"Aucun message pour le moment",messageDeleted:"Message supprimé",replyingTo:"Répondre à",editingMessage:"Modification du message",forwardingMessage:"Transfert du message",unknownUser:"Utilisateur Inconnu",dropFiles:"Déposer les fichiers ici",updateMessage:"Mettre à jour le message",noMembersSelected:"Aucun membre sélectionné",noUsersFound:"Aucun utilisateur trouvé",you:"Vous",enterGroupName:"Entrer le nom du groupe",feedAlgorithm:"Algorithme du Fil d'Actualité",chronological:"Chronologique",recommended:"Recommandé",followingOnly:"Abonnements Uniquement",autoPlayVideos:"Lecture Automatique des Vidéos dans le Fil",showSensitiveContentWarning:"Afficher l'Avertissement de Contenu Sensible",showActivityStatus:"Afficher le Statut d'Activité",showActivityStatusDescription:"Permettre aux autres de voir quand vous êtes actif",showSuggestedAccounts:"Afficher les Comptes Suggérés",contentFiltering:"Filtrage de Contenu",sensitivityFilter:"Filtre de Sensibilité",off:"Désactivé",low:"Faible",medium:"Moyen",high:"Élevé",autoHideReported:"Masquer Automatiquement le Contenu Signalé",showAgeRestricted:"Afficher le Contenu avec Restriction d'Âge",mutedUsers:"Utilisateurs Silencieux",autoAcceptBookings:"Accepter Automatiquement les Réservations",autoAcceptDescription:"Accepter automatiquement les réservations qui répondent à vos critères",defaultBufferTime:"Temps de Tampon par Défaut",bufferTimeDescription:"Temps entre les sessions",minutes:"minutes",showAvailabilityPublicly:"Afficher le Calendrier de Disponibilité Publiquement",requireDeposit:"Exiger un Dépôt pour les Réservations",autoDeclineExpired:"Refuser Automatiquement les Demandes de Réservation Expirées",defaultSessionDuration:"Durée de Session par Défaut",autoListItem:"Lister Automatiquement les Articles",autoListDescription:"Lister automatiquement les articles à vendre",requireApproval:"Exiger une Approbation",requireApprovalDescription:"Réviser les articles avant qu'ils ne soient publiés",defaultShippingMethod:"Méthode d'Expédition par Défaut",defaultPaymentTerms:"Conditions de Paiement par Défaut",immediate:"Immédiat",net15:"Net 15",net30:"Net 30",autoAcceptOffersAbove:"Accepter Automatiquement les Offres au-Dessus du Seuil",autoAcceptThreshold:"Seuil d'Acceptation Automatique",showSoldItems:"Afficher les Articles Vendus dans les Listings",imageQuality:"Qualité d'Image",videoQuality:"Qualité Vidéo",high:"Élevée",medium:"Moyenne",low:"Faible (Chargement Plus Rapide)",autoSaveUploaded:"Enregistrer Automatiquement les Médias Téléchargés",autoSaveDescription:"Enregistrer automatiquement les images et vidéos téléchargées",compressImages:"Compresser les Images Avant le Téléchargement",compressDescription:"Réduire la taille du fichier pour des téléchargements plus rapides",maxUploadSize:"Taille Maximale de Téléchargement",mb:"Mo",fontSize:"Taille de Police",small:"Petite",large:"Grande",extraLarge:"Très Grande",reducedMotion:"Mouvement Réduit",reducedMotionDescription:"Désactiver les animations pour une meilleure accessibilité",highContrast:"Mode Contraste Élevé",highContrastDescription:"Augmenter le contraste pour une meilleure visibilité",screenReaderAnnouncements:"Annonces de Lecteur d'Écran",screenReaderDescription:"Activer les annonces pour les lecteurs d'écran",keyboardHints:"Indices de Navigation au Clavier",keyboardHintsDescription:"Afficher les indices pour la navigation au clavier",dataUsage:"Utilisation des Données",wifiOnly:"WiFi Uniquement (pour les médias)",auto:"Automatique",never:"Jamais (économiser les données)",offlineMode:"Mode Hors Ligne",offlineModeDescription:"Activer la fonctionnalité hors ligne",backgroundSync:"Synchronisation en Arrière-Plan",backgroundSyncDescription:"Synchroniser les données en arrière-plan",autoClearOldNotifications:"Effacer Automatiquement les Anciennes Notifications",clearAfter:"Effacer Après",days:"jours",cacheManagement:"Gestion du Cache",clearCache:"Effacer le Cache",clearCacheDescription:"Effacer les données en cache pour libérer de l'espace de stockage",saveAll:"Tout Enregistrer",saving:"Enregistrement...",saved:"Paramètres enregistrés avec succès !",saveFailed:"Échec de l'enregistrement des paramètres.",settingsUpdated:"Paramètres mis à jour !",dashboard:"Tableau de Bord",socialNx:"SocialNx",messages:"Messages",bookings:"Réservations",marketplace:"Marché",techServices:"Services Techniques",businessCenter:"Centre d'Affaires",profile:"Profil",billing:"Facturation",settings:"Paramètres",logout:"Déconnexion",search:"Rechercher",searchPlaceholder:"Rechercher...",notifications:"Notifications",noNotifications:"Aucune notification",markAllRead:"Tout marquer comme lu",clearAll:"Tout effacer",switchRole:"Changer de Rôle",viewProfile:"Voir le Profil",goodMorning:"Bonjour",goodAfternoon:"Bon après-midi",goodEvening:"Bonsoir",goodNight:"Bonne nuit",welcomeBack:"Bon retour",quickActions:"Actions Rapides",recentActivity:"Activité Récente",upcomingBookings:"Réservations à Venir",noUpcomingBookings:"Aucune réservation à venir",viewAll:"Voir Tout",seeMore:"Voir Plus",newBooking:"Nouvelle Réservation",viewCalendar:"Voir le Calendrier",recentMessages:"Messages Récents",noRecentMessages:"Aucun message récent",startConversation:"Démarrer une Conversation",trendingNow:"Tendances",viewMarketplace:"Voir le Marché",stats:"Statistiques",followers:"Abonnés",following:"Abonnements",posts:"Publications",forYou:"Pour Vous",following:"Abonnements",discover:"Découvrir",createPost:"Créer une Publication",whatOnMind:"À quoi pensez-vous ?",post:"Publier",like:"J'aime",comment:"Commenter",share:"Partager",save:"Enregistrer",repost:"Repartager",follow:"Suivre",unfollow:"Ne Plus Suivre",noPosts:"Aucune publication pour le moment",beFirst:"Soyez le premier à partager quelque chose !",noPostsFollowing:"Aucune publication récente des personnes que vous suivez",browseForYou:"Parcourir le fil Pour Vous →",suggestedForYou:"Suggéré pour vous",startFollowing:"Commencer à suivre des créateurs",followDescription:"Suivez des artistes, des ingénieurs et des studios pour voir leurs publications dans votre fil d'Abonnements.",selectConversation:"Sélectionnez une conversation pour commencer à discuter",typeMessage:"Tapez un message...",send:"Envoyer",online:"En Ligne",offline:"Hors Ligne",typing:"en train d'écrire...",newMessage:"Nouveau Message",noConversations:"Aucune conversation pour le moment",myBookings:"Mes Réservations",calendar:"Calendrier",findTalent:"Trouver un Talent",broadcasts:"Diffusions",createBroadcast:"Créer une Diffusion",newSession:"Nouvelle Session",manageSessions:"Gérez vos sessions et réservations",upcoming:"À Venir",past:"Passées",pending:"En Attente",confirmed:"Confirmées",cancelled:"Annulées",noBookings:"Aucune réservation trouvée",loading:"Chargement...",error:"Erreur",success:"Succès",cancel:"Annuler",confirm:"Confirmer",delete:"Supprimer",edit:"Modifier",save:"Enregistrer",close:"Fermer",back:"Retour",next:"Suivant",previous:"Précédent",done:"Terminé",apply:"Appliquer",reset:"Réinitialiser",filter:"Filtrer",sort:"Trier",refresh:"Actualiser",activityFeed:"Flux d'Activité",allCaughtUp:"Tout est à jour !",noNewNotifications:"Aucune nouvelle notification",viewAllActivity:"Voir Toute l'Activité",studioStatus:"Statut du Studio",manage:"Gérer",noRoomsConfigured:"Aucune salle configurée pour le moment",addFirstRoom:"+ Ajouter Votre Première Salle",new:"Nouveau",gearExchange:"Échange d'Équipement",seshFxStore:"Boutique SeshFX",searchConversations:"Rechercher des conversations...",newGroup:"Nouveau Groupe",groupChat:"Chat de Groupe",directMessage:"Message Direct",addMembers:"Ajouter des Membres",groupName:"Nom du Groupe",createGroup:"Créer un Groupe",noMessages:"Aucun message pour le moment",messageDeleted:"Message supprimé",replyingTo:"Répondre à",editingMessage:"Modification du message",forwardingMessage:"Transfert du message",unknownUser:"Utilisateur Inconnu",dropFiles:"Déposer les fichiers ici",updateMessage:"Mettre à jour le message",noMembersSelected:"Aucun membre sélectionné",noUsersFound:"Aucun utilisateur trouvé",you:"Vous",enterGroupName:"Entrer le nom du groupe",active:"Actif",inactive:"Inactif",pending:"En Attente",completed:"Terminé",cancelled:"Annulé",declined:"Refusé",confirmed:"Confirmé"},de:{general:"Allgemein",security:"Sicherheit & Datenschutz",notifications:"Benachrichtigungen",messaging:"Nachrichten",social:"Social & Feed",bookings:"Buchungen",marketplace:"Marktplatz",content:"Inhalt & Medien",accessibility:"Barrierefreiheit",performance:"Leistung",rolesWorkflow:"Rollen & Arbeitsablauf",activeAccountTypes:"Aktive Kontotypen",preferredProfile:"Bevorzugtes Profil",activeWorkflowContext:"Aktiver Arbeitsablauf-Kontext",seeAllUnfiltered:"Alles Anzeigen (Ungefilterte Ansicht)",seeAllDescription:"Alle Inhaltstypen unabhängig vom aktiven Arbeitsablauf anzeigen",saveWorkflowSettings:"Arbeitsablauf-Einstellungen Speichern",appearance:"Erscheinungsbild",light:"Hell",dark:"Dunkel",system:"System",languageLocalization:"Sprache & Lokalisierung",language:"Sprache",dateFormat:"Datumsformat",timeFormat:"Zeitformat",timezone:"Zeitzone",currency:"Währung",numberFormat:"Zahlenformat",autoDetect:"Automatisch Erkennen",easternTime:"Östliche Zeit",centralTime:"Zentrale Zeit",mountainTime:"Bergzeit",pacificTime:"Pazifische Zeit",accountSecurity:"Kontosicherheit",emailAddress:"E-Mail-Adresse",password:"Passwort",changeEmail:"E-Mail Ändern",changePassword:"Passwort Ändern",twoFactorAuth:"Zwei-Faktor-Authentifizierung (2FA)",twoFactorDescription:"Fügen Sie eine zusätzliche Sicherheitsebene zu Ihrem Konto hinzu",lastChanged:"Zuletzt geändert",unknown:"Unbekannt",privacyVisibility:"Datenschutz & Sichtbarkeit",publicProfileVisibility:"Öffentliche Profilsichtbarkeit",showLocationOnMap:"Standort auf Karte Anzeigen",hideProfileCompletely:"Profil Vollständig Ausblenden",showEmailAddress:"E-Mail-Adresse Anzeigen",showPhoneNumber:"Telefonnummer Anzeigen",showOnlineStatus:"Online-Status Anzeigen",showLastSeen:"Zuletzt Gesehen Anzeigen",allowSearchEngines:"Suchmaschinen-Indexierung Erlauben",allowTagging:"Tagging Erlauben",reviewTagsBeforeAppear:"Tags Vor dem Erscheinen Überprüfen",showFollowingList:"Folge-Liste Anzeigen",showFollowersList:"Follower-Liste Anzeigen",contentSafety:"Inhalt & Sicherheit",blockedUsers:"Blockierte Benutzer",mutedThreads:"Stummgeschaltete Threads",noActive:"Keine aktiven",yourData:"Ihre Daten",downloadDataDescription:"Laden Sie eine Kopie Ihrer persönlichen Daten herunter (DSGVO/CCPA).",downloadData:"Daten Herunterladen",dangerZone:"Gefahrenzone",deleteAccountWarning:"Das Löschen Ihres Kontos ist dauerhaft. Diese Aktion löscht Ihr Profil, Ihre Beiträge und Nachrichten.",deleteAccount:"Konto Löschen",confirmDeletion:"Löschung Bestätigen",typeDeleteToConfirm:"Geben Sie LÖSCHEN unten ein, um zu bestätigen. Dies kann nicht rückgängig gemacht werden.",confirmDelete:"Löschung Bestätigen",cancel:"Abbrechen",generalNotifications:"Allgemeine Benachrichtigungen",emailNotifications:"E-Mail-Benachrichtigungen",pushNotifications:"Push-Benachrichtigungen",marketingUpdates:"Marketing & Updates",soundNotifications:"Tonbenachrichtigungen",badgeCount:"Badge-Zähler",badgeCountDescription:"Ungelesene Anzahl auf App-Symbol anzeigen",bookingNotifications:"Buchungsbenachrichtigungen",newBookingRequests:"Neue Buchungsanfragen",bookingConfirmations:"Buchungsbestätigungen",bookingReminders:"Buchungserinnerungen",bookingCancellations:"Buchungsstornierungen",socialNotifications:"Soziale Benachrichtigungen",likes:"Gefällt mir",comments:"Kommentare",follows:"Folgen",mentions:"Erwähnungen",reposts:"Weiterleitungen",marketplaceNotifications:"Marktplatz-Benachrichtigungen",newOffers:"Neue Angebote",sales:"Verkäufe",messages:"Nachrichten",systemNotifications:"Systembenachrichtigungen",maintenanceAlerts:"Wartungsbenachrichtigungen",updates:"Updates",securityAlerts:"Sicherheitswarnungen",quietHours:"Ruhezeiten",enableQuietHours:"Ruhezeiten Aktivieren",quietHoursDescription:"Benachrichtigungen während bestimmter Zeiten deaktivieren",startTime:"Startzeit",endTime:"Endzeit",readReceipts:"Lesebestätigungen",readReceiptsDescription:"Anzeigen, wenn Nachrichten gelesen wurden",typingIndicators:"Tippindikatoren",typingIndicatorsDescription:"Anzeigen, wenn jemand tippt",messageRequests:"Nachrichtenanfragen",messageRequestsDescription:"Genehmigung für Nachrichten von Nicht-Kontakten erforderlich",whoCanMessageYou:"Wer Kann Ihnen Nachrichten Senden",everyone:"Jeder",followersOnly:"Nur Follower",noOne:"Niemand",autoArchiveOld:"Alte Unterhaltungen Automatisch Archivieren",autoArchiveDescription:"Unterhaltungen älter als 30 Tage automatisch archivieren",soundNotificationsMessages:"Tonbenachrichtigungen für Nachrichten",messagePreview:"Nachrichtenvorschau in Benachrichtigungen",messagePreviewDescription:"Nachrichteninhalt in Benachrichtigungen anzeigen",blockedContacts:"Blockierte Kontakte",searchConversations:"Unterhaltungen suchen...",newGroup:"Neue Gruppe",groupChat:"Gruppenchat",directMessage:"Direktnachricht",addMembers:"Mitglieder Hinzufügen",groupName:"Gruppenname",createGroup:"Gruppe Erstellen",noMessages:"Noch keine Nachrichten",messageDeleted:"Nachricht gelöscht",replyingTo:"Antworten an",editingMessage:"Nachricht bearbeiten",forwardingMessage:"Nachricht weiterleiten",unknownUser:"Unbekannter Benutzer",dropFiles:"Dateien hier ablegen",updateMessage:"Nachricht aktualisieren",noMembersSelected:"Keine Mitglieder ausgewählt",noUsersFound:"Keine Benutzer gefunden",you:"Du",enterGroupName:"Gruppenname eingeben",feedAlgorithm:"Feed-Algorithmus",chronological:"Chronologisch",recommended:"Empfohlen",followingOnly:"Nur Gefolgte",autoPlayVideos:"Videos im Feed Automatisch Abspielen",showSensitiveContentWarning:"Warnung für Sensiblen Inhalt Anzeigen",showActivityStatus:"Aktivitätsstatus Anzeigen",showActivityStatusDescription:"Anderen erlauben zu sehen, wann Sie aktiv sind",showSuggestedAccounts:"Vorgeschlagene Konten Anzeigen",contentFiltering:"Inhaltsfilterung",sensitivityFilter:"Empfindlichkeitsfilter",off:"Aus",low:"Niedrig",medium:"Mittel",high:"Hoch",autoHideReported:"Gemeldeten Inhalt Automatisch Ausblenden",showAgeRestricted:"Altersbeschränkten Inhalt Anzeigen",mutedUsers:"Stummgeschaltete Benutzer",autoAcceptBookings:"Buchungen Automatisch Akzeptieren",autoAcceptDescription:"Buchungen automatisch akzeptieren, die Ihren Kriterien entsprechen",defaultBufferTime:"Standard-Pufferzeit",bufferTimeDescription:"Zeit zwischen Sitzungen",minutes:"Minuten",showAvailabilityPublicly:"Verfügbarkeitskalender Öffentlich Anzeigen",requireDeposit:"Anzahlung für Buchungen Erfordern",autoDeclineExpired:"Abgelaufene Buchungsanfragen Automatisch Ablehnen",defaultSessionDuration:"Standard-Sitzungsdauer",autoListItem:"Artikel Automatisch Auflisten",autoListDescription:"Artikel automatisch zum Verkauf auflisten",requireApproval:"Genehmigung Erfordern",requireApprovalDescription:"Artikel überprüfen, bevor sie veröffentlicht werden",defaultShippingMethod:"Standard-Versandmethode",defaultPaymentTerms:"Standard-Zahlungsbedingungen",immediate:"Sofort",net15:"Netto 15",net30:"Netto 30",autoAcceptOffersAbove:"Angebote Über dem Schwellenwert Automatisch Akzeptieren",autoAcceptThreshold:"Automatischer Akzeptanz-Schwellenwert",showSoldItems:"Verkaufte Artikel in Auflistungen Anzeigen",imageQuality:"Bildqualität",videoQuality:"Videoqualität",high:"Hoch",medium:"Mittel",low:"Niedrig (Schnelleres Laden)",autoSaveUploaded:"Hochgeladene Medien Automatisch Speichern",autoSaveDescription:"Hochgeladene Bilder und Videos automatisch speichern",compressImages:"Bilder Vor dem Hochladen Komprimieren",compressDescription:"Dateigröße für schnellere Uploads reduzieren",maxUploadSize:"Maximale Upload-Größe",mb:"MB",fontSize:"Schriftgröße",small:"Klein",large:"Groß",extraLarge:"Extra Groß",reducedMotion:"Reduzierte Bewegung",reducedMotionDescription:"Animationen für bessere Barrierefreiheit deaktivieren",highContrast:"Hoher Kontrast Modus",highContrastDescription:"Kontrast für bessere Sichtbarkeit erhöhen",screenReaderAnnouncements:"Bildschirmleser-Ankündigungen",screenReaderDescription:"Ankündigungen für Bildschirmleser aktivieren",keyboardHints:"Tastaturnavigations-Hinweise",keyboardHintsDescription:"Hinweise für Tastaturnavigation anzeigen",dataUsage:"Datenverbrauch",wifiOnly:"Nur WiFi (für Medien)",auto:"Automatisch",never:"Niemals (Daten sparen)",offlineMode:"Offline-Modus",offlineModeDescription:"Offline-Funktionalität aktivieren",backgroundSync:"Hintergrund-Synchronisation",backgroundSyncDescription:"Daten im Hintergrund synchronisieren",autoClearOldNotifications:"Alte Benachrichtigungen Automatisch Löschen",clearAfter:"Löschen Nach",days:"Tagen",cacheManagement:"Cache-Verwaltung",clearCache:"Cache Löschen",clearCacheDescription:"Gecachte Daten löschen, um Speicherplatz freizugeben",saveAll:"Alles Speichern",saving:"Speichern...",saved:"Einstellungen erfolgreich gespeichert!",saveFailed:"Fehler beim Speichern der Einstellungen.",settingsUpdated:"Einstellungen aktualisiert!",dashboard:"Dashboard",socialNx:"SocialNx",messages:"Nachrichten",bookings:"Buchungen",marketplace:"Marktplatz",techServices:"Technische Dienste",businessCenter:"Business Center",profile:"Profil",billing:"Abrechnung",settings:"Einstellungen",logout:"Abmelden",search:"Suchen",searchPlaceholder:"Suchen...",notifications:"Benachrichtigungen",noNotifications:"Keine Benachrichtigungen",markAllRead:"Alle als gelesen markieren",clearAll:"Alle löschen",switchRole:"Rolle Wechseln",viewProfile:"Profil Anzeigen",goodMorning:"Guten Morgen",goodAfternoon:"Guten Tag",goodEvening:"Guten Abend",goodNight:"Gute Nacht",welcomeBack:"Willkommen zurück",quickActions:"Schnellaktionen",recentActivity:"Letzte Aktivität",upcomingBookings:"Anstehende Buchungen",noUpcomingBookings:"Keine anstehenden Buchungen",viewAll:"Alle Anzeigen",seeMore:"Mehr Anzeigen",newBooking:"Neue Buchung",viewCalendar:"Kalender Anzeigen",recentMessages:"Letzte Nachrichten",noRecentMessages:"Keine letzten Nachrichten",startConversation:"Unterhaltung Starten",trendingNow:"Trending",viewMarketplace:"Marktplatz Anzeigen",stats:"Statistiken",followers:"Follower",following:"Folgen",posts:"Beiträge",forYou:"Für Dich",following:"Folgen",discover:"Entdecken",createPost:"Beitrag Erstellen",whatOnMind:"Woran denkst du?",post:"Beitrag",like:"Gefällt mir",comment:"Kommentieren",share:"Teilen",save:"Speichern",repost:"Weiterleiten",follow:"Folgen",unfollow:"Nicht Mehr Folgen",noPosts:"Noch keine Beiträge",beFirst:"Sei der Erste, der etwas teilt!",noPostsFollowing:"Keine letzten Beiträge von Personen, denen du folgst",browseForYou:"Für Dich Feed durchsuchen →",suggestedForYou:"Vorgeschlagen für dich",startFollowing:"Beginne, Kreativen zu folgen",followDescription:"Folge Künstlern, Ingenieuren und Studios, um ihre Beiträge in deinem Folgen-Feed zu sehen.",selectConversation:"Wähle eine Unterhaltung aus, um zu chatten",typeMessage:"Nachricht eingeben...",send:"Senden",online:"Online",offline:"Offline",typing:"tippt...",newMessage:"Neue Nachricht",noConversations:"Noch keine Unterhaltungen",searchConversations:"Unterhaltungen suchen...",newGroup:"Neue Gruppe",groupChat:"Gruppenchat",directMessage:"Direktnachricht",addMembers:"Mitglieder Hinzufügen",groupName:"Gruppenname",createGroup:"Gruppe Erstellen",noMessages:"Noch keine Nachrichten",messageDeleted:"Nachricht gelöscht",replyingTo:"Antworten an",editingMessage:"Nachricht bearbeiten",forwardingMessage:"Nachricht weiterleiten",unknownUser:"Unbekannter Benutzer",dropFiles:"Dateien hier ablegen",updateMessage:"Nachricht aktualisieren",noMembersSelected:"Keine Mitglieder ausgewählt",noUsersFound:"Keine Benutzer gefunden",you:"Du",enterGroupName:"Gruppenname eingeben",myBookings:"Meine Buchungen",calendar:"Kalender",findTalent:"Talent Finden",broadcasts:"Übertragungen",createBroadcast:"Übertragung Erstellen",newSession:"Neue Sitzung",manageSessions:"Verwalte deine Sitzungen und Buchungen",upcoming:"Anstehend",past:"Vergangen",pending:"Ausstehend",confirmed:"Bestätigt",cancelled:"Abgesagt",noBookings:"Keine Buchungen gefunden",loading:"Laden...",error:"Fehler",success:"Erfolg",cancel:"Abbrechen",confirm:"Bestätigen",delete:"Löschen",edit:"Bearbeiten",save:"Speichern",close:"Schließen",back:"Zurück",next:"Weiter",previous:"Zurück",done:"Fertig",apply:"Anwenden",reset:"Zurücksetzen",filter:"Filtern",sort:"Sortieren",refresh:"Aktualisieren"}};function Rt(t,s="en"){return(fe[s]||fe.en)[t]||fe.en[t]||t}function et(t="en"){return fe[t]||fe.en}const tt=i.createContext();function is({children:t,userData:s}){var h;const[n,a]=i.useState(()=>{var f;if(typeof window<"u"){const w=localStorage.getItem("language");return w||((f=s==null?void 0:s.settings)==null?void 0:f.language)||"en"}return"en"});i.useEffect(()=>{var f;(f=s==null?void 0:s.settings)!=null&&f.language&&(a(s.settings.language),localStorage.setItem("language",s.settings.language),document.documentElement.lang=s.settings.language)},[(h=s==null?void 0:s.settings)==null?void 0:h.language]),i.useEffect(()=>{document.documentElement.lang=n,localStorage.setItem("language",n)},[n]);const r=f=>Rt(f,n),o=et(n);return e.jsx(tt.Provider,{value:{language:n,setLanguage:a,t:r,translations:o},children:t})}function Be(){const t=i.useContext(tt);return t||{language:"en",setLanguage:()=>{},t:s=>s,translations:et("en")}}const ze="https://brainy-basilisk-921.convex.cloud",st=ze.trim()!==""?ze.trim():"https://placeholder.convex.cloud",os=new ot(st),Q=()=>ze.trim()!==""&&st!=="https://placeholder.convex.cloud",Tt="vercel_blob_rw_A8uhvDxHIfKcDYQt_0YSZxD3zrlbSFuGtj72eNFZ4eLibTN",nt={PROFILE_PHOTOS:"profile-photos",POST_MEDIA:"post-media",DOCUMENTS:"documents",STUDIO_IMAGES:"studio-images",GEAR_IMAGES:"gear-images",ATTACHMENTS:"attachments"};async function Ft(t,s=nt.POST_MEDIA,n={}){var a;try{const r=Date.now(),o=Math.random().toString(36).substring(2,8),h=((a=t.name)==null?void 0:a.split(".").pop())||"jpg",f=n.customFileName||`${s}-${r}-${o}.${h}`,w=`${s}/${f}`,p=await lt(w,t,{access:"public",token:Tt,contentType:t.type||"application/octet-stream"});return{url:p.url,downloadUrl:p.downloadUrl,pathname:p.pathname,size:p.size,uploadedAt:p.uploadedAt,contentType:p.contentType}}catch(r){throw console.error("Vercel Blob upload error:",r),r}}function ls(t){var s;return((s=t.type)==null?void 0:s.startsWith("image/"))||!1}function cs(t,s=5){const n=s*1024*1024;return t.size<=n}const Dt=t=>{var n,a;if(!t)return"";const s=t.trim().split(" ").filter(Boolean);return s.length>=2?(s[0][0]+s[1][0]).toUpperCase():s.length===1&&s[0].length>=2?s[0].substring(0,2).toUpperCase():((a=(n=s[0])==null?void 0:n[0])==null?void 0:a.toUpperCase())||""},zt=t=>{if(!t)return"from-brand-blue to-purple-600";const s=["from-brand-blue to-purple-600","from-emerald-500 to-teal-600","from-orange-500 to-red-600","from-pink-500 to-rose-600","from-indigo-500 to-blue-600","from-amber-500 to-orange-600","from-cyan-500 to-blue-600","from-violet-500 to-purple-600"],n=t.split("").reduce((a,r)=>a+r.charCodeAt(0),0);return s[n%s.length]};function ie({src:t,name:s,size:n="md",className:a,onClick:r,status:o,isGroup:h=!1,square:f=!1}){const[w,p]=i.useState(!1),M=_e(Te("relative overflow-hidden flex items-center justify-center shrink-0 bg-gray-200 dark:bg-gray-700 border border-transparent transition-all select-none",f?"rounded-xl":"rounded-full",{xs:"h-6 w-6 text-[10px]",sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base",xl:"h-14 w-14 text-lg","2xl":"h-24 w-24 text-2xl","3xl":"h-32 w-32 text-4xl"}[n],r&&"cursor-pointer hover:opacity-90",a)),d=!t||w,c=Dt(s),m=zt(s);return e.jsxs("div",{className:M,onClick:r,role:r?"button":void 0,tabIndex:r?0:void 0,"aria-label":s?`${s}'s avatar`:"User avatar",children:[d?e.jsx("div",{className:`h-full w-full flex items-center justify-center bg-gradient-to-br ${m} text-white font-bold`,children:h?e.jsx(pe,{className:"w-1/2 h-1/2","aria-hidden":"true"}):c?e.jsx("span",{"aria-hidden":"true",children:c}):e.jsx(he,{className:"w-1/2 h-1/2","aria-hidden":"true"})}):e.jsx("img",{src:t,alt:s||"Avatar",className:"h-full w-full object-cover",onError:()=>p(!0),loading:"lazy"}),o&&e.jsx("span",{className:Te("absolute bottom-0 right-0 rounded-full border-2 border-white dark:border-gray-900",o==="online"?"bg-green-500":"bg-gray-400",n==="xs"||n==="sm"?"h-2 w-2":"h-3.5 w-3.5"),"aria-label":o==="online"?"Online":"Offline"})]})}const q=ct;dt();function ds(t){const s=i.useRef(!1),n=K(q.presence.updatePresence);i.useEffect(()=>{if(!t||!Q())return;n({userId:t,online:!0,lastSeen:Date.now()}).then(()=>{s.current=!0}).catch(r=>{console.error("Presence online error:",r)});const a=setInterval(()=>{s.current&&n({userId:t,online:!0,lastSeen:Date.now()}).catch(console.error)},3e4);return()=>{clearInterval(a),s.current&&(n({userId:t,online:!1,lastSeen:Date.now()}).catch(console.error),s.current=!1)}},[t])}function at(t){const s=Q(),n=i.useMemo(()=>t&&s?{userId:t}:"skip",[t,s]),a=de(q.presence.getPresence,n);return a?{online:a.online===!0,lastSeen:a.lastSeen,loading:!1}:{online:!1,lastSeen:null,loading:!Q()}}function Et(t){if(!t)return"Never";const s=t,a=Date.now()-s,r=Math.floor(a/6e4),o=Math.floor(r/60),h=Math.floor(o/24);return r<1?"Just now":r<60?`${r}m ago`:o<24?`${o}h ago`:h<7?`${h}d ago`:new Date(s).toLocaleDateString()}function rt({online:t,lastSeen:s,showText:n=!1,size:a="sm"}){const r={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5"},o={xs:"text-[10px]",sm:"text-xs",md:"text-sm"};return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:`${r[a]} ${t?"fill-green-500 text-green-500":"fill-gray-400 text-gray-400"}`}),t&&e.jsx("div",{className:"absolute inset-0 animate-ping",children:e.jsx(Le,{className:`${r[a]} fill-green-500 opacity-75`})})]}),n&&e.jsx("span",{className:`${o[a]} ${t?"text-green-500":"text-gray-400"} font-medium`,children:t?"Online":Et(s)})]})}function Pt({conversation:t,activeChat:s,currentUserId:n,onSelect:a,onDelete:r}){const o=t.type==="direct"?t.uid||(t.id.includes("_")?t.id.split("_").find(w=>w!==n):null):null,{online:h,lastSeen:f}=at(o||"");return e.jsxs("div",{onClick:()=>a(t),className:`group relative flex gap-3 p-4 cursor-pointer transition border-b dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/5 ${(s==null?void 0:s.id)===t.id?"bg-blue-50 dark:bg-blue-900/10 border-l-4 border-l-brand-blue":""}`,children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx(ie,{src:t.photo,name:t.n,size:"lg",isGroup:t.type==="group"}),t.type==="direct"&&o&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:e.jsx(rt,{online:h,lastSeen:f,size:"xs"})}),t.uc>0&&e.jsx("div",{className:"absolute -top-1 -right-1 h-5 w-5 bg-brand-blue text-white text-[10px] font-bold flex items-center justify-center rounded-full border-2 border-white dark:border-[#2c2e36]",children:t.uc>99?"99+":t.uc})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[e.jsx("h4",{className:`text-sm truncate ${t.uc>0?"font-extrabold text-gray-900 dark:text-white":"font-bold text-gray-700 dark:text-gray-300"}`,children:t.n}),e.jsx("span",{className:"text-[10px] text-gray-400 shrink-0 ml-2",children:t.lmt?new Date(t.lmt).toLocaleDateString():""})]}),e.jsxs("p",{className:`text-xs truncate ${t.uc>0?"text-gray-800 dark:text-gray-200 font-medium":"text-gray-500"}`,children:[t.ls===n?"You: ":"",t.lm]})]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),r==null||r(t.id)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white dark:bg-gray-800 shadow-md rounded-full text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all z-10",children:e.jsx(Ne,{size:16})})]})}function Bt({show:t,onConfirm:s,onCancel:n,userData:a,subProfiles:r={},title:o="Select Profile",message:h="Which profile would you like to use?",excludeRoles:f=["Fan","User"]}){var B;const[w,p]=i.useState("confirm"),[k,M]=i.useState(null);if(!t)return null;const d=(a==null?void 0:a.activeProfileRole)||((B=a==null?void 0:a.accountTypes)==null?void 0:B[0])||"Fan",c=(r==null?void 0:r[d])||{},m=((a==null?void 0:a.accountTypes)||[]).filter(S=>!f.includes(S)).filter(S=>r==null?void 0:r[S]),u=S=>{var R;if(!S||S==="User"||S==="Fan")return S||"User";if(S==="Talent"){const D=r==null?void 0:r.Talent,O=((R=D==null?void 0:D.profile_data)==null?void 0:R.talentSubRole)||(D==null?void 0:D.talentSubRole);if(O&&O!=="")return O}return S},A=S=>{var D;const R=r==null?void 0:r[S];return(R==null?void 0:R.display_name)||((D=R==null?void 0:R.profile_data)==null?void 0:D.displayName)||(a==null?void 0:a.effectiveDisplayName)||`${(a==null?void 0:a.firstName)||""} ${(a==null?void 0:a.lastName)||""}`.trim()||"User"},b=()=>{s(d),v()},g=()=>{p("select"),M(d)},x=S=>{M(S)},C=()=>{k&&(s(k),v())},v=()=>{p("confirm"),M(null)},E=()=>{v(),n()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-[#2c2e36] w-full max-w-md rounded-xl shadow-2xl animate-in zoom-in-95 border dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold dark:text-white flex items-center gap-2",children:[e.jsx(he,{size:20,className:"text-brand-blue"}),o]}),e.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 dark:hover:text-white",children:e.jsx(H,{size:20})})]}),e.jsxs("div",{className:"p-4",children:[h&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:h}),w==="confirm"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(he,{size:16,className:"text-brand-blue"}),e.jsx("span",{className:"text-sm font-bold text-brand-blue",children:"Current Active Profile"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{src:(c==null?void 0:c.photo_url)||(a==null?void 0:a.photoURL),name:A(d),size:"lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold dark:text-white",children:A(d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u(d)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:b,className:"w-full bg-brand-blue text-white py-3 rounded-lg font-bold hover:bg-blue-600 flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(le,{size:18})," Yes, Use Active Profile"]}),e.jsxs("button",{onClick:g,className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-bold hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center gap-2",children:[e.jsx(he,{size:18})," No, Select Different Profile"]})]})]}),w==="select"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Choose a profile for this ",o.toLowerCase(),":"]}),m.map(S=>{const R=k===S,D=(r==null?void 0:r[S])||{};return e.jsxs("button",{onClick:()=>x(S),className:`w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-all ${R?"border-brand-blue bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(ie,{src:D==null?void 0:D.photo_url,name:A(S),size:"md"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-bold dark:text-white",children:A(S)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u(S)})]}),R&&e.jsx("div",{className:"bg-brand-blue text-white p-1 rounded-full",children:e.jsx(le,{size:16})})]},S)}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{onClick:C,disabled:!k,className:"flex-1 bg-brand-blue text-white py-3 rounded-lg font-bold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(le,{size:18})," Confirm Selection"]}),e.jsx("button",{onClick:()=>p("confirm"),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-bold hover:opacity-80",children:"Back"})]})]})]})]})})}function us({user:t,userData:s,subProfiles:n={},conversations:a=[],activeChat:r,onSelectChat:o}){const{t:h}=Be(),[f,w]=i.useState(!1),[p,k]=i.useState(!1),[M,d]=i.useState(!1),[c,m]=i.useState(null),[u,A]=i.useState(null),[b,g]=i.useState("direct"),[x,C]=i.useState(!1),[v,E]=i.useState(""),[B,S]=i.useState([]),[R,D]=i.useState(""),[O,_]=i.useState([]),ae=K(q.conversations.createGroupChat),Z=K(q.conversations.deleteConversation),$=async y=>{D(y);const T=y.trim();if(T.length>1&&supabase){const L=(t==null?void 0:t.id)||(t==null?void 0:t.uid);try{const{data:Y,error:ce}=await supabase.from("profiles").select("id, first_name, last_name, avatar_url, active_role").or(`first_name.ilike.%${T}%,last_name.ilike.%${T}%`).neq("id",L).limit(20);if(ce)throw ce;const ne=(Y||[]).map(te=>({id:te.id,firstName:te.first_name,lastName:te.last_name,photoURL:te.avatar_url,role:te.active_role}));_(ne)}catch(Y){console.error("Search error:",Y),_([])}}else _([])},W=y=>{t!=null&&t.id||(t==null||t.uid),b==="direct"?(m(y),d(!0)):b==="add_member"&&(B.find(T=>T.id===y.id)||S(T=>[...T,y]),J())},se=y=>{if(A(y),c){const L=[(t==null?void 0:t.id)||(t==null?void 0:t.uid),c.id].sort().join("_");o({id:L,uid:c.id,name:`${c.firstName} ${c.lastName}`,type:"direct",profileRole:y}),m(null)}J()},J=()=>{w(!1),D(""),_([])},V=()=>{E(""),S([]),k(!0)},X=()=>{g("add_member"),w(!0)},ee=async()=>{if(!v||B.length===0)return alert("Name and members required.");if(!Q()){alert("Chat functionality is not available. Convex is not configured.");return}C(!0);try{const y=(t==null?void 0:t.id)||(t==null?void 0:t.uid),T=B.map(Y=>Y.id),{chatId:L}=await ae({creatorId:y,chatName:v,memberIds:T});k(!1),o({id:L,name:v,type:"group"})}catch(y){console.error("Group creation failed",y),alert("Group creation failed: "+y.message)}finally{C(!1)}},G=async(y,T)=>{if(window.confirm("Delete this conversation?")){if(!Q()){alert("Chat functionality is not available. Convex is not configured.");return}try{const L=(t==null?void 0:t.id)||(t==null?void 0:t.uid);await Z({userId:L,chatId:T}),(r==null?void 0:r.id)===T&&o(null)}catch(L){console.error(L)}}};return e.jsxs("div",{className:"flex flex-col h-full relative overflow-hidden bg-white dark:bg-[#1f2128]",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f] shrink-0",children:[e.jsx("h2",{className:"font-extrabold text-lg dark:text-white tracking-tight",children:h("messages")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:V,className:"p-2 bg-white dark:bg-gray-700 rounded-full shadow-sm hover:text-brand-blue transition",title:h("newGroup"),children:e.jsx(pe,{size:18})}),e.jsx("button",{onClick:()=>{g("direct"),w(!0)},className:"p-2 bg-white dark:bg-gray-700 rounded-full shadow-sm hover:text-brand-blue transition",title:h("newMessage"),children:e.jsx(Ce,{size:18})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a.map(y=>e.jsx(Pt,{conversation:y,activeChat:r,currentUserId:(t==null?void 0:t.id)||(t==null?void 0:t.uid),onSelect:o,onDelete:T=>{window.confirm("Delete this conversation?")&&G({},T)}},y.id))}),p&&e.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-[#1f2128] z-20 flex flex-col animate-in slide-in-from-right-10 duration-200",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex items-center gap-3 bg-gray-50 dark:bg-[#23262f]",children:[e.jsx("button",{onClick:()=>k(!1),className:"hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded-full",children:e.jsx(We,{size:20})}),e.jsx("h3",{className:"font-bold dark:text-white",children:h("newGroup")})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:["1. ",h("groupName")]}),e.jsx("input",{className:"w-full p-3 border rounded-xl dark:bg-black/20 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-brand-blue outline-none",placeholder:h("groupName")+"...",value:v,onChange:y=>E(y.target.value),autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase",children:["2. ",h("addMembers")," (",B.length,")"]}),e.jsxs("button",{onClick:X,className:"text-xs font-bold text-brand-blue flex items-center gap-1 hover:underline",children:[e.jsx(Ce,{size:14})," ",h("addMembers")]})]}),e.jsx("div",{className:"space-y-2",children:B.length===0?e.jsx("div",{className:"text-center py-8 border-2 border-dashed dark:border-gray-700 rounded-xl text-gray-400 text-sm",children:h("noMembersSelected")}):B.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-white/5 rounded-lg border dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ie,{src:y.photoURL,name:y.firstName,size:"sm"}),e.jsxs("span",{className:"text-sm font-bold dark:text-white",children:[y.firstName," ",y.lastName]})]}),e.jsx("button",{onClick:()=>S(T=>T.filter(L=>L.id!==y.id)),className:"text-gray-400 hover:text-red-500",children:e.jsx(H,{size:16})})]},y.id))})]})]}),e.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:e.jsx("button",{onClick:ee,disabled:!v||B.length===0||x,className:"w-full bg-brand-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition shadow-lg flex justify-center items-center gap-2",children:x?e.jsx(ue,{className:"animate-spin",size:20}):e.jsxs(e.Fragment,{children:[h("createGroup")," ",e.jsx(Ke,{size:18})]})})})]}),f&&e.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-[#1f2128] z-30 flex flex-col animate-in fade-in duration-200",children:[e.jsxs("div",{className:"p-3 border-b dark:border-gray-700 flex items-center gap-2 bg-white dark:bg-[#1f2128]",children:[e.jsx(je,{size:18,className:"text-gray-400 ml-2"}),e.jsx("input",{autoFocus:!0,className:"flex-1 p-2 bg-transparent outline-none dark:text-white placeholder-gray-400",placeholder:h("search")+"...",value:R,onChange:y=>$(y.target.value)}),e.jsx("button",{onClick:J,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:e.jsx(H,{size:20,className:"text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[O.length===0&&R.length>1&&e.jsxs("div",{className:"text-center py-10 text-gray-400 text-sm",children:[h("noUsersFound"),"."]}),O.map(y=>{const T=b==="add_member"&&B.find(L=>L.id===y.id);return e.jsxs("div",{onClick:()=>W(y),className:`flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl cursor-pointer transition mb-1 ${T?"opacity-50 pointer-events-none":""}`,children:[e.jsx(ie,{src:y.photoURL,name:y.firstName,size:"md"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-bold dark:text-white",children:[y.firstName," ",y.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:y.role||"User"})]}),b==="add_member"&&e.jsx(Ce,{size:18,className:"text-brand-blue"})]},y.id)})]})]}),e.jsx(Bt,{show:M,onConfirm:se,onCancel:()=>{d(!1),m(null)},userData:s,subProfiles:n,title:"Select Chat Profile",message:`You're starting a chat with ${(c==null?void 0:c.firstName)||"this user"}. Which profile would you like to use?`,excludeRoles:["Fan","User"]})]})}const Lt=()=>{const[t,s]=i.useState(!1),[n,a]=i.useState(null);return{uploadMedia:async(o,h="post-media")=>{if(!o)return null;s(!0),a(null);try{let f=h.replace("_","-");!f.startsWith("profile-")&&!f.startsWith("post-")&&(f=nt.POST_MEDIA);const w=await Ft(o,f);let p="file";return o.type.startsWith("video/")?p="video":o.type.startsWith("audio/")?p="audio":o.type.startsWith("image/")&&(p="image"),s(!1),{url:w.url,previewUrl:w.url,storageRef:w.pathname,type:p,name:o.name,size:o.size,mimeType:o.type}}catch(f){return console.error("Upload failed:",f),a(f.message||"An unknown error occurred during upload."),s(!1),null}},uploading:t,error:n}},we={Recent:["👍","❤️","😂","😮","😢","🔥","🎉","👏"],Smileys:["😀","😃","😄","😁","😆","😅","🤣","😂","🙂","🙃","😉","😊","😇","🥰","😍","🤩","😘","😗","😚","😙","😋","😛","😜","🤪","😝","🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐","😑","😶","😏","😒","🙄","😬","🤥","😌","😔","😪","🤤","😴","😷","🤒","🤕","🤢","🤮"],Gestures:["👋","🤚","🖐️","✋","🖖","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👍","👎","✊","👊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏"],Hearts:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❤️‍🔥","❤️‍🩹","💕","💞","💓","💗","💖","💘","💝","💟"],Objects:["💎","🔔","🔕","🎵","🎶","🎤","🎧","📻","🎷","🎺","🎸","🎹","🎮","🕹️","🎯","🎲","🎳","🎴","🃏","🀄","🎰","📱","📞","☎️","📟","📠","💻","🖥️","🖨️","⌨️","🖱️","🖲️","🕹️","🗜️","💾","💿","📀"],Flags:["🏳️","🏴","🏁","🚩","🏳️‍🌈","🏳️‍⚧️","🇺🇸","🇬🇧","🇨🇦","🇦🇺","🇫🇷","🇩🇪","🇮🇹","🇪🇸","🇯🇵","🇰🇷","🇨🇳","🇮🇳","🇧🇷","🇲🇽"],Music:["🎵","🎶","🎤","🎧","📻","🎷","🎺","🎸","🎹","🥁","🪘","🎻","🎪","🎭","🎨","🎬","🎤","🎧","🎼","🎹"],Reactions:["👍","👎","❤️","🔥","😂","😮","😢","👏","🙌","🤝","🤗","🤔","🤦","🤷","🙏","👀","💪","🤘","✌️","🤞"]},It=Object.values(we).flat();function Gt({onSelect:t,onClose:s,position:n="bottom"}){const[a,r]=i.useState("Recent"),[o,h]=i.useState(""),[f,w]=i.useState(()=>{const d=localStorage.getItem("recentEmojis");return d?JSON.parse(d):we.Recent}),p=i.useMemo(()=>o.trim()?It.filter(d=>d.includes(o)||o.includes(d)):a==="Recent"?f:we[a]||[],[o,a,f]),k=d=>{const c=[d,...f.filter(m=>m!==d)].slice(0,8);w(c),localStorage.setItem("recentEmojis",JSON.stringify(c)),t(d),s&&s()},M=Object.keys(we);return e.jsxs(I.div,{initial:{opacity:0,scale:.95,y:n==="bottom"?-10:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},className:`
                absolute ${n==="bottom"?"bottom-full mb-2":"top-full mt-2"} 
                left-0
                w-[340px] bg-white dark:bg-gray-800 
                rounded-2xl shadow-2xl border dark:border-gray-700
                z-50 overflow-hidden
            `,children:[e.jsxs("div",{className:"p-3 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(je,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search emojis...",value:o,onChange:d=>h(d.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white"}),o&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{size:16})})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto scrollbar-hide",children:M.map(d=>e.jsxs("button",{onClick:()=>r(d),className:`
                                px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition
                                ${a===d?"bg-brand-blue text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}
                            `,children:[d==="Recent"?e.jsx(Ee,{size:12,className:"inline mr-1"}):null,d]},d))})]}),e.jsx("div",{className:"h-[280px] overflow-y-auto custom-scrollbar p-3",children:p.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:e.jsx("p",{className:"text-sm",children:"No emojis found"})}):e.jsx("div",{className:"grid grid-cols-8 gap-1",children:p.map((d,c)=>e.jsx(I.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>k(d),className:"w-10 h-10 flex items-center justify-center text-xl rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:d},`${d}-${c}`))})})]})}const Ve="demo_key",$e="https://api.giphy.com/v1/gifs";function Ut({onSelect:t,onClose:s,position:n="bottom"}){const[a,r]=i.useState(""),[o,h]=i.useState([]),[f,w]=i.useState([]),[p,k]=i.useState(!1),[M,d]=i.useState("trending"),c=i.useRef(null);i.useEffect(()=>{m()},[]),i.useEffect(()=>(a.trim()?(d("search"),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{u(a)},500)):(d("trending"),h([])),()=>{c.current&&clearTimeout(c.current)}),[a]);const m=async()=>{k(!0);try{const x=await(await fetch(`${$e}/trending?api_key=${Ve}&limit=24&rating=g`)).json();x.data&&w(x.data)}catch(g){console.error("Giphy trending error:",g)}k(!1)},u=async g=>{if(g.trim()){k(!0);try{const C=await(await fetch(`${$e}/search?api_key=${Ve}&q=${encodeURIComponent(g)}&limit=24&rating=g`)).json();C.data&&h(C.data)}catch(x){console.error("Giphy search error:",x)}k(!1)}},A=g=>{t==null||t({url:g.images.fixed_height.url||g.images.original.url,previewUrl:g.images.preview_gif.url||g.images.fixed_height_small.url,width:g.images.fixed_height.width,height:g.images.fixed_height.height,title:g.title||"GIF"}),s&&s()},b=M==="trending"?f:o;return e.jsxs(I.div,{initial:{opacity:0,scale:.95,y:n==="bottom"?-10:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},className:`
                absolute ${n==="bottom"?"bottom-full mb-2":"top-full mt-2"} 
                left-0
                w-[380px] bg-white dark:bg-gray-800 
                rounded-2xl shadow-2xl border dark:border-gray-700
                z-50 overflow-hidden
            `,children:[e.jsx("div",{className:"p-3 border-b dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(je,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search GIFs...",value:a,onChange:g=>r(g.target.value),className:"w-full pl-9 pr-10 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white"}),a&&e.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{size:16})})]})}),e.jsx("div",{className:"h-[320px] overflow-y-auto custom-scrollbar p-3",children:p?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(ue,{className:"animate-spin text-brand-blue mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading GIFs..."})]}):b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(ut,{size:32,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:M==="search"?"No GIFs found. Try a different search.":"Loading trending GIFs..."})]}):e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(g=>e.jsxs(I.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>A(g),className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer bg-gray-100 dark:bg-gray-700 group",children:[e.jsx("img",{src:g.images.fixed_height_small.url||g.images.preview_gif.url,alt:g.title,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition"})]},g.id))})}),e.jsx("div",{className:"p-2 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-center",children:e.jsxs("p",{className:"text-[10px] text-gray-400",children:["Powered by ",e.jsx("span",{className:"font-bold",children:"GIPHY"})]})})]})}function qt({onRecorded:t,onClose:s,maxDuration:n=60}){const[a,r]=i.useState(!1),[o,h]=i.useState(null),[f,w]=i.useState(0),[p,k]=i.useState(null),[M,d]=i.useState(null),c=i.useRef(null),m=i.useRef(null),u=i.useRef(null),A=i.useRef([]),b=i.useRef(null);i.useEffect(()=>(g(),()=>{x()}),[]);const g=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0});m.current=R,c.current&&(c.current.srcObject=R),k(!0),d(null)}catch(R){console.error("Permission error:",R),k(!1),d("Camera/microphone access denied")}},x=()=>{m.current&&(m.current.getTracks().forEach(R=>R.stop()),m.current=null),b.current&&clearInterval(b.current)},C=async()=>{if(!m.current){await g();return}try{A.current=[];const R={mimeType:"video/webm;codecs=vp9,opus",videoBitsPerSecond:25e5};u.current=new MediaRecorder(m.current,R),u.current.ondataavailable=D=>{D.data.size>0&&A.current.push(D.data)},u.current.onstop=()=>{const D=new Blob(A.current,{type:"video/webm"});h(D),r(!1),w(0),b.current&&clearInterval(b.current)},u.current.start(),r(!0),w(0),b.current=setInterval(()=>{w(D=>{const O=D+1;return O>=n&&v(),O})},1e3)}catch(R){console.error("Recording error:",R),d("Failed to start recording")}},v=()=>{u.current&&a&&u.current.stop()},E=()=>{h(null),w(0),r(!1)},B=()=>{if(o){const R=new File([o],`video_${Date.now()}.webm`,{type:"video/webm"});t==null||t(R),x(),s==null||s()}},S=R=>{const D=Math.floor(R/60),O=R%60;return`${D}:${O.toString().padStart(2,"0")}`};return!p&&p!==null?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[80] p-4",children:e.jsx(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-[#2c2e36] rounded-2xl p-6 max-w-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gt,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold dark:text-white mb-2",children:"Camera Access Required"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please allow camera and microphone access to record video messages."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm font-semibold hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 bg-brand-blue text-white rounded-lg text-sm font-semibold hover:bg-blue-600 transition",children:"Allow Access"})]})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[80]",children:e.jsxs(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-2xl aspect-video bg-black rounded-2xl overflow-hidden",children:[e.jsx("video",{ref:c,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),a&&e.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-bold",children:S(f)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent",children:e.jsx("div",{className:"flex items-center justify-center gap-4",children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:E,className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(H,{size:24})}),e.jsx("button",{onClick:B,className:"p-4 bg-green-500 hover:bg-green-600 rounded-full text-white transition shadow-lg",children:e.jsx(le,{size:28})}),e.jsx("div",{className:"w-12"})," "]}):e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:E,className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(H,{size:24})}),e.jsx("button",{onClick:v,className:"p-4 bg-red-500 hover:bg-red-600 rounded-full text-white transition shadow-lg animate-pulse",children:e.jsx(Qe,{size:28})}),e.jsx("div",{className:"w-12"})," "]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:s,className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(H,{size:24})}),e.jsx("button",{onClick:C,className:"p-4 bg-red-500 hover:bg-red-600 rounded-full text-white transition shadow-lg",children:e.jsx(ke,{size:28})}),e.jsx("div",{className:"w-12"})," "]})})})}),M&&e.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-4 py-2 rounded-lg text-sm",children:M})]})})}function Ot(t,s,n){const a=i.useRef(null),r=i.useRef(!1),o=Q(),h=i.useMemo(()=>t&&o?{chatId:t}:"skip",[t,o]),f=de(q.presence.getTypingIndicators,h),w=K(q.presence.updateTypingIndicator),p=K(q.presence.clearTypingIndicator),k=i.useMemo(()=>f?f.filter(c=>c.userId!==s&&c.isTyping).map(c=>({id:c.userId,name:c.userName})):[],[f,s]),M=i.useCallback(()=>{!t||!s||!o||(r.current||(r.current=!0,w({chatId:t,userId:s,userName:n,isTyping:!0}).catch(console.error)),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{r.current&&(r.current=!1,p({chatId:t,userId:s}).catch(console.error))},3e3))},[t,s,n,o,w,p]),d=i.useCallback(()=>{!t||!s||!o||(a.current&&clearTimeout(a.current),r.current&&(r.current=!1,p({chatId:t,userId:s}).catch(console.error)))},[t,s,o,p]);return i.useEffect(()=>()=>{a.current&&clearTimeout(a.current),t&&s&&r.current&&o&&p({chatId:t,userId:s}).catch(console.error)},[t,s,o,p]),{typingUsers:k,setTyping:M,clearTyping:d}}function Vt(t){return!t||t.length===0?"":t.length===1?`${t[0].name} is typing...`:t.length===2?`${t[0].name} and ${t[1].name} are typing...`:`${t[0].name} and ${t.length-1} others are typing...`}function $t({activeChatId:t,uid:s,onSend:n,replyingTo:a,editingMessage:r,onCancelReply:o,onCancelEdit:h,typingUsers:f=[],onTyping:w,onStopTyping:p}){const{t:k}=Be(),[M,d]=i.useState(""),[c,m]=i.useState(null),[u,A]=i.useState(!1),[b,g]=i.useState(0),[x,C]=i.useState(!1),[v,E]=i.useState(!1),[B,S]=i.useState(!1),[R,D]=i.useState(!1),[O,_]=i.useState(!1),ae=i.useRef(null),Z=i.useRef(null),$=i.useRef(null),W=i.useRef([]),se=i.useRef(null),J=i.useRef(null),V=i.useRef(null),X=i.useRef(null),{uploadMedia:ee,uploading:G}=Lt();i.useEffect(()=>{var l;r&&(d(r.b||""),(l=Z.current)==null||l.focus())},[r]),i.useEffect(()=>{var l;a&&((l=Z.current)==null||l.focus())},[a]),i.useEffect(()=>{const l=j=>{se.current&&!se.current.contains(j.target)&&E(!1),J.current&&!J.current.contains(j.target)&&S(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const y=async l=>{try{const F=await(await fetch(l.url)).blob(),P=new File([F],`gif_${Date.now()}.gif`,{type:"image/gif"}),z=await ee(P,`chat_media/${t}`);if(z){const U={url:z.url,type:"image",name:l.title||"GIF",gif:!0};n("",U)}}catch(j){console.error("GIF upload error:",j),alert("Failed to send GIF")}S(!1)},T=async l=>{try{const j=await ee(l,`chat_media/${t}`);if(j){const F={url:j.url,type:"video",name:l.name};n("",F)}}catch(j){console.error("Video upload error:",j),alert("Failed to send video")}D(!1)},L=l=>{d(l.target.value),w&&l.target.value.trim()&&w()},Y=l=>{const j=Z.current;if(j){const F=j.selectionStart,P=j.selectionEnd,z=M.substring(0,F)+l+M.substring(P);d(z),setTimeout(()=>{j.selectionStart=j.selectionEnd=F+l.length,j.focus()},0)}else d(F=>F+l)},ce=async()=>{try{const l=await navigator.mediaDevices.getUserMedia({audio:!0});$.current=new MediaRecorder(l),W.current=[],g(0),$.current.ondataavailable=j=>W.current.push(j.data),$.current.onstop=()=>{const j=new Blob(W.current,{type:"audio/webm"}),F=new File([j],`voice_note_${Date.now()}.webm`,{type:"audio/webm"});m({file:F,type:"audio",previewUrl:URL.createObjectURL(j),duration:b}),l.getTracks().forEach(P=>P.stop()),V.current&&clearInterval(V.current)},$.current.start(),A(!0),V.current=setInterval(()=>{g(j=>j+1)},1e3)}catch{alert("Microphone access denied. Please allow microphone permissions.")}},ne=()=>{$.current&&u&&($.current.stop(),A(!1),V.current&&clearInterval(V.current))},te=()=>{var l;$.current&&u&&($.current.stop(),W.current=[],A(!1),g(0),V.current&&clearInterval(V.current),(l=$.current.stream)==null||l.getTracks().forEach(j=>j.stop()))},ge=l=>{const j=Math.floor(l/60),F=l%60;return`${j}:${F.toString().padStart(2,"0")}`},Ae=()=>{!X.current||!(c!=null&&c.previewUrl)||(O?(X.current.pause(),_(!1)):(X.current.play(),_(!0)))};i.useEffect(()=>()=>{V.current&&clearInterval(V.current),$.current&&u&&$.current.stop()},[]);const me=l=>{l.preventDefault(),l.stopPropagation(),l.type==="dragenter"||l.type==="dragover"?C(!0):C(!1)},Se=l=>{l.preventDefault(),l.stopPropagation(),C(!1),l.dataTransfer.files&&l.dataTransfer.files[0]&&be(l.dataTransfer.files[0])},be=l=>{const j=l.type.startsWith("image/")?"image":l.type.startsWith("video/")?"video":l.type.startsWith("audio/")?"audio":"file";m({file:l,type:j,previewUrl:URL.createObjectURL(l)})},ye=async l=>{if(l.preventDefault(),!M.trim()&&!c||G)return;let j=null;if(c){const F=await ee(c.file,`chat_media/${t}`);F&&(j={url:F.url,type:F.type,name:F.name,duration:c.duration})}n(M,j),d(""),m(null),_(!1),p&&p()},Me=()=>{r?(d(""),h==null||h()):o==null||o()},N=()=>{var l,j;return r?((l=r.b)==null?void 0:l.substring(0,50))||"Message":a?((j=a.b)==null?void 0:j.substring(0,50))||"Media":""};return e.jsxs("div",{className:`p-3 bg-white dark:bg-[#2c2e36] border-t dark:border-gray-700 shrink-0 transition-colors ${x?"bg-blue-50 dark:bg-blue-900/20 border-blue-400":""}`,onDragEnter:me,onDragLeave:me,onDragOver:me,onDrop:Se,children:[e.jsx(oe,{children:f.length>0&&e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mb-2 px-2 flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-brand-blue rounded-full animate-bounce"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-brand-blue rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-brand-blue rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Vt(f)})]})}),e.jsx(oe,{children:u&&e.jsx(I.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium text-red-700 dark:text-red-400",children:"Recording..."}),e.jsx("span",{className:"font-mono text-red-600 dark:text-red-300 text-sm",children:ge(b)})]}),e.jsx("div",{className:"flex items-center gap-0.5 mx-4",children:[...Array(20)].map((l,j)=>e.jsx(I.div,{className:"w-1 bg-red-400 rounded-full",animate:{height:[8,Math.random()*20+8,8]},transition:{duration:.5,repeat:1/0,delay:j*.05}},j))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:te,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-full transition",title:"Cancel recording",children:e.jsx(Ne,{size:18})}),e.jsx("button",{type:"button",onClick:ne,className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition",title:"Stop recording",children:e.jsx(mt,{size:16,fill:"white"})})]})]})})}),e.jsx(oe,{children:(a||r)&&e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex justify-between items-center bg-gray-100 dark:bg-gray-800 p-2.5 px-4 rounded-xl border-l-4 border-brand-blue mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r?e.jsx(Ye,{size:16,className:"text-brand-blue shrink-0"}):e.jsx(Ze,{size:16,className:"text-brand-blue shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-xs font-bold text-brand-blue block",children:r?"Editing Message":`Replying to ${(a==null?void 0:a.n)||"User"}`}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate block",children:N()})]})]}),e.jsx("button",{onClick:Me,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition",children:e.jsx(H,{size:16,className:"text-gray-400 hover:text-red-500"})})]})}),e.jsx(oe,{children:c&&e.jsxs(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex items-center gap-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-xl mb-2 border dark:border-gray-700",children:[c.type==="image"?e.jsx("img",{src:c.previewUrl,className:"h-14 w-14 object-cover rounded-lg"}):c.type==="video"?e.jsx("video",{src:c.previewUrl,className:"h-14 w-14 object-cover rounded-lg"}):c.type==="audio"?e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{type:"button",onClick:Ae,className:"h-12 w-12 bg-purple-500 text-white flex items-center justify-center rounded-full hover:bg-purple-600 transition shrink-0",children:O?e.jsx(Je,{size:20}):e.jsx(Xe,{size:20,className:"ml-0.5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:14,className:"text-purple-500"}),e.jsx("span",{className:"text-sm font-bold dark:text-white",children:"Voice Message"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex items-center gap-0.5 flex-1",children:[...Array(30)].map((l,j)=>e.jsx("div",{className:"w-1 bg-purple-300 dark:bg-purple-700 rounded-full",style:{height:`${Math.random()*12+4}px`}},j))}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:c.duration?ge(c.duration):"0:00"})]})]}),e.jsx("audio",{ref:X,src:c.previewUrl,onEnded:()=>_(!1),className:"hidden"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-14 w-14 bg-gray-200 dark:bg-gray-700 text-gray-500 flex items-center justify-center rounded-lg",children:e.jsx(xe,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold dark:text-white truncate",children:c.file.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(c.file.size/1024).toFixed(1)," KB"]})]})]}),e.jsx("button",{onClick:()=>{m(null),_(!1)},className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition shrink-0",children:e.jsx(H,{size:18,className:"text-gray-400 hover:text-red-500"})})]})}),e.jsxs("form",{onSubmit:ye,className:"flex items-end gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:ae,className:"hidden",accept:"image/*,audio/*,video/*,.pdf,.doc,.docx,.txt,.zip",onChange:l=>be(l.target.files[0])}),e.jsx("button",{type:"button",onClick:()=>{var l;return(l=ae.current)==null?void 0:l.click()},className:"p-2.5 text-gray-500 hover:text-brand-blue hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition shrink-0",title:"Attach file",children:e.jsx(ht,{size:20})})]}),e.jsxs("div",{className:"flex items-center gap-1 border-r dark:border-gray-700 pr-2",children:[e.jsx("button",{type:"button",onClick:()=>{D(!0),E(!1),S(!1)},className:"p-2 text-gray-500 hover:text-red-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition",title:"Record video",children:e.jsx(ke,{size:18})}),e.jsxs("button",{type:"button",onClick:()=>{S(!B),E(!1)},className:"p-2 text-gray-500 hover:text-purple-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition relative",title:"GIF",ref:J,children:[e.jsx(ft,{size:18}),B&&e.jsx(Ut,{onSelect:y,onClose:()=>S(!1),position:"bottom"})]})]}),e.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-[#1f2128] rounded-2xl border dark:border-gray-700 focus-within:ring-2 focus-within:ring-brand-blue transition-all flex items-end relative",children:[e.jsx("textarea",{ref:Z,className:"w-full bg-transparent p-3 max-h-32 min-h-[44px] text-sm resize-none outline-none dark:text-white custom-scrollbar pr-20",placeholder:r?k("editingMessage")+"...":x?k("dropFiles")+"...":k("typeMessage"),value:M,onChange:L,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),ye(l))},rows:1}),e.jsxs("div",{className:"absolute right-2 bottom-1.5 flex items-center gap-1",children:[e.jsxs("div",{className:"relative",ref:se,children:[e.jsx("button",{type:"button",onClick:()=>{E(!v),S(!1)},className:`p-1.5 rounded-full transition ${v?"bg-brand-blue/20 text-brand-blue":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,title:"Emoji",children:e.jsx(pt,{size:18})}),e.jsx(oe,{children:v&&e.jsx(Gt,{onSelect:Y,onClose:()=>E(!1),position:"bottom"})})]}),e.jsx("button",{type:"button",onClick:u?ne:ce,className:`p-1.5 rounded-full transition ${u?"bg-red-500 text-white animate-pulse":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:u?e.jsx(Qe,{size:18}):e.jsx(Ie,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:!M.trim()&&!c||G,className:`p-2.5 text-white rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shrink-0 ${r?"bg-green-600 hover:bg-green-700":"bg-brand-blue hover:bg-blue-600"}`,children:G?e.jsx(ue,{size:20,className:"animate-spin"}):r?e.jsx(xt,{size:20}):e.jsx(bt,{size:20})})]}),R&&e.jsx(qt,{onRecorded:T,onClose:()=>D(!1),maxDuration:60})]})}function Ht(...t){return _e(Te(t))}const ve=yt.forwardRef(({className:t,variant:s="default",size:n="default",...a},r)=>{const o={default:"bg-blue-600 text-white hover:bg-blue-700 shadow-sm",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-sm",outline:"border border-gray-200 bg-transparent hover:bg-gray-100 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900 text-gray-600",link:"text-blue-600 underline-offset-4 hover:underline"},h={default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"};return e.jsx("button",{ref:r,className:Ht("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50",o[s],h[n],t),...a})});ve.displayName="Button";function _t({url:t,isOpen:s,onClose:n,previewData:a}){if(!s||!t)return null;const r=new URL(t).pathname;let o="Content";r.startsWith("/profile/")?o="User Profile":r.startsWith("/session/")?o="Session Details":r.startsWith("/studio/")&&(o="Studio Listing");const h=(a==null?void 0:a.title)||`${o} Preview`;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black bg-opacity-70 backdrop-blur-sm",onClick:n,children:e.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-2xl h-3/4 max-h-[800px] flex flex-col transform transition-all duration-300 scale-100 opacity-100",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-800 rounded-t-xl sticky top-0",children:[e.jsx("h3",{className:"text-xl font-bold text-white truncate max-w-[80%]",children:h}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ve,{variant:"ghost",size:"icon",className:"text-blue-400 hover:text-blue-300",children:e.jsx(wt,{className:"w-5 h-5"})})}),e.jsx(ve,{onClick:n,variant:"ghost",size:"icon",className:"text-white hover:bg-gray-700",children:e.jsx(H,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar text-gray-400 flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"mb-4 text-lg font-medium text-white",children:"Embedded Content Simulation"}),e.jsx("p",{className:"mb-2",children:"This is where the actual SeshNx content (e.g., profile card, session details) would be rendered, based on the URL:"}),e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline break-all p-2 bg-gray-700 rounded-lg text-sm",children:t}),e.jsx("p",{className:"mt-4 text-sm",children:'In a real implementation, you would use a dedicated component (e.g., `ProfileCard id="..."`) here instead of an iframe to display the content securely and natively.'})]}),e.jsx("div",{className:"p-3 border-t border-gray-700 bg-gray-800 rounded-b-xl flex justify-end",children:e.jsx(ve,{onClick:n,variant:"secondary",children:"Done"})})]})})}function Wt({status:t="sent",size:s=12,className:n=""}){const a={sending:{icon:Ee,color:"text-gray-400",animate:!0},sent:{icon:le,color:"text-gray-400",animate:!1},delivered:{icon:Ge,color:"text-gray-400",animate:!1},read:{icon:Ge,color:"text-brand-blue",animate:!1}},r=a[t]||a.sent,o=r.icon;return e.jsx(I.div,{animate:r.animate?{rotate:[0,360]}:{},transition:r.animate?{duration:2,repeat:1/0,ease:"linear"}:{},className:`inline-flex items-center ${r.color} ${n}`,children:e.jsx(o,{size:s,className:t==="read"?"fill-current":""})})}function Kt({audioUrl:t,color:s="brand-blue",height:n=40}){const a=i.useRef(null),r=i.useRef(null),o=i.useRef(null),h=i.useRef(null),f=i.useRef(null),[w,p]=i.useState(!1);i.useEffect(()=>{if(!t||!a.current)return;const d=a.current,c=d.getContext("2d"),m=new Audio(t);r.current=m,d.width=d.offsetWidth,d.height=n;const u=new(window.AudioContext||window.webkitAudioContext),A=u.createAnalyser(),b=u.createMediaElementSource(m);A.fftSize=256,b.connect(A),A.connect(u.destination),h.current=u,f.current=A;const g=A.frequencyBinCount,x=new Uint8Array(g),C=()=>{if(m.paused){k(c,d.width,d.height);return}o.current=requestAnimationFrame(C),A.getByteFrequencyData(x),c.clearRect(0,0,d.width,d.height);const v=d.width/g*2;let E=0;for(let B=0;B<g;B++){const S=x[B]/255*d.height,R=c.createLinearGradient(0,0,0,d.height);R.addColorStop(0,"#3b82f6"),R.addColorStop(1,"#8b5cf6"),c.fillStyle=R,c.fillRect(E,d.height-S,v-1,S),E+=v}};return m.addEventListener("play",()=>{p(!0),C()}),m.addEventListener("pause",()=>{p(!1),o.current&&cancelAnimationFrame(o.current),k(c,d.width,d.height)}),m.addEventListener("ended",()=>{p(!1),o.current&&cancelAnimationFrame(o.current),k(c,d.width,d.height)}),k(c,d.width,d.height),()=>{var v;o.current&&cancelAnimationFrame(o.current),m.pause(),(v=h.current)==null||v.close()}},[t,n,w]);const k=(d,c,m)=>{d.clearRect(0,0,c,m),d.fillStyle="#3b82f6";const u=50,A=c/u,b=2;for(let g=0;g<u;g++){const x=Math.random()*m*.3+m*.1,C=g*A;d.fillRect(C,m-x,A-b,x)}},M=()=>{r.current&&(w?r.current.pause():r.current.play())};return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:M,className:"w-10 h-10 flex items-center justify-center bg-brand-blue text-white rounded-full hover:bg-blue-600 transition shrink-0",children:w?e.jsx(Je,{size:16}):e.jsx(Xe,{size:16,className:"ml-0.5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("canvas",{ref:a,className:"w-full rounded",style:{height:`${n}px`}}),e.jsx("audio",{ref:r,src:t})]})]})}const Qt=["👍","❤️","😂","😮","😢","🔥"];function Yt({message:t,isCurrentUser:s,previousMessage:n,currentUserId:a,chatId:r,linkPreviewData:o,messageStatus:h="sent",onReaction:f,onReply:w,onEdit:p,onDelete:k,onForward:M,onSeshNxLinkClick:d,onUserClick:c}){var G;const[m,u]=i.useState(!1),[A,b]=i.useState(!1),[g,x]=i.useState(!1),C=i.useRef(null),v=i.useRef(null),E=!n||n.s!==t.s,B=n&&new Date(t.t).toDateString()===new Date(n.t).toDateString(),S=t.t||Date.now(),R=(n==null?void 0:n.t)||0,D=n&&S-R>3e5,O=!B||!n,_=E||D,ae=!s&&E,Z=new Date(t.t||Date.now());i.useEffect(()=>{const y=T=>{C.current&&!C.current.contains(T.target)&&(u(!1),b(!1))};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const $=()=>{navigator.clipboard.writeText(t.b||""),x(!0),setTimeout(()=>x(!1),2e3),u(!1)},W=y=>{f==null||f(t.id,y),b(!1),u(!1)},se=t.reactions?Object.entries(t.reactions).reduce((y,[T,L])=>{const Y=typeof L=="object"?Object.keys(L).length:0;return Y>0&&(y[T]=Y),y},{}):{},J=Object.keys(se).length>0,V=t.reactions?(G=Object.entries(t.reactions).find(([y,T])=>typeof T=="object"&&T[a]))==null?void 0:G[0]:null,X=s?"bg-brand-blue text-white rounded-br-sm":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-sm";if(t.deleted||t.deletedForAll)return e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} ${E?"mt-3":"mt-0.5"}`,children:e.jsx("div",{className:"px-4 py-2 rounded-2xl bg-gray-100 dark:bg-gray-800 text-gray-400 italic text-sm",children:"🚫 This message was deleted"})});if(t.deletedFor&&t.deletedFor[a])return null;const ee=()=>{var T;if(!o)return null;const y=(T=o.url)==null?void 0:T.includes("app.seshnx.com");return e.jsx("div",{className:"mt-2 block border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-white dark:bg-gray-800 max-w-[280px]",children:y?e.jsxs("button",{onClick:()=>d==null?void 0:d(o),className:"w-full text-left",children:[o.image&&e.jsx("div",{className:"h-28 w-full bg-cover bg-center",style:{backgroundImage:`url(${o.image})`}}),e.jsxs("div",{className:"p-2",children:[e.jsxs("p",{className:"font-semibold text-xs text-brand-blue truncate flex items-center",children:[e.jsx(Nt,{className:"w-3 h-3 mr-1"}),o.title||"SeshNx Link"]}),o.description&&e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 line-clamp-2",children:o.description})]})]}):e.jsxs("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",children:[o.image&&e.jsx("div",{className:"h-28 w-full bg-cover bg-center",style:{backgroundImage:`url(${o.image})`}}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-semibold text-xs text-brand-blue truncate",children:o.title||o.url}),o.description&&e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 line-clamp-2",children:o.description}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 flex items-center",children:[e.jsx(jt,{className:"w-2.5 h-2.5 mr-1"}),new URL(o.url).hostname]})]})]})})};return e.jsxs(e.Fragment,{children:[O&&e.jsx("div",{className:"text-center my-4",children:e.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-bold uppercase tracking-wider bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:Z.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})}),e.jsxs("div",{className:`group flex items-end gap-2 ${s?"flex-row-reverse":"flex-row"} ${E?"mt-3":"mt-0.5"}`,ref:v,children:[!s&&e.jsx("div",{className:"w-8 shrink-0",children:ae&&e.jsx(ie,{src:t.photo,name:t.n,size:"xs",className:"cursor-pointer",onClick:()=>c==null?void 0:c(t.s)})}),e.jsxs("div",{className:`relative max-w-[75%] ${s?"items-end":"items-start"}`,children:[!s&&E&&t.n&&e.jsx("p",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 mb-1 ml-1",children:t.n}),t.replyTo&&e.jsxs("div",{className:`mb-1 px-3 py-1.5 rounded-lg text-xs border-l-2 border-brand-blue ${s?"bg-blue-400/30 text-blue-100":"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("p",{className:"font-bold text-[10px] mb-0.5",children:t.replyTo.sender}),e.jsx("p",{className:"truncate opacity-80",children:t.replyTo.text})]}),e.jsxs("div",{className:`relative px-3 py-2 rounded-2xl shadow-sm ${X} cursor-pointer transition-all hover:shadow-md`,onClick:()=>u(!m),children:[t.media&&e.jsxs("div",{className:"mb-2",children:[t.media.type==="image"&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[t.media.gif&&e.jsx("span",{className:"absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:"GIF"}),e.jsx("img",{src:t.media.url,alt:"Shared",className:"max-w-full h-auto rounded-lg max-h-60 object-cover"})]}),t.media.type==="video"&&e.jsx("video",{controls:!0,src:t.media.url,className:"max-w-full h-auto rounded-lg max-h-60"}),t.media.type==="audio"&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 max-w-[280px]",children:e.jsx(Kt,{audioUrl:t.media.url,height:50})}),t.media.type==="file"&&e.jsxs("a",{href:t.media.url,target:"_blank",rel:"noopener noreferrer",download:t.media.name,className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition group",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(xe,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold dark:text-white truncate",children:t.media.name||"File"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to download"})]}),e.jsx(Pe,{size:18,className:"text-gray-400 group-hover:text-brand-blue transition shrink-0"})]})]}),t.b&&e.jsx("p",{className:"text-sm break-words whitespace-pre-wrap leading-relaxed",children:t.b}),t.b&&ee(),t.edited&&e.jsx("span",{className:`text-[9px] ${s?"text-blue-200":"text-gray-400"} ml-1`,children:"(edited)"})]}),J&&e.jsx("div",{className:`flex flex-wrap gap-1 mt-1 ${s?"justify-end":"justify-start"}`,children:Object.entries(se).map(([y,T])=>e.jsxs(I.button,{initial:{scale:0},animate:{scale:1},onClick:()=>W(y),className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-xs border transition-all ${V===y?"bg-brand-blue/20 border-brand-blue text-brand-blue":"bg-gray-100 dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:[e.jsx("span",{children:y}),e.jsx("span",{className:"text-[10px] font-bold",children:T})]},y))}),_&&e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${s?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-[10px] text-gray-400",children:Z.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),s&&e.jsx(Wt,{status:h,size:10,className:"ml-0.5"})]}),e.jsx(oe,{children:m&&e.jsxs(I.div,{ref:C,initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:`absolute z-50 ${s?"right-0":"left-0"} bottom-full mb-2 bg-white dark:bg-gray-800 rounded-xl shadow-xl border dark:border-gray-700 overflow-hidden min-w-[180px]`,children:[e.jsx("div",{className:"flex justify-center gap-1 p-2 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:Qt.map(y=>e.jsx(I.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>W(y),className:`text-lg p-1 rounded-full transition ${V===y?"bg-brand-blue/20":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:y},y))}),e.jsxs("div",{className:"p-1",children:[e.jsxs("button",{onClick:()=>{w==null||w(t),u(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[e.jsx(Ze,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"dark:text-gray-200",children:"Reply"})]}),e.jsxs("button",{onClick:$,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[e.jsx(vt,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"dark:text-gray-200",children:g?"Copied!":"Copy"})]}),e.jsxs("button",{onClick:()=>{M==null||M(t),u(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[e.jsx(Fe,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"dark:text-gray-200",children:"Forward"})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{p==null||p(t),u(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",children:[e.jsx(Ye,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"dark:text-gray-200",children:"Edit"})]}),e.jsxs("button",{onClick:()=>{k==null||k(t,"everyone"),u(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition text-red-500",children:[e.jsx(Ne,{size:16}),e.jsx("span",{children:"Delete for Everyone"})]})]}),e.jsxs("button",{onClick:()=>{k==null||k(t,"me"),u(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition text-gray-500",children:[e.jsx(Ne,{size:16}),e.jsx("span",{children:"Delete for Me"})]})]})]})})]}),s&&e.jsx("div",{className:"w-8 shrink-0"})]})]})}function Zt({message:t,conversations:s,currentUserId:n,onForward:a,onClose:r}){const[o,h]=i.useState(""),[f,w]=i.useState([]),[p,k]=i.useState(!1),M=o.trim()?s.filter(u=>{var A;return(A=u.n)==null?void 0:A.toLowerCase().includes(o.toLowerCase())}):s,d=u=>{w(A=>A.includes(u)?A.filter(b=>b!==u):[...A,u])},c=async()=>{if(f.length!==0){k(!0);try{await a(t,f),r()}catch(u){console.error("Forward error:",u),alert("Failed to forward message")}k(!1)}},m=()=>{var u;return t.media?t.media.type==="image"?"📷 Image":t.media.type==="video"?"🎥 Video":t.media.type==="audio"?"🎵 Audio":"📎 File":((u=t.b)==null?void 0:u.substring(0,100))||"Message"};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[80] p-4",children:e.jsxs(I.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"text-brand-blue",size:20}),e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Forward Message"})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:e.jsx(H,{size:20})})]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800 border-b dark:border-gray-700 shrink-0",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Forwarding:"}),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600",children:e.jsx("p",{className:"text-sm dark:text-gray-200 line-clamp-2",children:m()})})]}),e.jsx("div",{className:"px-4 py-3 border-b dark:border-gray-700 shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(je,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:o,onChange:u=>h(u.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white transition"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:M.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No conversations found"})}):M.map(u=>{const A=f.includes(u.id);return e.jsxs(I.div,{whileTap:{scale:.98},onClick:()=>d(u.id),className:`
                                        flex items-center gap-3 p-4 cursor-pointer transition
                                        border-b dark:border-gray-700/50
                                        ${A?"bg-brand-blue/10 dark:bg-brand-blue/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}
                                    `,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ie,{src:u.photo,name:u.n,size:"md",isGroup:u.type==="group"}),A&&e.jsx(I.div,{initial:{scale:0},animate:{scale:1},className:"absolute -bottom-1 -right-1 w-5 h-5 bg-brand-blue rounded-full flex items-center justify-center",children:e.jsx(le,{size:12,className:"text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm dark:text-white truncate",children:u.n}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.type==="group"?"Group":"Direct message"})]}),e.jsx("div",{className:`
                                        w-5 h-5 rounded-full border-2 transition
                                        ${A?"border-brand-blue bg-brand-blue":"border-gray-300 dark:border-gray-600"}
                                    `,children:A&&e.jsx(le,{size:12,className:"text-white m-auto"})})]},u.id)})}),e.jsxs("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#23262f] shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[f.length," conversation",f.length!==1?"s":""," selected"]}),f.length>0&&e.jsx("button",{onClick:()=>w([]),className:"text-xs text-brand-blue hover:underline",children:"Clear all"})]}),e.jsx("button",{onClick:c,disabled:f.length===0||p,className:"w-full bg-brand-blue text-white py-3 rounded-xl font-bold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"animate-spin",size:18}),"Forwarding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:18}),"Forward"]})})]})]})})}function Jt(t,s){var c;const n=Q(),a=i.useMemo(()=>t&&s&&n?{chatId:t}:"skip",[t,s,n]),r=de(q.readReceipts.getReadReceipts,a),o=K(q.readReceipts.markAsRead),h=K(q.readReceipts.markMultipleAsRead),f=i.useMemo(()=>{if(!r)return{};const m={};return r.forEach(u=>{m[u.userId]?u.readAt>m[u.userId].readAt&&(m[u.userId]={lastReadMessageId:u.messageId,readAt:u.readAt}):m[u.userId]={lastReadMessageId:u.messageId,readAt:u.readAt}}),m},[r]),w=((c=f[s])==null?void 0:c.lastReadMessageId)||null,p=i.useCallback(async m=>{if(!(!t||!s||!m||!Q()||!o||!h))try{const u=Array.isArray(m)?m:[m];u.length===1?await o({chatId:t,messageId:u[0],userId:s}):await h({chatId:t,messageIds:u,userId:s})}catch(u){console.error("Mark as read error:",u)}},[t,s,o,h]),k=i.useCallback((m,u,A=null)=>{if(!m||!u)return!1;const b=f[u];if(!b||!b.lastReadMessageId)return!1;const g=b.lastReadMessageId;if(g===m)return!0;if(A&&Array.isArray(A)){const x=A.find(v=>v.id===m),C=A.find(v=>v.id===g);if(x&&C&&x.t&&C.t)return x.t<=C.t}return g>=m},[f]),M=i.useCallback(m=>{var u;return((u=f[m])==null?void 0:u.lastReadMessageId)||null},[f]),d=i.useCallback(m=>w===m||w&&w>=m,[w]);return{readReceipts:f,myLastRead:w,markAsRead:p,isMessageRead:k,getLastReadMessage:M,hasCurrentUserRead:d}}const He=new Map,Xt=5*60*1e3;async function es(t){const s=t.match(/(https?:\/\/[^\s]+)/);if(!s)return null;const n=s[0],a=He.get(n);if(a&&Date.now()-a.timestamp<Xt)return a.data;const r=await ts(n);return He.set(n,{data:r,timestamp:Date.now()}),r}async function ts(t){try{const n=await fetch(t,{method:"HEAD",mode:"no-cors"})}catch{}const s={url:t,title:null,description:null,image:null,siteName:null};try{const n=new URL(t),a=n.hostname.toLowerCase();if(a.includes("youtube.com")||a.includes("youtu.be")){let r=null;a.includes("youtu.be")?r=n.pathname.slice(1):r=n.searchParams.get("v"),s.siteName="YouTube",s.title="YouTube Video",s.description="Watch this video on YouTube",r&&(s.image=`https://img.youtube.com/vi/${r}/mqdefault.jpg`)}else if(a.includes("spotify.com"))s.siteName="Spotify",s.title="Spotify Content",s.description="Listen on Spotify",s.image="https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_Green.png";else if(a.includes("soundcloud.com"))s.siteName="SoundCloud",s.title="SoundCloud Track",s.description="Listen on SoundCloud",s.image="https://soundcloud.com/press/assets/press-kit/soundcloud-logo.png";else if(a.includes("github.com")){const r=n.pathname.split("/").filter(o=>o);s.siteName="GitHub",s.title=r.length>=2?`${r[0]}/${r[1]}`:"GitHub Repository",s.description="View on GitHub",r.length>=2&&(s.image=`https://opengraph.githubassets.com/1/${r[0]}/${r[1]}`)}else if(a.includes("twitter.com")||a.includes("x.com"))s.siteName="X (Twitter)",s.title="Tweet",s.description="View on X";else if(a.includes("instagram.com"))s.siteName="Instagram",s.title="Instagram Post",s.description="View on Instagram";else if(a.includes("app.seshnx.com")||a.includes("seshnx.com"))s.siteName="SeshNx",s.title="SeshNx Link",s.description="View on SeshNx platform",s.image="https://app.seshnx.com/pwa-512x512.png";else if(a.includes("linkedin.com"))s.siteName="LinkedIn",s.title="LinkedIn Post",s.description="View on LinkedIn";else if(a.includes("music.apple.com"))s.siteName="Apple Music",s.title="Apple Music",s.description="Listen on Apple Music";else if(a.includes("tiktok.com"))s.siteName="TikTok",s.title="TikTok Video",s.description="Watch on TikTok";else if(a.includes("vimeo.com"))s.siteName="Vimeo",s.title="Vimeo Video",s.description="Watch on Vimeo";else if(a.includes("bandcamp.com")){const r=a.split(".")[0];s.siteName="Bandcamp",s.title=r!=="bandcamp"?`${r} on Bandcamp`:"Bandcamp",s.description="Listen on Bandcamp"}else s.siteName=a.replace("www.",""),s.title=a.replace("www.",""),s.description=`Visit ${a}`;return s}catch(n){return console.warn("Link preview parsing error:",n),{url:t,title:t,description:null,image:null}}}function gs({user:t,userData:s,activeChat:n,conversations:a,onBack:r,toggleDetails:o,openPublicProfile:h}){const{t:f}=Be(),[w,p]=i.useState({}),[k,M]=i.useState({isOpen:!1,url:"",previewData:null}),[d,c]=i.useState(null),[m,u]=i.useState(null),[A,b]=i.useState(null),g=i.useRef(null),x=n==null?void 0:n.id,C=(n==null?void 0:n.name)||(n==null?void 0:n.n)||f("unknownUser"),v=(t==null?void 0:t.id)||(t==null?void 0:t.uid),E=i.useMemo(()=>(n==null?void 0:n.type)==="group"?null:n!=null&&n.uid?n.uid:x&&x.includes("_")?x.split("_").find(l=>l!==v):null,[n,x,v]),{online:B,lastSeen:S,loading:R}=at(E),{markAsRead:D,hasCurrentUserRead:O,isMessageRead:_}=Jt(x,v),{typingUsers:ae,setTyping:Z,clearTyping:$}=Ot(x,v,(s==null?void 0:s.firstName)||"User"),W=Q(),se=i.useMemo(()=>x&&W?{chatId:x,limit:100}:"skip",[x,W]),J=i.useMemo(()=>x&&W&&(n==null?void 0:n.type)==="group"?{chatId:x}:"skip",[x,W,n==null?void 0:n.type]),V=de(q.conversations.getChatMembers,J),X=i.useMemo(()=>V?V.map(N=>N.userId):[],[V]),ee=de(q.messages.getMessages,se),G=i.useMemo(()=>ee?ee.map(N=>({id:N._id,b:N.content||"",s:N.senderId,n:N.senderName,photo:N.senderPhoto||"",t:N.timestamp,edited:N.edited||!1,editedAt:N.editedAt,deleted:N.deleted||!1,deletedForAll:N.deletedForAll||!1,media:N.media,replyTo:N.replyTo,reactions:N.reactions||{}})):[],[ee]),y=K(q.messages.sendMessage),T=K(q.messages.editMessage),L=K(q.messages.deleteMessage),Y=K(q.messages.addReaction),ce=K(q.messages.removeReaction),ne=K(q.conversations.updateConversation),te=K(q.conversations.updateUnreadCount);i.useEffect(()=>{g.current&&G.length>0&&g.current.scrollIntoView({behavior:"smooth"})},[G]);const ge=i.useRef(0);i.useEffect(()=>{if(x&&v&&G.length>0){const N=G.map(j=>j.id),l=N.length;l!==ge.current&&(ge.current=l,D(N))}},[x,v,G.length,D]),i.useEffect(()=>{G.forEach(N=>{if(N.b){const l=N.b.match(/(https?:\/\/[^\s]+)/);if(l){const j=l[0];w[N.id]||es(j).then(F=>p(P=>({...P,[N.id]:F}))).catch(F=>console.error(F))}}})},[G]);const Ae=async(N,l)=>{var j,F;if(!(!x||!v||!Q()))try{const P=G.find(U=>U.id===N);if(!P)return;((F=(j=P.reactions)==null?void 0:j[l])==null?void 0:F.includes(v))?await ce({messageId:N,userId:v,emoji:l}):await Y({messageId:N,userId:v,emoji:l})}catch(P){console.error("Reaction error:",P)}},me=async(N,l)=>{if(!Q()||!y||!ne){alert("Chat functionality is not available. Convex is not configured.");return}const j=N.b||"",F=N.media||null;for(const P of l)try{await y({chatId:P,senderId:v,senderName:s.firstName||"User",senderPhoto:s.photoURL||void 0,content:`竊ｪ Forwarded: ${j}`,media:F||void 0});const z=a==null?void 0:a.find(re=>re.id===P),U=j||(F?`Forwarded ${F.type}`:"Forwarded message");await ne({userId:v,chatId:P,lastMessage:`↪ ${U}`,lastMessageTime:Date.now(),lastSenderId:v,chatName:(z==null?void 0:z.name)||(z==null?void 0:z.n),chatPhoto:(z==null?void 0:z.photo)||"",chatType:(z==null?void 0:z.type)||"direct",otherUserId:z==null?void 0:z.uid})}catch(z){console.error("Forward error for chat:",P,z)}},Se=async(N,l)=>{var F;if(!x||!(N!=null&&N.trim())&&!l||!Q()||!y||!T||!ne||!te)return;let j=N?N.trim():"";if(j.length===0&&l&&(j=l.type==="image"?"📷 Image":l.type==="video"?"🎥 Video":l.type==="audio"?"🎵 Audio":"📎 File"),m)try{await T({messageId:m.id,content:j,senderId:v}),u(null);return}catch(P){console.error("Edit error:",P);return}try{await y({chatId:x,senderId:v,senderName:s.firstName||"User",senderPhoto:s.photoURL||void 0,content:j||void 0,media:l||void 0,replyTo:d?{messageId:d.id,text:((F=d.b)==null?void 0:F.substring(0,100))||"Media",sender:d.n||"User"}:void 0});const P=j||(l?`Sent ${l.type}`:"Message");let z=[],U=n.uid;!U&&n.type!=="group"&&x&&x.includes("_")&&(U=x.split("_").find(it=>it!==v)),n.type==="group"?z=X.length>0?[...new Set([v,...X])]:[v]:U?z=[v,U]:z=[v];for(const re of z)await ne({userId:re,chatId:x,lastMessage:P,lastMessageTime:Date.now(),lastSenderId:v,chatName:n.type==="group"?C:n.name||n.n,chatPhoto:n.photo||"",chatType:n.type||"direct",otherUserId:n.type==="direct"?re===v?U:v:void 0}),re===v?await te({userId:re,chatId:x,setTo:0}):await te({userId:re,chatId:x,increment:1});c(null)}catch(P){console.error("Send message error:",P)}},be=async(N,l=!1)=>{if(!(!x||!v||!Q()||!L))try{await L({messageId:N,senderId:v,forEveryone:l})}catch(j){console.error("Delete error:",j)}},ye=i.useMemo(()=>{var N;return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-800 bg-white dark:bg-[#1f2128]",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:r,className:"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>h==null?void 0:h(E?{uid:E}:null),children:[e.jsx(ie,{src:(n==null?void 0:n.photo)||((N=n==null?void 0:n.n)==null?void 0:N.photo)||"",name:C,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:C}),(n==null?void 0:n.type)!=="group"&&e.jsx(rt,{online:B,lastSeen:S,loading:R})]}),(n==null?void 0:n.type)!=="group"&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:B?"Online":S?`Last seen ${Me(S)}`:"Offline"})]})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})},[n,C,B,S,R,E,r,o,h]),Me=N=>{if(!N)return"Never";const l=N,F=Date.now()-l,P=Math.floor(F/6e4),z=Math.floor(P/60),U=Math.floor(z/24);return P<1?"Just now":P<60?`${P}m ago`:z<24?`${z}h ago`:U<7?`${U}d ago`:new Date(l).toLocaleDateString()};return!n||!x?e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1f2128] items-center justify-center text-gray-400",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(pe,{size:64,className:"text-gray-200 dark:text-gray-700 mb-2"})}),e.jsx("p",{children:"Select a conversation to start chatting"})]}):e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1f2128]",children:[ye,e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[G.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("p",{children:[f("noMessages"),". ",f("startConversation"),"!"]})}):G.map((N,l)=>{const j=l>0?G[l-1]:null,F=N.s===v,P=_(N.id),z=O(N.id);return e.jsx(Yt,{message:N,isCurrentUser:F,previousMessage:j,currentUserId:v,chatId:x,linkPreviewData:w[N.id],messageStatus:P?"read":z?"delivered":"sent",onReaction:U=>Ae(N.id,U),onReply:()=>c(N),onEdit:()=>u(N),onDelete:U=>be(N.id,U),onForward:()=>b(N),onSeshNxLinkClick:U=>M({isOpen:!0,url:U,previewData:null}),onUserClick:()=>h==null?void 0:h({uid:N.s})},N.id)}),e.jsx("div",{ref:g})]}),e.jsx($t,{activeChatId:x,uid:v,onSend:Se,replyingTo:d,editingMessage:m,onCancelReply:()=>c(null),onCancelEdit:()=>u(null),typingUsers:ae,onTyping:Z,onStopTyping:$}),A&&e.jsx(Zt,{message:A,conversations:a,onClose:()=>b(null),onForward:me}),k.isOpen&&e.jsx(_t,{url:k.url,previewData:k.previewData,onClose:()=>M({isOpen:!1,url:"",previewData:null})})]})}function Re({title:t,value:s,icon:n,sub:a,bg:r="bg-white dark:bg-[#2c2e36]",text:o="text-gray-900 dark:text-white"}){return e.jsxs("div",{className:`${r} p-5 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col justify-between h-28`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${o==="text-white"?"text-blue-100":"text-gray-500"}`,children:t}),e.jsx("div",{className:`text-2xl font-extrabold ${o}`,children:s})]}),e.jsx("div",{className:"opacity-80",children:n})]}),a&&e.jsx("div",{className:"text-xs mt-auto opacity-75",children:a})]})}function ss({chatId:t,onClose:s,onMediaSelect:n}){const[a,r]=i.useState([]),[o,h]=i.useState(!0),[f,w]=i.useState(null),[p,k]=i.useState("all"),M=Q(),d=t&&M?{chatId:t,limit:500}:"skip",c=de(q.messages.getMediaMessages,d);i.useEffect(()=>{if(!t||!M){r([]),h(!1);return}if(!c)return;const b=(c||[]).filter(g=>g.media&&!g.deleted&&!g.deletedForAll).map(g=>({id:g._id,...g.media||{},messageId:g._id,timestamp:g.timestamp,sender:g.senderName})).sort((g,x)=>(g.timestamp||0)-(x.timestamp||0));r(b),h(!1)},[t,M,c]);const m=p==="all"?a:a.filter(b=>p==="images"?b.type==="image":p==="videos"?b.type==="video":p==="audio"?b.type==="audio":p==="files"?b.type==="file":!0),u=b=>{w(b),n&&n(b)},A=b=>{const g=document.createElement("a");g.href=b.url,g.download=b.name||"download",g.target="_blank",document.body.appendChild(g),g.click(),document.body.removeChild(g)};return e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[80] p-4",children:[e.jsxs(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex items-center justify-between shrink-0",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Media Gallery"}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:e.jsx(H,{size:20})})]}),e.jsx("div",{className:"p-3 border-b dark:border-gray-700 flex gap-2 overflow-x-auto scrollbar-hide shrink-0",children:[{key:"all",label:"All",icon:null},{key:"images",label:"Images",icon:Ue},{key:"videos",label:"Videos",icon:ke},{key:"audio",label:"Audio",icon:De},{key:"files",label:"Files",icon:xe}].map(b=>e.jsxs("button",{onClick:()=>k(b.key),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition ${p===b.key?"bg-brand-blue text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200"}`,children:[b.icon&&e.jsx(b.icon,{size:16}),b.label,e.jsxs("span",{className:"text-xs opacity-70",children:["(",m.filter(g=>b.key==="all"||g.type===b.key).length,")"]})]},b.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-brand-blue border-t-transparent rounded-full animate-spin mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading media..."})]}):m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(Ue,{size:48,className:"mb-4 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No media found"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:m.map(b=>e.jsxs(I.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(b),className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 cursor-pointer group",children:[b.type==="image"?e.jsx("img",{src:b.url,alt:"Media",className:"w-full h-full object-cover"}):b.type==="video"?e.jsx("video",{src:b.url,className:"w-full h-full object-cover"}):b.type==="audio"?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-purple-100 dark:bg-purple-900/30",children:e.jsx(De,{size:32,className:"text-purple-600 dark:text-purple-400"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-100 dark:bg-blue-900/30",children:e.jsx(xe,{size:32,className:"text-blue-600 dark:text-blue-400"})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-white opacity-0 group-hover:opacity-100 transition"})})]},b.id))})})]}),e.jsx(oe,{children:f&&e.jsx(ns,{media:f,onClose:()=>w(null),onDownload:A})})]})}function ns({media:t,onClose:s,onDownload:n}){const[a,r]=i.useState([]),[o,h]=i.useState(0);i.useEffect(()=>{r([t]),h(0)},[t]);const f=()=>{o<a.length-1&&h(o+1)},w=()=>{o>0&&h(o-1)},p=a[o]||t;return e.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/95 z-[90] flex items-center justify-center",onClick:s,children:e.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center p-4",onClick:k=>k.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition z-10",children:e.jsx(H,{size:24})}),p.type==="image"&&e.jsx("img",{src:p.url,alt:"Media",className:"max-w-full max-h-full object-contain rounded-lg"}),p.type==="video"&&e.jsx("video",{src:p.url,controls:!0,className:"max-w-full max-h-full rounded-lg",autoPlay:!0}),p.type==="audio"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md",children:[e.jsx("div",{className:"w-32 h-32 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(De,{size:48,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("audio",{src:p.url,controls:!0,className:"w-full",autoPlay:!0}),e.jsx("p",{className:"text-center mt-4 text-sm text-gray-500",children:p.name})]}),p.type==="file"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 max-w-md text-center",children:[e.jsx(xe,{size:64,className:"text-blue-600 dark:text-blue-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-bold dark:text-white mb-2",children:p.name}),e.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 px-6 py-2 bg-brand-blue text-white rounded-lg hover:bg-blue-600 transition",children:"Open File"})]}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w,disabled:o===0,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-30 transition",children:e.jsx(At,{size:24})}),e.jsx("button",{onClick:f,disabled:o===a.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-30 transition",children:e.jsx(Ke,{size:24})})]}),e.jsx("button",{onClick:()=>n(p),className:"absolute bottom-4 left-1/2 -translate-x-1/2 p-3 bg-black/50 text-white rounded-full hover:bg-black/70 transition",children:e.jsx(Pe,{size:20})})]})})}function ms({activeChat:t,onClose:s,currentUser:n}){const[a,r]=i.useState([]),[o,h]=i.useState({sessions:0,rating:0,responseTime:"N/A"}),[f,w]=i.useState(!0),[p,k]=i.useState(!1),[M,d]=i.useState(!1),c=t.type==="group",m=t.uid,u=t.name||t.n||"Unknown";i.useEffect(()=>{const g=async()=>{w(!0);try{if(r([]),!c&&m&&supabase){const x=(n==null?void 0:n.id)||(n==null?void 0:n.uid),{data:C}=await supabase.from("profiles").select("rating, response_time").eq("id",m).single(),{count:v}=await supabase.from("bookings").select("*",{count:"exact",head:!0}).eq("sender_id",x).eq("target_id",m).eq("status","Completed");h({sessions:v||0,rating:(C==null?void 0:C.rating)||"New",responseTime:(C==null?void 0:C.response_time)||"~1hr"})}}catch(x){console.error("Failed to load details:",x)}w(!1)};t!=null&&t.id&&g()},[t.id,m,c,(n==null?void 0:n.id)||(n==null?void 0:n.uid)]);const A=async()=>{var g;if(!(c||!m||!n||!supabase)&&confirm(`Are you sure you want to block ${u}?`)){k(!0);try{const x=(n==null?void 0:n.id)||(n==null?void 0:n.uid),{data:C}=await supabase.from("profiles").select("settings").eq("id",x).single(),v=(C==null?void 0:C.settings)||{},E=((g=v.social)==null?void 0:g.blockedUsers)||[];E.includes(m)||await supabase.from("profiles").update({settings:{...v,social:{...v.social,blockedUsers:[...E,m]}}}).eq("id",x),alert("User blocked."),s()}catch(x){console.error("Block failed:",x),alert("Failed to block user.")}k(!1)}},b=()=>{alert("Please use the report option on their profile page for full moderation tools.")};return e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full md:w-80 bg-gray-800 shadow-xl z-20 flex flex-col transition-transform duration-300 ease-in-out border-l border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Details"}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-full transition duration-150","aria-label":"Close details",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 flex flex-col items-center border-b border-gray-700 bg-gray-800",children:[e.jsxs("div",{className:"relative w-24 h-24 rounded-full overflow-hidden mb-4 bg-gray-700 flex items-center justify-center shadow-lg border-4 border-gray-600",children:[e.jsx("img",{src:t.photo,className:"w-full h-full object-cover",onError:g=>g.target.src="",alt:u}),!t.photo&&(c?e.jsx(pe,{className:"w-10 h-10 text-gray-500"}):e.jsx(he,{className:"w-10 h-10 text-gray-500"}))]}),e.jsx("h4",{className:"text-xl font-bold text-white text-center leading-tight",children:u}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center px-3 py-1 bg-gray-700 rounded-full",children:[c?e.jsx(pe,{className:"w-3 h-3 mr-1"}):e.jsx(qe,{className:"w-3 h-3 mr-1"}),c?"Group Chat":t.role||"Creative"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[!c&&e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase mb-3 tracking-wider",children:"Performance"}),f?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(ue,{className:"animate-spin text-brand-blue"})}):e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(Re,{title:"Sessions",value:o.sessions,icon:qe,color:"text-blue-400"}),e.jsx(Re,{title:"Rating",value:o.rating,icon:Oe,color:"text-yellow-400"}),e.jsx(Re,{title:"Reply Time",value:o.responseTime,icon:Ee,color:"text-green-400"})]})]}),e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Shared Media"}),e.jsx("button",{onClick:()=>d(!0),className:"text-xs text-brand-blue hover:underline font-medium",children:"View All"})]}),a.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.slice(0,6).map((g,x)=>e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-700 cursor-pointer hover:opacity-80 transition",children:[g.type==="image"&&e.jsx("img",{src:g.url,className:"w-full h-full object-cover",alt:"Media"}),g.type==="video"&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ke,{size:20,className:"text-gray-400"})})]},x))}):e.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"No shared media yet"})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition",children:[e.jsx(St,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{children:"Mute Notifications"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition",children:[e.jsx(Mt,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Media Gallery"})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:A,disabled:p,className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-red-400 hover:bg-red-900/20 hover:text-red-300 rounded-lg transition disabled:opacity-50",children:[p?e.jsx(ue,{className:"w-4 h-4 animate-spin"}):e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{children:"Block User"})]}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-4 py-2.5 text-left text-red-400 hover:bg-red-900/20 hover:text-red-300 rounded-lg transition",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Report User"})]})]})]})]}),M&&e.jsx(ss,{chatId:t.id,onClose:()=>d(!1)})]})}export{us as C,is as L,nt as S,ie as U,Re as a,Be as b,os as c,q as d,ls as e,ds as f,gs as g,ms as h,Q as i,Lt as j,Ft as u,cs as v};
