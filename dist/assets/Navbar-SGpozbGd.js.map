{"version":3,"file":"Navbar-SGpozbGd.js","sources":["../../src/components/social/NotificationsPanel.jsx","../../src/config/breadcrumbConfig.js","../../src/hooks/useBreadcrumbs.js","../../src/components/ui/breadcrumb.jsx","../../src/components/Navbar.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n    Bell,\r\n    UserPlus,\r\n    Heart,\r\n    MessageCircle,\r\n    AtSign,\r\n    CornerDownRight,\r\n    Bookmark,\r\n    Check,\r\n    CheckCheck,\r\n    Trash2,\r\n    X,\r\n    Calendar,\r\n    DollarSign,\r\n    Clock,\r\n    Loader2\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport UserAvatar from '../shared/UserAvatar';\r\nimport toast from 'react-hot-toast';\r\n\r\n/**\r\n * Get the appropriate icon for notification type\r\n */\r\nconst NotificationIcon = ({ type }) => {\r\n    const iconProps = { size: 14 };\r\n    const iconMap = {\r\n        follow: <UserPlus {...iconProps} />,\r\n        like: <Heart {...iconProps} />,\r\n        comment: <MessageCircle {...iconProps} />,\r\n        mention: <AtSign {...iconProps} />,\r\n        reply: <CornerDownRight {...iconProps} />,\r\n        save: <Bookmark {...iconProps} />,\r\n        booking: <Calendar {...iconProps} />,\r\n        booking_accepted: <Check {...iconProps} />,\r\n        booking_declined: <X {...iconProps} />\r\n    };\r\n\r\n    const colorMap = {\r\n        follow: 'bg-brand-blue/10 text-brand-blue dark:bg-brand-blue/20',\r\n        like: 'bg-red-100 text-red-500 dark:bg-red-900/30 dark:text-red-400',\r\n        comment: 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400',\r\n        mention: 'bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400',\r\n        reply: 'bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400',\r\n        save: 'bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400',\r\n        booking: 'bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400',\r\n        booking_accepted: 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400',\r\n        booking_declined: 'bg-red-100 text-red-500 dark:bg-red-900/30 dark:text-red-400'\r\n    };\r\n\r\n    return (\r\n        <div className={`p-1.5 rounded-full ${colorMap[type] || 'bg-gray-100 text-gray-500'}`}>\r\n            {iconMap[type] || <Bell size={14} />}\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Format timestamp to relative time\r\n */\r\nconst formatTime = (ts) => {\r\n    if (!ts) return '';\r\n    const date = ts.toMillis ? new Date(ts.toMillis()) : new Date(ts);\r\n    const now = new Date();\r\n    const diffMs = now - date;\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'Just now';\r\n    if (diffMins < 60) return `${diffMins}m`;\r\n    if (diffHours < 24) return `${diffHours}h`;\r\n    if (diffDays < 7) return `${diffDays}d`;\r\n    return date.toLocaleDateString();\r\n};\r\n\r\n/**\r\n * Single notification item\r\n */\r\nconst NotificationItem = ({ \r\n    notification, \r\n    onMarkAsRead, \r\n    onDelete, \r\n    onUserClick, \r\n    onPostClick,\r\n    onBookingAction\r\n}) => {\r\n    const [actionLoading, setActionLoading] = useState(null);\r\n    \r\n    const handleClick = () => {\r\n        if (!notification.read) {\r\n            onMarkAsRead(notification.id);\r\n        }\r\n        \r\n        // Navigate based on notification type\r\n        if (notification.type === 'follow' && onUserClick) {\r\n            onUserClick(notification.fromUserId);\r\n        } else if (notification.postId && onPostClick) {\r\n            onPostClick(notification.postId);\r\n        }\r\n    };\r\n    \r\n    const handleBookingAction = async (e, action) => {\r\n        e.stopPropagation();\r\n        if (!notification.bookingId) return;\r\n        \r\n        setActionLoading(action);\r\n        try {\r\n            await onBookingAction(notification.bookingId, action, notification.id);\r\n            toast.success(action === 'accept' ? 'Booking accepted!' : 'Booking declined');\r\n        } catch (err) {\r\n            toast.error('Failed to update booking');\r\n            console.error(err);\r\n        }\r\n        setActionLoading(null);\r\n    };\r\n    \r\n    const isBookingNotification = notification.type === 'booking' && notification.bookingId && !notification.actionTaken;\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, x: -10 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 10 }}\r\n            className={`\r\n                p-3 cursor-pointer border-b dark:border-gray-700 last:border-0 \r\n                flex gap-3 items-start group transition-colors relative\r\n                ${notification.read \r\n                    ? 'hover:bg-gray-50 dark:hover:bg-gray-800' \r\n                    : 'bg-blue-50/50 dark:bg-blue-900/10 hover:bg-blue-50 dark:hover:bg-blue-900/20'\r\n                }\r\n            `}\r\n            onClick={handleClick}\r\n        >\r\n            {/* User avatar with type icon overlay */}\r\n            <div className=\"relative shrink-0\">\r\n                <UserAvatar \r\n                    src={notification.fromUserPhoto}\r\n                    name={notification.fromUserName}\r\n                    size=\"sm\"\r\n                />\r\n                <div className=\"absolute -bottom-1 -right-1\">\r\n                    <NotificationIcon type={notification.type} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex justify-between items-start gap-2\">\r\n                    <p className=\"text-sm dark:text-gray-200 leading-snug\">\r\n                        <span className=\"font-bold hover:text-brand-blue transition-colors\">\r\n                            {notification.fromUserName}\r\n                        </span>\r\n                        {' '}\r\n                        <span className=\"text-gray-600 dark:text-gray-400\">\r\n                            {notification.message}\r\n                        </span>\r\n                    </p>\r\n                    <span className=\"text-[10px] text-gray-400 whitespace-nowrap shrink-0\">\r\n                        {formatTime(notification.timestamp)}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Post preview if available */}\r\n                {notification.postPreview && (\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 line-clamp-1 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\r\n                        \"{notification.postPreview}\"\r\n                    </p>\r\n                )}\r\n                \r\n                {/* Booking details preview */}\r\n                {isBookingNotification && notification.bookingDetails && (\r\n                    <div className=\"mt-2 bg-amber-50 dark:bg-amber-900/20 p-2 rounded-lg text-xs space-y-1\">\r\n                        <div className=\"flex items-center gap-3 text-gray-600 dark:text-gray-300\">\r\n                            {notification.bookingDetails.date && (\r\n                                <span className=\"flex items-center gap-1\">\r\n                                    <Clock size={10} /> {notification.bookingDetails.date}\r\n                                </span>\r\n                            )}\r\n                            {notification.bookingDetails.amount && (\r\n                                <span className=\"flex items-center gap-1 text-green-600 dark:text-green-400 font-bold\">\r\n                                    <DollarSign size={10} /> ${notification.bookingDetails.amount}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        {notification.bookingDetails.serviceType && (\r\n                            <span className=\"inline-block bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded text-[10px]\">\r\n                                {notification.bookingDetails.serviceType}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                \r\n                {/* Quick Accept/Decline buttons for booking notifications */}\r\n                {isBookingNotification && (\r\n                    <div className=\"flex gap-2 mt-2\" onClick={e => e.stopPropagation()}>\r\n                        <button\r\n                            onClick={(e) => handleBookingAction(e, 'accept')}\r\n                            disabled={actionLoading}\r\n                            className=\"flex-1 bg-green-600 hover:bg-green-700 text-white text-xs font-bold py-1.5 px-3 rounded-lg transition flex items-center justify-center gap-1 disabled:opacity-50\"\r\n                        >\r\n                            {actionLoading === 'accept' ? (\r\n                                <Loader2 size={12} className=\"animate-spin\" />\r\n                            ) : (\r\n                                <><Check size={12} /> Accept</>\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            onClick={(e) => handleBookingAction(e, 'decline')}\r\n                            disabled={actionLoading}\r\n                            className=\"flex-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs font-bold py-1.5 px-3 rounded-lg transition flex items-center justify-center gap-1 disabled:opacity-50\"\r\n                        >\r\n                            {actionLoading === 'decline' ? (\r\n                                <Loader2 size={12} className=\"animate-spin\" />\r\n                            ) : (\r\n                                <><X size={12} /> Decline</>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Unread indicator */}\r\n                {!notification.read && (\r\n                    <div className=\"w-2 h-2 bg-brand-blue rounded-full absolute right-3 top-1/2 -translate-y-1/2\" />\r\n                )}\r\n            </div>\r\n\r\n            {/* Delete button on hover */}\r\n            <button \r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onDelete(notification.id);\r\n                }}\r\n                className=\"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-all text-gray-400 hover:text-red-500 shrink-0\"\r\n            >\r\n                <X size={14} />\r\n            </button>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n/**\r\n * Full notifications panel/dropdown\r\n */\r\nexport default function NotificationsPanel({\r\n    notifications,\r\n    unreadCount,\r\n    loading,\r\n    onMarkAsRead,\r\n    onMarkAllAsRead,\r\n    onDeleteNotification,\r\n    onClearAll,\r\n    onUserClick,\r\n    onPostClick,\r\n    onBookingAction,\r\n    onClose\r\n}) {\r\n    return (\r\n        <div className=\"absolute right-0 top-full mt-3 w-80 sm:w-96 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-2xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\">\r\n            {/* Header */}\r\n            <div className=\"p-3 px-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <h4 className=\"font-bold dark:text-white text-sm\">Notifications</h4>\r\n                    {unreadCount > 0 && (\r\n                        <span className=\"text-xs bg-brand-blue text-white px-2 py-0.5 rounded-full font-bold animate-pulse\">\r\n                            {unreadCount}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                \r\n                {unreadCount > 0 && (\r\n                    <button \r\n                        onClick={onMarkAllAsRead}\r\n                        className=\"text-xs text-brand-blue hover:text-blue-700 font-medium flex items-center gap-1 transition\"\r\n                    >\r\n                        <CheckCheck size={14} />\r\n                        Mark all read\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Notifications list */}\r\n            <div className=\"max-h-[400px] overflow-y-auto custom-scrollbar\">\r\n                {loading ? (\r\n                    <div className=\"p-8 text-center\">\r\n                        <div className=\"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin mx-auto mb-2\" />\r\n                        <p className=\"text-xs text-gray-500\">Loading...</p>\r\n                    </div>\r\n                ) : notifications.length === 0 ? (\r\n                    <div className=\"p-8 text-center text-gray-500 flex flex-col items-center\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-3\">\r\n                            <Bell size={24} className=\"opacity-30\" />\r\n                        </div>\r\n                        <p className=\"text-sm font-medium dark:text-gray-400\">All caught up!</p>\r\n                        <p className=\"text-xs text-gray-400 mt-1\">No new notifications</p>\r\n                    </div>\r\n                ) : (\r\n                    <AnimatePresence mode=\"popLayout\">\r\n                        {notifications.map(notification => (\r\n                            <NotificationItem\r\n                                key={notification.id}\r\n                                notification={notification}\r\n                                onMarkAsRead={onMarkAsRead}\r\n                                onDelete={onDeleteNotification}\r\n                                onUserClick={onUserClick}\r\n                                onPostClick={onPostClick}\r\n                                onBookingAction={onBookingAction}\r\n                            />\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {notifications.length > 0 && (\r\n                <div className=\"p-2 bg-gray-50 dark:bg-[#23262f] border-t dark:border-gray-700 flex justify-between items-center\">\r\n                    <button \r\n                        onClick={onClearAll}\r\n                        className=\"text-xs text-gray-400 hover:text-red-500 font-medium flex items-center gap-1 transition px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n                    >\r\n                        <Trash2 size={12} />\r\n                        Clear all\r\n                    </button>\r\n                    <button \r\n                        onClick={onClose}\r\n                        className=\"text-xs text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\r\n                    >\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Notification badge component for navbar\r\n */\r\nexport function NotificationBadge({ count }) {\r\n    if (count === 0) return null;\r\n\r\n    return (\r\n        <motion.span\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            className=\"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] bg-red-500 rounded-full text-[10px] text-white font-bold flex items-center justify-center border-2 border-white dark:border-dark-card\"\r\n        >\r\n            {count > 99 ? '99+' : count}\r\n        </motion.span>\r\n    );\r\n}\r\n\r\n","/**\r\n * Breadcrumb Navigation Configuration\r\n *\r\n * Defines the breadcrumb hierarchy for all routes in the application.\r\n * Each route maps to an array of breadcrumb items showing the navigation path.\r\n *\r\n * @example\r\n * '/bookings/calendar' â†’ [\r\n *   { label: 'Dashboard', path: '/dashboard' },\r\n *   { label: 'Bookings', path: '/bookings' },\r\n *   { label: 'Calendar' }\r\n * ]\r\n */\r\n\r\nimport { t } from '../contexts/LanguageContext';\r\n\r\n/**\r\n * Base breadcrumb configuration\r\n * Maps route paths to breadcrumb arrays\r\n */\r\nexport const breadcrumbConfig = {\r\n  // Dashboard\r\n  '/dashboard': [\r\n    { label: 'dashboard', path: '/dashboard' }\r\n  ],\r\n\r\n  // Feed\r\n  '/feed': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'feed', path: '/feed' }\r\n  ],\r\n  '/feed/discover': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'feed', path: '/feed' },\r\n    { label: 'discover' }\r\n  ],\r\n\r\n  // Messages\r\n  '/messages': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'messages', path: '/messages' }\r\n  ],\r\n\r\n  // Bookings\r\n  '/bookings': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' }\r\n  ],\r\n  '/bookings/my-bookings': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' },\r\n    { label: 'myBookings' }\r\n  ],\r\n  '/bookings/calendar': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' },\r\n    { label: 'calendar' }\r\n  ],\r\n  '/bookings/find-talent': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' },\r\n    { label: 'findTalent' }\r\n  ],\r\n  '/bookings/broadcast-list': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' },\r\n    { label: 'broadcastList' }\r\n  ],\r\n\r\n  // Marketplace\r\n  '/marketplace': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'marketplace', path: '/marketplace' }\r\n  ],\r\n\r\n  // Tech Services\r\n  '/tech': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'techServices', path: '/tech' }\r\n  ],\r\n\r\n  // Payments\r\n  '/payments': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'payments', path: '/payments' }\r\n  ],\r\n\r\n  // Profile\r\n  '/profile': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'profile', path: '/profile' }\r\n  ],\r\n\r\n  // Business Center\r\n  '/business-center': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'businessCenter', path: '/business-center' }\r\n  ],\r\n\r\n  // Studio Operations\r\n  '/studio-ops': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'studioOps', path: '/studio-ops' }\r\n  ],\r\n\r\n  // Labels\r\n  '/labels': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'labels', path: '/labels' }\r\n  ],\r\n  '/labels/dashboard': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'labels', path: '/labels' },\r\n    { label: 'dashboard' }\r\n  ],\r\n  '/labels/contracts': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'labels', path: '/labels' },\r\n    { label: 'contracts' }\r\n  ],\r\n\r\n  // Legal\r\n  '/legal': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'legal', path: '/legal' }\r\n  ],\r\n\r\n  // Education Routes\r\n  '/edu-student': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'student', path: '/edu-student' }\r\n  ],\r\n  '/edu-intern': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'intern', path: '/edu-intern' }\r\n  ],\r\n  '/edu-overview': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'eduOverview', path: '/edu-overview' }\r\n  ],\r\n  '/edu-admin': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'eduAdmin', path: '/edu-admin' }\r\n  ],\r\n};\r\n\r\n/**\r\n * Dynamic route patterns\r\n * Handles routes with parameters like /profile/:userId\r\n */\r\nexport const dynamicBreadcrumbPatterns = {\r\n  // User profile\r\n  '/profile/:userId': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'profile', path: '/profile' },\r\n    { label: 'user', isDynamic: true }\r\n  ],\r\n\r\n  // Studio portal\r\n  '/studio/:studioId/portal': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'studioOps', path: '/studio-ops' },\r\n    { label: 'studio', isDynamic: true },\r\n    { label: 'portal' }\r\n  ],\r\n\r\n  // Booking details\r\n  '/booking/:bookingId': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'bookings', path: '/bookings' },\r\n    { label: 'booking', isDynamic: true }\r\n  ],\r\n\r\n  // Messages conversation\r\n  '/messages/:conversationId': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'messages', path: '/messages' },\r\n    { label: 'conversation', isDynamic: true }\r\n  ],\r\n\r\n  // Post details\r\n  '/post/:postId': [\r\n    { label: 'dashboard', path: '/dashboard' },\r\n    { label: 'feed', path: '/feed' },\r\n    { label: 'post', isDynamic: true }\r\n  ],\r\n};\r\n\r\n/**\r\n * Route aliases for backward compatibility\r\n * Maps old paths to new breadcrumb structures\r\n */\r\nexport const routeAliases = {\r\n  '/': '/dashboard',\r\n  '/home': '/dashboard',\r\n};\r\n\r\n/**\r\n * Get breadcrumbs for a specific path\r\n *\r\n * @param {string} pathname - Current URL pathname\r\n * @param {object} params - URL parameters (for dynamic routes)\r\n * @returns {Array} Breadcrumb items\r\n *\r\n * @example\r\n * getBreadcrumbsForPath('/bookings/calendar');\r\n * // Returns: [{ label: 'dashboard', path: '/dashboard' }, ...]\r\n */\r\nexport function getBreadcrumbsForPath(pathname, params = {}) {\r\n  // Check for aliases\r\n  const normalizedPath = routeAliases[pathname] || pathname;\r\n\r\n  // Check exact match first\r\n  if (breadcrumbConfig[normalizedPath]) {\r\n    return breadcrumbConfig[normalizedPath];\r\n  }\r\n\r\n  // Check dynamic routes\r\n  for (const [pattern, breadcrumbs] of Object.entries(dynamicBreadcrumbPatterns)) {\r\n    const match = matchDynamicRoute(normalizedPath, pattern, params);\r\n    if (match) {\r\n      return breadcrumbs.map(crumb => ({\r\n        ...crumb,\r\n        label: crumb.isDynamic ? getDynamicLabel(crumb.label, match) : crumb.label\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Build breadcrumbs from path segments\r\n  return buildBreadcrumbsFromPath(normalizedPath);\r\n}\r\n\r\n/**\r\n * Match a pathname against a dynamic route pattern\r\n *\r\n * @param {string} pathname - Current URL pathname\r\n * @param {string} pattern - Route pattern (e.g., '/profile/:userId')\r\n * @param {object} params - URL parameters\r\n * @returns {object|null} Matched parameters or null\r\n */\r\nfunction matchDynamicRoute(pathname, pattern, params) {\r\n  const patternSegments = pattern.split('/');\r\n  const pathSegments = pathname.split('/');\r\n\r\n  if (patternSegments.length !== pathSegments.length) {\r\n    return null;\r\n  }\r\n\r\n  const match = {};\r\n  for (let i = 0; i < patternSegments.length; i++) {\r\n    const patternSegment = patternSegments[i];\r\n    const pathSegment = pathSegments[i];\r\n\r\n    if (patternSegment.startsWith(':')) {\r\n      const paramName = patternSegment.substring(1);\r\n      match[paramName] = pathSegment;\r\n    } else if (patternSegment !== pathSegment) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return { ...match, ...params };\r\n}\r\n\r\n/**\r\n * Get dynamic label for breadcrumb item\r\n *\r\n * @param {string} labelKey - Label key or template\r\n * @param {object} params - Route parameters\r\n * @returns {string} Display label\r\n */\r\nfunction getDynamicLabel(labelKey, params) {\r\n  // If it's a parameter value, use it\r\n  if (params[labelKey]) {\r\n    return params[labelKey];\r\n  }\r\n\r\n  // Otherwise return the key itself\r\n  return labelKey;\r\n}\r\n\r\n/**\r\n * Build breadcrumbs from path segments (fallback)\r\n *\r\n * @param {string} pathname - Current URL pathname\r\n * @returns {Array} Breadcrumb items\r\n */\r\nfunction buildBreadcrumbsFromPath(pathname) {\r\n  const segments = pathname.split('/').filter(Boolean);\r\n  const breadcrumbs = [];\r\n  let currentPath = '';\r\n\r\n  for (let i = 0; i < segments.length; i++) {\r\n    const segment = segments[i];\r\n    currentPath += '/' + segment;\r\n\r\n    // Convert kebab-case to readable format\r\n    const label = segment\r\n      .split('-')\r\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n\r\n    breadcrumbs.push({\r\n      label: label.toLowerCase(),\r\n      path: i === segments.length - 1 ? null : currentPath\r\n    });\r\n  }\r\n\r\n  return breadcrumbs;\r\n}\r\n\r\n/**\r\n * Check if a path has a breadcrumb configuration\r\n *\r\n * @param {string} pathname - URL pathname to check\r\n * @returns {boolean} True if breadcrumbs exist for path\r\n */\r\nexport function hasBreadcrumbs(pathname) {\r\n  const normalizedPath = routeAliases[pathname] || pathname;\r\n  return !!breadcrumbConfig[normalizedPath];\r\n}\r\n\r\nexport default breadcrumbConfig;\r\n","/**\r\n * useBreadcrumbs Hook\r\n *\r\n * React hook that provides breadcrumb information for the current route.\r\n * Uses the current URL pathname to generate breadcrumb items.\r\n *\r\n * @example\r\n * function MyComponent() {\r\n *   const { breadcrumbs, currentPath, currentLabel } = useBreadcrumbs();\r\n *\r\n *   return (\r\n *     <nav>\r\n *       {breadcrumbs.map((crumb, index) => (\r\n *         <span key={index}>\r\n *           {crumb.path ? <Link to={crumb.path}>{crumb.label}</Link> : crumb.label}\r\n *           {index < breadcrumbs.length - 1 && ' > '}\r\n *         </span>\r\n *       ))}\r\n *     </nav>\r\n *   );\r\n * }\r\n */\r\n\r\nimport { useMemo } from 'react';\r\nimport { useLocation, useParams } from 'react-router-dom';\r\nimport {\r\n  getBreadcrumbsForPath,\r\n  hasBreadcrumbs\r\n} from '../config/breadcrumbConfig';\r\nimport { useLanguage } from '../contexts/LanguageContext';\r\n\r\n/**\r\n * Hook for breadcrumb navigation\r\n *\r\n * @returns {object} Breadcrumb data and utilities\r\n */\r\nexport function useBreadcrumbs() {\r\n  const location = useLocation();\r\n  const params = useParams();\r\n  const { t } = useLanguage();\r\n\r\n  /**\r\n   * Generate breadcrumbs with translated labels\r\n   */\r\n  const breadcrumbs = useMemo(() => {\r\n    const rawBreadcrumbs = getBreadcrumbsForPath(location.pathname, params);\r\n\r\n    // Translate labels\r\n    return rawBreadcrumbs.map(crumb => ({\r\n      ...crumb,\r\n      label: t(crumb.label)\r\n    }));\r\n  }, [location.pathname, params, t]);\r\n\r\n  /**\r\n   * Current path (last segment of breadcrumbs)\r\n   */\r\n  const currentPath = useMemo(() => {\r\n    return location.pathname;\r\n  }, [location.pathname]);\r\n\r\n  /**\r\n   * Current page label (last breadcrumb item)\r\n   */\r\n  const currentLabel = useMemo(() => {\r\n    if (breadcrumbs.length > 0) {\r\n      return breadcrumbs[breadcrumbs.length - 1].label;\r\n    }\r\n    return '';\r\n  }, [breadcrumbs]);\r\n\r\n  /**\r\n   * Parent path (second-to-last breadcrumb)\r\n   */\r\n  const parentPath = useMemo(() => {\r\n    if (breadcrumbs.length > 1) {\r\n      const parent = breadcrumbs[breadcrumbs.length - 2];\r\n      return parent.path || null;\r\n    }\r\n    return null;\r\n  }, [breadcrumbs]);\r\n\r\n  /**\r\n   * Check if current path has breadcrumb configuration\r\n   */\r\n  const hasConfiguredBreadcrumbs = useMemo(() => {\r\n    return hasBreadcrumbs(location.pathname);\r\n  }, [location.pathname]);\r\n\r\n  /**\r\n   * Get root path (typically /dashboard)\r\n   */\r\n  const rootPath = useMemo(() => {\r\n    if (breadcrumbs.length > 0) {\r\n      return breadcrumbs[0].path || '/';\r\n    }\r\n    return '/';\r\n  }, [breadcrumbs]);\r\n\r\n  /**\r\n   * Check if at root level\r\n   */\r\n  const isRoot = useMemo(() => {\r\n    return location.pathname === '/' || location.pathname === '/dashboard';\r\n  }, [location.pathname]);\r\n\r\n  return {\r\n    // Breadcrumb data\r\n    breadcrumbs,\r\n    currentPath,\r\n    currentLabel,\r\n    parentPath,\r\n    rootPath,\r\n\r\n    // State checks\r\n    hasConfiguredBreadcrumbs,\r\n    isRoot,\r\n    hasParent: !!parentPath,\r\n\r\n    // Navigation helpers\r\n    canGoBack: breadcrumbs.length > 1,\r\n    goBackPath: parentPath,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook for building dynamic breadcrumb titles\r\n * Useful for loading data to populate dynamic breadcrumbs\r\n *\r\n * @example\r\n * function UserProfile() {\r\n *   const { userId } = useParams();\r\n *   const { setBreadcrumbTitle } = useBreadcrumbTitles();\r\n *   const { user } = useUserProfile(userId);\r\n *\r\n *   useEffect(() => {\r\n *     if (user?.displayName) {\r\n *       setBreadcrumbTitle('user', user.displayName);\r\n *     }\r\n *   }, [user]);\r\n * }\r\n */\r\nexport function useBreadcrumbTitles() {\r\n  // This can be extended to support dynamic title updates\r\n  // For now, it's a placeholder for future enhancement\r\n\r\n  const setBreadcrumbTitle = (key, title) => {\r\n    // Could use a context or state management to update titles\r\n    console.log(`Set breadcrumb title for ${key}: ${title}`);\r\n  };\r\n\r\n  return {\r\n    setBreadcrumbTitle\r\n  };\r\n}\r\n\r\nexport default useBreadcrumbs;\r\n","/**\r\n * Breadcrumb Navigation Component\r\n *\r\n * Displays breadcrumb navigation for the current page.\r\n * Automatically generates breadcrumbs from the current URL path.\r\n *\r\n * @example\r\n * <Breadcrumb />\r\n *\r\n * @example with custom home\r\n * <Breadcrumb home={{ label: 'Home', path: '/' }} />\r\n *\r\n * @example with custom separator\r\n * <Breadcrumb separator=\">\" />\r\n */\r\n\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ChevronRight, Home } from 'lucide-react';\r\nimport { clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\nimport { useBreadcrumbs } from '../../hooks/useBreadcrumbs';\r\n\r\n// Utility for merging tailwind classes\r\nfunction cn(...inputs) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n/**\r\n * Breadcrumb Root Component\r\n */\r\nconst Breadcrumb = React.forwardRef((\r\n  {\r\n    className,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  return (\r\n    <nav\r\n      ref={ref}\r\n      aria-label=\"Breadcrumb\"\r\n      className={cn(\"flex items-center text-sm\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nBreadcrumb.displayName = \"Breadcrumb\";\r\n\r\n/**\r\n * Breadcrumb List Component\r\n */\r\nconst BreadcrumbList = React.forwardRef((\r\n  {\r\n    className,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  return (\r\n    <ol\r\n      ref={ref}\r\n      className={cn(\"flex items-center gap-1.5 flex-wrap\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nBreadcrumbList.displayName = \"BreadcrumbList\";\r\n\r\n/**\r\n * Breadcrumb Item Component\r\n */\r\nconst BreadcrumbItem = React.forwardRef((\r\n  {\r\n    className,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  return (\r\n    <li\r\n      ref={ref}\r\n      className={cn(\"flex items-center gap-1.5\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\";\r\n\r\n/**\r\n * Breadcrumb Link Component\r\n */\r\nconst BreadcrumbLink = React.forwardRef((\r\n  {\r\n    className,\r\n    to,\r\n    children,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  return (\r\n    <Link\r\n      ref={ref}\r\n      to={to}\r\n      className={cn(\r\n        \"transition-colors hover:text-brand-blue dark:hover:text-brand-blue/80\",\r\n        \"text-gray-600 dark:text-gray-400 font-medium\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </Link>\r\n  );\r\n});\r\n\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\";\r\n\r\n/**\r\n * Breadcrumb Page Component (current page, not a link)\r\n */\r\nconst BreadcrumbPage = React.forwardRef((\r\n  {\r\n    className,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  return (\r\n    <span\r\n      ref={ref}\r\n      role=\"link\"\r\n      aria-disabled=\"true\"\r\n      aria-current=\"page\"\r\n      className={cn(\r\n        \"font-normal text-gray-900 dark:text-white\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\";\r\n\r\n/**\r\n * Breadcrumb Separator Component\r\n */\r\nconst BreadcrumbSeparator = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <li\r\n      role=\"presentation\"\r\n      aria-hidden=\"true\"\r\n      className={cn(\"flex items-center gap-1.5\", className)}\r\n      {...props}\r\n    >\r\n      {children || <ChevronRight className=\"h-4 w-4\" />}\r\n    </li>\r\n  );\r\n};\r\n\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\";\r\n\r\n/**\r\n * Complete Breadcrumb Navigation Component\r\n * Automatically generates breadcrumbs from the current URL\r\n *\r\n * @example\r\n * <BreadcrumbNav />\r\n *\r\n * @example with custom options\r\n * <BreadcrumbNav\r\n *   showHome={true}\r\n *   homeLabel=\"Home\"\r\n *   homePath=\"/\"\r\n *   separator=\"/\"\r\n * />\r\n */\r\nconst BreadcrumbNav = React.forwardRef((\r\n  {\r\n    className,\r\n    showHome = false,\r\n    homeLabel = 'dashboard',\r\n    homePath = '/dashboard',\r\n    separator,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  const { breadcrumbs, isRoot } = useBreadcrumbs();\r\n\r\n  // Don't show breadcrumbs on root\r\n  if (isRoot) {\r\n    return null;\r\n  }\r\n\r\n  const displayBreadcrumbs = showHome\r\n    ? [{ label: homeLabel, path: homePath }, ...breadcrumbs]\r\n    : breadcrumbs;\r\n\r\n  const Separator = separator !== undefined\r\n    ? () => <BreadcrumbSeparator>{separator}</BreadcrumbSeparator>\r\n    : BreadcrumbSeparator;\r\n\r\n  return (\r\n    <Breadcrumb ref={ref} className={className} {...props}>\r\n      <BreadcrumbList>\r\n        {displayBreadcrumbs.map((crumb, index) => {\r\n          const isLast = index === displayBreadcrumbs.length - 1;\r\n          const hasPath = crumb.path !== null && crumb.path !== undefined;\r\n\r\n          return (\r\n            <React.Fragment key={index}>\r\n              <BreadcrumbItem>\r\n                {isLast || !hasPath ? (\r\n                  <BreadcrumbPage>{crumb.label}</BreadcrumbPage>\r\n                ) : (\r\n                  <BreadcrumbLink to={crumb.path}>\r\n                    {crumb.label}\r\n                  </BreadcrumbLink>\r\n                )}\r\n              </BreadcrumbItem>\r\n              {!isLast && <Separator />}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </BreadcrumbList>\r\n    </Breadcrumb>\r\n  );\r\n});\r\n\r\nBreadcrumbNav.displayName = \"BreadcrumbNav\";\r\n\r\n/**\r\n * Compact Breadcrumb Component\r\n * Shows only the current page with a back link to parent\r\n *\r\n * @example\r\n * <BreadcrumbNavCompact />\r\n */\r\nconst BreadcrumbNavCompact = React.forwardRef((\r\n  {\r\n    className,\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  const { currentLabel, parentPath, hasParent, breadcrumbs } = useBreadcrumbs();\r\n\r\n  if (!hasParent) {\r\n    return null;\r\n  }\r\n\r\n  const parentLabel = breadcrumbs.length > 1\r\n    ? breadcrumbs[breadcrumbs.length - 2].label\r\n    : 'dashboard';\r\n\r\n  return (\r\n    <Breadcrumb ref={ref} className={className} {...props}>\r\n      <BreadcrumbList>\r\n        <BreadcrumbItem>\r\n          <BreadcrumbLink to={parentPath}>\r\n            {parentLabel}\r\n          </BreadcrumbLink>\r\n        </BreadcrumbItem>\r\n        <BreadcrumbSeparator />\r\n        <BreadcrumbItem>\r\n          <BreadcrumbPage>{currentLabel}</BreadcrumbPage>\r\n        </BreadcrumbItem>\r\n      </BreadcrumbList>\r\n    </Breadcrumb>\r\n  );\r\n});\r\n\r\nBreadcrumbNavCompact.displayName = \"BreadcrumbNavCompact\";\r\n\r\n/**\r\n * Breadcrumb with Home Icon\r\n * Shows home icon as the first breadcrumb\r\n *\r\n * @example\r\n * <BreadcrumbNavWithHome />\r\n */\r\nconst BreadcrumbNavWithHome = React.forwardRef((\r\n  {\r\n    className,\r\n    homePath = '/dashboard',\r\n    ...props\r\n  },\r\n  ref\r\n) => {\r\n  const { breadcrumbs, isRoot } = useBreadcrumbs();\r\n\r\n  if (isRoot) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Breadcrumb ref={ref} className={className} {...props}>\r\n      <BreadcrumbList>\r\n        <BreadcrumbItem>\r\n          <BreadcrumbLink to={homePath} aria-label=\"Home\">\r\n            <Home className=\"h-4 w-4\" />\r\n          </BreadcrumbLink>\r\n        </BreadcrumbItem>\r\n        <BreadcrumbSeparator />\r\n        {breadcrumbs.map((crumb, index) => {\r\n          const isLast = index === breadcrumbs.length - 1;\r\n          const hasPath = crumb.path !== null && crumb.path !== undefined;\r\n\r\n          return (\r\n            <React.Fragment key={index}>\r\n              <BreadcrumbItem>\r\n                {isLast || !hasPath ? (\r\n                  <BreadcrumbPage>{crumb.label}</BreadcrumbPage>\r\n                ) : (\r\n                  <BreadcrumbLink to={crumb.path}>\r\n                    {crumb.label}\r\n                  </BreadcrumbLink>\r\n                )}\r\n              </BreadcrumbItem>\r\n              {!isLast && <BreadcrumbSeparator />}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </BreadcrumbList>\r\n    </Breadcrumb>\r\n  );\r\n});\r\n\r\nBreadcrumbNavWithHome.displayName = \"BreadcrumbNavWithHome\";\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbNav,\r\n  BreadcrumbNavCompact,\r\n  BreadcrumbNavWithHome,\r\n};\r\n\r\nexport default BreadcrumbNav;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Sun, Moon, Bell, Menu, MessageCircle, Calendar, ChevronDown, RefreshCw, GraduationCap, Layout, Search as SearchIcon } from 'lucide-react';\r\nimport LogoWhite from '../assets/SeshNx-PNG cCropped white text.png';\r\nimport LogoDark from '../assets/SeshNx-PNG cCropped.png';\r\nimport UserAvatar from './shared/UserAvatar';\r\nimport NotificationsPanel, { NotificationBadge } from './social/NotificationsPanel';\r\nimport { useNotifications } from '../hooks/useNotifications';\r\nimport { getDisplayRole } from '../config/constants';\r\nimport { useLanguage } from '../contexts/LanguageContext';\r\nimport { BreadcrumbNav } from './ui/breadcrumb';\r\n\r\nexport default function Navbar({\r\n    user,\r\n    userData,\r\n    subProfiles,\r\n    darkMode,\r\n    toggleTheme,\r\n    activeTab,\r\n    setActiveTab,\r\n    onMenuClick,\r\n    onRoleSwitch,\r\n    openPublicProfile, // Add callback for viewing profiles\r\n    showBreadcrumbs = false, // New prop for breadcrumb visibility (default off)\r\n}) {\r\n  const location = useLocation();\r\n  const [showNotifs, setShowNotifs] = useState(false);\r\n  const [showRoleMenu, setShowRoleMenu] = useState(false);\r\n  const [isSwitching, setIsSwitching] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const notifRef = useRef(null);\r\n  const roleRef = useRef(null);\r\n  const searchInputRef = useRef(null);\r\n  const { t } = useLanguage();\r\n\r\n  // Use the new notifications system\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading: notifsLoading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    deleteNotification,\r\n    clearAll\r\n  } = useNotifications(user?.id || user?.uid);\r\n\r\n  const activeRole = userData?.activeProfileRole || userData?.accountTypes?.[0] || 'User';\r\n\r\n  // Get display role - checks sub-profiles for Talent subrole\r\n  const getDisplayRoleLocal = (role) => {\r\n    if (!role || role === 'User' || role === 'Fan') return role || 'User';\r\n\r\n    // For Talent, check if they have a subRole set in their sub-profile\r\n    if (role === 'Talent') {\r\n      const talentSub = subProfiles?.['Talent'];\r\n      const subRole = talentSub?.profile_data?.talentSubRole || talentSub?.talentSubRole;\r\n      if (subRole && subRole !== '') return subRole;\r\n    }\r\n\r\n    return role;\r\n  };\r\n\r\n  const displayRole = getDisplayRoleLocal(activeRole);\r\n  const roles = userData?.accountTypes || [];\r\n\r\n  const eduRoles = ['Student', 'EDUStaff', 'Intern', 'EDUAdmin'];\r\n  const hasEduAccess = roles.some(r => eduRoles.includes(r));\r\n  const isEduTab = activeTab.startsWith('edu');\r\n\r\n  const getDisplayName = (role) => {\r\n      if (!role || role === 'Main' || role === 'Fan' || role === 'User') {\r\n          return userData?.effectiveDisplayName || userData?.firstName || 'User';\r\n      }\r\n      const sub = subProfiles?.[role];\r\n      return sub?.displayName || userData?.effectiveDisplayName || userData?.firstName || 'User';\r\n  };\r\n\r\n  const currentDisplayName = getDisplayName(activeRole);\r\n\r\n  const handleEduClick = () => {\r\n      if (activeRole === 'Student') {\r\n          setActiveTab('edu-student');\r\n      } else if (activeRole === 'Intern') {\r\n          setActiveTab('edu-intern'); \r\n      } else {\r\n          setActiveTab('edu-overview'); \r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n      if (activeRole) {\r\n          setIsSwitching(false);\r\n          requestAnimationFrame(() => {\r\n              requestAnimationFrame(() => {\r\n                  setIsSwitching(true);\r\n              });\r\n          });\r\n          const timer = setTimeout(() => setIsSwitching(false), 600); \r\n          return () => clearTimeout(timer);\r\n      }\r\n  }, [activeRole]);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (notifRef.current && !notifRef.current.contains(event.target)) {\r\n        setShowNotifs(false);\r\n      }\r\n      if (roleRef.current && !roleRef.current.contains(event.target)) {\r\n        setShowRoleMenu(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, [notifRef, roleRef]);\r\n\r\n  const handleNotifUserClick = (userId) => {\r\n      setShowNotifs(false);\r\n      if (openPublicProfile) {\r\n          openPublicProfile(userId);\r\n      }\r\n  };\r\n\r\n  const handleNotifPostClick = (postId) => {\r\n      setShowNotifs(false);\r\n      setActiveTab('feed'); // Navigate to feed where the post would be\r\n  };\r\n  \r\n  // Handler for quick booking accept/decline from notifications\r\n  const handleBookingAction = async (bookingId, action, notificationId) => {\r\n      try {\r\n          if (!supabase) throw new Error('Supabase not initialized');\r\n          \r\n          // Update booking status\r\n          const { error: bookingError } = await supabase\r\n              .from('bookings')\r\n              .update({\r\n                  status: action === 'accept' ? 'Confirmed' : 'Declined',\r\n                  responded_at: new Date().toISOString()\r\n              })\r\n              .eq('id', bookingId);\r\n          \r\n          if (bookingError) throw bookingError;\r\n          \r\n          // Mark notification as actioned\r\n          if (notificationId && (user?.id || user?.uid)) {\r\n              const userId = user?.id || user?.uid;\r\n              const { error: notifError } = await supabase\r\n                  .from('notifications')\r\n                  .update({ \r\n                      action_taken: action,\r\n                      read: true,\r\n                      updated_at: new Date().toISOString()\r\n                  })\r\n                  .eq('id', notificationId)\r\n                  .eq('user_id', userId);\r\n              \r\n              if (notifError) throw notifError;\r\n          }\r\n      } catch (error) {\r\n          console.error('Booking action failed:', error);\r\n          throw error;\r\n      }\r\n  };\r\n\r\n  const handleRoleSelect = (role) => {\r\n      if (onRoleSwitch) onRoleSwitch(role);\r\n      setShowRoleMenu(false);\r\n  };\r\n\r\n  // Global search submit: navigate to feed for now\r\n  const handleSearchSubmit = (e) => {\r\n      e.preventDefault();\r\n      setShowNotifs(false);\r\n      setActiveTab('feed');\r\n      // Placeholder: tie into actual search when backend ready\r\n  };\r\n\r\n  // Keyboard shortcut Ctrl/Cmd + K to focus search\r\n  useEffect(() => {\r\n      const handleKeyDown = (e) => {\r\n          const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n          const metaKey = isMac ? e.metaKey : e.ctrlKey;\r\n          if (metaKey && e.key.toLowerCase() === 'k') {\r\n              e.preventDefault();\r\n              searchInputRef.current?.focus();\r\n          }\r\n      };\r\n      window.addEventListener('keydown', handleKeyDown);\r\n      return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, []);\r\n\r\n  const formatTime = (ts) => {\r\n      if (!ts) return '';\r\n      const date = ts.toMillis ? new Date(ts.toMillis()) : new Date(ts);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffMins = Math.floor(diffMs / 60000);\r\n      const diffHours = Math.floor(diffMins / 60);\r\n      if (diffMins < 60) return `${diffMins}m ago`;\r\n      if (diffHours < 24) return `${diffHours}h ago`;\r\n      return date.toLocaleDateString();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div \r\n        className={`fixed top-0 bottom-0 w-full pointer-events-none z-[9999] \r\n          bg-gradient-to-r from-transparent via-white/30 dark:via-white/10 to-transparent\r\n          ${isSwitching ? 'left-[-100%] transition-all duration-500 ease-out' : 'left-[100%] transition-none duration-0'}\r\n        `}\r\n      ></div>\r\n\r\n      <nav className=\"h-16 bg-white dark:bg-dark-card border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 shrink-0 z-20 sticky top-0\">\r\n        <div className=\"flex items-center gap-3 min-w-[180px]\">\r\n          <button \r\n              onClick={onMenuClick}\r\n              className=\"p-2 -ml-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 lg:hidden\"\r\n              aria-label=\"Open navigation menu\"\r\n              aria-expanded=\"false\"\r\n          >\r\n              <Menu size={24} aria-hidden=\"true\" />\r\n          </button>\r\n\r\n          <div className=\"flex items-center gap-2 cursor-pointer\" onClick={()=>setActiveTab('dashboard')}>\r\n              <img \r\n                src={darkMode ? LogoWhite : LogoDark} \r\n                alt=\"SeshNx Logo\" \r\n                className=\"h-8 w-auto object-contain transition-opacity duration-300\" \r\n              />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Global Search - desktop only */}\r\n        <div className=\"hidden md:flex flex-1 flex-col items-center justify-center max-w-xl px-4 gap-1\">\r\n          {/* Breadcrumb Navigation - can be toggled in settings */}\r\n          {showBreadcrumbs && (\r\n            <div className=\"w-full flex justify-start\">\r\n              <BreadcrumbNav className=\"text-xs\" />\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSearchSubmit} className=\"w-full\">\r\n            <div className=\"flex items-center gap-2 w-full bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full px-3 py-1.5 focus-within:ring-2 focus-within:ring-brand-blue/70\">\r\n              <SearchIcon size={16} className=\"text-gray-400\" />\r\n              <input\r\n                ref={searchInputRef}\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder={t('searchPlaceholder')}\r\n                className=\"flex-1 bg-transparent text-sm text-gray-800 dark:text-gray-100 placeholder:text-gray-400 focus:outline-none\"\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"text-xs font-semibold text-white bg-brand-blue hover:bg-blue-600 rounded-full px-3 py-1 transition-colors\"\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3 md:gap-4\">\r\n          \r\n          {hasEduAccess && (\r\n              <div className=\"hidden md:flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1 border dark:border-gray-700\">\r\n                  <button\r\n                      onClick={() => setActiveTab('dashboard')}\r\n                      className={`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-2 transition-all ${!isEduTab ? 'bg-white dark:bg-gray-600 shadow-sm text-brand-blue dark:text-white' : 'text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200'}`}\r\n                  >\r\n                      <Layout size={14}/> Studio\r\n                  </button>\r\n                  <button\r\n                      onClick={handleEduClick}\r\n                      className={`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-2 transition-all ${isEduTab ? 'bg-white dark:bg-gray-600 shadow-sm text-indigo-600 dark:text-white' : 'text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200'}`}\r\n                  >\r\n                      <GraduationCap size={14}/> Education\r\n                  </button>\r\n              </div>\r\n          )}\r\n\r\n          {roles.length > 1 && (\r\n              <div className=\"relative hidden sm:flex items-center gap-3\" ref={roleRef}>\r\n                  <button \r\n                      onClick={() => setShowRoleMenu(!showRoleMenu)}\r\n                      className=\"group flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 text-xs font-bold transition border border-gray-200 dark:border-gray-700\"\r\n                  >\r\n                      <RefreshCw size={12} className={`text-brand-blue shrink-0 transition-transform ${isSwitching ? 'rotate-180 duration-500' : ''}`}/>\r\n                      <span>{displayRole}</span>\r\n                      <ChevronDown size={12} className={`shrink-0 transition-transform ${showRoleMenu ? 'rotate-180' : ''}`}/>\r\n                  </button>\r\n\r\n                  <div className=\"flex flex-col leading-tight\">\r\n                      <span className=\"text-[10px] text-gray-500 font-medium\">Posting as</span>\r\n                      <span className=\"text-xs font-bold dark:text-white truncate max-w-[150px]\">{currentDisplayName}</span>\r\n                  </div>\r\n\r\n                  {showRoleMenu && (\r\n                      <div className=\"absolute left-0 top-full mt-2 w-56 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-1 duration-200\">\r\n                          <div className=\"p-2 border-b dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]\">\r\n                              <span className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wider pl-2\">Switch Profile Context</span>\r\n                          </div>\r\n                          <div className=\"p-1\">\r\n                              {roles.map(role => {\r\n                                  const name = getDisplayName(role);\r\n                                  return (\r\n                                      <button \r\n                                          key={role}\r\n                                          onClick={() => handleRoleSelect(role)}\r\n                                          className={`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition flex items-center justify-between ${activeRole === role ? 'bg-blue-50 dark:bg-blue-900/20 text-brand-blue' : 'hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300'}`}\r\n                                      >\r\n                                          <div className=\"flex flex-col\">\r\n                                              <span>{name}</span>\r\n                                              <span className=\"text-[10px] opacity-70 font-normal uppercase\">{role}</span>\r\n                                          </div>\r\n                                          {activeRole === role && <div className=\"w-1.5 h-1.5 rounded-full bg-brand-blue\"></div>}\r\n                                      </button>\r\n                                  );\r\n                              })}\r\n                          </div>\r\n                      </div>\r\n                  )}\r\n              </div>\r\n          )}\r\n\r\n          <button \r\n            onClick={toggleTheme} \r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300\"\r\n            aria-label={darkMode ? 'Switch to light mode' : 'Switch to dark mode'}\r\n            title={darkMode ? 'Switch to light mode' : 'Switch to dark mode'}\r\n          >\r\n            {darkMode ? <Sun size={20} aria-hidden=\"true\" /> : <Moon size={20} aria-hidden=\"true\" />}\r\n          </button>\r\n          \r\n          <div className=\"relative\" ref={notifRef}>\r\n              <button \r\n                  className={`relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition ${showNotifs ? 'bg-gray-100 dark:bg-gray-800 text-brand-blue' : ''}`}\r\n                  onClick={() => setShowNotifs(!showNotifs)}\r\n                  aria-label={`Notifications${unreadCount > 0 ? ` (${unreadCount} unread)` : ''}`}\r\n                  aria-expanded={showNotifs}\r\n              >\r\n                  <Bell size={20} aria-hidden=\"true\" />\r\n                  <NotificationBadge count={unreadCount} />\r\n              </button>\r\n\r\n              {showNotifs && (\r\n                  <NotificationsPanel\r\n                      notifications={notifications}\r\n                      unreadCount={unreadCount}\r\n                      loading={notifsLoading}\r\n                      onMarkAsRead={markAsRead}\r\n                      onMarkAllAsRead={markAllAsRead}\r\n                      onDeleteNotification={deleteNotification}\r\n                      onClearAll={clearAll}\r\n                      onUserClick={handleNotifUserClick}\r\n                      onPostClick={handleNotifPostClick}\r\n                      onBookingAction={handleBookingAction}\r\n                      onClose={() => setShowNotifs(false)}\r\n                  />\r\n              )}\r\n          </div>\r\n\r\n          {/* FIX: Use UserAvatar */}\r\n          <UserAvatar \r\n              src={userData?.photoURL} \r\n              name={currentDisplayName} \r\n              size=\"sm\" \r\n              className=\"border-2 border-transparent hover:border-brand-blue transition\"\r\n              onClick={() => setActiveTab('profile')}\r\n          />\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n"],"names":["NotificationIcon","type","iconProps","iconMap","jsx","UserPlus","Heart","MessageCircle","AtSign","CornerDownRight","Bookmark","Calendar","Check","X","colorMap","Bell","formatTime","ts","date","diffMs","diffMins","diffHours","diffDays","NotificationItem","notification","onMarkAsRead","onDelete","onUserClick","onPostClick","onBookingAction","actionLoading","setActionLoading","useState","handleClick","handleBookingAction","e","action","toast","err","isBookingNotification","jsxs","motion","UserAvatar","Clock","DollarSign","Loader2","Fragment","NotificationsPanel","notifications","unreadCount","loading","onMarkAllAsRead","onDeleteNotification","onClearAll","onClose","CheckCheck","AnimatePresence","Trash2","NotificationBadge","count","breadcrumbConfig","dynamicBreadcrumbPatterns","routeAliases","getBreadcrumbsForPath","pathname","params","normalizedPath","pattern","breadcrumbs","match","matchDynamicRoute","crumb","getDynamicLabel","buildBreadcrumbsFromPath","patternSegments","pathSegments","i","patternSegment","pathSegment","paramName","labelKey","segments","currentPath","segment","label","word","hasBreadcrumbs","useBreadcrumbs","location","useLocation","useParams","t","useLanguage","useMemo","currentLabel","parentPath","hasConfiguredBreadcrumbs","rootPath","isRoot","cn","inputs","twMerge","clsx","Breadcrumb","React","className","props","ref","BreadcrumbList","BreadcrumbItem","BreadcrumbLink","to","children","Link","BreadcrumbPage","BreadcrumbSeparator","ChevronRight","BreadcrumbNav","showHome","homeLabel","homePath","separator","displayBreadcrumbs","Separator","index","isLast","hasPath","BreadcrumbNavCompact","hasParent","parentLabel","BreadcrumbNavWithHome","Home","Navbar","user","userData","subProfiles","darkMode","toggleTheme","activeTab","setActiveTab","onMenuClick","onRoleSwitch","openPublicProfile","showBreadcrumbs","showNotifs","setShowNotifs","showRoleMenu","setShowRoleMenu","isSwitching","setIsSwitching","searchQuery","setSearchQuery","notifRef","useRef","roleRef","searchInputRef","notifsLoading","markAsRead","markAllAsRead","deleteNotification","clearAll","useNotifications","activeRole","_a","displayRole","role","talentSub","subRole","roles","eduRoles","hasEduAccess","r","isEduTab","getDisplayName","sub","currentDisplayName","handleEduClick","useEffect","timer","handleClickOutside","event","handleNotifUserClick","userId","handleNotifPostClick","postId","bookingId","notificationId","bookingError","notifError","error","handleRoleSelect","handleSearchSubmit","handleKeyDown","Menu","LogoWhite","LogoDark","SearchIcon","Layout","GraduationCap","RefreshCw","ChevronDown","name","Sun","Moon"],"mappings":"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"}