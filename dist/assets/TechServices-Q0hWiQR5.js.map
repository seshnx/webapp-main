{"version":3,"file":"TechServices-Q0hWiQR5.js","sources":["../../src/components/tech/ServiceJobBoard.jsx","../../src/components/tech/TechBookingModal.jsx","../../src/components/tech/TechDirectory.jsx","../../src/components/tech/TechBroadcastBuilder.jsx","../../src/components/tech/TechGearDatabase.jsx","../../src/components/tech/TechProfileEditor.jsx","../../src/components/TechServices.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { User, MessageCircle } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\n\r\nexport default function ServiceJobBoard({ user }) {\r\n    const [requests, setRequests] = useState([]);\r\n    const [filter, setFilter] = useState('All');\r\n\r\n    useEffect(() => {\r\n        if (!supabase) return;\r\n\r\n        // Initial fetch\r\n        supabase\r\n            .from('service_requests')\r\n            .select('*')\r\n            .order('created_at', { ascending: false })\r\n            .limit(50)\r\n            .then(({ data, error }) => {\r\n                if (error) {\r\n                    console.error('Error fetching service requests:', error);\r\n                    return;\r\n                }\r\n                setRequests((data || []).map(item => ({\r\n                    id: item.id,\r\n                    ...item,\r\n                    timestamp: item.created_at,\r\n                    userId: item.user_id,\r\n                    userName: item.user_name\r\n                })));\r\n            });\r\n\r\n        // Subscribe to realtime changes\r\n        const channel = supabase\r\n            .channel('service-requests')\r\n            .on(\r\n                'postgres_changes',\r\n                {\r\n                    event: '*',\r\n                    schema: 'public',\r\n                    table: 'service_requests'\r\n                },\r\n                async () => {\r\n                    const { data } = await supabase\r\n                        .from('service_requests')\r\n                        .select('*')\r\n                        .order('created_at', { ascending: false })\r\n                        .limit(50);\r\n                    \r\n                    if (data) {\r\n                        setRequests(data.map(item => ({\r\n                            id: item.id,\r\n                            ...item,\r\n                            timestamp: item.created_at,\r\n                            userId: item.user_id,\r\n                            userName: item.user_name\r\n                        })));\r\n                    }\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex gap-2 overflow-x-auto pb-4 scrollbar-hide mb-2\">\r\n                <button onClick={() => setFilter('All')} className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap border transition ${filter === 'All' ? 'bg-orange-500 text-white border-orange-600' : 'bg-white dark:bg-dark-card border-gray-200 dark:border-gray-700 dark:text-gray-300'}`}>All Jobs</button>\r\n                {SERVICE_CATALOGUE.map(cat => (\r\n                    <button key={cat.id} onClick={() => setFilter(cat.label)} className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap border transition ${filter === cat.label ? 'bg-orange-500 text-white border-orange-600' : 'bg-white dark:bg-dark-card border-gray-200 dark:border-gray-700 dark:text-gray-300'}`}>\r\n                        {cat.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {requests.filter(r => filter === 'All' || r.category === filter).map(req => (\r\n                    <div key={req.id} className=\"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 hover:border-orange-400 transition shadow-sm group\">\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                            <span className=\"text-[10px] font-bold uppercase text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded\">{req.category}</span>\r\n                            {req.budget && <span className=\"text-sm font-bold text-green-600 dark:text-green-400\">${req.budget}</span>}\r\n                        </div>\r\n                        <h3 className=\"font-bold text-lg dark:text-white mb-1\">{req.topic}</h3>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-4\">{req.description}</p>\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-500 border-t dark:border-gray-700 pt-3\">\r\n                            <div className=\"flex items-center gap-2\"><User size={12}/> {req.userName}</div>\r\n                            {req.userId !== (user?.id || user?.uid) && <button className=\"bg-gray-900 dark:bg-white dark:text-black text-white px-3 py-1.5 rounded font-bold hover:opacity-80 flex items-center gap-1\"><MessageCircle size={12}/> Message</button>}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                {requests.length === 0 && <div className=\"col-span-full text-center py-12 text-gray-400\">No active requests.</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { X, Wrench, Calendar, DollarSign, Loader2, Video } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { useMediaUpload } from '../../hooks/useMediaUpload';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\n\r\nexport default function TechBookingModal({ user, userData, target, onClose }) {\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [form, setForm] = useState({\r\n        serviceCategory: 'Repair', equipmentName: '', issueDescription: '',\r\n        logistics: 'Drop-off', preferredDate: '', budgetCap: ''\r\n    });\r\n    const [attachments, setAttachments] = useState([]);\r\n    const { uploadMedia, uploading } = useMediaUpload();\r\n\r\n    const handleFileUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const result = await uploadMedia(file, `tech_requests/${user.uid}`);\r\n        if (result) setAttachments(prev => [...prev, result]);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!form.equipmentName || !form.issueDescription || !supabase) {\r\n            if (!form.equipmentName || !form.issueDescription) alert(\"Please describe the equipment and the issue.\");\r\n            return;\r\n        }\r\n        setSubmitting(true);\r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            await supabase\r\n                .from('bookings')\r\n                .insert({\r\n                    sender_id: userId,\r\n                    sender_name: userData ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' : 'User',\r\n                    target_id: target.id,\r\n                    target_name: target.firstName ? `${target.firstName} ${target.lastName}` : target.name,\r\n                    type: 'TechRequest',\r\n                    service_type: form.serviceCategory,\r\n                    equipment: form.equipmentName,\r\n                    description: form.issueDescription,\r\n                    logistics: form.logistics,\r\n                    budget_cap: form.budgetCap || null,\r\n                    status: 'Pending',\r\n                    date: form.preferredDate || 'Flexible',\r\n                    message: `[${form.serviceCategory}] ${form.equipmentName}: ${form.issueDescription}`,\r\n                    attachments: attachments || [],\r\n                    timestamp: new Date().toISOString()\r\n                });\r\n            alert(\"Service request sent!\");\r\n            onClose();\r\n        } catch (e) { alert(\"Failed to send.\"); }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4 animate-in fade-in zoom-in-95\">\r\n            <div className=\"bg-white dark:bg-[#2c2e36] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700 flex flex-col max-h-[90vh]\">\r\n                <div className=\"p-5 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-[#23262f]\">\r\n                    <div>\r\n                        <h3 className=\"font-bold text-lg dark:text-white flex items-center gap-2\"><Wrench size={18} className=\"text-orange-500\"/> Service Request</h3>\r\n                        <p className=\"text-xs text-gray-500\">Hiring <span className=\"font-bold text-orange-600 dark:text-orange-400\">{target.firstName} {target.lastName}</span></p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition\"><X size={20}/></button>\r\n                </div>\r\n                <div className=\"p-6 overflow-y-auto space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Service Type</label><select className=\"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.serviceCategory} onChange={e => setForm({...form, serviceCategory: e.target.value})}>{SERVICE_CATALOGUE.map(s => <option key={s.id} value={s.label}>{s.label}</option>)}</select></div>\r\n                        <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Logistics</label><select className=\"w-full p-2.5 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.logistics} onChange={e => setForm({...form, logistics: e.target.value})}><option value=\"Drop-off\">I will drop it off</option><option value=\"On-site\">Tech comes to me</option><option value=\"Ship\">I will ship it</option></select></div>\r\n                    </div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Equipment</label><input className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white font-bold\" placeholder=\"e.g. Fender Twin Reverb\" value={form.equipmentName} onChange={e => setForm({...form, equipmentName: e.target.value})}/></div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Issue Description</label><textarea className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px] text-sm\" placeholder=\"Describe symptoms...\" value={form.issueDescription} onChange={e => setForm({...form, issueDescription: e.target.value})}/></div>\r\n                    <div className=\"pt-4 border-t dark:border-gray-700\">\r\n                        <label className=\"flex items-center gap-2 cursor-pointer text-brand-blue hover:text-blue-600 font-bold mb-3\"><Video size={16}/> Add Video/Photo <input type=\"file\" className=\"hidden\" accept=\"image/*,video/*\" onChange={handleFileUpload} disabled={uploading}/></label>\r\n                        <div className=\"flex gap-2 overflow-x-auto\">{attachments.map((f, i) => <div key={i} className=\"h-12 w-12 bg-black rounded border dark:border-gray-600 overflow-hidden\"><img src={f.url} className=\"h-full w-full object-cover\"/></div>)}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-5 border-t dark:border-gray-700 bg-gray-50 dark:bg-[#23262f]\"><button onClick={handleSubmit} disabled={submitting || uploading} className=\"w-full bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition shadow-lg\">{submitting ? <Loader2 className=\"animate-spin mx-auto\"/> : \"Submit Request\"}</button></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Search, Loader2, User, Briefcase, Wrench } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { TECH_SPECIALTIES } from '../../config/constants';\r\nimport TechBookingModal from './TechBookingModal';\r\n\r\nexport default function TechDirectory({ user, userData, openPublicProfile }) {\r\n    const [techs, setTechs] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [search, setSearch] = useState('');\r\n    const [specialtyFilter, setSpecialtyFilter] = useState('');\r\n    const [selectedTech, setSelectedTech] = useState(null);\r\n\r\n    const runSearch = async () => {\r\n        if (!supabase) return;\r\n        setLoading(true);\r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            let query = supabase\r\n                .from('profiles')\r\n                .select('id, first_name, last_name, photo_url, account_types, sub_roles, skills, rate, search_terms')\r\n                .contains('account_types', ['Technician'])\r\n                .limit(20);\r\n            \r\n            if (search) {\r\n                query = query.ilike('search_terms', `%${search.toLowerCase()}%`);\r\n            }\r\n            \r\n            const { data: profilesData, error } = await query;\r\n            \r\n            if (error) throw error;\r\n            \r\n            let results = (profilesData || [])\r\n                .filter(t => t.id !== userId)\r\n                .map(t => ({\r\n                    id: t.id,\r\n                    firstName: t.first_name,\r\n                    lastName: t.last_name,\r\n                    photoURL: t.photo_url,\r\n                    accountTypes: t.account_types,\r\n                    subRoles: t.sub_roles,\r\n                    skills: t.skills,\r\n                    rate: t.rate,\r\n                    searchTerms: t.search_terms\r\n                }));\r\n\r\n            if (specialtyFilter) {\r\n                results = results.filter(t => t.subRoles && t.subRoles.includes(specialtyFilter));\r\n            }\r\n\r\n            setTechs(results);\r\n        } catch (e) { console.error(e); }\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => { runSearch(); }, [specialtyFilter]);\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-4 top-3.5 text-gray-400\" size={18}/>\r\n                    <input \r\n                        className=\"w-full pl-12 p-3 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-orange-500 dark:text-white\"\r\n                        placeholder=\"Search technicians...\"\r\n                        value={search} onChange={e => setSearch(e.target.value)} onKeyDown={e => e.key === 'Enter' && runSearch()}\r\n                    />\r\n                </div>\r\n                <div className=\"md:w-1/3\">\r\n                    <select \r\n                        className=\"w-full p-3 bg-white dark:bg-[#2c2e36] border dark:border-gray-700 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-orange-500 dark:text-white cursor-pointer\"\r\n                        value={specialtyFilter}\r\n                        onChange={e => setSpecialtyFilter(e.target.value)}\r\n                    >\r\n                        <option value=\"\">All Specialties</option>\r\n                        {TECH_SPECIALTIES.map(s => <option key={s} value={s}>{s}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {loading ? <div className=\"text-center py-12\"><Loader2 className=\"animate-spin mx-auto text-orange-500\"/></div> : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {techs.map(tech => (\r\n                        <div key={tech.id} className=\"bg-white dark:bg-[#2c2e36] rounded-xl border dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-lg transition group\">\r\n                            <div className=\"h-24 bg-gradient-to-r from-slate-700 to-slate-600 relative\">\r\n                                <div className=\"absolute -bottom-8 left-6\">\r\n                                    <div className=\"h-16 w-16 rounded-full border-4 border-white dark:border-[#2c2e36] bg-gray-200 overflow-hidden\">\r\n                                        {tech.photoURL ? <img src={tech.photoURL} className=\"h-full w-full object-cover\"/> : <div className=\"h-full w-full flex items-center justify-center text-gray-400\"><User/></div>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pt-10 px-6 pb-6\">\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <div>\r\n                                        <h3 className=\"font-bold dark:text-white text-lg\">{tech.firstName} {tech.lastName}</h3>\r\n                                        <div className=\"text-xs text-orange-600 dark:text-orange-400 font-bold mb-2 flex items-center gap-1\">\r\n                                            <Briefcase size={12}/> {tech.subRoles?.[0] || 'Technician'}\r\n                                        </div>\r\n                                    </div>\r\n                                    {tech.rate > 0 && <div className=\"text-sm font-bold dark:text-gray-300 border border-gray-200 dark:border-gray-600 px-2 py-1 rounded-lg\">${tech.rate}/hr</div>}\r\n                                </div>\r\n                                \r\n                                <div className=\"flex flex-wrap gap-1 mb-3\">\r\n                                    {tech.subRoles?.slice(0, 3).map(role => (\r\n                                        <span key={role} className=\"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800\">{role}</span>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-wrap gap-1 mb-4 h-6 overflow-hidden\">\r\n                                    {(tech.skills?.split(',') || []).slice(0, 3).map((s,i) => (\r\n                                        <span key={i} className=\"text-[10px] text-gray-500 dark:text-gray-400 pr-2 border-r border-gray-300 dark:border-gray-600 last:border-0\">{s.trim()}</span>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-2 mt-auto\">\r\n                                    <button onClick={() => openPublicProfile(tech.id)} className=\"flex-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg text-xs font-bold transition\">Profile</button>\r\n                                    <button onClick={() => setSelectedTech(tech)} className=\"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs font-bold transition shadow-sm flex items-center justify-center gap-1\"><Wrench size={14}/> Request</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {selectedTech && (\r\n                <TechBookingModal \r\n                    user={user} \r\n                    userData={userData} \r\n                    target={selectedTech} \r\n                    onClose={() => setSelectedTech(null)} \r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Zap, ChevronDown, Loader2, Video, Image as ImageIcon, X } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { SERVICE_CATALOGUE } from '../../config/constants';\r\nimport { useMediaUpload } from '../../hooks/useMediaUpload';\r\n\r\nexport default function TechBroadcastBuilder({ user, userData, onSuccess, onCancel }) {\r\n    const [category, setCategory] = useState(SERVICE_CATALOGUE[0].label);\r\n    const [equipment, setEquipment] = useState('');\r\n    const [urgency, setUrgency] = useState('Normal');\r\n    const [budget, setBudget] = useState('');\r\n    const [details, setDetails] = useState('');\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [media, setMedia] = useState(null); \r\n    const { uploadMedia, uploading } = useMediaUpload();\r\n\r\n    const handleFileSelect = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        const result = await uploadMedia(file, `service_requests/${user.uid}`);\r\n        if (result) setMedia(result);\r\n    };\r\n \r\n    const handleSubmit = async () => {\r\n        if (!equipment || !details || !supabase) {\r\n            if (!equipment || !details) alert(\"Please complete the request.\");\r\n            return;\r\n        }\r\n        setSubmitting(true);\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            \r\n            const { error } = await supabase\r\n                .from('service_requests')\r\n                .insert({\r\n                    user_id: userId,\r\n                    user_name: userData ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' : 'User',\r\n                    topic: `${category} for ${equipment}`,\r\n                    category,\r\n                    equipment,\r\n                    urgency,\r\n                    budget: budget ? parseInt(budget) : null,\r\n                    description: details,\r\n                    status: 'Open',\r\n                    attachment_url: media?.url || null\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            alert(\"Tech Request Broadcasted!\");\r\n            onSuccess();\r\n        } catch (e) { \r\n            console.error(e); \r\n            alert(\"Failed: \" + (e.message || \"Unknown error\"));\r\n        }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto bg-white dark:bg-[#2c2e36] p-8 rounded-2xl border border-orange-200 dark:border-gray-700 shadow-xl animate-in zoom-in-95\">\r\n            <h2 className=\"text-2xl font-extrabold dark:text-white mb-6 flex items-center gap-2 text-orange-600\"><Zap/> Broadcast Tech Need</h2>\r\n            \r\n            <div className=\"space-y-6\">\r\n                {/* UPDATED: Gray-800 background in dark mode for better readability */}\r\n                <div className=\"p-6 bg-orange-50 dark:bg-gray-800 rounded-xl border border-orange-100 dark:border-gray-700\">\r\n                    <div className=\"flex flex-wrap items-center gap-3 text-lg font-medium text-gray-700 dark:text-gray-200\">\r\n                        <span>I need</span>\r\n                        <div className=\"relative\">\r\n                            {/* UPDATED: Gray-700 bg for select to pop against gray-800 container */}\r\n                            <select value={category} onChange={e => setCategory(e.target.value)} className=\"appearance-none bg-white dark:bg-gray-700 border border-orange-300 dark:border-orange-700 rounded-lg py-1 pl-3 pr-8 font-bold text-orange-700 dark:text-white focus:outline-none\">\r\n                                {SERVICE_CATALOGUE.map(c => <option key={c.id} value={c.label}>{c.label}</option>)}\r\n                            </select>\r\n                            <ChevronDown size={14} className=\"absolute right-2 top-1/2 -translate-y-1/2 text-orange-500 dark:text-white pointer-events-none\"/>\r\n                        </div>\r\n                        <span>for my</span>\r\n                        <input className=\"bg-transparent border-b-2 border-orange-300 dark:border-orange-700 text-center w-40 font-bold focus:outline-none focus:border-orange-500 dark:text-white\" placeholder=\"Equipment Name\" value={equipment} onChange={e => setEquipment(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Urgency</label>\r\n                        <select className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={urgency} onChange={e => setUrgency(e.target.value)}>\r\n                            <option>Normal</option>\r\n                            <option>High (Session Blocked)</option>\r\n                            <option>Emergency (24h)</option>\r\n                            <option>Flexible</option>\r\n                        </select>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Est. Budget ($)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" placeholder=\"Optional\" value={budget} onChange={e => setBudget(e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Details</label>\r\n                    <textarea className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white min-h-[100px]\" placeholder=\"Describe the issue, specific model, symptoms...\" value={details} onChange={e => setDetails(e.target.value)}/>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-2 block\">Visual Reference</label>\r\n                    {!media && !uploading && (\r\n                        <label className=\"flex items-center justify-center gap-2 w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition text-gray-500\">\r\n                            <Video size={20}/><span className=\"text-sm font-bold\">Upload Video or Image</span>\r\n                            <input type=\"file\" className=\"hidden\" accept=\"video/*,image/*\" onChange={handleFileSelect} />\r\n                        </label>\r\n                    )}\r\n                    {media && (\r\n                        <div className=\"relative w-full rounded-xl overflow-hidden border dark:border-gray-700 bg-black\">\r\n                            {media.type === 'video' ? <video src={media.url} controls className=\"w-full h-48 object-contain\"/> : <img src={media.url} className=\"w-full h-48 object-contain\"/>}\r\n                            <button onClick={() => setMedia(null)} className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600\"><X size={14}/></button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                    <button onClick={onCancel} className=\"flex-1 py-3 text-gray-500 font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition\">Cancel</button>\r\n                    <button onClick={handleSubmit} disabled={submitting || uploading} className=\"flex-1 bg-orange-600 text-white py-3 rounded-xl font-bold hover:bg-orange-700 transition flex items-center justify-center gap-2 disabled:opacity-50\">\r\n                        {submitting ? <Loader2 className=\"animate-spin\"/> : \"Broadcast Now\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Database, CheckCircle, Loader2, User, ThumbsUp, ThumbsDown, Copy \r\n} from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { EQUIP_CATEGORIES } from '../../config/constants';\r\n\r\nexport default function TechGearDatabase({ user, isTech }) {\r\n    const [view, setView] = useState('feed'); \r\n    const [pendingItems, setPendingItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!supabase) return;\r\n        \r\n        const channel = supabase\r\n            .channel('equipment-submissions')\r\n            .on('postgres_changes', {\r\n                event: '*',\r\n                schema: 'public',\r\n                table: 'equipment_submissions',\r\n                filter: 'status=eq.pending'\r\n            }, () => {\r\n                loadPendingItems();\r\n            })\r\n            .subscribe();\r\n\r\n        loadPendingItems();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [user?.id, user?.uid]);\r\n\r\n    const loadPendingItems = async () => {\r\n        if (!supabase) return;\r\n        setLoading(true);\r\n        try {\r\n            const { data: itemsData, error } = await supabase\r\n                .from('equipment_submissions')\r\n                .select('*')\r\n                .eq('status', 'pending')\r\n                .order('timestamp', { ascending: false })\r\n                .limit(20);\r\n            \r\n            if (error) throw error;\r\n            \r\n            setPendingItems((itemsData || []).map(item => ({\r\n                id: item.id,\r\n                ...item,\r\n                submittedBy: item.submitted_by,\r\n                timestamp: item.timestamp\r\n            })));\r\n        } catch (error) {\r\n            console.error('Error loading pending items:', error);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleVote = async (itemId, voteType, currentData) => {\r\n        if (!isTech || !supabase) {\r\n            if (!isTech) alert(\"Only verified Technicians can vote on gear accuracy.\");\r\n            return;\r\n        }\r\n        \r\n        const userId = user?.id || user?.uid;\r\n        try {\r\n            // Get current votes and add new vote\r\n            const currentVotes = currentData.votes || {};\r\n            const voteArray = currentVotes[voteType] || [];\r\n            if (voteArray.includes(userId)) {\r\n                alert(\"You've already voted on this item.\");\r\n                return;\r\n            }\r\n            \r\n            const updatedVotes = {\r\n                ...currentVotes,\r\n                [voteType]: [...voteArray, userId]\r\n            };\r\n            \r\n            await supabase\r\n                .from('equipment_submissions')\r\n                .update({ votes: updatedVotes })\r\n                .eq('id', itemId);\r\n\r\n            const YES_THRESHOLD = 3;\r\n            const REJECT_THRESHOLD = 3;\r\n\r\n            const yesVotes = (updatedVotes.yes?.length || 0);\r\n            const fakeVotes = (updatedVotes.fake?.length || 0);\r\n            const dupVotes = (updatedVotes.duplicate?.length || 0);\r\n\r\n            if (yesVotes >= YES_THRESHOLD) {\r\n                // Add to equipment database\r\n                await supabase\r\n                    .from('equipment_database')\r\n                    .insert({\r\n                        name: currentData.model,\r\n                        brand: currentData.brand,\r\n                        category: currentData.category,\r\n                        sub_category: currentData.subCategory,\r\n                        specs: currentData.specs,\r\n                        verified_by: [userId],\r\n                        added_by: currentData.submittedBy,\r\n                        added_at: new Date().toISOString()\r\n                    });\r\n                \r\n                // Update submission status\r\n                await supabase\r\n                    .from('equipment_submissions')\r\n                    .update({ status: 'approved' })\r\n                    .eq('id', itemId);\r\n                \r\n                // Update wallets (using RPC or direct update)\r\n                const { data: submitterWallet } = await supabase\r\n                    .from('wallets')\r\n                    .select('balance')\r\n                    .eq('user_id', currentData.submittedBy)\r\n                    .single();\r\n                \r\n                const { data: voterWallet } = await supabase\r\n                    .from('wallets')\r\n                    .select('balance')\r\n                    .eq('user_id', userId)\r\n                    .single();\r\n                \r\n                if (submitterWallet) {\r\n                    await supabase\r\n                        .from('wallets')\r\n                        .update({ balance: (submitterWallet.balance || 0) + 50 })\r\n                        .eq('user_id', currentData.submittedBy);\r\n                }\r\n                \r\n                if (voterWallet) {\r\n                    await supabase\r\n                        .from('wallets')\r\n                        .update({ balance: (voterWallet.balance || 0) + 5 })\r\n                        .eq('user_id', userId);\r\n                }\r\n                \r\n                alert(\"Consensus reached! Item approved and rewards distributed.\");\r\n\r\n            } else if (fakeVotes >= REJECT_THRESHOLD || dupVotes >= REJECT_THRESHOLD) {\r\n                await supabase\r\n                    .from('equipment_submissions')\r\n                    .update({ status: 'rejected' })\r\n                    .eq('id', itemId);\r\n            }\r\n        } catch (e) { console.error(\"Voting failed:\", e); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold dark:text-white flex items-center gap-2\"><Database className=\"text-orange-500\"/> Gear Knowledge Base</h3>\r\n                    <p className=\"text-sm text-gray-500\">Crowdsourced equipment specs verified by pros.</p>\r\n                </div>\r\n                <div className=\"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg\">\r\n                    <button onClick={() => setView('feed')} className={`px-4 py-2 rounded-md text-xs font-bold transition ${view === 'feed' ? 'bg-white dark:bg-gray-600 shadow text-orange-600 dark:text-orange-400' : 'text-gray-500'}`}>The Bench (Queue)</button>\r\n                    <button onClick={() => setView('submit')} className={`px-4 py-2 rounded-md text-xs font-bold transition ${view === 'submit' ? 'bg-white dark:bg-gray-600 shadow text-orange-600 dark:text-orange-400' : 'text-gray-500'}`}>Submit New Gear</button>\r\n                </div>\r\n            </div>\r\n\r\n            {view === 'feed' && (\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                    {loading ? <div className=\"p-10 text-center\"><Loader2 className=\"animate-spin mx-auto\"/></div> : \r\n                     pendingItems.length === 0 ? (\r\n                        <div className=\"text-center py-12 border-2 border-dashed dark:border-gray-700 rounded-xl\">\r\n                            <CheckCircle size={48} className=\"mx-auto text-green-500 mb-2 opacity-50\"/>\r\n                            <p className=\"text-gray-500\">The bench is clear. No pending submissions.</p>\r\n                        </div>\r\n                     ) : (\r\n                        pendingItems.map(item => (\r\n                            <div key={item.id} className=\"bg-white dark:bg-[#2c2e36] p-5 rounded-xl border dark:border-gray-700 shadow-sm flex flex-col md:flex-row gap-6\">\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <span className=\"text-[10px] font-bold uppercase bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-500\">{item.brand}</span>\r\n                                        <span className=\"text-[10px] font-bold uppercase bg-blue-50 dark:bg-blue-900/20 text-blue-600 px-2 py-0.5 rounded\">{item.category?.replace(/_/g, ' ')}</span>\r\n                                    </div>\r\n                                    <h4 className=\"text-lg font-extrabold dark:text-white mb-2\">{item.model}</h4>\r\n                                    <div className=\"bg-gray-50 dark:bg-black/20 p-3 rounded-lg text-sm text-gray-600 dark:text-gray-300 mb-2 border dark:border-gray-700\">{item.specs}</div>\r\n                                    <div className=\"text-xs text-gray-400 flex items-center gap-1\"><User size={12}/> Submitted by {item.submitterName || 'Unknown'} â€¢ 50 TK Reward Pending</div>\r\n                                </div>\r\n                                <div className=\"w-full md:w-48 flex flex-col justify-center gap-2 border-l dark:border-gray-700 pl-0 md:pl-6\">\r\n                                    <button onClick={() => handleVote(item.id, 'yes', item)} disabled={item.votes?.yes?.includes(user.uid)} className=\"w-full py-2 bg-green-100 dark:bg-green-900/20 hover:bg-green-200 text-green-700 dark:text-green-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><ThumbsUp size={14}/> Yes ({item.votes?.yes?.length || 0})</button>\r\n                                    <button onClick={() => handleVote(item.id, 'fake', item)} disabled={item.votes?.fake?.includes(user.uid)} className=\"w-full py-2 bg-red-100 dark:bg-red-900/20 hover:bg-red-200 text-red-700 dark:text-red-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><ThumbsDown size={14}/> Fake ({item.votes?.fake?.length || 0})</button>\r\n                                    <button onClick={() => handleVote(item.id, 'duplicate', item)} disabled={item.votes?.duplicate?.includes(user.uid)} className=\"w-full py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 text-gray-600 dark:text-gray-300 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition disabled:opacity-50\"><Copy size={14}/> Dup ({item.votes?.duplicate?.length || 0})</button>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                     )}\r\n                </div>\r\n            )}\r\n\r\n            {view === 'submit' && <GearSubmissionForm user={user} userData={userData} onSuccess={() => setView('feed')} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction GearSubmissionForm({ user, userData, onSuccess }) {\r\n    const [form, setForm] = useState({ brand: '', model: '', category: EQUIP_CATEGORIES[0].id, subCategory: '', specs: '' });\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!form.brand || !form.model || !form.specs) return alert(\"All fields required.\");\r\n        if (!supabase) {\r\n            alert(\"Database unavailable.\");\r\n            return;\r\n        }\r\n        \r\n        setSubmitting(true);\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            const submitterName = userData \r\n                ? `${userData.firstName || ''} ${userData.lastName || ''}`.trim() || 'User' \r\n                : 'User';\r\n            \r\n            const { error } = await supabase\r\n                .from('equipment_submissions')\r\n                .insert({\r\n                    brand: form.brand,\r\n                    model: form.model,\r\n                    category: form.category,\r\n                    sub_category: form.subCategory,\r\n                    specs: form.specs,\r\n                    submitted_by: userId,\r\n                    submitter_name: submitterName,\r\n                    status: 'pending',\r\n                    timestamp: new Date().toISOString(),\r\n                    votes: { yes: [], fake: [], duplicate: [] }\r\n                });\r\n            \r\n            if (error) throw error;\r\n            \r\n            alert(\"Submission Received! You'll earn 50 TK once verified.\");\r\n            onSuccess();\r\n        } catch (e) { \r\n            console.error(e); \r\n            alert(\"Submission failed: \" + (e.message || \"Unknown error\")); \r\n        }\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-xl mx-auto bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border border-orange-200 dark:border-gray-700 shadow-lg\">\r\n            <h4 className=\"font-bold text-lg dark:text-white mb-4\">Submit New Equipment</h4>\r\n            <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Category</label>\r\n                        <select className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" value={form.category} onChange={e => setForm({...form, category: e.target.value})}>\r\n                            {EQUIP_CATEGORIES.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}\r\n                        </select>\r\n                    </div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Sub-Category</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. Compressor\" value={form.subCategory} onChange={e => setForm({...form, subCategory: e.target.value})}/></div>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Brand</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. Neve\" value={form.brand} onChange={e => setForm({...form, brand: e.target.value})}/></div>\r\n                    <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Model</label><input className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm\" placeholder=\"e.g. 1073LB\" value={form.model} onChange={e => setForm({...form, model: e.target.value})}/></div>\r\n                </div>\r\n                <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Specs / Description</label><textarea className=\"w-full p-2 border rounded dark:bg-black/20 dark:border-gray-600 dark:text-white text-sm h-24\" placeholder=\"Brief technical specs...\" value={form.specs} onChange={e => setForm({...form, specs: e.target.value})}/></div>\r\n                <button onClick={handleSubmit} disabled={submitting} className=\"w-full bg-orange-600 text-white py-2.5 rounded-lg font-bold hover:bg-orange-700 flex items-center justify-center gap-2\">{submitting ? <Loader2 className=\"animate-spin\"/> : \"Submit for Verification\"}</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Save, Loader2 } from 'lucide-react';\r\nimport { supabase } from '../../config/supabase';\r\nimport { TECH_SPECIALTIES } from '../../config/constants';\r\nimport { MultiSelect } from '../shared/Inputs';\r\n\r\nexport default function TechProfileEditor({ user }) {\r\n    const [data, setData] = useState({ skills: '', rate: '', serviceRadius: '', subRoles: [] });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!user?.id && !user?.uid || !supabase) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        \r\n        const userId = user.id || user.uid;\r\n        \r\n        // Fetch sub-profile data from profiles table or sub_profiles\r\n        supabase\r\n            .from('sub_profiles')\r\n            .select('*')\r\n            .eq('user_id', userId)\r\n            .eq('role', 'Technician')\r\n            .single()\r\n            .then(({ data, error }) => {\r\n                if (error && error.code !== 'PGRST116') {\r\n                    console.error('Error fetching tech profile:', error);\r\n                }\r\n                if (data) {\r\n                    setData({\r\n                        skills: data.skills || '',\r\n                        rate: data.rate || '',\r\n                        serviceRadius: data.service_radius || data.serviceRadius || '',\r\n                        subRoles: data.sub_roles || data.subRoles || []\r\n                    });\r\n                }\r\n                setLoading(false);\r\n            });\r\n    }, [user?.id, user?.uid]);\r\n\r\n    const handleSave = async () => {\r\n        if (!supabase) {\r\n            alert(\"Database unavailable.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const userId = user?.id || user?.uid;\r\n            \r\n            // Update sub-profile\r\n            const { error: subProfileError } = await supabase\r\n                .from('sub_profiles')\r\n                .upsert({\r\n                    user_id: userId,\r\n                    role: 'Technician',\r\n                    skills: data.skills,\r\n                    rate: data.rate ? parseInt(data.rate) : null,\r\n                    service_radius: data.serviceRadius ? parseInt(data.serviceRadius) : null,\r\n                    sub_roles: data.subRoles || [],\r\n                    updated_at: new Date().toISOString()\r\n                }, { onConflict: 'user_id,role' });\r\n\r\n            if (subProfileError) throw subProfileError;\r\n            \r\n            // Sync searchable fields to public profile\r\n            const searchTerms = [\r\n                ...(data.skills ? data.skills.toLowerCase().split(',').map(s => s.trim()) : []),\r\n                ...(data.subRoles ? data.subRoles.map(r => r.toLowerCase()) : [])\r\n            ];\r\n\r\n            const { error: publicProfileError } = await supabase\r\n                .from('public_profiles')\r\n                .update({\r\n                    rate: parseInt(data.rate) || 0,\r\n                    sub_roles: data.subRoles || [],\r\n                    search_terms: searchTerms\r\n                })\r\n                .eq('id', userId);\r\n\r\n            if (publicProfileError) throw publicProfileError;\r\n\r\n            alert(\"Tech Profile Updated Successfully\");\r\n        } catch (e) { \r\n            console.error(e);\r\n            alert(\"Update failed: \" + (e.message || \"Unknown error\"));\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"p-10 text-center\"><Loader2 className=\"animate-spin mx-auto\"/></div>;\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto bg-white dark:bg-[#2c2e36] p-6 rounded-2xl border dark:border-gray-700 shadow-sm animate-in fade-in\">\r\n            <h3 className=\"font-bold text-lg dark:text-white mb-6 border-b dark:border-gray-700 pb-2\">Your Technician Settings</h3>\r\n            \r\n            <div className=\"space-y-5\">\r\n                <MultiSelect \r\n                    label=\"Primary Specialties\" \r\n                    fieldKey=\"subRoles\" \r\n                    options={TECH_SPECIALTIES} \r\n                    initialValues={data.subRoles} \r\n                    onChange={(k, v) => setData(prev => ({...prev, [k]: v}))}\r\n                />\r\n\r\n                <div>\r\n                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Detailed Skills (Comma Separated)</label>\r\n                    <input className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.skills || ''} onChange={e => setData({...data, skills: e.target.value})} placeholder=\"e.g. SSL 4000 Maintenance, Tube Bias...\"/>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Hourly Rate ($)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.rate || ''} onChange={e => setData({...data, rate: e.target.value})}/>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Service Radius (Miles)</label>\r\n                        <input type=\"number\" className=\"w-full p-3 border rounded-lg dark:bg-black/20 dark:border-gray-600 dark:text-white\" value={data.serviceRadius || ''} onChange={e => setData({...data, serviceRadius: e.target.value})}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"pt-4\">\r\n                    <button onClick={handleSave} className=\"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 flex items-center justify-center gap-2\">\r\n                        <Save size={18}/> Save Changes\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Wrench, Settings } from 'lucide-react';\r\nimport ServiceJobBoard from './tech/ServiceJobBoard';\r\nimport TechDirectory from './tech/TechDirectory';\r\nimport TechBroadcastBuilder from './tech/TechBroadcastBuilder';\r\nimport TechGearDatabase from './tech/TechGearDatabase';\r\nimport TechProfileEditor from './tech/TechProfileEditor';\r\n\r\nexport default function TechServices({ user, userData, openPublicProfile }) {\r\n    const [activeTab, setActiveTab] = useState('board');\r\n    const isTech = userData?.accountTypes?.includes('Technician');\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-6 pb-20\">\r\n            <div className=\"bg-gradient-to-r from-orange-900 to-slate-900 p-8 rounded-2xl text-white shadow-xl relative overflow-hidden flex flex-col md:flex-row justify-between items-end\">\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-2 text-orange-400 font-bold uppercase tracking-widest text-xs mb-2\"><Wrench size={14}/> SeshNx Technical</div>\r\n                    <h1 className=\"text-3xl font-extrabold mb-2\">Studio Tech Services</h1>\r\n                    <p className=\"text-slate-300 max-w-lg\">Hire professionals for equipment repair, studio wiring, and acoustic calibration.</p>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-2 relative z-10 mt-4 md:mt-0\">\r\n                    <button onClick={() => setActiveTab('board')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'board' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Job Board</button>\r\n                    <button onClick={() => setActiveTab('directory')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'directory' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Find a Tech</button>\r\n                    <button onClick={() => setActiveTab('broadcast')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'broadcast' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Post Request</button>\r\n                    <button onClick={() => setActiveTab('database')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'database' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Gear DB</button>\r\n                    {isTech && <button onClick={() => setActiveTab('profile')} className={`px-4 py-2 rounded-lg font-bold text-sm transition ${activeTab === 'profile' ? 'bg-orange-600 text-white' : 'bg-white/10 hover:bg-white/20'}`}>Tech Portal</button>}\r\n                </div>\r\n                <Settings size={200} className=\"absolute -right-10 -top-10 text-white opacity-5 rotate-12 pointer-events-none\"/>\r\n            </div>\r\n            <div className=\"min-h-[400px]\">\r\n                {activeTab === 'board' && <ServiceJobBoard user={user} />}\r\n                {activeTab === 'directory' && <TechDirectory user={user} userData={userData} openPublicProfile={openPublicProfile} />}\r\n                {activeTab === 'broadcast' && <TechBroadcastBuilder user={user} userData={userData} onSuccess={() => setActiveTab('board')} onCancel={() => setActiveTab('board')} />}\r\n                {activeTab === 'database' && <TechGearDatabase user={user} isTech={isTech} />}\r\n                {activeTab === 'profile' && isTech && <TechProfileEditor user={user} />}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["ServiceJobBoard","user","requests","setRequests","useState","filter","setFilter","useEffect","jsxs","jsx","SERVICE_CATALOGUE","cat","req","User","MessageCircle","TechBookingModal","userData","target","onClose","submitting","setSubmitting","form","setForm","attachments","setAttachments","uploadMedia","uploading","useMediaUpload","handleFileUpload","e","file","result","prev","handleSubmit","supabase","Wrench","X","s","Video","f","i","Loader2","TechDirectory","openPublicProfile","techs","setTechs","loading","setLoading","search","setSearch","specialtyFilter","setSpecialtyFilter","selectedTech","setSelectedTech","runSearch","Search","TECH_SPECIALTIES","tech","Briefcase","_a","_b","role","_c","TechBroadcastBuilder","onSuccess","onCancel","category","setCategory","equipment","setEquipment","urgency","setUrgency","budget","setBudget","details","setDetails","media","setMedia","handleFileSelect","Zap","c","ChevronDown","TechGearDatabase","isTech","view","setView","pendingItems","setPendingItems","handleVote","itemId","voteType","currentData","Database","CheckCircle","item","ThumbsUp","_e","_d","_g","_f","ThumbsDown","_i","_h","_k","_j","Copy","_m","_l","GearSubmissionForm","EQUIP_CATEGORIES","TechProfileEditor","data","setData","handleSave","MultiSelect","k","v","Save","TechServices","activeTab","setActiveTab","Settings"],"mappings":"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"}