import{r as n,j as e,c8 as H,X as q,U,ce as A,S as Q,L as D,an as V,ao as J,b_ as X,a0 as K,a as B,bW as Z,af as ee,O as se,W as ae,x as te}from"./vendor-M-mhr7Zm.js";import{U as re,s as G}from"./chat-CfZHA2ny.js";import{u as le}from"./edu-YZBmRE0G.js";import{F as I,u as oe,a as ie}from"./FollowButton-aMBc263g.js";import{m as Y,A as ne}from"./vendor-framer-1_AFqeeG.js";import"./config-yUl3KxdD.js";function de({rating:a=0,setRating:l,interactive:d=!1,size:i=16}){const[c,s]=n.useState(0);return e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(o=>e.jsx(H,{size:i,className:`transition-colors ${d?"cursor-pointer":""} ${(d&&c||a)>=o?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"}`,fill:(d&&c||a)>=o?"currentColor":"none",onMouseEnter:()=>d&&s(o),onMouseLeave:()=>d&&s(0),onClick:()=>d&&l(o)},o))})}const m={FOLLOWERS:"followers",FOLLOWING:"following"};function ce({userId:a,userName:l,initialTab:d=m.FOLLOWERS,currentUser:i,currentUserData:c,isFollowing:s,toggleFollow:o,onClose:k,openPublicProfile:v}){const[x,L]=n.useState(d),[b,O]=n.useState([]),[S,F]=n.useState([]),[z,E]=n.useState(!0),[g,p]=n.useState("");n.useEffect(()=>{},[a]),n.useEffect(()=>{},[a]);const j=x===m.FOLLOWERS?b:S,N=g.trim()?j.filter(r=>{var f;return(f=r.displayName)==null?void 0:f.toLowerCase().includes(g.toLowerCase())}):j,w=(i==null?void 0:i.id)||(i==null?void 0:i.uid),h=a===w,C=r=>{v&&(v(r),k())},R=async r=>{o&&await o(r.userId,{displayName:r.displayName,photoURL:r.photoURL,role:r.role})};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[70] p-4",children:e.jsxs(Y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-[#2c2e36] rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:l||"User"}),e.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>L(m.FOLLOWERS),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${x===m.FOLLOWERS?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(U,{size:16}),e.jsx("span",{children:"Followers"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${x===m.FOLLOWERS?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:b.length})]}),e.jsxs("button",{onClick:()=>L(m.FOLLOWING),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${x===m.FOLLOWING?"bg-white dark:bg-gray-700 shadow-sm text-brand-blue":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx(A,{size:16}),e.jsx("span",{children:"Following"}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${x===m.FOLLOWING?"bg-brand-blue/10 text-brand-blue":"bg-gray-200 dark:bg-gray-600"}`,children:S.length})]})]})]}),j.length>5&&e.jsx("div",{className:"px-4 py-3 border-b dark:border-gray-700 shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:g,onChange:r=>p(r.target.value),className:"w-full pl-9 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-blue dark:text-white transition"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:z?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(D,{className:"animate-spin text-brand-blue mb-2",size:28}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."})]}):N.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:x===m.FOLLOWERS?e.jsx(U,{size:24,className:"text-gray-400"}):e.jsx(A,{size:24,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-center",children:g?`No results for "${g}"`:x===m.FOLLOWERS?h?"You don't have any followers yet":"No followers yet":h?"You're not following anyone yet":"Not following anyone yet"}),!g&&x===m.FOLLOWING&&h&&e.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"Find artists and creators to follow in the feed!"})]}):e.jsx(ne,{mode:"popLayout",children:N.map((r,f)=>e.jsx(xe,{user:r,index:f,currentUserId:w,isFollowingUser:s==null?void 0:s(r.userId),onToggleFollow:()=>R(r),onUserClick:()=>C(r.userId)},r.userId))})})]})})}function xe({user:a,index:l,currentUserId:d,isFollowingUser:i,onToggleFollow:c,onUserClick:s}){const o=a.userId===d;return e.jsxs(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-10},transition:{delay:l*.03},className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition border-b dark:border-gray-700/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:s,children:[e.jsx(re,{src:a.photoURL,name:a.displayName,size:"md"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm dark:text-white truncate hover:text-brand-blue transition",children:a.displayName}),a.role&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:a.role})]})]}),!o&&e.jsx(I,{isFollowing:i,onToggle:c,size:"sm",variant:"outline"}),o&&e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full",children:"You"})]})}function me({followersCount:a=0,followingCount:l=0,onFollowersClick:d,onFollowingClick:i,size:c="md"}){const s={sm:"text-xs gap-3",md:"text-sm gap-4",lg:"text-base gap-5"},o={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`flex items-center ${s[c]}`,children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${o[c]}`,children:a.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:a===1?"Follower":"Followers"})]}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"â€¢"}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1 hover:text-brand-blue transition group",children:[e.jsx("span",{className:`font-bold dark:text-white group-hover:text-brand-blue ${o[c]}`,children:l.toLocaleString()}),e.jsx("span",{className:"text-gray-500",children:"Following"})]})]})}function ye({userId:a,currentUser:l,currentUserData:d,onClose:i,onMessage:c}){var $,W,T,M,P;const[s,o]=n.useState(null),[k,v]=n.useState(!0),[x,L]=n.useState(null),[b,O]=n.useState(!1),[S,F]=n.useState(!1),[z,E]=n.useState("followers"),g=(l==null?void 0:l.id)||(l==null?void 0:l.uid),p=g===a,{uploadImage:j}=le(),{isFollowing:N,toggleFollow:w}=oe(g),{stats:h}=ie(a),C=(t="followers")=>{E(t),F(!0)},R=async()=>{{L("Database unavailable."),v(!1);return}};n.useEffect(()=>{a&&R()},[a]);const r=async t=>{const u=t.target.files[0];if(!(!u||!p)){O(!0);try{if(!G)throw new Error("Database unavailable");const y=await j(u,`users/${a}/images/banners`);y&&(await G.from("profiles").update({banner_url:y}).eq("id",a),o(_=>({..._,bannerURL:y,banner_url:y})))}catch(y){console.error("Banner upload failed:",y),alert("Failed to upload banner.")}O(!1)}};if(!a)return null;const f=()=>e.jsxs("div",{className:"p-8 flex flex-col items-center space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-40 w-full bg-gray-200 dark:bg-gray-700 rounded-xl"}),e.jsx("div",{className:"h-28 w-28 bg-gray-300 dark:bg-gray-600 rounded-full -mt-20 border-4 border-white dark:border-dark-card"}),e.jsx("div",{className:"h-6 w-1/2 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 dark:bg-gray-700 rounded"})]});return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1f2128] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-gray-200 dark:border-gray-700",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-30 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full transition-colors backdrop-blur-md",children:e.jsx(q,{size:20})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar relative",children:k?e.jsx(f,{}):x||!s?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 text-gray-500",children:[e.jsx(V,{size:48,className:"text-yellow-500 mb-4 opacity-80"}),e.jsx("h3",{className:"text-xl font-bold dark:text-gray-200 mb-2",children:"Profile Unavailable"}),e.jsx("p",{className:"text-sm text-center max-w-xs",children:x||"This user's profile information could not be retrieved."}),e.jsx("button",{onClick:i,className:"mt-6 px-6 py-2 bg-gray-200 dark:bg-gray-700 rounded-full font-bold text-sm hover:bg-gray-300 transition",children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-48 relative bg-gray-800 group",children:[s.bannerURL?e.jsx("img",{src:s.bannerURL,alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-brand-blue to-purple-600",children:e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})}),p&&e.jsxs("label",{className:"absolute top-4 left-4 cursor-pointer bg-black/40 hover:bg-black/60 text-white px-3 py-1.5 rounded-lg text-xs font-bold backdrop-blur-md transition-all flex items-center gap-2 border border-white/10",children:[b?e.jsx(D,{size:14,className:"animate-spin"}):e.jsx(J,{size:14}),b?"Uploading...":"Edit Cover",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:r,disabled:b})]}),e.jsxs("div",{className:"absolute bottom-4 right-6 flex gap-3 opacity-90",children:[s.rate>0&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(X,{size:12})," $",s.rate,"/hr"]}),s.city&&e.jsxs("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-bold px-3 py-1 rounded-full border border-white/10 flex items-center gap-1 shadow-sm",children:[e.jsx(K,{size:12})," ",s.city,", ",s.state]})]})]}),e.jsxs("div",{className:"px-8 pb-8 relative",children:[e.jsxs("div",{className:"flex justify-between items-end -mt-14 mb-6",children:[e.jsx("div",{className:"relative z-10 group",children:e.jsx("div",{className:"h-32 w-32 rounded-full border-[5px] border-white dark:border-[#1f2128] bg-gray-200 dark:bg-gray-700 overflow-hidden shadow-xl",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400",children:e.jsx(B,{size:48})})})}),l&&!p&&e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(I,{isFollowing:N(a),onToggle:()=>{var t;return w(a,{displayName:`${s.firstName||""} ${s.lastName||""}`.trim(),photoURL:s.photoURL,role:((t=s.accountTypes)==null?void 0:t[0])||"User"})},size:"md"}),e.jsxs("button",{onClick:()=>c(a,`${s.firstName} ${s.lastName}`),className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-2 border dark:border-gray-700",children:[e.jsx(Z,{size:18})," Message"]})]}),p&&e.jsx("div",{className:"mb-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-lg border border-green-200 dark:border-green-800",children:"Public View Mode"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-extrabold dark:text-white flex items-center gap-2 mb-2",children:[s.firstName||"User"," ",s.lastName||"",s.isVerified&&e.jsx(ee,{size:22,className:"text-blue-500 fill-blue-500 text-white"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm text-gray-500 dark:text-gray-400 font-medium mb-4",children:(s.accountTypes||["Creative"]).map((t,u)=>e.jsx("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-xs font-bold",children:t},u))}),e.jsx(me,{followersCount:h.followersCount||0,followingCount:h.followingCount||0,onFollowersClick:()=>C("followers"),onFollowingClick:()=>C("following"),size:"md"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-6 border-y dark:border-gray-800 mb-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Rating"}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-1",children:[e.jsx("span",{className:"text-xl font-bold dark:text-white",children:s.rating||"New"}),s.rating>0&&e.jsx(de,{rating:s.rating,size:14})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Experience"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:[s.yearsExp||"1+"," ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Yrs"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Response"}),e.jsxs("div",{className:"text-xl font-bold dark:text-white",children:["~1 ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Hr"})]})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"Bookings"}),e.jsx("div",{className:"text-xl font-bold dark:text-white",children:s.completedJobs||0})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(B,{size:14})," About"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#252830] p-5 rounded-xl border dark:border-gray-800",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:s.bio||"No biography provided yet."})})]}),((($=s.genres)==null?void 0:$.length)>0||((W=s.instruments)==null?void 0:W.length)>0)&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(se,{size:14})," Sound Profile"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[(T=s.genres)==null?void 0:T.map(t=>e.jsx("span",{className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-bold border border-purple-100 dark:border-purple-800",children:t},t)),(M=s.instruments)==null?void 0:M.map(t=>e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-brand-blue dark:text-blue-300 rounded-lg text-xs font-bold border border-blue-100 dark:border-blue-800",children:t},t))]})]}),((P=s.equipmentList)==null?void 0:P.length)>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(ae,{size:14})," Select Gear"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#252830] rounded-xl p-4 border dark:border-gray-800",children:[e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-400",children:s.equipmentList.slice(0,10).map((t,u)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(te,{size:14,className:"text-brand-blue shrink-0 mt-0.5"}),e.jsx("span",{className:"truncate",children:t})]},u))}),s.equipmentList.length>10&&e.jsx("div",{className:"mt-3 pt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("span",{className:"text-xs text-gray-400 font-medium italic",children:["+",s.equipmentList.length-10," more items available"]})})]})]})]})]})})]}),S&&e.jsx(ce,{userId:a,userName:`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim()||"User",initialTab:z,currentUser:l,currentUserData:d,isFollowing:N,toggleFollow:w,onClose:()=>F(!1),openPublicProfile:t=>{F(!1)}})]})}export{ye as default};
